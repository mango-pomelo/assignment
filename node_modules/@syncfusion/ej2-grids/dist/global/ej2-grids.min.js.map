{"version":3,"file":"ej2-grids.min.js","sources":["../../src/grid/services/aria-service.js","../../src/grid/actions/print.js","../../src/grid/base/util.js","../../src/grid/actions/aggregate.js","../../src/grid/renderer/datepicker-edit-cell.js","../../src/grid/renderer/virtual-freeze-renderer.js","../../src/grid/services/value-formatter.js","../../src/grid/models/column.js","../../src/grid/base/constant.js","../../src/grid/base/enum.js","../../src/grid/actions/data.js","../../src/grid/models/row.js","../../src/grid/models/cell.js","../../src/grid/renderer/cell-merge-renderer.js","../../src/grid/base/string-literals.js","../../src/grid/renderer/row-renderer.js","../../src/grid/services/row-model-generator.js","../../src/grid/services/summary-model-generator.js","../../src/grid/services/group-model-generator.js","../../src/grid/renderer/content-renderer.js","../../src/grid/renderer/header-renderer.js","../../src/grid/renderer/cell-renderer.js","../../src/grid/renderer/header-cell-renderer.js","../../src/grid/renderer/stacked-cell-renderer.js","../../src/grid/renderer/indent-cell-renderer.js","../../src/grid/renderer/caption-cell-renderer.js","../../src/grid/renderer/expand-cell-renderer.js","../../src/grid/renderer/header-indent-renderer.js","../../src/grid/renderer/detail-header-indent-renderer.js","../../src/grid/renderer/detail-expand-cell-renderer.js","../../src/grid/renderer/row-drag-drop-renderer.js","../../src/grid/renderer/row-drag-header-indent-render.js","../../src/grid/renderer/render.js","../../src/grid/services/cell-render-factory.js","../../src/grid/renderer/responsive-dialog-renderer.js","../../src/grid/services/service-locator.js","../../src/grid/services/renderer-factory.js","../../src/grid/services/width-controller.js","../../src/grid/services/focus-strategy.js","../../src/grid/models/page-settings.js","../../src/grid/models/column-chooser-settings.js","../../src/grid/actions/selection.js","../../src/grid/actions/search.js","../../src/grid/actions/show-hide.js","../../src/grid/actions/scroll.js","../../src/grid/models/aggregate.js","../../src/grid/actions/clipboard.js","../../src/grid/base/grid.js","../../src/grid/common/checkbox-filter-base.js","../../src/grid/common/excel-filter-base.js","../../src/grid/actions/sort.js","../../src/pager/numeric-container.js","../../src/pager/pager-message.js","../../src/pager/pager.js","../../src/pager/pager-dropdown.js","../../src/pager/external-message.js","../../src/grid/actions/page.js","../../src/grid/renderer/filter-cell-renderer.js","../../src/grid/renderer/filter-menu-operator.js","../../src/grid/renderer/string-filter-ui.js","../../src/grid/renderer/number-filter-ui.js","../../src/grid/renderer/boolean-filter-ui.js","../../src/grid/renderer/date-filter-ui.js","../../src/grid/renderer/filter-menu-renderer.js","../../src/grid/actions/checkbox-filter.js","../../src/grid/actions/excel-filter.js","../../src/grid/actions/filter.js","../../src/grid/actions/resize.js","../../src/grid/actions/reorder.js","../../src/grid/actions/row-reorder.js","../../src/grid/actions/group.js","../../src/grid/actions/detail-row.js","../../src/grid/actions/toolbar.js","../../src/grid/renderer/footer-renderer.js","../../src/grid/renderer/summary-cell-renderer.js","../../src/grid/services/intersection-observer.js","../../src/grid/services/virtual-row-model-generator.js","../../src/grid/renderer/virtual-content-renderer.js","../../src/grid/actions/virtual-scroll.js","../../src/grid/renderer/inline-edit-renderer.js","../../src/grid/renderer/batch-edit-renderer.js","../../src/grid/renderer/dialog-edit-renderer.js","../../src/grid/renderer/edit-renderer.js","../../src/grid/renderer/edit-cell-base.js","../../src/grid/renderer/boolean-edit-cell.js","../../src/grid/renderer/dropdown-edit-cell.js","../../src/grid/renderer/numeric-edit-cell.js","../../src/grid/renderer/default-edit-cell.js","../../src/grid/actions/normal-edit.js","../../src/grid/actions/inline-edit.js","../../src/grid/actions/batch-edit.js","../../src/grid/actions/dialog-edit.js","../../src/grid/renderer/template-edit-cell.js","../../src/grid/actions/edit.js","../../src/grid/actions/column-chooser.js","../../src/grid/actions/export-helper.js","../../src/grid/actions/excel-export.js","../../src/grid/actions/pdf-export.js","../../src/grid/renderer/command-column-renderer.js","../../src/grid/actions/command-column.js","../../src/grid/actions/context-menu.js","../../src/grid/services/freeze-row-model-generator.js","../../src/grid/renderer/freeze-renderer.js","../../src/grid/renderer/column-freeze-renderer.js","../../src/grid/actions/freeze.js","../../src/grid/actions/column-menu.js","../../src/grid/actions/foreign-key.js","../../src/grid/actions/logger.js","../../src/grid/actions/infinite-scroll.js","../../src/grid/renderer/group-lazy-load-renderer.js","../../src/grid/actions/lazy-load-group.js","../../src/grid/renderer/autocomplete-edit-cell.js","../../src/grid/renderer/combobox-edit-cell.js","../../src/grid/renderer/multiselect-edit-cell.js","../../src/grid/renderer/timepicker-edit-cell.js","../../src/grid/renderer/toggleswitch-edit-cell.js","../../src/grid/renderer/inputmask-edit-cell.js","../../src/global.js"],"sourcesContent":["/**\n * AriaService\n *\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        for (var i = 0; i < props.length; i++) {\n            setStateAndProperties(target, config[props[i]], options[props[i]]);\n        }\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @param {HTMLElement} target - specifies the target\n * @param {string} attribute - specifies the attribute\n * @param {ValueType} value - specifies the value\n * @param {boolean} remove - specifies the boolean for remove\n * @returns {void}\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove && target) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount',\n    rowcount: 'aria-rowcount'\n};\n","import { print as printWindow, createElement, detach, classList, selectAll, extend } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * @returns {string[]} returns the cloned property\n * @hidden\n */\nexport function getCloneProperties() {\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings',\n        'queryCellInfo', 'beforeDataBound'];\n}\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {Scroll} scrollModule - specifies the scroll module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.defered = new Deferred();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.isContentReady(), this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n        this.scrollModule = scrollModule;\n    }\n    Print.prototype.isContentReady = function () {\n        var _this = this;\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n            return this.contentReady;\n        }\n        return function () {\n            _this.defered.promise.then(function () {\n                _this.contentReady();\n            });\n            if (_this.isPrintGrid()) {\n                _this.hierarchyPrint();\n            }\n        };\n    };\n    Print.prototype.hierarchyPrint = function () {\n        this.removeColGroup(this.parent);\n        var printGridObj = window.printGridObj;\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n            printGridObj.printModule.defered.resolve();\n        }\n    };\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](grid/#printmode-string/).\n     *\n     * @returns {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        element.classList.remove('e-gridhover');\n        document.body.appendChild(element);\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n        if (gObj.isFrozenGrid() && !gObj.getFrozenColumns()) {\n            for (var i = 0; i < printGrid.columns.length; i++) {\n                printGrid.columns[i] = extend({}, printGrid.columns[i]);\n                printGrid.columns[i].freeze = undefined;\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.parent.isAngular) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            printGrid.viewContainerRef = this.parent.viewContainerRef;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        printGrid.load = function () { };\n        printGrid.query = gObj.getQuery().clone();\n        window.printGridObj = printGrid;\n        printGrid.isPrinting = true;\n        var modules = printGrid.getInjectedModules();\n        var injectedModues = gObj.getInjectedModules();\n        if (!modules || modules.length !== injectedModues.length) {\n            printGrid.setInjectedModules(injectedModues);\n        }\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\n        this.parent.log('exporting_begin', this.getModuleName());\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid.appendTo(element);\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false,\n                hierarchyPrintMode: gObj.hierarchyPrintMode\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.' + literals.content);\n            var headerDiv = gObj.element.querySelector('.' + literals.gridHeader);\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj);\n            }\n        }\n        // hide horizontal scroll\n        for (var _i = 0, _a = [].slice.call(gObj.element.getElementsByClassName(literals.content)); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.overflowX = 'hidden';\n        }\n        // Hide the waiting popup\n        var waitingPop = [].slice.call(gObj.element.getElementsByClassName('e-spin-show'));\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n            var element = _c[_b];\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\n        }\n        this.printGridElement(gObj);\n        gObj.isPrinting = false;\n        delete window.printGridObj;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n        this.parent.log('exporting_complete', this.getModuleName());\n    };\n    Print.prototype.printGridElement = function (gObj) {\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n        if (gObj.isPrinting) {\n            detach(gObj.element);\n        }\n        this.printWind = printWindow(gObj.element, this.printWind);\n    };\n    Print.prototype.removeColGroup = function (gObj) {\n        var depth = gObj.groupSettings.columns.length;\n        var element = gObj.element;\n        var id = '#' + gObj.element.id;\n        if (!depth) {\n            return;\n        }\n        var groupCaption = selectAll(id + \"captioncell.e-groupcaption\", element);\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = selectAll(\"colgroup\" + id + \"colGroup\", element);\n        var contentColGroups = selectAll('.e-content colgroup', element);\n        this.hideColGroup(colGroups, depth);\n        this.hideColGroup(contentColGroups, depth);\n    };\n    Print.prototype.hideColGroup = function (colGroups, depth) {\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].children[j].style.display = 'none';\n            }\n        }\n    };\n    /**\n     * To destroy the print\n     *\n     * @returns {boolean} returns the isPrintGrid or not\n     * @hidden\n     */\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n    };\n    /**\n     * To destroy the print\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete, events.load]);\n    return Print;\n}());\nexport { Print };\n","import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization, isUndefined, closest } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject, isBlazor, Browser, select, selectAll } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { Print } from '../actions/print';\nimport * as literals from '../base/string-literals';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n *\n * @param  {Object} target - specifies the target\n * @param  {string} checkFor - specifies the checkfors\n * @returns {boolean} returns the boolean\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n *\n * @param  {string} field - specifies the field\n * @param  {Object} data - specifies the data\n * @param  {ColumnModel} column - specifies the column\n * @returns {Object} returns the object\n * @hidden\n */\n// eslint-disable-next-line\nexport function valueAccessor(field, data, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, data);\n}\n/**\n * Defines the method used to apply custom header cell values from external function and display this on each header cell rendered.\n *\n * @param  {string} field - specifies the field\n * @param  {ColumnModel} column - specifies the column\n * @returns {object} headerValueAccessor\n * @hidden\n */\nexport function headerValueAccessor(field, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, column);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n *\n * @param {Function} updateFunction - Function that contains the actual action\n * @param {object} callBack - defines the callback\n * @returns {void}\n * @hidden\n */\n// eslint-disable-next-line\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n * @param {PdfExportProperties | ExcelExportProperties} exportProperties - Defines the export properties\n * @returns {boolean} Returns isExportColumns\n */\nexport function isExportColumns(exportProperties) {\n    return !isNullOrUndefined(exportProperties) &&\n        !isNullOrUndefined(exportProperties.columns) && exportProperties.columns.length > 0;\n}\n/**\n * @param {PdfExportProperties | ExcelExportProperties} exportProperties - Defines the export properties\n * @param {IGrid} gObj - Defines the grid object\n * @returns {void}\n * @hidden\n */\nexport function updateColumnTypeForExportColumns(exportProperties, gObj) {\n    var exportColumns = exportProperties.columns;\n    var gridColumns = gObj.columns;\n    for (var i = 0; i < exportColumns.length; i++) {\n        if (gridColumns.length - 1 >= i) {\n            if (gridColumns[i].columns) {\n                for (var j = 0; j < gridColumns[i].columns.length; j++) {\n                    exportColumns[i].columns[j].type = gridColumns[i].columns[j].type;\n                }\n            }\n            else {\n                exportColumns[i].type = gridColumns[i].type;\n            }\n        }\n    }\n}\n/**\n * @hidden\n * @param {IGrid} grid - Defines the grid\n * @returns {void}\n */\nexport function updatecloneRow(grid) {\n    var nRows = [];\n    var actualRows = grid.vRows;\n    for (var i = 0; i < actualRows.length; i++) {\n        if (actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n        }\n        else if (!actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n            if (!actualRows[i].isExpand && actualRows[i].isCaptionRow) {\n                i += getCollapsedRowsCount(actualRows[i], grid);\n            }\n        }\n    }\n    grid.vcRows = nRows;\n}\nvar count = 0;\n/**\n * @hidden\n * @param {Row<Column>} val - Defines the value\n * @param {IGrid} grid - Defines the grid\n * @returns {number} Returns the collapsed row count\n */\nexport function getCollapsedRowsCount(val, grid) {\n    count = 0;\n    var gSummary = 'gSummary';\n    var total = 'count';\n    var gLen = grid.groupSettings.columns.length;\n    var records = 'records';\n    var items = 'items';\n    var value = val[gSummary];\n    var dataRowCnt = 0;\n    var agrCnt = 'aggregatesCount';\n    if (value === val.data[total]) {\n        if (grid.groupSettings.columns.length && !isNullOrUndefined(val[agrCnt]) && val[agrCnt]) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += (val.indent !== 0 && (value) < 2) ? (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent) * val[agrCnt])) :\n                    (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent - 1) * val[agrCnt])) + val[agrCnt];\n            }\n            else if (grid.groupSettings.columns.length === 1) {\n                count += (val[gSummary] * (gLen - val.indent)) + val[agrCnt];\n            }\n        }\n        else if (grid.groupSettings.columns.length) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += val[gSummary] * (grid.groupSettings.columns.length - val.indent);\n            }\n            else {\n                count += val[gSummary];\n            }\n        }\n        return count;\n    }\n    else {\n        for (var i = 0, len = val.data[items].length; i < len; i++) {\n            var gLevel = val.data[items][i];\n            count += gLevel[items].length + ((gLen !== grid.columns.length) &&\n                !isNullOrUndefined(gLevel[items][records]) ? gLevel[items][records].length : 0);\n            dataRowCnt += (!isNullOrUndefined(gLevel[items][records]) && !isNullOrUndefined(val[agrCnt])) ? gLevel[items][records].length :\n                gLevel[items].length;\n            if (gLevel[items].GroupGuid && gLevel[items].childLevels !== 0) {\n                recursive(gLevel);\n            }\n        }\n        count += val.data[items].length;\n        if (!isNullOrUndefined(val[agrCnt])) {\n            if (val[agrCnt] && count && dataRowCnt !== 0) {\n                count += ((count - dataRowCnt) * val[agrCnt]) + val[agrCnt];\n            }\n        }\n    }\n    return count;\n}\n/**\n * @param {Object[]} row - Defines the row\n * @returns {void}\n * @hidden\n */\nexport function recursive(row) {\n    var items = 'items';\n    var rCount = 'count';\n    for (var j = 0, length_1 = row[items].length; j < length_1; j++) {\n        var nLevel = row[items][j];\n        count += nLevel[rCount];\n        if (nLevel[items].childLevels !== 0) {\n            recursive(nLevel);\n        }\n    }\n}\n/**\n * @param {Object[]} collection - Defines the array\n * @param {Object} predicate - Defines the predicate\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/**\n * @param {Object[]} array - Defines the array\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/**\n * @param {string} template - Defines the template\n * @returns {Function} Returns the function\n * @hidden\n */\nexport function templateCompiler(template) {\n    if (template) {\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/**\n * @param {Element} node - Defines the column\n * @param {Object} customAttributes - Defines the index\n * @returns {void}\n * @hidden\n */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/**\n * @param {Object} copied - Defines the column\n * @param {Object} first - Defines the inndex\n * @param {Object} second - Defines the second object\n * @param {string[]} exclude - Defines the exclude\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    var values = Object.keys(moved);\n    for (var i = 0; i < values.length; i++) {\n        if (exclude && exclude.indexOf(values[i]) !== -1) {\n            delete moved[values[i]];\n        }\n    }\n    return moved;\n}\n/**\n * @param {Column[]} columnModel - Defines the column\n * @param {number} ind - Defines the inndex\n * @returns {number} - Returns the columnindex\n * @hidden\n */\nexport function setColumnIndex(columnModel, ind) {\n    if (ind === void 0) { ind = 0; }\n    for (var i = 0, len = columnModel.length; i < len; i++) {\n        if (columnModel[i].columns) {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n            ind = setColumnIndex(columnModel[i].columns, ind);\n        }\n        else {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n        }\n    }\n    return ind;\n}\n/**\n * @param {Column[] | string[] | ColumnModel[]} columns - Defines the column\n * @param {boolean} autoWidth - Defines the autowidth\n * @param {IGrid} gObj - Defines the class name\n * @returns {Column} - Returns the columns\n * @hidden\n */\nexport function prepareColumns(columns, autoWidth, gObj) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] }, gObj);\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c], gObj);\n            }\n            else {\n                columns[c].columns = prepareColumns(columns[c].columns, null, gObj);\n                column = new Column(columns[c], gObj);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        if (column.type && column.type.toLowerCase() === 'checkbox') {\n            column.allowReordering = false;\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/**\n * @param {HTMLElement} popUp - Defines the popup element\n * @param {MouseEvent | TouchEvent} e - Defines the moouse event\n * @param {string} className - Defines the class name\n * @returns {void}\n * @hidden\n */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    var isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/**\n * @param {HTMLElement} popup - Defines the popup element\n * @param {MouseEvent | TouchEvent} e  - Defines the mouse event\n * @param {Object} targetPosition - Defines the target position\n * @param {number} targetPosition.top - Defines the top position\n * @param {number} targetPosition.left  - Defines the left position\n * @param {number} targetPosition.right  - Defines the right position\n * @param {number} left - Defines the left position\n * @returns {number} Returns the popup left position\n * @hidden\n */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/**\n * @param {Object} obj - Defines the object\n * @returns {Object} Returns the Properties\n * @hidden\n */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/**\n * @param {Element} elem - Defines the element\n * @param {string} selector - Defines the string selector\n * @param {boolean} isID - Defines the isID\n * @returns {Element} Returns the element\n * @hidden\n */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/**\n * @param {Element} element - Defines the element\n * @param {Element} elements - Defines the element\n * @returns {number} Returns the element index\n * @hidden\n */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/**\n * @param {Object} value - Defines the value\n * @param {Object} collection - defines the collection\n * @returns {number} Returns the array\n * @hidden\n */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * @param {Object} collection - Defines the collection\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/**\n * @param {Element} target - Defines the target element\n * @param {string} selector - Defines the selector\n * @returns {void}\n * @hidden\n */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/**\n * @param {MouseEvent | TouchEvent} e Defines the mouse event\n * @returns {IPosition} Returns the position\n * @hidden\n */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/**\n * @param {string} prefix - Defines the prefix string\n * @returns {string} Returns the uid\n * @hidden\n */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/**\n * @param {Element | DocumentFragment} elem - Defines the element\n * @param {Element[] | NodeList} children - Defines the Element\n * @returns {Element} Returns the element\n * @hidden\n */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/**\n * @param {Element} elem - Defines the element\n * @param {string} selector - Defines the selector\n * @param {boolean} isID - Defines isID\n * @returns {Element} Return the element\n * @hidden\n */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/**\n * @param {AggregateType | string} type - Defines the type\n * @param {Object} data - Defines the data\n * @param {AggregateColumnModel} column - Defines the column\n * @param {Object} context - Defines the context\n * @returns {Object} Returns the calculated aggragate\n * @hidden\n */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden\n * @returns {number} - Returns the scrollbarwidth\n */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/**\n * @param {HTMLElement} element - Defines the element\n * @returns {number} Returns the roww height\n * @hidden\n */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: literals.table, styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nvar actualRowHeight;\n/**\n * @param {HTMLElement} element - Defines the HTMl element\n * @returns {number} Returns the row height\n * @hidden\n */\nexport function getActualRowHeight(element) {\n    if (actualRowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: literals.table, styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('tr').getBoundingClientRect();\n    element.removeChild(table);\n    return rect.height;\n}\n/**\n * @param {string} field - Defines the field\n * @returns {boolean} - Returns is complex field\n * @hidden\n */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/**\n * @param {string} field - Defines the field\n * @returns {string} - Returns the get complex field ID\n * @hidden\n */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '___');\n}\n/**\n * @param {string} field - Defines the field\n * @returns {string} - Returns the set complex field ID\n * @hidden\n */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/___/g, '.');\n}\n/**\n * @param {Column} col - Defines the column\n * @param {string} type - Defines the type\n * @param {Element} elem - Defines th element\n * @returns {boolean} Returns is Editable\n * @hidden\n */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, literals.row);\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/**\n * @param {IGrid} inst - Defines the IGrid\n * @returns {boolean} Returns is action prevent in boolean\n * @hidden\n */\nexport function isActionPrevent(inst) {\n    var dlg = select('#' + inst.element.id + 'EditConfirm', inst.element);\n    return inst.editSettings.mode === 'Batch' &&\n        (selectAll('.e-updatedtd', inst.element).length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/**\n * @param {any} elem - Defines the element\n * @param {boolean} action - Defines the boolean for action\n * @returns {void}\n * @hidden\n */\n// eslint-disable-next-line\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        if (action) {\n            elem[i].classList.add(clName);\n        }\n        else {\n            elem[i].classList.remove(clName);\n        }\n    }\n}\n/**\n * @param {ServiceLocator} serviceLocator - Defines the service locator\n * @param {Column} column  - Defines the column\n * @param {boolean} isServerRendered - Defines is server rendered or not\n * @returns {void}\n * @hidden\n */\nexport function setFormatter(serviceLocator, column, isServerRendered) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    var format = 'format';\n    var args;\n    if (column.type === 'date' || column.type === 'datetime') {\n        args = { type: column.type, skeleton: column.format };\n        if (isBlazor() && isServerRendered) {\n            var isServer = 'isServerRendered';\n            args[isServer] = isServerRendered;\n        }\n        if ((typeof (column.format) === 'string') && column.format !== 'yMd') {\n            args[format] = column.format;\n        }\n    }\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/**\n * @param {Element} cells - Defines the cell element\n * @param {boolean} add - Defines the add\n * @param {string} args - Defines the args\n * @returns {void}\n * @hidden\n */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/**\n * @param {string} result - Defines th string\n * @returns {string} Returns the distinct staing values\n * @hidden\n */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/**\n * @param {Element} target - Defines the target\n * @param {Dialog} dialogObj - Defines the dialog\n * @returns {void}\n * @hidden\n */\nexport function getFilterMenuPostion(target, dialogObj) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n    dialogObj.element.style.display = elementVisible;\n    dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n    var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n    if (leftPos < 1) {\n        dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n    }\n    else {\n        dialogObj.element.style.left = leftPos + -4 + 'px';\n    }\n}\n/**\n * @param {Object} args - Defines the args\n * @param {Popup} args.popup - Defines the args for popup\n * @param {Dialog} dialogObj - Defines the dialog obj\n * @returns {void}\n * @hidden\n */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/**\n * @param {Element} elem - Defines the element\n * @returns {void}\n * @hidden\n */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    var input = span.previousSibling;\n    if (span.classList.contains('e-check')) {\n        input.checked = false;\n        classList(span, ['e-uncheck'], ['e-check']);\n    }\n    else {\n        input.checked = true;\n        classList(span, ['e-check'], ['e-uncheck']);\n    }\n}\n/**\n * @param {HTMLInputElement} elem - Defines the element\n * @param {boolean} checked - Defines is checked\n * @returns {void}\n * @hidden\n */\nexport function setChecked(elem, checked) {\n    elem.checked = checked;\n}\n/**\n * @param {string} uid - Defines the string\n * @param {Element} elem - Defines the Element\n * @param {string} className - Defines the classname\n * @returns {Element} Returns the box wrap\n * @hidden\n */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/**\n * @param {Element} elem - Defines the element\n * @param {boolean} checked - Defines is checked\n * @returns {void}\n * @hidden\n */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n *\n * @param {IRow<Column>} row - Grid Row model object.\n * @param {Column[]} columns - Foreign columns array.\n * @param {Object} data - Updated Row data.\n * @returns {void}\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    for (var i = 0; i < columns.length; i++) {\n        setValue(columns[i].field, getForeignData(columns[i], data), row.foreignKeyData);\n    }\n    var cells = row.cells;\n    for (var i = 0; i < cells.length; i++) {\n        if (cells[i].isForeignKey) {\n            setValue('foreignKeyData', getValue(cells[i].column.field, row.foreignKeyData), cells[i]);\n        }\n    }\n}\n/**\n * Get the foreign data for the corresponding cell value.\n *\n * @param {Column} column - Foreign Key column\n * @param {Object} data - Row data.\n * @param {string | number} lValue - cell value.\n * @param {Object} foreignKeyData - foreign data source.\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (!isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n *\n * @param {string} foreignKeyValue - Defines ForeignKeyValue.\n * @param {Column[]} columns - Array of column object.\n * @returns {Column} Returns the element\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @param {PredicateModel} filterObject - Defines the filterObject\n * @param {string} type - Defines the type\n * @returns {Predicate} Returns the Predicate\n * @hidden\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    if (isNullOrUndefined(filterObject.value)) {\n        datePredicate = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        return datePredicate;\n    }\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @param {Element} ele - Defines the element\n * @param {number} frzCols - Defines the frozen columns\n * @param {IGrid} gObj - Defines the IGrid\n * @returns {Element} Returns the element\n * @hidden\n */\nexport function renderMovable(ele, frzCols, gObj) {\n    frzCols = frzCols && gObj && gObj.isRowDragable() ? frzCols + 1 : frzCols;\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n/**\n * @param {IGrid} grid - Defines the IGrid\n * @returns {boolean} Returns true if group adaptive is true\n * @hidden\n */\nexport function isGroupAdaptive(grid) {\n    return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive;\n}\n/**\n * @param {string} field - Defines the Field\n * @param {Object} object - Defines the objec\n * @returns {any} Returns the object\n * @hidden\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\n/**\n * @param {string | Object} format - defines the format\n * @param {string} colType - Defines the coltype\n * @returns {string} Returns the custom Data format\n * @hidden\n */\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\n/**\n * @param {IGrid} gObj - Defines the IGrid\n * @param {HierarchyGridPrintMode} hierarchyPrintMode - Defines the hierarchyPrintMode\n * @returns {Object} Returns the object\n * @hidden\n */\nexport function getExpandedState(gObj, hierarchyPrintMode) {\n    var rows = gObj.getRowsObject();\n    var obj = {};\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.isExpand && !row.isDetailRow) {\n            var index = gObj.allowPaging && gObj.printMode === 'AllPages' ? row.index +\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : row.index;\n            obj[index] = {};\n            obj[index].isExpand = true;\n            obj[index].gridModel = getPrintGridModel(row.childGrid, hierarchyPrintMode);\n            obj[index].gridModel.query = gObj.childGrid.query;\n        }\n    }\n    return obj;\n}\n/**\n * @param {IGrid} gObj - Defines the grid objct\n * @param {HierarchyGridPrintMode} hierarchyPrintMode - Defines the hierarchyPrintMode\n * @returns {IGrid} Returns the IGrid\n * @hidden\n */\nexport function getPrintGridModel(gObj, hierarchyPrintMode) {\n    if (hierarchyPrintMode === void 0) { hierarchyPrintMode = 'Expanded'; }\n    var printGridModel = {};\n    if (!gObj) {\n        return printGridModel;\n    }\n    var isFrozen = gObj.isFrozenGrid() && !gObj.getFrozenColumns();\n    for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key === 'columns') {\n            printGridModel[key] = getActualPropFromColl(isFrozen ? gObj.getColumns() : gObj[key]);\n        }\n        else if (key === 'allowPaging') {\n            printGridModel[key] = gObj.printMode === 'CurrentPage';\n        }\n        else {\n            printGridModel[key] = getActualProperties(gObj[key]);\n        }\n    }\n    printGridModel['enableHover'] = false;\n    if (gObj.childGrid && hierarchyPrintMode !== 'None') {\n        printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);\n    }\n    return printGridModel;\n}\n/**\n * @param {Object} copied - Defines the copied object\n * @param {Object} first - Defines the first object\n * @param {Object} second - Defines the second object\n * @param {boolean} deep - Defines the deep\n * @returns {Object} Returns the extended object\n * @hidden\n */\nexport function extendObjWithFn(copied, first, second, deep) {\n    var res = copied || {};\n    var len = arguments.length;\n    if (deep) {\n        len = len - 1;\n    }\n    for (var i = 1; i < len; i++) {\n        // eslint-disable-next-line prefer-rest-params\n        if (!arguments[i]) {\n            continue;\n        }\n        // eslint-disable-next-line prefer-rest-params\n        var obj1 = arguments[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);\n        for (var i_1 = 0; i_1 < keys.length; i_1++) {\n            var source = res[keys[i_1]];\n            var cpy = obj1[keys[i_1]];\n            var cln = void 0;\n            if (deep && (isObject(cpy) || Array.isArray(cpy))) {\n                if (isObject(cpy)) {\n                    cln = source ? source : {};\n                    res[keys[i_1]] = baseExtend({}, cln, cpy, deep);\n                }\n                else {\n                    cln = source ? source : [];\n                    res[keys[i_1]] = baseExtend([], cln, cpy, deep);\n                }\n            }\n            else {\n                res[keys[i_1]] = cpy;\n            }\n        }\n    }\n    return res;\n}\n/**\n * @param {Object} obj - Defines the obj\n * @returns {string[]} Returns the string\n * @hidden\n */\nfunction getPrototypesOfObj(obj) {\n    var keys = [];\n    while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {\n        keys = keys.concat(Object.keys(Object.getPrototypeOf(obj)));\n        obj = Object.getPrototypeOf(obj);\n    }\n    return keys;\n}\n/**\n * @param {Column[]} column - Defines the Column\n * @returns {number} Returns the column Depth\n * @hidden\n */\nexport function measureColumnDepth(column) {\n    var max = 0;\n    for (var i = 0; i < column.length; i++) {\n        var depth = checkDepth(column[i], 0);\n        if (max < depth) {\n            max = depth;\n        }\n    }\n    return max + 1;\n}\n/**\n * @param {Column} col - Defines the Column\n * @param {number} index - Defines the index\n * @returns {number} Returns the depth\n * @hidden\n */\nexport function checkDepth(col, index) {\n    var max = index;\n    var indices = [];\n    if (col.columns) {\n        index++;\n        for (var i = 0; i < col.columns.length; i++) {\n            indices[i] = checkDepth(col.columns[i], index);\n        }\n        for (var j = 0; j < indices.length; j++) {\n            if (max < indices[j]) {\n                max = indices[j];\n            }\n        }\n        index = max;\n    }\n    return index;\n}\n/**\n * @param {IGrid} gObj - Defines the IGrid\n * @param {PredicateModel[]} filteredCols - Defines the PredicateModel\n * @returns {void}\n * @hidden\n */\nexport function refreshFilteredColsUid(gObj, filteredCols) {\n    for (var i = 0; i < filteredCols.length; i++) {\n        var uid_1 = gObj.enableColumnVirtualization ? getColumnModelByFieldName(gObj, filteredCols[i].field).uid\n            : gObj.getColumnByField(filteredCols[i].field).uid;\n        filteredCols[i].uid = filteredCols[i].isForeignKey ?\n            getColumnByForeignKeyValue(filteredCols[i].field, gObj.getForeignKeyColumns()).uid\n            : uid_1;\n    }\n}\n/** @hidden */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var Global;\n(function (Global) {\n    // eslint-disable-next-line prefer-const\n    Global.timer = null;\n})(Global || (Global = {}));\n/**\n * @param {Element} element - Defines the element\n * @returns {Object} Returns the transform values\n * @hidden\n */\nexport function getTransformValues(element) {\n    var style = document.defaultView.getComputedStyle(element, null);\n    var transformV = style.getPropertyValue('transform');\n    var replacedTv = transformV.replace(/,/g, '');\n    var translateX = parseFloat((replacedTv).split(' ')[4]);\n    var translateY = parseFloat((replacedTv).split(' ')[5]);\n    return { width: translateX, height: translateY };\n}\n/**\n * @param {Element} rootElement - Defines the root Element\n * @param {Element} element - Defines the element\n * @returns {void}\n * @hidden\n */\nexport function applyBiggerTheme(rootElement, element) {\n    if (rootElement.classList.contains('e-bigger')) {\n        element.classList.add('e-bigger');\n    }\n}\n/**\n * @param {HTMLElement} mTD - Defines the movable TD\n * @param {HTMLElement} fTD  - Defines the Frozen TD\n * @returns {void}\n * @hidden\n */\nexport function alignFrozenEditForm(mTD, fTD) {\n    if (mTD && fTD) {\n        var mHeight = closest(mTD, '.' + literals.row).getBoundingClientRect().height;\n        var fHeight = closest(fTD, '.' + literals.row).getBoundingClientRect().height;\n        if (mHeight > fHeight) {\n            fTD.style.height = mHeight + 'px';\n        }\n        else {\n            mTD.style.height = fHeight + 'px';\n        }\n    }\n}\n/**\n * @param {Element} row - Defines row element\n * @param {IGrid} gridObj - Defines grid object\n * @returns {boolean} Returns isRowEnteredInGrid\n * @hidden\n */\nexport function ensureLastRow(row, gridObj) {\n    var cntOffset = gridObj.getContent().firstElementChild.offsetHeight;\n    return row && row.getBoundingClientRect().top > cntOffset;\n}\n/**\n * @param {Element} row - Defines row element\n * @param {number} rowTop - Defines row top number\n * @returns {boolean} Returns first row is true\n * @hidden\n */\nexport function ensureFirstRow(row, rowTop) {\n    return row && row.getBoundingClientRect().top < rowTop;\n}\n/**\n * @param {number} index - Defines index\n * @param {IGrid} gObj - Defines grid object\n * @returns {boolean} Returns isRowEnteredInGrid\n * @hidden\n */\nexport function isRowEnteredInGrid(index, gObj) {\n    var rowHeight = gObj.getRowHeight();\n    var startIndex = gObj.getContent().firstElementChild.scrollTop / rowHeight;\n    var endIndex = startIndex + (gObj.getContent().firstElementChild.offsetHeight / rowHeight);\n    return index < endIndex && index > startIndex;\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @param {Object} data - Defines the query\n * @returns {number} Returns the edited data index\n * @hidden\n */\nexport function getEditedDataIndex(gObj, data) {\n    var keyField = gObj.getPrimaryKeyFieldNames()[0];\n    var dataIndex;\n    gObj.getCurrentViewRecords().filter(function (e, index) {\n        if (e[keyField] === data[keyField]) {\n            dataIndex = index;\n        }\n    });\n    return dataIndex;\n}\n/**\n * @param {Object} args - Defines the argument\n * @param {Query} query - Defines the query\n * @returns {FilterStateObj} Returns the filter state object\n * @hidden\n */\nexport function eventPromise(args, query) {\n    var state = getStateEventArgument(query);\n    var def = new Deferred();\n    state.dataSource = def.resolve;\n    state.action = args;\n    return { state: state, deffered: def };\n}\n/**\n * @param {Query} query - Defines the query\n * @returns {Object} Returns the state event argument\n * @hidden\n */\nexport function getStateEventArgument(query) {\n    var adaptr = new UrlAdaptor();\n    var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n    var state = adaptr.processQuery(dm, query);\n    var data = JSON.parse(state.data);\n    return data;\n}\n/**\n * @param {IGrid} gObj - Defines the Igrid\n * @returns {boolean} Returns the ispercentageWidth\n * @hidden\n */\nexport function ispercentageWidth(gObj) {\n    var columns = gObj.getVisibleColumns();\n    var percentageCol = 0;\n    var undefinedWidthCol = 0;\n    for (var i = 0; i < columns.length; i++) {\n        if (isUndefined(columns[i].width)) {\n            undefinedWidthCol++;\n        }\n        else if (columns[i].width.toString().indexOf('%') !== -1) {\n            percentageCol++;\n        }\n    }\n    return (gObj.width === 'auto' || typeof (gObj.width) === 'string' && gObj.width.indexOf('%') !== -1) && Browser.info.name !== 'chrome'\n        && !gObj.groupSettings.showGroupedColumn && gObj.groupSettings.columns.length\n        && percentageCol && !undefinedWidthCol;\n}\n/**\n * @param {IGrid} gObj - Defines the IGrid\n * @param {Row<Column>[]} rows - Defines the row\n * @param {HTMLTableRowElement[]} rowElms - Row elements\n * @param {number} index - Row index\n * @returns {void}\n * @hidden\n */\nexport function resetRowIndex(gObj, rows, rowElms, index) {\n    var startIndex = index ? index : 0;\n    for (var i = 0; i < rows.length; i++) {\n        if (rows[i].isDataRow) {\n            rows[i].index = startIndex;\n            rows[i].isAltRow = gObj.enableAltRow ? startIndex % 2 !== 0 : false;\n            rowElms[i].setAttribute(literals.ariaRowIndex, startIndex.toString());\n            if (rows[i].isAltRow) {\n                rowElms[i].classList.add('e-altrow');\n            }\n            else {\n                rowElms[i].classList.remove('e-altrow');\n            }\n            for (var j = 0; j < rowElms[i].cells.length; j++) {\n                rowElms[i].cells[j].setAttribute('index', startIndex.toString());\n            }\n            startIndex++;\n        }\n    }\n    if (!rows.length) {\n        gObj.renderModule.emptyRow(true);\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the IGrid\n * @param {Row<Column>[]} rows - Defines the row\n * @param {number} index - Defines the index\n * @returns {void}\n * @hidden\n */\nexport function resetRowObjectIndex(gObj, rows, index) {\n    var startIndex = index ? index : 0;\n    for (var i = 0; i < rows.length; i++) {\n        rows[i].index = startIndex;\n        startIndex++;\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @param {Object} changes - Defines the changes\n * @param {string} type - Defines the type\n * @param {string} keyField - Defines the keyfield\n * @returns {void}\n * @hidden\n */\nexport function compareChanges(gObj, changes, type, keyField) {\n    var newArray = gObj.dataToBeUpdated[type].concat(changes[type]).reduce(function (r, o) {\n        r[o[keyField]] = r[o[keyField]] === undefined ? o : Object.assign(r[o[keyField]], o);\n        return r;\n    }, {});\n    gObj.dataToBeUpdated[type] = Object.keys(newArray).map(function (k) { return newArray[k]; });\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @returns {void}\n * @hidden\n */\nexport function setRowElements(gObj) {\n    if (gObj.isFrozenGrid()) {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-movableheader .e-row, .e-movablecontent .e-row'));\n        var cls = gObj.getFrozenMode() === literals.leftRight ? '.e-frozen-left-header .e-row, .e-frozen-left-content .e-row'\n            : '.e-frozenheader .e-row, .e-frozencontent .e-row';\n        (gObj).contentModule.freezeRowElements =\n            [].slice.call(gObj.element.querySelectorAll(cls));\n        if (gObj.getFrozenMode() === literals.leftRight) {\n            gObj.contentModule.frozenRightRowElements =\n                [].slice.call(gObj.element.querySelectorAll('.e-frozen-right-header .e-row, .e-frozen-right-content .e-row'));\n        }\n    }\n    else {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-row:not(.e-addedrow)'));\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @param {Cell<Column>} cells - Defines the callback function\n * @param {freezeTable} tableName - Defines the row\n * @returns {Cell<Column>[]} Returns the cell\n * @hidden\n */\nexport function splitFrozenRowObjectCells(gObj, cells, tableName) {\n    var left = gObj.getFrozenLeftCount();\n    var movable = gObj.getMovableColumnsCount();\n    var right = gObj.getFrozenRightColumnsCount();\n    var frozenMode = gObj.getFrozenMode();\n    var drag = gObj.isRowDragable() ? 1 : 0;\n    var rightIndex = frozenMode === 'Right' ? left + movable : left + movable + drag;\n    var mvblIndex = frozenMode === 'Right' ? left : left + drag;\n    var mvblEndIdx = frozenMode === 'Right' ? cells.length - right - drag\n        : right ? cells.length - right : cells.length;\n    if (tableName === literals.frozenLeft) {\n        cells = cells.slice(0, left ? left + drag : cells.length);\n    }\n    else if (tableName === literals.frozenRight) {\n        cells = cells.slice(rightIndex, cells.length);\n    }\n    else if (tableName === 'movable') {\n        cells = cells.slice(mvblIndex, mvblEndIdx);\n    }\n    return cells;\n}\n// eslint-disable-next-line\n/** @hidden */\nexport function gridActionHandler(gObj, callBack, rows, force, rowObj) {\n    if (rows[0].length || force) {\n        if (rowObj) {\n            callBack(literals.frozenLeft, rows[0], rowObj[0]);\n        }\n        else {\n            callBack(literals.frozenLeft, rows[0]);\n        }\n    }\n    if (gObj.isFrozenGrid() && (rows[1].length || force)) {\n        if (rowObj) {\n            callBack('movable', rows[1], rowObj[1]);\n        }\n        else {\n            callBack('movable', rows[1]);\n        }\n    }\n    if ((gObj.getFrozenMode() === literals.leftRight || gObj.getFrozenMode() === 'Right') && (rows[2].length || force)) {\n        if (rowObj) {\n            callBack(literals.frozenRight, rows[2], rowObj[2]);\n        }\n        else {\n            callBack(literals.frozenRight, rows[2]);\n        }\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the grid\n * @returns {Row<Column>} Returns the row\n * @hidden\n */\nexport function getGridRowObjects(gObj) {\n    return [gObj.getFrozenMode() !== 'Right' ? gObj.getRowsObject() : [], gObj.getMovableRowsObject(), gObj.getFrozenRightRowsObject()];\n}\n/**\n * @param {IGrid} gObj - Defines the grid\n * @returns {Element} Returns the element\n * @hidden\n */\nexport function getGridRowElements(gObj) {\n    return [\n        gObj.getFrozenMode() !== 'Right' ? gObj.getAllDataRows(true) : [],\n        gObj.getAllMovableDataRows(true), gObj.getAllFrozenRightDataRows(true)\n    ];\n}\n/**\n * @param {Element} row - Defines the row\n * @param {number} start - Defines the start index\n * @param {number} end - Defines the end index\n * @returns {void}\n * @hidden\n */\nexport function sliceElements(row, start, end) {\n    var cells = row.children;\n    var len = cells.length;\n    var k = 0;\n    for (var i = 0; i < len; i++, k++) {\n        if (i >= start && i < end) {\n            continue;\n        }\n        row.removeChild(row.children[k]);\n        k--;\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the grid Object\n * @param {Column} col - Defines the column\n * @param {number} rowIndex - Defines the rowindex\n * @returns {Element} Returns the element\n * @hidden\n */\nexport function getCellsByTableName(gObj, col, rowIndex) {\n    if (col.getFreezeTableName() === 'movable') {\n        return [].slice.call(gObj.getMovableDataRows()[rowIndex].getElementsByClassName(literals.rowCell));\n    }\n    else if (col.getFreezeTableName() === literals.frozenRight) {\n        return [].slice.call(gObj.getFrozenRightDataRows()[rowIndex].getElementsByClassName(literals.rowCell));\n    }\n    else {\n        return [].slice.call(gObj.getDataRows()[rowIndex].getElementsByClassName(literals.rowCell));\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the column\n * @param {Column} col - Defines the index\n * @param {number} rowIndex - Defines the rules\n * @param {number} index - Defines the movable column rules\n * @returns {Element} Returns the Element\n * @hidden\n */\nexport function getCellByColAndRowIndex(gObj, col, rowIndex, index) {\n    var left = gObj.getFrozenLeftCount();\n    var movable = gObj.getMovableColumnsCount();\n    index = col.getFreezeTableName() === 'movable' ? index - left : col.getFreezeTableName() === literals.frozenRight\n        ? index - (left + movable) : index;\n    return getCellsByTableName(gObj, col, rowIndex)[index];\n}\n/**\n * @param {Column} col - Defines the column\n * @param {number} index - Defines the index\n * @param {Object} rules - Defines the rules\n * @param {Object} mRules - Defines the movable column rules\n * @param {Object} frRules - Defines the Frozen rules\n * @param {number} len - Defines the length\n * @param {boolean} isCustom - Defines custom form validation\n * @returns {void}\n * @hidden\n */\nexport function setValidationRuels(col, index, rules, mRules, frRules, len, isCustom) {\n    if (isCustom) {\n        rules[getComplexFieldID(col.field)] = col.validationRules;\n    }\n    else {\n        if (col.getFreezeTableName() === literals.frozenLeft\n            || (!index && col.getFreezeTableName() === literals.frozenRight) || len === 1) {\n            rules[getComplexFieldID(col.field)] = col.validationRules;\n        }\n        else if (col.getFreezeTableName() === 'movable' || !col.getFreezeTableName()) {\n            mRules[getComplexFieldID(col.field)] = col.validationRules;\n        }\n        else if (col.getFreezeTableName() === literals.frozenRight) {\n            frRules[getComplexFieldID(col.field)] = col.validationRules;\n        }\n    }\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @returns {Element} Returns the Element\n * @hidden\n */\nexport function getMovableTbody(gObj) {\n    var tbody;\n    if (gObj.isFrozenGrid()) {\n        tbody = gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top' ? gObj.getMovableHeaderTbody()\n            : gObj.getMovableContentTbody();\n    }\n    return tbody;\n}\n/**\n * @param {IGrid} gObj - Defines the grid object\n * @returns {Element} Returns the Element\n * @hidden\n */\nexport function getFrozenRightTbody(gObj) {\n    var tbody;\n    if (gObj.getFrozenMode() === literals.leftRight) {\n        tbody = gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top' ? gObj.getFrozenRightHeaderTbody()\n            : gObj.getFrozenRightContentTbody();\n    }\n    return tbody;\n}\n/**\n * @param {Element} tbody - Table body\n * @param {Element} mTbody - Movanle table body\n * @param {Element} frTbody - Frozen right table body\n * @param {Element[]} tr - Table rows\n * @param {Element[]} mTr - Movable table rows\n * @param {Element[]} frTr - Frozen right table rows\n * @param {Function} callBack - Callback function\n * @returns {void}\n * @hidden\n */\nexport function setRowsInTbody(tbody, mTbody, frTbody, tr, mTr, frTr, callBack) {\n    if (tbody && tr) {\n        callBack(tbody, tr);\n    }\n    if (mTbody && mTr) {\n        callBack(mTbody, mTr);\n    }\n    if (frTbody && frTr) {\n        callBack(frTbody, frTr);\n    }\n}\n/**\n * @param {string} numberFormat - Format\n * @param {string} type - Value type\n * @param {boolean} isExcel - Boolean property\n * @returns {string} returns formated value\n * @hidden\n */\nexport function getNumberFormat(numberFormat, type, isExcel) {\n    var format;\n    var intl = new Internationalization();\n    if (type === 'number') {\n        try {\n            format = intl.getNumberPattern({ format: numberFormat, currency: this.currency, useGrouping: true }, true);\n        }\n        catch (error) {\n            format = numberFormat;\n        }\n    }\n    else if (type === 'date' || type === 'time' || type === 'datetime') {\n        try {\n            format = intl.getDatePattern({ skeleton: numberFormat, type: type }, isExcel);\n            if (isNullOrUndefined(format)) {\n                // eslint-disable-next-line\n                throw 'error';\n            }\n        }\n        catch (error) {\n            try {\n                format = intl.getDatePattern({ format: numberFormat, type: type }, isExcel);\n            }\n            catch (error) {\n                format = numberFormat;\n            }\n        }\n    }\n    else {\n        format = numberFormat;\n    }\n    if (type !== 'number') {\n        var patternRegex = /G|H|c|'| a|yy|y|EEEE|E/g;\n        var mtch_1 = { 'G': '', 'H': 'h', 'c': 'd', '\\'': '\"', ' a': ' AM/PM', 'yy': 'yy', 'y': 'yyyy', 'EEEE': 'dddd', 'E': 'ddd' };\n        format = format.replace(patternRegex, function (pattern) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return mtch_1[pattern];\n        });\n    }\n    return format;\n}\n/**\n * @param {IGrid} gObj - Grid instance\n * @returns {void}\n * @hidden\n */\nexport function addBiggerDialog(gObj) {\n    if (gObj.enableAdaptiveUI) {\n        var dialogs = document.getElementsByClassName('e-responsive-dialog');\n        for (var i = 0; i < dialogs.length; i++) {\n            dialogs[i].classList.add('e-bigger');\n        }\n    }\n}\n/**\n * @param {string} value - specifies the trr\n * @param {Object} mapObject - specifies the idx\n * @returns {Object | string} returns object or string\n * @hidden\n */\nexport function performComplexDataOperation(value, mapObject) {\n    var returnObj;\n    var length = value.split('.').length;\n    var splits = value.split('.');\n    var duplicateMap = mapObject;\n    for (var i = 0; i < length; i++) {\n        returnObj = duplicateMap[splits[i]];\n        duplicateMap = returnObj;\n    }\n    return returnObj;\n}\n/**\n * @param {Object} tr - specifies the trr\n * @param {number} idx - specifies the idx\n * @param {string} displayVal - specifies the displayval\n * @param {Row<Column>} rows - specifies the rows\n * @param {IGrid} parent - Grid instance\n * @param {boolean} isContent - check for content renderer\n * @returns {void}\n * @hidden\n */\nexport function setDisplayValue(tr, idx, displayVal, rows, parent, isContent) {\n    var trs = Object.keys(tr);\n    for (var i = 0; i < trs.length; i++) {\n        var td = tr[trs[i]].querySelectorAll('td.e-rowcell')[idx];\n        if (tr[trs[i]].querySelectorAll('td.e-rowcell').length && td) {\n            setStyleAttribute(tr[trs[i]].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n            if (tr[trs[i]].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                removeClass([tr[trs[i]].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n            }\n            if (isContent && parent.isRowDragable()) {\n                var index = parent.getFrozenColumns() ? idx : idx + 1;\n                rows[trs[i]].cells[index].visible = displayVal === '' ? true : false;\n            }\n            else {\n                rows[trs[i]].cells[idx].visible = displayVal === '' ? true : false;\n            }\n        }\n    }\n}\n// eslint-disable-next-line\n/** @hidden */\nexport function addRemoveEventListener(parent, evt, isOn, module) {\n    for (var _i = 0, evt_1 = evt; _i < evt_1.length; _i++) {\n        var inst = evt_1[_i];\n        if (isOn) {\n            parent.on(inst.event, inst.handler, module);\n        }\n        else {\n            parent.off(inst.event, inst.handler);\n        }\n    }\n}\n// eslint-disable-next-line\n/** @hidden */\nexport function createEditElement(parent, column, classNames, attr) {\n    var complexFieldName = getComplexFieldID(column.field);\n    attr = Object.assign(attr, {\n        id: parent.element.id + complexFieldName,\n        name: complexFieldName, 'e-mappinguid': column.uid\n    });\n    return parent.createElement('input', {\n        className: classNames, attrs: attr\n    });\n}\n/**\n     * @param {string} uid - Defines column's uid\n     * @returns {Column} returns column model\n     * @hidden\n     */\nexport function getColumnModelByUid(gObj, uid) {\n    var column;\n    for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n        var col = _a[_i];\n        if (col.uid === uid) {\n            column = col;\n            break;\n        }\n    }\n    return column;\n}\n/**\n * @param {string} field - Defines column's uid\n * @returns {Column} returns column model\n * @hidden\n */\nexport function getColumnModelByFieldName(gObj, field) {\n    var column;\n    for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n        var col = _a[_i];\n        if (col.field === field) {\n            column = col;\n            break;\n        }\n    }\n    return column;\n}\n","import { remove, extend, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        var type = [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary];\n        for (var i = 0; i < type.length; i++) {\n            cellFac.addCellRenderer(type[i], instance);\n        }\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        var footerContent = this.footerRenderer.getPanel();\n        if (this.parent.element.scrollHeight >= this.parent.getHeight(this.parent.height)\n            && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var cFormat = getValue('customFormat', column);\n            if (!isNullOrUndefined(cFormat)) {\n                column.setPropertiesSilent({ format: cFormat });\n            }\n            if (typeof (column.format) === 'object') {\n                var valueFormatter = new ValueFormatter();\n                column.setFormatter(valueFormatter.getFormatFunction(extend({}, column.format)));\n            }\n            else if (typeof (column.format) === 'string') {\n                var fmtr = _this.locator.getService('valueFormatter');\n                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            }\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.' + literals.gridFooter));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @param {AggregateRowModel[]} aggregates - specifies the AggregateRowModel\n * @param {Function} callback - specifies the Function\n * @returns {void}\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    for (var i = 0; i < aggregates.length; i++) {\n        for (var j = 0; j < aggregates[i].columns.length; j++) {\n            callback(aggregates[i].columns[j], aggregates[i]);\n        }\n    }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getObject, getCustomDateFormat } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n *\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function (_super) {\n    __extends(DatePickerEditCell, _super);\n    function DatePickerEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        this.obj.appendTo(args.element);\n    };\n    return DatePickerEditCell;\n}(EditCellBase));\nexport { DatePickerEditCell };\n// eslint-disable-next-line\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.requestType, args.element)\n    };\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { ColumnFreezeContentRenderer } from './column-freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { RenderType } from '../base/enum';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport * as events from '../base/constant';\nimport { splitFrozenRowObjectCells } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n *\n * @hidden\n */\nvar VirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeRenderer, _super);\n    function VirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        /** @hidden */\n        _this.frRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    VirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    };\n    VirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                setCache(this, i);\n            }\n        }\n    };\n    VirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        if (args.requestType === 'delete' && gObj.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var query = gObj.renderModule.data.generateQuery(true).clone();\n            query.page(1, gObj.pageSettings.pageSize);\n            gObj.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, gObj.getSelectedRowIndexes(), gObj, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    VirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    VirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.renderTable = function () {\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var movableCont = this.getMovableContent();\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.' + literals.content);\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualRenderer.virtualEle.movableContent = this.virtualRenderer.movableContent\n                = this.getPanel().querySelector('.' + literals.movableContent);\n            this.virtualRenderer.virtualEle.renderMovableWrapper(minHeight);\n            this.virtualRenderer.virtualEle.renderMovablePlaceHolder();\n            var tbl = movableCont.querySelector('table');\n            this.virtualRenderer.virtualEle.movableTable = tbl;\n            this.virtualRenderer.virtualEle.movableWrapper.appendChild(tbl);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movableWrapper);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movablePlaceholder);\n        }\n        this.virtualRenderer.virtualEle.wrapper.appendChild(this.getFrozenContent());\n        this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    /**\n     * @param {HTMLElement} target - specifies the target\n     * @param {DocumentFragment} newChild - specifies the newChild\n     * @param {NotifyArgs} e - specifies the notifyargs\n     * @returns {void}\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n    };\n    /**\n     * @param {Object[]} data - specifies the data\n     * @param {NotifyArgs} notifyArgs - specifies the notifyargs\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, notifyArgs, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    VirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @returns {HTMLCollection} returns the Htmlcollection\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @returns {HTMLCollectionOf<HTMLTableRowElement>} returns the html collection\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows('frozen-left');\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return this.isXaxis() ? mCol.querySelector(literals.colGroup) : this.colgroup;\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    VirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {object} returns the object\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    VirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return VirtualFreezeRenderer;\n}(FreezeContentRender));\nexport { VirtualFreezeRenderer };\n/**\n * VirtualFreezeHdrRenderer is used to render the virtual table within the frozen and movable header table\n *\n * @hidden\n */\nvar VirtualFreezeHdrRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeHdrRenderer, _super);\n    function VirtualFreezeHdrRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.serviceLoc = locator;\n        return _this;\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n        this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n        this.virtualHdrRenderer.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.virtualHdrRenderer.gen.getColumnIndexes(this.getPanel()\n            .querySelector('.' + literals.headerContent)));\n        this.virtualHdrRenderer.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n        this.virtualHdrRenderer.virtualEle.renderFrozenWrapper();\n        this.virtualHdrRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableContent = this.getPanel().querySelector('.' + literals.movableHeader);\n            this.virtualHdrRenderer.virtualEle.renderMovableWrapper();\n            this.virtualHdrRenderer.virtualEle.renderMovablePlaceHolder();\n        }\n        _super.prototype.renderTable.call(this);\n        this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n    };\n    VirtualFreezeHdrRenderer.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getFrozenHeader());\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableWrapper.appendChild(this.createHeader(undefined, 'movable'));\n        }\n        else {\n            this.getMovableHeader().appendChild(this.createTable());\n        }\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getMovableHeader());\n    };\n    return VirtualFreezeHdrRenderer;\n}(FreezeRender));\nexport { VirtualFreezeHdrRenderer };\n/**\n * @param {NotifyArgs} args - specifies the args\n * @param {Object[]} data - specifies the data\n * @param {number[]}selectedIdx - specifies the selected index\n * @param {IGrid} parent - specifies the IGrid\n * @param {IModelGenerator} rowModelGenerator - specifies the rowModeGenerator\n * @param {ServiceLocator} locator - specifies the locator\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {VirtualFreezeRenderer} instance - specifies the instance\n * @returns {void}\n * @hidden\n */\nexport function renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance) {\n    parent.clearSelection();\n    args.startIndex = 0;\n    var rowRenderer = new RowRenderer(locator, null, parent);\n    var rows = rowModelGenerator.generateRows(data, args);\n    if (args.renderMovableContent) {\n        virtualRenderer.vgenerator.movableCache[1] = rows;\n        rows = parent.getMovableRowsObject();\n    }\n    else if (!args.renderFrozenRightContent && !args.renderMovableContent) {\n        virtualRenderer.vgenerator.cache[1] = rows;\n        rows = parent.getRowsObject();\n    }\n    else if (args.renderFrozenRightContent) {\n        virtualRenderer.vgenerator.frozenRightCache[1] = rows;\n        rows = parent.getFrozenRightRowsObject();\n    }\n    var hdr = !args.renderMovableContent && !args.renderFrozenRightContent\n        ? parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.tbody) : args.renderMovableContent\n        ? parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody)\n        : parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.tbody);\n    hdr.innerHTML = '';\n    for (var i = 0; i < parent.frozenRows; i++) {\n        hdr.appendChild(rowRenderer.render(rows[i], parent.getColumns()));\n        if (selectedIdx.indexOf(i) > -1) {\n            rows[i].isSelected = true;\n            for (var k = 0; k < rows[i].cells.length; k++) {\n                rows[i].cells[k].isSelected = true;\n            }\n        }\n    }\n    if (args.renderMovableContent) {\n        instance.mvblRows = virtualRenderer.vgenerator.movableCache[1];\n    }\n    else if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n        instance.frzRows = virtualRenderer.vgenerator.cache[1];\n    }\n    else if (args.renderFrozenRightContent) {\n        instance.frRows = virtualRenderer.vgenerator.frozenRightCache[1];\n    }\n    args.renderMovableContent = !args.renderMovableContent && !args.renderFrozenRightContent;\n    args.renderFrozenRightContent = parent.getFrozenMode() === literals.leftRight\n        && !args.renderMovableContent && !args.renderFrozenRightContent;\n    if (args.renderMovableContent || args.renderFrozenRightContent) {\n        renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance);\n        if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n            args.isFrozenRowsRender = false;\n        }\n    }\n}\n/**\n * @param {Row<Column>[]} data - specifies the data\n * @param {freezeTable} tableName -specifies the table\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Row<Column>[]} returns the row\n * @hidden\n */\nexport function splitCells(data, tableName, parent) {\n    var rows = [];\n    for (var i = 0; i < data.length; i++) {\n        rows.push(extend({}, data[i]));\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/**\n * @param {freezeTable} tableName - specifies the freeze tabel\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Row<Column>[]} returns the row\n * @hidden\n */\nexport function collectRows(tableName, virtualRenderer, parent) {\n    var rows = [];\n    var cache;\n    if (tableName === literals.frozenLeft) {\n        cache = virtualRenderer.vgenerator.cache;\n    }\n    else if (tableName === 'movable') {\n        cache = virtualRenderer.vgenerator.movableCache;\n    }\n    else if (tableName === literals.frozenRight) {\n        cache = parent.getFrozenMode() === 'Right' ? virtualRenderer.vgenerator.cache : virtualRenderer.vgenerator.frozenRightCache;\n    }\n    var keys = Object.keys(cache);\n    for (var i = 0; i < keys.length; i++) {\n        rows = rows.concat(splitCells(cache[keys[i]], tableName, parent));\n    }\n    return rows;\n}\n/**\n * @param {object} args - specifies the args\n * @param {string} args.uid - specifirs the uid\n * @param {boolean} args.set - specifies the set\n * @param {boolean} args.clearAll - specifies the boolean to clearall\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @returns {void}\n * @hidden\n */\nexport function setFreezeSelection(args, virtualRenderer) {\n    var leftKeys = Object.keys(virtualRenderer.vgenerator.cache);\n    var movableKeys = Object.keys(virtualRenderer.vgenerator.movableCache);\n    var rightKeys = Object.keys(virtualRenderer.vgenerator.frozenRightCache);\n    for (var i = 0; i < leftKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.cache[leftKeys[i]]);\n    }\n    for (var i = 0; i < movableKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.movableCache[movableKeys[i]]);\n    }\n    for (var i = 0; i < rightKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.frozenRightCache[rightKeys[i]]);\n    }\n}\n/**\n * @param {Object} args - specifies the args\n * @param {string} args.uid - specifirs the uid\n * @param {boolean} args.set - specifies the set\n * @param {boolean} args.clearAll - specifies the boolean to clearall\n * @param {Row<Column>[]} cache - specifies the cache\n * @returns {void}\n * @hidden\n */\nexport function selectFreezeRows(args, cache) {\n    var rows = cache.filter(function (row) { return args.clearAll || args.uid === row.uid; });\n    for (var j = 0; j < rows.length; j++) {\n        rows[j].isSelected = args.set;\n        var cells = rows[j].cells;\n        for (var k = 0; k < cells.length; k++) {\n            cells[k].isSelected = args.set;\n        }\n    }\n}\n/**\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {ColumnWidthService} widthService - specifies the width service\n * @param {HTMLElement} target - specifies the target\n * @param {DocumentFragment} newChild - specifies the newchild\n * @param {NotifyArgs} e - specifies the notifyargs\n * @returns {void}\n * @hidden\n */\nexport function appendContent(virtualRenderer, widthService, target, newChild, e) {\n    virtualRenderer.appendContent(target, newChild, e);\n    widthService.refreshFrozenScrollbar();\n}\n/**\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {object[]} data - specifies the data\n * @param {NotifyArgs} notifyArgs - specifies the notifyargs\n * @param {FreezeRowModelGenerator} freezeRowGenerator - specifies the freeze row generator\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Row<Column>[]} returns the row\n * @hidden\n */\nexport function generateRows(virtualRenderer, data, notifyArgs, freezeRowGenerator, parent) {\n    var virtualRows = virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n    var arr = [];\n    arr = virtualRows.map(function (row) { return extend({}, row); });\n    var rows = freezeRowGenerator.generateRows(data, notifyArgs, arr);\n    if (parent.frozenRows && notifyArgs.requestType === 'delete' && parent.pageSettings.currentPage === 1) {\n        rows = rows.slice(parent.frozenRows);\n    }\n    return rows;\n}\n/**\n * @param {NotifyArgs} args -specifies the args\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {IGrid} parent - specifies the IGrid\n * @param {FreezeRowModelGenerator} freezeRowGenerator - specifies the freezeRowGenerator\n * @param {Object[]} firstPageRecords - specifies the first page records\n * @returns {Row<Column>[]} returns the row\n * @hidden\n */\nexport function getReorderedFrozenRows(args, virtualRenderer, parent, freezeRowGenerator, firstPageRecords) {\n    var bIndex = args.virtualInfo.blockIndexes;\n    var colIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n    if (!args.renderMovableContent) {\n        args.virtualInfo.columnIndexes = [];\n    }\n    var firstRecordslength = parent.getCurrentViewRecords().length;\n    firstPageRecords = parent.renderModule.data.dataManager.dataSource.json.slice(0, firstRecordslength);\n    var virtualRows = virtualRenderer.vgenerator.generateRows(firstPageRecords, args);\n    var rows = splitReorderedRows(virtualRows, parent, args, freezeRowGenerator);\n    args.virtualInfo.blockIndexes = bIndex;\n    args.virtualInfo.columnIndexes = colIndex;\n    args.virtualInfo.page = page;\n    return rows.splice(0, parent.frozenRows);\n}\n/**\n * @param {Row<Column>[]} rows - specifies the row\n * @param {IGrid} parent - specifies the IGrid\n * @param {NotifyArgs} args - specifies the notify arguments\n * @param {FreezeRowModelGenerator} freezeRowGenerator - specifies the freezerowgenerator\n * @returns {Row<Column>[]} returns the row\n * @hidden\n */\nexport function splitReorderedRows(\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nrows, parent, args, freezeRowGenerator) {\n    var tableName;\n    if (args.renderMovableContent) {\n        tableName = 'movable';\n    }\n    else if (args.renderFrozenRightContent) {\n        tableName = 'frozen-right';\n    }\n    else {\n        tableName = 'frozen-left';\n    }\n    for (var i = 0, len = rows.length; i < len; i++) {\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/**\n * @param {VirtualContentRenderer} virtualRenderer - specifies the VirtualRenderer\n * @returns {boolean} returns the isXaxis\n * @hidden\n */\nexport function isXaxis(virtualRenderer) {\n    var value = false;\n    if (virtualRenderer) {\n        value = virtualRenderer.requestType === 'virtualscroll'\n            && virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n    }\n    return value;\n}\n/**\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtualrenderer\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Element[]} returns the element\n * @hidden\n */\nexport function getHeaderCells(virtualRenderer, parent) {\n    var content = isXaxis(virtualRenderer) ? parent.getMovableVirtualHeader() : parent.getHeaderContent();\n    return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n}\n/**\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual Renderer\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Element} returns the element\n * @hidden\n */\nexport function getVirtualFreezeHeader(virtualRenderer, parent) {\n    var headerTable;\n    if (isXaxis(virtualRenderer)) {\n        headerTable = parent.getMovableVirtualHeader().querySelector('.' + literals.table);\n    }\n    else {\n        headerTable = parent.getFrozenVirtualHeader().querySelector('.' + literals.table);\n    }\n    return headerTable;\n}\n/**\n * @param {Column[]} columns - specifies the columns\n * @param {IGrid} parent - specifies the IGrid\n * @returns {Column[]} returns the column[]\n * @hidden\n */\nexport function ensureFrozenCols(columns, parent) {\n    var frozenCols = parent.columns.slice(0, parent.getFrozenColumns());\n    columns = frozenCols.concat(columns);\n    return columns;\n}\n/**\n * @param {Element} colGroup - specifies the colGroup\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtual renderer\n * @param {ColumnVirtualFreezeRenderer} instance - specifies the instances\n * @returns {Element} returns the element\n * @hidden\n */\nexport function setColGroup(colGroup, virtualRenderer, instance) {\n    if (!isXaxis(virtualRenderer)) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        instance.colgroup = colGroup;\n    }\n    return instance.colgroup;\n}\n/**\n * @param {VirtualFreezeRenderer} instance - specifies the instance\n * @param {number} index - specifies the index\n * @returns {void}\n * @hidden\n */\nexport function setCache(instance, index) {\n    if (instance.virtualRenderer.vgenerator.cache[1]) {\n        instance.virtualRenderer.vgenerator.cache[1][index] = instance.frzRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.cache[1] = instance.frzRows;\n    }\n    if (instance.virtualRenderer.vgenerator.movableCache[1]) {\n        instance.virtualRenderer.vgenerator.movableCache[1][index] = instance.mvblRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.movableCache[1] = instance.mvblRows;\n    }\n}\n/**\n * @param {IGrid} parent - specifies the IGrid\n * @param {VirtualContentRenderer} virtualRenderer - specifies the virtualRenderer\n * @param {Element} scrollbar - specifies the scrollbr\n * @param {Element} mCont - specifies the mCont\n * @returns {void}\n * @hidden\n */\nexport function setDebounce(parent, virtualRenderer, scrollbar, mCont) {\n    var debounceEvent = (parent.dataSource instanceof DataManager && !parent.dataSource.dataSource.offline);\n    var opt = {\n        container: virtualRenderer.content, pageHeight: virtualRenderer.getBlockHeight() * 2, debounceEvent: debounceEvent,\n        axes: parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y'], scrollbar: scrollbar,\n        movableContainer: mCont\n    };\n    virtualRenderer.observer = new InterSectionObserver(virtualRenderer.virtualEle.wrapper, opt, virtualRenderer.virtualEle.movableWrapper);\n}\n/**\n * ColumnVirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n *\n * @hidden\n */\nvar ColumnVirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(ColumnVirtualFreezeRenderer, _super);\n    function ColumnVirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frRows = [];\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    ColumnVirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                if (this.virtualRenderer.vgenerator.frozenRightCache[1]) {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1][i] = this.frRows.length ? this.frRows[i] : this.frzRows[i];\n                }\n                else {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1] = this.frRows.length ? this.frRows : this.frzRows;\n                    break;\n                }\n                setCache(this, i);\n            }\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n    };\n    ColumnVirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var query = this.parent.renderModule.data.generateQuery(true).clone();\n            query.page(1, this.parent.pageSettings.pageSize);\n            var selectedIdx_1 = this.parent.getSelectedRowIndexes();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, selectedIdx_1, _this.parent, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderNextFrozentPart = function (e, tableName) {\n        e.renderMovableContent = this.parent.getFrozenLeftCount() ? tableName === literals.frozenLeft : tableName === literals.frozenRight;\n        e.renderFrozenRightContent = this.parent.getFrozenMode() === literals.leftRight && tableName === 'movable';\n        if (e.renderMovableContent || e.renderFrozenRightContent) {\n            this.refreshContentRows(extend({}, e));\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.renderTable = function () {\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var frozenRightCont = this.getFrozenRightContent();\n        var frzCont = this.getFrozenContent();\n        var movableCont = this.getMovableContent();\n        if (this.parent.getFrozenMode() === 'Right') {\n            frzCont = frozenRightCont;\n        }\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.' + literals.content);\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        this.renderVirtualFrozenLeft(frzCont, movableCont);\n        this.renderVirtualFrozenRight(frzCont, movableCont);\n        this.renderVirtualFrozenLeftRight(frzCont, movableCont, frozenRightCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeft = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Left') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenRight = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Right') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeftRight = function (frzCont, movableCont, frozenRightCont) {\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frozenRightCont);\n        }\n    };\n    /**\n     * @param {HTMLElement} target - specifies the target\n     * @param {DocumentFragment} newChild - specifies the newchild\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n        this.refreshScrollOffset();\n    };\n    /**\n     * @param {Object[]} data - specifies the data\n     * @param {NotifyArgs} e - specifies the notifyargs\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.generateRows = function (data, e) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, e, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @param {number} index - specifies the number\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} - returns the element\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.virtualRenderer.getFrozenRightVirtualRowByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRows = function () {\n        return this.collectRows('frozen-right');\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return isXaxis(this.virtualRenderer) ? mCol.querySelector(literals.colGroup) : this.colgroup;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows(this.parent.getFrozenMode() === 'Right' ? 'frozen-right' : 'frozen-left');\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {Row<Column>[]} returns the row object\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    ColumnVirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {object} - returns the object\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} - returns the element\n     */\n    ColumnVirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return ColumnVirtualFreezeRenderer;\n}(ColumnFreezeContentRenderer));\nexport { ColumnVirtualFreezeRenderer };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n *\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { merge, isNullOrUndefined, extend, Property } from '@syncfusion/ej2-base';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options, parent) {\n        var _this = this;\n        /**\n         * If `disableHtmlEncode` is set to true, it encodes the HTML of the header and content cells.\n         *\n         * @default true\n         */\n        this.disableHtmlEncode = true;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         *\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         *\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         *\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         *\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         *\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         *\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         *\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         *\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create – It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](../../grid/filtering/#custom-component-in-filter-menu) for its customization.\n         *\n         *  @default {}\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         *\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         *\n         * @default {}\n         */\n        this.edit = {};\n        /**\n         * If `allowSearching` set to false, then it disables Searching of a particular column.\n         * By default all columns allow Searching.\n         *\n         * @default true\n         */\n        this.allowSearching = true;\n        /**\n         * If `autoFit` set to true, then the particular column content width will be\n         * adjusted based on its content in the initial rendering itself.\n         * Setting this property as true is equivalent to calling `autoFitColumns` method in the `dataBound` event.\n         *\n         * @default false\n         */\n        this.autoFit = false;\n        this.sortDirection = 'Descending';\n        /**\n         * @returns {Function} returns the edit template\n         * @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /**\n         * @returns {Function} returns the filter template\n         * @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.parent = parent;\n        if (this.type === 'none') {\n            this.type = (isBlazor() && !isNullOrUndefined(this.template) && isNullOrUndefined(this.field)) ? 'none' : null;\n        }\n        else if (this.type) {\n            this.type = typeof (this.type) === 'string' ? this.type.toLowerCase() : undefined;\n        }\n        if (this.editType) {\n            this.editType = this.editType.toLowerCase();\n        }\n        if (isNullOrUndefined(this.uid)) {\n            this.uid = getUid('grid-column');\n        }\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(extend({}, options.format)));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        this.toJSON = function () {\n            var col = {};\n            var skip = ['filter', 'dataSource', isBlazor() ? ' ' : 'headerText', 'template', 'headerTemplate', 'edit',\n                'editTemplate', 'filterTemplate', 'commandsTemplate', 'parent'];\n            var keys = Object.keys(_this);\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i] === 'columns') {\n                    col[keys[i]] = [];\n                    for (var j = 0; j < _this[keys[i]].length; j++) {\n                        col[keys[i]].push(_this[keys[i]][j].toJSON());\n                    }\n                }\n                else if (skip.indexOf(keys[i]) < 0) {\n                    col[keys[i]] = _this[keys[i]];\n                }\n            }\n            return col;\n        };\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n            if (this.columns) {\n                this.allowResizing = this.columns.some(function (col) {\n                    return col.allowResizing;\n                });\n            }\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() &&\n            (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit' || this.editType === 'defaultedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y, xObj, yObj) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                    var obj = xObj;\n                    xObj = yObj;\n                    yObj = obj;\n                }\n                return a_1(x, y, xObj, yObj);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /**\n     * @returns {string} returns the sort direction\n     * @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /**\n     * @param {string} direction - specifies the direction\n     * @returns {void}\n     * @hidden\n     */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /**\n     * @returns {freezeTable} returns the FreezeTable\n     * @hidden */\n    Column.prototype.getFreezeTableName = function () {\n        return this.freezeTable;\n    };\n    /**\n     * @param {Column} column - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n            //Refresh the react columnTemplates on state change\n            if (this.parent && this.parent.isReact && keys[i] === 'template') {\n                this.parent.refreshReactColumnTemplateByUid(this.uid);\n            }\n        }\n    };\n    /**\n     * @returns {boolean} returns true for foreign column\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden\n     */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @param {Function} value - specifies the value\n     * @returns {void}\n     * @hidden\n     */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /**\n     * @param {Function} value - specifies the value\n     * @returns {void}\n     * @hidden\n     */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /**\n     * @returns {string} returns the string\n     * @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n/**\n * Define options for custom command buttons.\n */\nvar CommandColumnModel = /** @class */ (function () {\n    function CommandColumnModel() {\n    }\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"buttonOption\", void 0);\n    return CommandColumnModel;\n}());\nexport { CommandColumnModel };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnSelecting = 'columnSelecting';\n/** @hidden */\nexport var columnSelected = 'columnSelected';\n/** @hidden */\nexport var columnDeselecting = 'columnDeselecting';\n/** @hidden */\nexport var columnDeselected = 'columnDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStartHelper = 'rowDragStartHelper';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var beforeOpenAdaptiveDialog = 'beforeOpenAdaptiveDialog';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var beforePaste = 'beforePaste';\n/** @hidden */\nexport var beforeAutoFill = 'beforeAutoFill';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/** @hidden */\nexport var commandClick = 'commandClick';\n/** @hidden */\nexport var exportGroupCaption = 'exportGroupCaption';\n/** @hidden */\nexport var lazyLoadGroupExpand = 'lazyLoadGroupExpand';\n/** @hidden */\nexport var lazyLoadGroupCollapse = 'lazyLoadGroupCollapse';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var exportDetailDataBound = 'exportdetaildatabound';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var columnDataStateChange = 'columnDataStateChange';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var textWrapRefresh = 'textWrapRefresh';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n/** @hidden */\nexport var hierarchyPrint = 'hierarchyprint';\n/** @hidden */\nexport var expandChildGrid = 'expandchildgrid';\n/** @hidden */\nexport var printGridInit = 'printGrid-Init';\n/** @hidden */\nexport var exportRowDataBound = 'export-RowDataBound';\n/** @hidden */\nexport var exportDataBound = 'export-DataBound';\n/** @hidden */\nexport var rowPositionChanged = 'row-position-changed';\n/** @hidden */\nexport var columnChooserOpened = 'columnChooserOpened';\n/** @hidden */\nexport var batchForm = 'batchedit-form';\n/** @hidden */\nexport var beforeStartEdit = 'edit-form';\n/** @hidden */\nexport var beforeBatchCancel = 'before-batch-cancel';\n/** @hidden */\nexport var batchEditFormRendered = 'batcheditform-rendered';\n/** @hidden */\nexport var partialRefresh = 'partial-refresh';\n/** @hidden */\nexport var beforeCustomFilterOpen = 'beforeCustomFilterOpen';\n/** @hidden */\nexport var selectVirtualRow = 'select-virtual-Row';\n/** @hidden */\nexport var columnsPrepared = 'columns-prepared';\n/** @hidden */\nexport var cBoxFltrBegin = 'cbox-filter-begin';\n/** @hidden */\nexport var cBoxFltrComplete = 'cbox-filter-complete';\n/** @hidden */\nexport var fltrPrevent = 'filter-Prevent';\n/** @hidden */\nexport var beforeFltrcMenuOpen = 'before-filter-cmenu-open';\n/** @hidden */\nexport var valCustomPlacement = 'validation-custom-placement';\n/** @hidden */\nexport var filterCboxValue = 'filter-cbox-value';\n/** @hidden */\nexport var componentRendered = 'component-rendered';\n/** @hidden */\nexport var restoreFocus = 'restore-Focus';\n/** @hidden */\nexport var detailStateChange = 'detail-state-change';\n/** @hidden */\nexport var detailIndentCellInfo = 'detail-indentcell-info';\n/** @hidden */\nexport var virtaulKeyHandler = 'virtaul-key-handler';\n/** @hidden */\nexport var virtaulCellFocus = 'virtaul-cell-focus';\n/** @hidden */\nexport var virtualScrollEditActionBegin = 'virtual-scroll-edit-action-begin';\n/** @hidden */\nexport var virtualScrollEditSuccess = 'virtual-scroll-edit-success';\n/** @hidden */\nexport var virtualScrollEditCancel = 'virtual-scroll-edit-cancel';\n/** @hidden */\nexport var virtualScrollEdit = 'virtual-scroll-edit';\n/** @hidden */\nexport var refreshVirtualCache = 'refresh-virtual-cache';\n/** @hidden */\nexport var editReset = 'edit-reset';\n/** @hidden */\nexport var virtualScrollAddActionBegin = 'virtual-scroll-add-action-begin';\n/** @hidden */\nexport var getVirtualData = 'get-virtual-data';\n/** @hidden */\nexport var refreshInfiniteModeBlocks = 'refresh-infinite-mode-blocks';\n/** @hidden */\nexport var resetInfiniteBlocks = 'reset-infinite-blocks';\n/** @hidden */\nexport var infiniteScrollHandler = 'infinite-scroll-handler';\n/** @hidden */\nexport var infinitePageQuery = 'infinite-page-query';\n/** @hidden */\nexport var infiniteShowHide = 'infinite-show-hide';\n/** @hidden */\nexport var appendInfiniteContent = 'append-infinite-content';\n/** @hidden */\nexport var removeInfiniteRows = 'remove-infinite-rows';\n/** @hidden */\nexport var setInfiniteCache = 'set-infinite-cache';\n/** @hidden */\nexport var infiniteEditHandler = 'infinite-edit-handler';\n/** @hidden */\nexport var initialCollapse = 'initial-collapse';\n/** @hidden */\nexport var getAggregateQuery = 'get-aggregate-query';\n/** @hidden */\nexport var closeFilterDialog = 'close-filter-dialog';\n/** @hidden */\nexport var columnChooserCancelBtnClick = 'columnChooserCancelBtnClick';\n/** @hidden */\nexport var getFilterBarOperator = 'get-filterbar-operator';\n/** @hidden */\nexport var resetColumns = 'reset-columns';\n/** @hidden */\nexport var pdfAggregateQueryCellInfo = 'pdfAggregateQueryCellInfo';\n/** @hidden */\nexport var excelAggregateQueryCellInfo = 'excelAggregateQueryCellInfo';\n/** @hidden */\nexport var setGroupCache = 'group-cache';\n/** @hidden */\nexport var lazyLoadScrollHandler = 'lazy-load-scroll-handler';\n/** @hidden */\nexport var groupCollapse = 'group-collapse';\n/** @hidden */\nexport var beforeCheckboxRenderer = 'beforeCheckboxRenderer';\n/** @hidden */\nexport var refreshHandlers = 'refreshResizeHandlers';\n/** @hidden */\nexport var refreshFrozenColumns = 'refresh-frozen-columns';\n/** @hidden */\nexport var setReorderDestinationElement = 'set-reorder-destination-element';\n/** @hidden */\nexport var refreshVirtualFrozenHeight = 'refresh-virtual-frozen-height';\n/** @hidden */\nexport var setFreezeSelection = 'set-freeze-selection';\n/** @hidden */\nexport var setInfiniteFrozenHeight = 'set-infinite-frozen-height';\n/** @hidden */\nexport var setInfiniteColFrozenHeight = 'set-infinite-col-frozen-height';\n/** @hidden */\nexport var beforeRefreshOnDataChange = 'before-refresh-on-data-change';\n/** @hidden */\nexport var immutableBatchCancel = 'immutable-batch-cancel';\n/** @hidden */\nexport var refreshVirtualFrozenRows = 'refresh-virtual-frozenrows';\n/** @hidden */\nexport var checkScrollReset = 'check-scroll-reset';\n/** @hidden */\nexport var refreshFrozenHeight = 'refresh-frozen-height';\n/** @hidden */\nexport var setHeightToFrozenElement = 'set-height-to-frozen-element';\n/** @hidden */\nexport var preventFrozenScrollRefresh = 'prevent-frozen-scroll-refresh';\n/** @hidden */\nexport var nextCellIndex = 'next-cell-index';\n/** @hidden */\nexport var refreshInfiniteCurrentViewData = 'refresh-infinite-current-view-data';\n/** @hidden */\nexport var infiniteCrudCancel = 'infinite-crud-cancel';\n/** @hidden */\nexport var filterDialogClose = 'filter-dialog-close';\n/** @hidden */\nexport var refreshCustomFilterOkBtn = 'refresh-cutsom-filter-ok-button';\n/** @hidden */\nexport var refreshCustomFilterClearBtn = 'refresh-cutsom-filter-clear-button';\n/** @hidden */\nexport var renderResponsiveCmenu = 'render-responsive-cmenu';\n/** @hidden */\nexport var filterCmenuSelect = 'filter-cmenu-select';\n/** @hidden */\nexport var customFilterClose = 'custom-filter-close';\n/** @hidden */\nexport var setFullScreenDialog = 'set-fullscreen-dialog';\n/** @hidden */\nexport var refreshVirtualCacheOnRowDD = 'refresh-Virtual-Cache-On-RowDD';\n/** @hidden */\nexport var refreshExpandandCollapse = 'refresh-Expand-and-Collapse';\n/** @hidden */\nexport var rowModeChange = 'row-mode-change';\n/** @hidden */\nexport var enterKeyHandler = 'enter-key-handler';\n/** @hidden */\nexport var refreshVirtualMaxPage = 'refresh-virtual-max-page';\n/** @hidden */\nexport var selectRowOnContextOpen = 'select-row-on-context-open';\n/** @hidden */\nexport var pagerRefresh = 'pager-refresh';\n/** @hidden */\nexport var closeInline = 'closeinline';\n/** @hidden */\nexport var closeBatch = 'closebatch';\n/** @hidden */\nexport var closeEdit = 'close-edit';\n/** @hidden */\nexport var resetVirtualFocus = 'reset-virtual-focus';\n/** @hidden */\nexport var afterContentRender = 'after-content-renderer';\n/** @hidden */\nexport var refreshVirtualEditFormCells = 'refresh-virtual-editform-cells';\n/** @hidden */\nexport var scrollToEdit = 'scroll-to-edit';\n/** @hidden */\nexport var beforeCheckboxRendererQuery = 'before-checkbox-renderer-query';\n/** @hidden */\nexport var createVirtualValidationForm = 'create-virtual-validation-form';\n/** @hidden */\nexport var validateVirtualForm = 'validate-virtual-form';\n","/**\n * Defines types of Cell\n *\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n    /**  Defines CellType as DetailFooterIntent */\n    CellType[CellType[\"DetailFooterIntent\"] = 15] = \"DetailFooterIntent\";\n    /**  Defines CellType as RowDrag */\n    CellType[CellType[\"RowDragIcon\"] = 16] = \"RowDragIcon\";\n    /**  Defines CellType as RowDragHeader */\n    CellType[CellType[\"RowDragHIcon\"] = 17] = \"RowDragHIcon\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n *\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n *\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n/**\n * Defines types of responsive dialogs\n *\n * @hidden\n */\nexport var ResponsiveDialogAction;\n(function (ResponsiveDialogAction) {\n    /**  Defines dialog type as Edit */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isEdit\"] = 0] = \"isEdit\";\n    /**  Defines dialog type as Add */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isAdd\"] = 1] = \"isAdd\";\n    /**  Defines dialog type as Sort */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isSort\"] = 2] = \"isSort\";\n    /**  Defines dialog type as Filter */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isFilter\"] = 3] = \"isFilter\";\n})(ResponsiveDialogAction || (ResponsiveDialogAction = {}));\n/**\n * Defines responsive toolbar actions\n *\n * @hidden\n */\nexport var ResponsiveToolbarAction;\n(function (ResponsiveToolbarAction) {\n    /**  Defines initial responsive toolbar buttons */\n    ResponsiveToolbarAction[ResponsiveToolbarAction[\"isInitial\"] = 0] = \"isInitial\";\n    /**  Defines responsive toolbar search */\n    ResponsiveToolbarAction[ResponsiveToolbarAction[\"isSearch\"] = 1] = \"isSearch\";\n})(ResponsiveToolbarAction || (ResponsiveToolbarAction = {}));\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, isGroupAdaptive, getColumnByForeignKeyValue, refreshFilteredColsUid } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * Grid data module is used to generate query and data source.\n *\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the service locator\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.foreignKeyDataState = { isPending: false, resolver: null };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowPositionChanged, this.reorderRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n        this.parent.on(events.autoCol, this.refreshFilteredCols, this);\n        this.parent.on(events.columnsPrepared, this.refreshFilteredCols, this);\n    }\n    Data.prototype.reorderRows = function (e) {\n        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);\n    };\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     *\n     * @returns {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        if (gObj.isAngular && !(gObj.query instanceof Query)) {\n            gObj.setProperties({ query: new Query() }, true);\n        }\n        else {\n            this.isQueryInvokedFromData = true;\n            gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n        }\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     *\n     * @param {boolean} skipPage - specifies the boolean to skip the page\n     * @returns {Query} returns the Query\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.getQuery().clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        if (isGroupAdaptive(this.parent)) {\n            this.virtualGroupPageQuery(query);\n        }\n        else {\n            this.pageQuery(query, skipPage);\n        }\n        this.groupQuery(query);\n        return query;\n    };\n    /**\n     * @param {Query} query - specifies the query\n     * @returns {Query} - returns the query\n     * @hidden\n     */\n    Data.prototype.aggregateQuery = function (query) {\n        var rows = this.parent.aggregates;\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            for (var j = 0; j < row.columns.length; j++) {\n                var cols = row.columns[j];\n                var types = cols.type instanceof Array ? cols.type : [cols.type];\n                for (var k = 0; k < types.length; k++) {\n                    query.aggregate(types[k].toLowerCase(), cols.field);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.virtualGroupPageQuery = function (query) {\n        var fName = 'fn';\n        if (query.queries.length) {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i][fName] === 'onPage') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if ((gObj.allowPaging || gObj.enableVirtualization || gObj.enableInfiniteScrolling) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            if (query.queries.length) {\n                for (var i = 0; i < query.queries.length; i++) {\n                    if (query.queries[i][fName] === 'onPage') {\n                        query.queries.splice(i, 1);\n                    }\n                }\n            }\n            if (!isNullOrUndefined(gObj.infiniteScrollModule) && gObj.enableInfiniteScrolling) {\n                this.parent.notify(events.infinitePageQuery, query);\n            }\n            else {\n                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n            }\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            if (this.parent.groupSettings.enableLazyLoading) {\n                query.lazyLoad.push({ key: 'isLazyLoad', value: this.parent.groupSettings.enableLazyLoading });\n            }\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                if (!column) {\n                    this.parent.log('initial_action', { moduleName: 'group', columnName: columns[i] });\n                }\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                else {\n                    this.parent.log('initial_action', { moduleName: 'sort', columnName: columns[i].field });\n                    return query;\n                }\n                var fn = columns[i].direction;\n                if (col.sortComparer) {\n                    this.parent.log('grid_sort_comparer');\n                    fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                }\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    if (col.isForeignColumn() || col.sortComparer) {\n                        query.sortByForeignKey(col.field, fn, undefined, columns[i].direction.toLowerCase());\n                    }\n                    else {\n                        query.sortBy(col.field, fn);\n                    }\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                if (typeof sortGrp[i].direction === 'string') {\n                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n                }\n                else {\n                    var col = this.getColumnByField(sortGrp[i].field);\n                    query.sortByForeignKey(sortGrp[i].field, sortGrp[i].direction, undefined, col.getSortDirection().toLowerCase());\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query, fcolumn, isForeignKey) {\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            var adaptor = !isForeignKey ? this.dataManager.adaptor : fcolumn.dataSource.adaptor;\n            if (needForeignKeySearch || (adaptor.getModuleName &&\n                adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                fields = isForeignKey ? [fcolumn.foreignKeyValue] : fields;\n                for (var i = 0; i < fields.length; i++) {\n                    var column = isForeignKey ? fcolumn : this.getColumnByField(fields[i]);\n                    if (column.isForeignColumn() && !isForeignKey) {\n                        predicateList = this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(fields[i], sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                }\n                var predList = Predicate.or(predicateList);\n                predList.key = sSettings.key;\n                query.where(predList);\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        var foreignColEmpty;\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var foreignCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                var gridColumn = gObj.getColumnByField(col.field);\n                if (isNullOrUndefined(col.type) && gridColumn && (gridColumn.type === 'date' || gridColumn.type === 'datetime')) {\n                    col.type = gObj.getColumnByField(col.field).type;\n                }\n                if (col.isForeignKey) {\n                    foreignCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (defaultFltrCols.length) {\n                if (gObj.filterSettings.type === 'FilterBar' || gObj.filterSettings.type === 'Menu') {\n                    for (var i = 0, len = defaultFltrCols.length; i < len; i++) {\n                        defaultFltrCols[i].uid = defaultFltrCols[i].uid ||\n                            this.parent.grabColumnByFieldFromAllCols(defaultFltrCols[i].field).uid;\n                    }\n                }\n                var excelPredicate = CheckBoxFilterBase.getPredicate(defaultFltrCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    predicateList.push(excelPredicate[prop]);\n                }\n            }\n            if (foreignCols.length) {\n                for (var _e = 0, foreignCols_1 = foreignCols; _e < foreignCols_1.length; _e++) {\n                    var col = foreignCols_1[_e];\n                    col.uid = col.uid || this.parent.grabColumnByFieldFromAllCols(col.field).uid;\n                    var column_1 = this.parent.grabColumnByUidFromAllCols(col.uid);\n                    if (!column_1) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: col.field });\n                    }\n                    if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        if (!column_1.columnData.length) {\n                            foreignColEmpty = true;\n                        }\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        var excelPredicate = CheckBoxFilterBase.getPredicate(columns);\n                        for (var _f = 0, _g = Object.keys(excelPredicate); _f < _g.length; _f++) {\n                            var prop = _g[_f];\n                            predicateList.push(excelPredicate[prop]);\n                        }\n                    }\n                }\n            }\n            if (predicateList.length && !foreignColEmpty) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     *\n     * @param {object} args - specifies the object\n     * @param {string} args.requestType - Defines the request type\n     * @param {string[]} args.foreignKeyData - Defines the foreignKeyData.string\n     * @param {Object} args.data - Defines the data.\n     * @param {number} args.index - Defines the index .\n     * @param {Query} query - Defines the query which will execute along with data processing.\n     * @returns {Promise<Object>} - returns the object\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        this.parent.log('datasource_syntax_mismatch', { dataState: this.parent });\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    // eslint-disable-next-line no-case-declarations\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            var promise = 'promise';\n            args[promise] = crud;\n            // eslint-disable-next-line no-prototype-builtins\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function () {\n                    return _this.insert(query, args);\n                });\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function () {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise ? promise : args[pr];\n        this.parent.notify(events.crudAction, args);\n    };\n    /**\n     * @param {object} changes - specifies the changes\n     * @param {string} key - specifies the key\n     * @param {object} original - specifies the original data\n     * @param {Query} query - specifies the query\n     * @returns {Promise<Object>} returns the object\n     * @hidden\n     */\n    Data.prototype.saveChanges = function (changes, key, original, query) {\n        if (query === void 0) { query = this.generateQuery(); }\n        query.requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /**\n     * @returns {boolean} returns whether its remote data\n     * @hidden\n     */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n        this.parent.off(events.autoCol, this.refreshFilteredCols);\n        this.parent.off(events.columnsPrepared, this.refreshFilteredCols);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getForeignKeyDataState = function () {\n        return this.foreignKeyDataState;\n    };\n    Data.prototype.setForeignKeyDataState = function (state) {\n        this.foreignKeyDataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var dataArgs = args;\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs_1 = args;\n                editArgs_1.key = key;\n                var promise = 'promise';\n                editArgs_1[promise] = deff.promise;\n                editArgs_1.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function () {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    if (editArgs_1.requestType === 'save') {\n                        _this.parent.notify(events.recordAdded, editArgs_1);\n                    }\n                    _this.parent.trigger(events.dataStateChange, state);\n                })\n                    .catch(function () { return void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * Gets the columns where searching needs to be performed from the Grid.\n     *\n     * @returns {string[]} returns the searched column field names\n     */\n    Data.prototype.getSearchColumnFieldNames = function () {\n        var colFieldNames = [];\n        var columns = this.parent.getColumns();\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var col = columns_2[_i];\n            if (col.allowSearching && !isNullOrUndefined(col.field)) {\n                colFieldNames.push(col.field);\n            }\n        }\n        return colFieldNames;\n    };\n    Data.prototype.refreshFilteredCols = function () {\n        if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);\n        }\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n *\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options, parent) {\n        merge(this, options);\n        this.parent = parent;\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    /**\n     * Replaces the row data and grid refresh the particular row element only.\n     *\n     * @param  {Object} data - To update new data for the particular row.\n     * @returns {void}\n     */\n    Row.prototype.setRowValue = function (data) {\n        if (!this.parent) {\n            return;\n        }\n        var key = this.data[this.parent.getPrimaryKeyFieldNames()[0]];\n        this.parent.setRowData(key, data);\n    };\n    /**\n     * Replaces the given field value and refresh the particular cell element only.\n     *\n     * @param {string} field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     * @returns {void}\n     */\n    Row.prototype.setCellValue = function (field, value) {\n        if (!this.parent) {\n            return;\n        }\n        var isValDiff = !(this.data[field].toString() === value.toString());\n        if (isValDiff) {\n            var pKeyField = this.parent.getPrimaryKeyFieldNames()[0];\n            var key = this.data[pKeyField];\n            this.parent.setCellValue(key, field, value);\n            this.makechanges(pKeyField, this.data);\n        }\n        else {\n            return;\n        }\n    };\n    Row.prototype.makechanges = function (key, data) {\n        if (!this.parent) {\n            return;\n        }\n        var gObj = this.parent;\n        var dataManager = gObj.getDataModule().dataManager;\n        dataManager.update(key, data);\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n *\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        this.isRowSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n *\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var colSpan = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var rowSpan = cellArgs.rowSpan;\n        var visible = 0;\n        var spannedCell;\n        if (row.index > 0) {\n            var cells = this.parent.groupSettings.columns.length > 0 &&\n                !this.parent.getRowsObject()[row.index - 1].isDataRow ? this.parent.getRowsObject()[row.index].cells :\n                this.parent.getRowsObject()[row.index - 1].cells;\n            var targetCell_1 = row.cells[i];\n            var uid_1 = 'uid';\n            spannedCell = cells.filter(function (cell) { return cell.column.uid === targetCell_1.column[uid_1]; })[0];\n        }\n        var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ?\n            spannedCell.colSpanRange : colSpan;\n        for (var j = i + 1; j < i + colSpanLen && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + colSpan; j < i + colSpan + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + colSpan + visible >= row.cells.length) {\n                colSpan -= (i + colSpan + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (colSpan > 1) {\n            attributes(td, { 'colSpan': colSpan.toString(), 'aria-colSpan': colSpan.toString() });\n        }\n        if (rowSpan > 1) {\n            attributes(td, { 'rowspan': rowSpan.toString(), 'aria-rowspan': rowSpan.toString() });\n            row.cells[i].isRowSpanned = true;\n            row.cells[i].rowSpanRange = Number(rowSpan);\n            if (colSpan > 1) {\n                row.cells[i].colSpanRange = Number(colSpan);\n            }\n        }\n        if (row.index > 0 && (spannedCell.rowSpanRange > 1)) {\n            row.cells[i].isSpanned = true;\n            row.cells[i].rowSpanRange = Number(spannedCell.rowSpanRange - 1);\n            row.cells[i].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        // eslint-disable-next-line no-prototype-builtins\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","/**\n * Specifies class names\n */\n/** @hidden */\nexport var rowCell = 'e-rowcell';\n/** @hidden */\nexport var gridHeader = 'e-gridheader';\n/** @hidden */\nexport var gridContent = 'e-gridcontent';\n/** @hidden */\nexport var gridFooter = 'e-gridfooter';\n/** @hidden */\nexport var headerContent = 'e-headercontent';\n/** @hidden */\nexport var movableContent = 'e-movablecontent';\n/** @hidden */\nexport var movableHeader = 'e-movableheader';\n/** @hidden */\nexport var frozenContent = 'e-frozencontent';\n/** @hidden */\nexport var frozenHeader = 'e-frozenheader';\n/** @hidden */\nexport var content = 'e-content';\n/** @hidden */\nexport var table = 'e-table';\n/** @hidden */\nexport var row = 'e-row';\n/** @hidden */\nexport var gridChkBox = 'e-gridchkbox';\n/** @hidden */\nexport var editedRow = 'e-editedrow';\n/** @hidden */\nexport var addedRow = 'e-addedrow';\n/**\n * Specifies repeated strings\n */\n/** @hidden */\nexport var changedRecords = 'changedRecords';\n/** @hidden */\nexport var addedRecords = 'addedRecords';\n/** @hidden */\nexport var deletedRecords = 'deletedRecords';\n/** @hidden */\nexport var leftRight = 'Left-Right';\n/** @hidden */\nexport var frozenRight = 'frozen-right';\n/** @hidden */\nexport var frozenLeft = 'frozen-left';\n/** @hidden */\nexport var ariaColIndex = 'aria-colindex';\n/** @hidden */\nexport var ariaRowIndex = 'aria-rowindex';\n/** @hidden */\nexport var tbody = 'tbody';\n/** @hidden */\nexport var colGroup = 'colgroup';\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport * as literals from '../base/string-literals';\n/**\n * RowRenderer class which responsible for building row content.\n *\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /* eslint-disable */\n    /**\n     * Function to render the row content based on Column[] and data.\n     *\n     * @param {Row<T>} row - specifies the row\n     * @param {Column[]} columns - specifies the columns\n     * @param {Object} attributes - specifies the attributes\n     * @param {string} rowTemplate - specifies the rowTemplate\n     * @param {Element} cloneNode - specifies the cloneNode\n     * @returns {Element} returns the element\n     */\n    /* eslint-enable */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /* eslint-disable */\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     *\n     * @param {Row<T>} row - specifies the row\n     * @param {Column[]} columns - specifies the column\n     * @param {boolean} isChanged - specifies isChanged\n     * @param {Object} attributes - specifies the attributes\n     * @param {string} rowTemplate - specifies the rowTemplate\n     * @returns {void}\n     */\n    /* eslint-enable */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        var selIndex = this.parent.getSelectedRowIndexes();\n        if (row.isDataRow) {\n            row.isSelected = selIndex.indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (selIndex.indexOf(row.index) === -1) {\n                selIndex.push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, extend({}, attributes, {}));\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            cell.isColumnSelected = cell.column.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (row.lazyLoadCssClass) {\n            tr.classList.add(row.lazyLoadCssClass);\n        }\n        var vFTable = this.parent.enableColumnVirtualization && this.parent.frozenColumns !== 0;\n        if (!vFTable && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = [].slice.call(tr.getElementsByClassName('e-summarycell'));\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                        var firstSummaryCell = (summarycell[0]);\n                        addClass([firstSummaryCell], ['e-firstsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /* eslint-disable */\n    /**\n     * Function to check and add alternative row css class.\n     *\n     * @param {Element} tr - specifies the tr element\n     * @param {Row<T>} row - specifies the row\n     * @returns {void}\n     */\n    /* eslint-enable */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': literals.ariaRowIndex, 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push(literals.row);\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\nimport * as events from '../base/constant';\n/**\n * RowModelGenerator is used to generate grid data rows.\n *\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization && args ? args.startIndex : 0;\n        startIndex = this.parent.enableInfiniteScrolling && args ? this.getInfiniteIndex(args) : startIndex;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            var args = {};\n            this.parent.notify(events.detailIndentCellInfo, args);\n            cols.push(this.generateCell(args, null, CellType.DetailExpand));\n        }\n        if (this.parent.isRowDragable()) {\n            cols.push(this.generateCell({}, null, CellType.RowDragIcon));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent, pid, tIndex, parentUid) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.tIndex = tIndex;\n        options.isDataRow = true;\n        options.parentGid = pid;\n        options.parentUid = parentUid;\n        if (this.parent.isPrinting) {\n            if (this.parent.hierarchyPrintMode === 'All') {\n                options.isExpand = true;\n            }\n            else if (this.parent.hierarchyPrintMode === 'Expanded' && this.parent.expandedRows && this.parent.expandedRows[index]) {\n                options.isExpand = this.parent.expandedRows[index].isExpand;\n            }\n        }\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options, this.parent);\n        row.cells = this.parent.getFrozenMode() === 'Right' ? this.generateCells(options).concat(cells)\n            : cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        var foreignKeyColumns = this.parent.getForeignKeyColumns();\n        for (var i = 0; i < foreignKeyColumns.length; i++) {\n            setValue(foreignKeyColumns[i].field, getForeignData(foreignKeyColumns[i], options.data), options.foreignKeyData);\n        }\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        for (var i = 0; i < dummies.length; i++) {\n            tmp.push(this.generateCell(dummies[i], options.uid, isNullOrUndefined(dummies[i].commands) ? undefined : CellType.CommandColumn, null, i, options.foreignKeyData));\n        }\n        return tmp;\n    };\n    /**\n     *\n     * @param {Column} column - Defines column details\n     * @param {string} rowId - Defines row id\n     * @param {CellType} cellType  - Defines cell type\n     * @param {number} colSpan - Defines colSpan\n     * @param {number} oIndex - Defines index\n     * @param {Object} foreignKeyData - Defines foreign key data\n     * @returns {Cell<Column>} returns cell model\n     * @hidden\n     */\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox' || opt.commands) {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        for (var i = 0; i < input.length; i++) {\n            this.refreshForeignKeyRow(input[i]);\n            input[i].cells = this.generateCells(input[i]);\n        }\n        return input;\n    };\n    RowModelGenerator.prototype.getInfiniteIndex = function (args) {\n        return args.requestType === 'infiniteScroll' || args.requestType === 'delete' || args.action === 'add'\n            ? args.startIndex : 0;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n *\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        var row = this.parent.aggregates.slice();\n        for (var i = 0; i < row.length; i++) {\n            var columns = row[i].columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                columns.push(new Column({}));\n            }\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n            columns.push(new Column({}));\n        }\n        if (this.parent.isRowDragable() && !start) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        end = end && !start ? end + this.parent.getIndentCount() : end;\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end, columns) {\n        if (input.length === 0) {\n            if (args === undefined || !args.count) {\n                return [];\n            }\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        var row = this.getData();\n        for (var i = 0; i < row.length; i++) {\n            rows.push(this.getGeneratedRow(row[i], data[i], args ? args.level : undefined, start, end, args ? args.parentUid : undefined, columns));\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end, parentUid, columns) {\n        var tmp = [];\n        var indents = this.getIndentByLevel();\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = !start ? this.parent.getIndentCount() : 0;\n        if (this.parent.isRowDragable() && !start) {\n            indents = ['e-indentcelltop'];\n        }\n        var values = columns ? columns : this.getColumns(start, end);\n        for (var i = 0; i < values.length; i++) {\n            tmp.push(this.getGeneratedCell(values[i], summaryRow, i >= indentLength ? this.getCellType() :\n                i < this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[i], isDetailGridAlone));\n        }\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.parentUid = parentUid;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = {\n            'style': { 'textAlign': column.textAlign },\n            'e-mappinguid': column.uid, index: column.index\n        };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        opt.column.headerText = column.headerText;\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        for (var i = 0; i < summaryRows.length; i++) {\n            single = {};\n            var column = summaryRows[i].columns;\n            for (var j = 0; j < column.length; j++) {\n                single = this.setTemplate(column[j], (args && args.aggregates) ? args : data, single);\n            }\n            dummy.push(single);\n        }\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function () {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        for (var i = 0; i < types.length; i++) {\n            var key = column.field + ' - ' + types[i].toLowerCase();\n            var disp = column.columnName;\n            var val = types[i] !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(types[i], group.aggregates ? group : data, column, this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][types[i]] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        }\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n *\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        /** @hidden */\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.isInfiniteScroll = (args.requestType === 'infiniteScroll');\n        this.rows = [];\n        this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        if (this.parent.isCollapseStateEnabled()) {\n            this.ensureRowVisibility();\n        }\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex, parentUid) {\n        var _a;\n        var isRenderCaption = this.isInfiniteScroll && this.prevKey === data.key;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length, parentUid);\n                }\n            }\n        }\n        else {\n            var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);\n            if (!isRenderCaption) {\n                this.rows = this.rows.concat(captionRow);\n            }\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level, parentUid: captionRow.uid }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.prevKey = data.key;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.\n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        for (var j = 0; j < cols.length; j++) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(this.generateCell(column, null, cellType, indent));\n        }\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    /**\n     * @param {GroupedData} data - specifies the data\n     * @param {number} indent - specifies the indent\n     * @param {number} parentID - specifies the parentID\n     * @param {number} childID - specifies the childID\n     * @param {number} tIndex - specifies the TIndex\n     * @param {string} parentUid - specifies the ParentUid\n     * @returns {Row<Column>} returns the Row object\n     * @hidden\n     */\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex, parentUid) {\n        var options = {};\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.parentUid = parentUid;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    /**\n     * @param {Object[]} data - specifies the data\n     * @param {number} indent - specifies the indent\n     * @param {number} childID - specifies the childID\n     * @param {number} tIndex - specifies the tIndex\n     * @param {string} parentUid - specifies the ParentUid\n     * @returns {Row<Column>[]} returns the row object\n     * @hidden\n     */\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex, parentUid) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex, parentUid);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0; i < input.length; i++) {\n            if (input[i].isDataRow) {\n                input[i].cells = this.generateCells(input[i]);\n                for (var j = 0; j < input[i].indent; j++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(input[i].indent) === -1) {\n                        continue;\n                    }\n                    input[i].cells.unshift(this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = this.generateCaptionRow(input[i].data, input[i].indent);\n                input[i].cells = cRow.cells;\n            }\n        }\n        return input;\n    };\n    GroupModelGenerator.prototype.ensureRowVisibility = function () {\n        for (var i = 0; i < this.rows.length; i++) {\n            var row = this.rows[i];\n            if (!row.isCaptionRow) {\n                continue;\n            }\n            for (var j = i + 1; j < this.rows.length; j++) {\n                var childRow = this.rows[j];\n                if (row.uid === childRow.parentUid) {\n                    this.rows[j].visible = row.isExpand;\n                }\n            }\n        }\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren, setDisplayValue } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { isGroupAdaptive } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     *\n     * @param {IGrid} parent - specifies the Igrid\n     * @param {ServiceLocator} serviceLocator - specifies the service locator\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        /** @hidden */\n        this.currentInfo = {};\n        /** @hidden */\n        this.prevCurrentView = [];\n        this.isLoaded = true;\n        this.viewColIndexes = [];\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.infiniteCache = {};\n        this.isRemove = false;\n        this.visibleRows = [];\n        this.visibleFrozenRows = [];\n        this.rightFreezeRows = [];\n        this.isAddRows = false;\n        this.isInfiniteFreeze = false;\n        this.useGroupCache = false;\n        this.mutableData = false;\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                if (_this.parent.isFrozenGrid() && _this.parent.enableVirtualization) {\n                    var mContentRows = [].slice.call(_this.parent.getMovableVirtualContent().getElementsByClassName(literals.row));\n                    var fContentRows = [].slice.call(_this.parent.getFrozenVirtualContent().getElementsByClassName(literals.row));\n                    _this.isLoaded = !mContentRows ? false : mContentRows.length === fContentRows.length;\n                    if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && _this.isLoaded) {\n                        var mHdr = [].slice.call(_this.parent.getMovableVirtualHeader().getElementsByClassName(literals.row));\n                        var fHdr = [].slice.call(_this.parent.getFrozenVirtualHeader().getElementsByClassName(literals.row));\n                        _this.isLoaded = mHdr.length === fHdr.length;\n                    }\n                }\n                _this.ariaService.setBusy(_this.getPanel().querySelector('.' + literals.content), false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.isFrozenGrid()) {\n                    rows = args.isFrozen ? _this.freezeRows : args.renderFrozenRightContent ? _this.parent.getFrozenRightRowsObject()\n                        : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {}, function () {\n                        if (_this.parent.allowTextWrap) {\n                            _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                        }\n                    });\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.mutableData = this.parent.getDataModule().isRemote();\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization\n            && !this.parent.groupSettings.enableLazyLoading) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.refreshInfiniteModeBlocks, this.refreshContentRows, this);\n        this.parent.on(events.beforeCellFocused, this.beforeCellFocused, this);\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    }\n    ContentRender.prototype.beforeCellFocused = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n        }\n        else {\n            this.pressedKey = undefined;\n        }\n    };\n    /**\n     * The function is used to render grid content div\n     *\n     * @returns {void}\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.element.querySelector('.' + literals.gridContent);\n        if (div) {\n            this.ariaService.setOptions(this.parent.element.querySelector('.' + literals.content), { busy: false });\n            this.setPanel(div);\n            return;\n        }\n        div = this.parent.createElement('div', { className: literals.gridContent });\n        var innerDiv = this.parent.createElement('div', {\n            className: literals.content\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     *\n     * @returns {void}\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.' + literals.table));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     *\n     * @param {string} id - specifies the id\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstElementChild;\n        if (this.getTable()) {\n            remove(this.getTable());\n        }\n        var table = innerDiv.querySelector('.' + literals.table) ? innerDiv.querySelector('.' + literals.table) :\n            this.parent.createElement('table', {\n                className: literals.table, attrs: {\n                    cellspacing: '0.25px', role: 'grid',\n                    id: this.parent.element.id + id\n                }\n            });\n        this.setColGroup(this.parent.getHeaderTable().querySelector(literals.colGroup).cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement(literals.tbody));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * Refresh the content of the Grid.\n     *\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = this.currentMovableRows || gObj.currentViewData;\n        var contentModule = this.parent.contentModule;\n        var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);\n        var frag = isReact ? gObj.createElement(literals.tbody) : document.createDocumentFragment();\n        if (!this.initialPageRecords) {\n            this.initialPageRecords = extend([], dataSource);\n        }\n        var hdrfrag = isReact ? gObj.createElement(literals.tbody) : document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling\n            && args.requestType === 'infiniteScroll';\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.' + literals.frozenContent);\n        var mCont = this.getPanel().querySelector('.' + literals.movableContent);\n        var cont = this.getPanel().querySelector('.' + literals.content);\n        var tbdy;\n        var tableName;\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                this.emptyVcRows();\n            }\n        }\n        var modelData;\n        if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n            if (this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll'\n                && args.virtualInfo.sentinelInfo.axis === 'X') {\n                modelData = this.parent.contentModule.generateRows(dataSource, args);\n                args.renderMovableContent = true;\n            }\n            modelData = this.parent.contentModule.generateRows(dataSource, args);\n        }\n        else {\n            modelData = this.checkCache(modelData, args);\n            if (!this.isAddRows && !this.useGroupCache) {\n                modelData = this.generator.generateRows(dataSource, args);\n            }\n        }\n        this.setGroupCache(modelData, args);\n        this.parent.notify(events.setInfiniteCache, { isInfiniteScroll: isInfiniteScroll, modelData: modelData, args: args });\n        var idx = modelData[0].cells[0].index;\n        if (isFrozenGrid) {\n            tableName = contentModule.setTbody(modelData, args);\n            tbdy = contentModule.getTbody(tableName);\n        }\n        var isFrozenLeft = this.parent.getFrozenMode() === literals.leftRight && tableName === literals.frozenRight;\n        /* eslint-disable */\n        if (args.requestType !== 'infiniteScroll' && this.parent.registeredTemplate\n            && this.parent.registeredTemplate.template && !args.isFrozen && !isFrozenLeft) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* eslint-enable */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if (this.parent.isReact && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n            this.parent.destroyTemplate(['columnTemplate', 'rowTemplate', 'detailTemplate', 'captionTemplate', 'commandsTemplate']);\n            this.parent.renderTemplates();\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (!isFrozenGrid) {\n            this.tbody = this.getTable().querySelector(literals.tbody);\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m * bSize);\n                            break;\n                        }\n                        else {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m) * bSize;\n                            break;\n                        }\n                    }\n                }\n                if (Math.round(scrollTop + this.contentPanel.firstElementChild.offsetHeight) >=\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        var isVFFrozenOnly = gObj.frozenRows && !gObj.isFrozenGrid() && this.parent.enableVirtualization\n            && args.requestType === 'reorder';\n        if ((gObj.frozenRows && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X') || isVFFrozenOnly) {\n            var bIndex = args.virtualInfo.blockIndexes;\n            var page = args.virtualInfo.page;\n            args.virtualInfo.blockIndexes = [1, 2];\n            if (isVFFrozenOnly) {\n                args.virtualInfo.page = 1;\n            }\n            var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;\n            var mhdrData = this.vgenerator\n                .generateRows(data, args);\n            mhdrData.splice(this.parent.frozenRows);\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                mhdrData[i].cells.splice(0, this.parent.getFrozenColumns());\n                tr = row.render(mhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            args.virtualInfo.blockIndexes = bIndex;\n            args.virtualInfo.page = page;\n            if (isVFFrozenOnly && args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n        }\n        this.virtualFrozenHdrRefresh(hdrfrag, modelData, row, args, dataSource, columns);\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n                this.setRowsInLazyGroup(modelData[i], i);\n                if (isNullOrUndefined(modelData[i].indent)) {\n                    continue;\n                }\n            }\n            this.setInfiniteVisibleRows(args, modelData[i], tableName);\n            if (isGroupAdaptive(gObj) && this.rows.length >= (gObj.pageSettings.pageSize) && blockLoad) {\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                var isVFreorder = this.ensureFrozenHeaderRender(args);\n                if (gObj.frozenRows && i < gObj.frozenRows && !isInfiniteScroll && args.requestType !== 'virtualscroll' && isVFreorder\n                    && this.ensureVirtualFrozenHeaderRender(args)) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = void 0;\n                if (gObj.isReact) {\n                    var isHeader = gObj.frozenRows && i < gObj.frozenRows;\n                    var copied = extend({ index: i }, dataSource[i]);\n                    gObj.getRowTemplate()(copied, gObj, 'rowTemplate', rowTemplateID, null, null, isHeader ? hdrfrag : frag);\n                    gObj.renderTemplates();\n                }\n                else {\n                    elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID);\n                }\n                if (!gObj.isReact && elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        if (!gObj.isReact) {\n                            tr = appendChildren(frag, elements);\n                        }\n                        trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        if (isFrozenGrid) {\n            contentModule.splitRows(tableName);\n        }\n        if ((gObj.frozenRows && args.requestType !== 'virtualscroll' && !isInfiniteScroll && this.ensureVirtualFrozenHeaderRender(args))\n            || (args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'X')) {\n            hdrTbody = isFrozenGrid ? contentModule.getFrozenHeader(tableName) : gObj.getHeaderTable().querySelector(literals.tbody);\n            if (isReact) {\n                var parentTable = hdrTbody.parentElement;\n                remove(hdrTbody);\n                parentTable.appendChild(hdrfrag);\n            }\n            else {\n                hdrTbody.innerHTML = '';\n                hdrTbody.appendChild(hdrfrag);\n            }\n        }\n        if (!gObj.enableVirtualization && gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        args.rows = this.rows.slice(0);\n        if (isFrozenGrid) {\n            contentModule.setIsFrozen(args, tableName);\n        }\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            var isVFTable = _this.parent.enableVirtualization && _this.parent.isFrozenGrid();\n            if (!_this.parent.enableVirtualization && !isInfiniteScroll) {\n                if (_this.parent.isFrozenGrid()) {\n                    remove(contentModule.getTbody(tableName));\n                    tbdy = _this.parent.createElement(literals.tbody);\n                }\n                else {\n                    remove(_this.tbody);\n                    _this.tbody = _this.parent.createElement(literals.tbody);\n                }\n            }\n            if (isFrozenGrid && !isVFTable && !_this.parent.enableInfiniteScrolling) {\n                _this.appendContent(tbdy, frag, args, tableName);\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                if (isVFTable) {\n                    if (args.renderFrozenRightContent) {\n                        var frCont = gObj.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                        _this.appendContent(frCont, frag, args);\n                    }\n                    else if (!args.renderMovableContent) {\n                        _this.appendContent(fCont.querySelector(literals.tbody), frag, args);\n                    }\n                    else {\n                        _this.appendContent(mCont.querySelector(literals.tbody), frag, args);\n                        args.renderMovableContent = false;\n                    }\n                    if (!_this.parent.getFrozenColumns()) {\n                        contentModule.renderNextFrozentPart(args, tableName);\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                        _this.isAddRows = false;\n                        _this.parent.notify(events.removeInfiniteRows, { args: args });\n                        _this.parent.notify(events.appendInfiniteContent, {\n                            tbody: tbdy ? tbdy : _this.tbody, frag: frag, args: args, rows: _this.rows,\n                            rowElements: _this.rowElements, visibleRows: _this.visibleRows,\n                            tableName: tableName\n                        });\n                        if (!frzCols && isFrozenGrid) {\n                            if ((gObj.getFrozenMode() !== literals.leftRight\n                                && (tableName === literals.frozenLeft || tableName === literals.frozenRight))\n                                || (gObj.getFrozenMode() === literals.leftRight\n                                    && (tableName === literals.frozenLeft || tableName === 'movable'))) {\n                                _this.refreshContentRows(extend({}, args));\n                            }\n                        }\n                    }\n                    else {\n                        _this.useGroupCache = false;\n                        _this.appendContent(_this.tbody, frag, args);\n                    }\n                }\n            }\n            if (frzCols) {\n                contentModule.renderNextFrozentPart(args, tableName);\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.emptyVcRows = function () {\n        this.parent.vcRows = [];\n        this.parent.vRows = [];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (isReact) {\n            this.getTable().appendChild(frag);\n        }\n        else {\n            tbody.appendChild(frag);\n            this.getTable().appendChild(tbody);\n        }\n    };\n    ContentRender.prototype.setRowsInLazyGroup = function (row, index) {\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.contentModule.maintainRows(row, index);\n        }\n    };\n    ContentRender.prototype.setGroupCache = function (data, args) {\n        if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {\n            this.parent.notify(events.setGroupCache, { args: args, data: data });\n        }\n    };\n    ContentRender.prototype.ensureFrozenHeaderRender = function (args) {\n        return !((this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) || (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === 'delete'\n            && this.parent.pageSettings.currentPage !== 1));\n    };\n    ContentRender.prototype.ensureVirtualFrozenHeaderRender = function (args) {\n        return !(this.parent.enableVirtualization && args.requestType === 'delete');\n    };\n    ContentRender.prototype.checkCache = function (modelData, args) {\n        if (this.parent.infiniteScrollSettings.enableCache && args.requestType === 'infiniteScroll') {\n            var index = args.isFrozen ? 1 : 0;\n            var frozenCols = this.parent.isFrozenGrid();\n            this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);\n            if (frozenCols && !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.isAddRows = this.infiniteCache[this.parent.pageSettings.currentPage][index].length !== 0;\n            }\n            if (this.isAddRows) {\n                var data = !frozenCols ? this.infiniteCache[this.parent.pageSettings.currentPage]\n                    : this.infiniteCache[this.parent.pageSettings.currentPage][index];\n                modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;\n            }\n            return modelData;\n        }\n        if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length &&\n            (args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n            && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]) {\n            this.useGroupCache = true;\n            return this.parent.contentModule.initialGroupRows(args.requestType === 'reorder');\n        }\n        return null;\n    };\n    ContentRender.prototype.setInfiniteVisibleRows = function (args, data, tableName) {\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache) {\n            if (frozenCols) {\n                if (tableName === literals.frozenLeft || (this.parent.getFrozenMode() === 'Right' && tableName === literals.frozenRight)) {\n                    this.visibleFrozenRows.push(data);\n                }\n                else if (tableName === 'movable') {\n                    this.visibleRows.push(data);\n                }\n                else {\n                    this.rightFreezeRows.push(data);\n                }\n            }\n            else if (!this.parent.infiniteScrollSettings.enableCache) {\n                this.visibleRows.push(data);\n            }\n        }\n    };\n    ContentRender.prototype.getCurrentBlockInfiniteRecords = function (isFreeze) {\n        var data = [];\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            if (!Object.keys(this.infiniteCache).length) {\n                return [];\n            }\n            var frozenCols = this.parent.isFrozenGrid();\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[this.parent.frozenRows].getAttribute(literals.ariaRowIndex), 10);\n            var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);\n            index = parseInt(rows[rows.length - 1].getAttribute(literals.ariaRowIndex), 10);\n            var last = Math.ceil(index / this.parent.pageSettings.pageSize);\n            if (frozenCols) {\n                var idx = isFreeze ? 0 : 1;\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i][idx]\n                        : data.concat(this.infiniteCache[i][idx]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1][idx].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n            else {\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i] : data.concat(this.infiniteCache[i]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n        }\n        return data;\n    };\n    ContentRender.prototype.getReorderedVFRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.getReorderedRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.virtualFrozenHdrRefresh = function (hdrfrag, modelData, row, args, dataSource, columns) {\n        if (this.parent.frozenRows && this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) {\n            var tr = void 0;\n            var fhdrData = [];\n            if (this.parent.isFrozenGrid()) {\n                this.currentMovableRows = dataSource;\n                fhdrData = this.getReorderedVFRows(args);\n            }\n            else {\n                fhdrData = this.getReorderedRows(args);\n            }\n            for (var i = 0; i < fhdrData.length; i++) {\n                tr = row.render(fhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            if (args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n            if (args.renderMovableContent) {\n                this.parent.currentViewData = this.currentMovableRows;\n                this.currentMovableRows = null;\n            }\n        }\n    };\n    ContentRender.prototype.getInfiniteRows = function () {\n        var rows = [];\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling) {\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                var keys = Object.keys(this.infiniteCache);\n                for (var i = 0; i < keys.length; i++) {\n                    rows = !frozenCols ? rows.concat(this.infiniteCache[keys[i]]) : rows.concat(this.infiniteCache[keys[i]][0]);\n                }\n            }\n            else {\n                rows = frozenCols ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return rows;\n    };\n    ContentRender.prototype.getInfiniteMovableRows = function () {\n        var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();\n        var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows\n            : this.visibleRows : [];\n        return infiniteRows;\n    };\n    /**\n     * Get the content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel\n     * @returns {void}\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     *\n     * @param  {Element} table - specifies the table\n     * @returns {void}\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n     */\n    ContentRender.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        var infiniteRows = this.getInfiniteMovableRows();\n        return infiniteRows.length ? infiniteRows : this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     *\n     * @param {Element[]} elements - specifies the elements\n     * @returns {void}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (isFrozenGrid) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            var rightRows = [];\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                rightRows = gObj.getFrozenRightRowsObject();\n            }\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                var rightLen = rightRows.length ? rightRows[i].cells.length : 0;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                for (var k = 0; k < rightLen; k++) {\n                    row.cells.push(rightRows[i].cells[k]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var infiniteData = this.infiniteRowVisibility();\n        var contentrows = infiniteData ? infiniteData\n            : this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (isFrozenGrid) {\n                    if (column.getFreezeTableName() !== 'movable') {\n                        if (column.getFreezeTableName() === literals.frozenRight) {\n                            var left = this.parent.getFrozenLeftColumnsCount();\n                            var movable = this.parent.getMovableColumnsCount();\n                            colIdx = idx = idx - (left + movable);\n                            var colG = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.colGroup);\n                            setStyleAttribute(colG.childNodes[idx], { 'display': displayVal });\n                            contentrows = gObj.getFrozenRightRowsObject();\n                            tr = gObj.getFrozenRightDataRows();\n                        }\n                        else {\n                            setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                            var infiniteFreezeData = this.infiniteRowVisibility(true);\n                            contentrows = infiniteFreezeData ? infiniteFreezeData : this.freezeRows;\n                            tr = gObj.getDataRows();\n                        }\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.' + literals.movableContent).querySelector(literals.colGroup);\n                        colIdx = idx = idx - frzCols - this.parent.getFrozenLeftColumnsCount();\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        var infiniteMovableData = this.infiniteRowVisibility();\n                        contentrows = infiniteMovableData ? infiniteMovableData : this.movableRows;\n                    }\n                }\n                else {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n            }\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, colIdx, displayVal, contentrows);\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @param {Object} tr - specifies the trr\n     * @param {number} idx - specifies the idx\n     * @param {string} displayVal - specifies the displayval\n     * @param {Row<Column>} rows - specifies the rows\n     * @returns {void}\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        setDisplayValue(tr, idx, displayVal, rows, this.parent, this.parent.isRowDragable());\n        this.parent.notify(events.infiniteShowHide, { visible: displayVal, index: idx, isFreeze: this.isInfiniteFreeze });\n    };\n    ContentRender.prototype.infiniteRowVisibility = function (isFreeze) {\n        var infiniteData;\n        if (this.parent.enableInfiniteScrolling) {\n            this.isInfiniteFreeze = isFreeze;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                infiniteData = isFreeze ? this.getCurrentBlockInfiniteRecords(true) : this.getCurrentBlockInfiniteRecords();\n            }\n            else {\n                infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return infiniteData;\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = void 0;\n            if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n                && this.parent.contentModule.isXaxis()) {\n                colGroup = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n            }\n            else {\n                colGroup = this.getHeaderColGroup();\n            }\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.getHeaderColGroup = function () {\n        return this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        this.droppable = new Droppable(gObj.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.droppableDestroy = function () {\n        if (this.droppable && !this.droppable.isDestroyed) {\n            this.droppable.destroy();\n        }\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)\n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector(literals.tbody).innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        this.parent.notify(events.setFreezeSelection, { uid: uid, set: set, clearAll: clearAll });\n        var isFrozen = this.parent.isFrozenGrid();\n        if (isFrozen && this.parent.enableVirtualization) {\n            return;\n        }\n        if (isFrozen) {\n            var rows = this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; });\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].isSelected = set;\n            }\n        }\n        var row = this.getRows().filter(function (row) { return clearAll || uid === row.uid; });\n        for (var j = 0; j < row.length; j++) {\n            row[j].isSelected = set;\n            var cells = row[j].cells;\n            for (var k = 0; k < cells.length; k++) {\n                cells[k].isSelected = set;\n            }\n        }\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getInfiniteRowIndex = function (index) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var fRows = this.parent.frozenRows;\n            var idx = fRows > index ? 0 : fRows;\n            var firstRowIndex = parseInt(this.parent.getRows()[idx].getAttribute(literals.ariaRowIndex), 10);\n            index = fRows > index ? index : (index - firstRowIndex) + fRows;\n        }\n        return index;\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     * @hidden\n     */\n    ContentRender.prototype.immutableModeRendering = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        gObj.hideSpinner();\n        var key = gObj.getPrimaryKeyFieldNames()[0];\n        var oldKeys = {};\n        var newKeys = {};\n        var newRowObjs = [];\n        var oldIndexes = {};\n        var oldRowObjs = gObj.getRowsObject().slice();\n        var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);\n        var newIndexes = {};\n        var hasBatch = Object.keys(batchChangeKeys).length !== 0;\n        if (gObj.getContent().querySelector('.e-emptyrow') || args.requestType === 'reorder'\n            || this.parent.groupSettings.columns.length) {\n            this.refreshContentRows(args);\n        }\n        else {\n            if (gObj.currentViewData.length === 0) {\n                return;\n            }\n            var oldRowElements = {};\n            var tbody = gObj.createElement(literals.tbody);\n            var dataSource = gObj.currentViewData;\n            var trs = [].slice.call(this.getTable().querySelector(literals.tbody).children);\n            if (this.prevCurrentView.length) {\n                var prevLen = this.prevCurrentView.length;\n                var currentLen = dataSource.length;\n                if (prevLen === currentLen) {\n                    for (var i = 0; i < currentLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        newKeys[dataSource[i][key]] = oldKeys[this.prevCurrentView[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n                else {\n                    for (var i = 0; i < currentLen; i++) {\n                        newKeys[dataSource[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                    }\n                    for (var i = 0; i < prevLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldKeys[this.prevCurrentView[i][key]] = i;\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n            }\n            for (var i = 0; i < dataSource.length; i++) {\n                var oldIndex = oldKeys[dataSource[i][key]];\n                if (!isNullOrUndefined(oldIndex)) {\n                    var isEqual = false;\n                    if (this.mutableData) {\n                        isEqual = this.objectEqualityChecker(this.prevCurrentView[oldIndex], dataSource[i]);\n                    }\n                    var tr = oldRowElements[oldRowObjs[oldIndex].uid];\n                    newRowObjs.push(oldRowObjs[oldIndex]);\n                    if (this.rowElements[oldIndex] && this.rowElements[oldIndex].getAttribute('data-uid') === newRowObjs[i].uid\n                        && ((hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                            || (!hasBatch && (isEqual || this.prevCurrentView[oldIndex] === dataSource[i])))) {\n                        if (oldIndex !== i) {\n                            this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                        }\n                        tbody.appendChild(tr);\n                        continue;\n                    }\n                    if ((hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                        || (!this.mutableData && dataSource[i] !== this.prevCurrentView[oldIndex])\n                        || (this.mutableData && !isEqual)) {\n                        oldRowObjs[oldIndex].setRowValue(dataSource[i]);\n                    }\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n                else {\n                    var row = new RowRenderer(this.serviceLocator, null, gObj);\n                    var modelData = this.generator.generateRows([dataSource[i]]);\n                    newRowObjs.push(modelData[0]);\n                    var tr = row.render(modelData[0], gObj.getColumns());\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n            }\n            this.rows = newRowObjs;\n            this.rowElements = [].slice.call(tbody.children);\n            remove(this.getTable().querySelector(literals.tbody));\n            this.getTable().appendChild(tbody);\n            this.parent.trigger(events.dataBound, {}, function () {\n                if (_this.parent.allowTextWrap) {\n                    _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            });\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n        }\n    };\n    ContentRender.prototype.objectEqualityChecker = function (old, next) {\n        var keys = Object.keys(old);\n        var isEqual = true;\n        for (var i = 0; i < keys.length; i++) {\n            if (old[keys[i]] !== next[keys[i]]) {\n                var isDate = old[keys[i]] instanceof Date && next[keys[i]] instanceof Date;\n                if (!isDate || (old[keys[i]].getTime() !== next[keys[i]].getTime())) {\n                    isEqual = false;\n                    break;\n                }\n            }\n        }\n        return isEqual;\n    };\n    ContentRender.prototype.getBatchEditedRecords = function (primaryKey, rows) {\n        var keys = {};\n        var changes = this.parent.getBatchChanges();\n        var changedRecords = [];\n        var addedRecords = [];\n        if (Object.keys(changes).length) {\n            changedRecords = changes.changedRecords;\n            addedRecords = changes.addedRecords;\n        }\n        var args = { cancel: false };\n        this.parent.notify(events.immutableBatchCancel, { rows: rows, args: args });\n        if (addedRecords.length) {\n            if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                rows.splice(rows.length - 1, addedRecords.length);\n            }\n            else {\n                if (!args.cancel) {\n                    rows.splice(0, addedRecords.length);\n                }\n            }\n        }\n        for (var i = 0; i < changedRecords.length; i++) {\n            keys[changedRecords[i][primaryKey]] = i;\n        }\n        return keys;\n    };\n    ContentRender.prototype.refreshImmutableContent = function (index, tr, row) {\n        row.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        if (row.isAltRow) {\n            tr.classList.add('e-altrow');\n        }\n        else {\n            tr.classList.remove('e-altrow');\n        }\n        row.index = index;\n        row.edit = undefined;\n        row.isDirty = false;\n        tr.setAttribute(literals.ariaRowIndex, index.toString());\n        this.updateCellIndex(tr, index);\n    };\n    ContentRender.prototype.updateCellIndex = function (rowEle, index) {\n        for (var i = 0; i < rowEle.cells.length; i++) {\n            rowEle.cells[i].setAttribute('index', index.toString());\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.getElementsByClassName('e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    var result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization\n            && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.' + literals.gridHeader);\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) :\n            this.parent.createElement('div', { className: literals.headerContent });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.' + literals.table));\n        if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.isFrozenGrid() } });\n    };\n    /**\n     * Get the header content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     *\n     * @param  {Element} table - specifies the table element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     *\n     * @returns {Element[]} returns the element\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @param {Element} tableEle - specifies the table Element\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var gObj = this.parent;\n        var isFrozen = gObj.isFrozenGrid();\n        if (this.getTable() && !isFrozen) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        var findHeaderRow = this.createHeaderContent(tblName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement(literals.tbody, { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement(literals.colGroup);\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    /**\n     * @param {Element} tableEle - specifies the column\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var index = 1;\n        var frozenMode = gObj.getFrozenMode();\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        if (frozenMode !== 'Right') {\n            rows = this.ensureColumns(rows);\n        }\n        rows = this.getHeaderCells(rows, tableName);\n        if (frozenMode === 'Right') {\n            index = 0;\n            rows = this.ensureColumns(rows);\n        }\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n            var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n            if (colFreezeMode === 'movable' || (frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight)) {\n                if (frozenMode === 'Right') {\n                    rows[0].cells.pop();\n                }\n                else {\n                    rows[0].cells.shift();\n                }\n            }\n            else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n                rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n            }\n            else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n                rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + literals.colGroup;\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead, tableName);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        var isFrozenLockColumn = !this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered)\n            || (!cols.lockColumn && this.lockColsRendered);\n        var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var left;\n        if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n            left = scrollbar.scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if ((!isFrozen && isLockColumn) || (isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn)) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n                if ((!isFrozen && isStackedLockColumn) || isFrozenStack) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !this.isFirstCol && len !== 1;\n                    var isLaststackedCol = i === (len - 1);\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1, isLaststackedCol && isLastCol, isMovable, tableName);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                isTrue = true;\n                break;\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n        if (isFrozen) {\n            colSpan = this.getFrozenColSpan(columns, tableName, 0);\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n            }\n            else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n                count++;\n            }\n        }\n        return count;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.isFrozenGrid();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table)\n            : this.getTable();\n        var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left'\n            : 'frozen-right' : undefined;\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n            tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n        }\n        if (table) {\n            remove(table);\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement(literals.colGroup);\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable) {\n                this.setTable(table);\n            }\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: frzCols } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({});\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n        }\n        else {\n            if (!gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * CellRenderer class which responsible for building cell content.\n *\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: literals.rowCell, attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     *\n     * @returns {string | Element} returns the string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     *\n     * @param  {Column} column - specifies the column\n     * @param  {Object} value - specifies the value\n     * @param  {Object} data - specifies the data\n     * @returns {string} returns the format\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            if (column.type === 'number' && isNaN(parseInt(value, 10))) {\n                value = null;\n            }\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData, isEdit) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var isReactCompiler = this.parent.isReact && typeof (cell.column.template) !== 'string';\n            var literals_1 = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));\n            var templateID = this.parent.element.id + cell.column.uid;\n            var str = 'isStringTemplate';\n            if (isReactCompiler) {\n                var copied = { 'index': attributes[literals_1[0]] };\n                cell.column.getColumnTemplate()(extend(copied, dummyData), this.parent, 'columnTemplate', templateID, this.parent[str], null, node);\n                this.parent.renderTemplates();\n            }\n            else {\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals_1[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str]);\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n            this.parent.notify('template-result', { template: result });\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     *\n     * @param  {Column} column - specifies the column\n     * @param  {Object} value - specifies the value\n     * @param  {Object} data - specifies the data\n     * @returns {Object} returns the object\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param {Cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {Object} attributes - specifies the attributes\n     * @param {boolean} isExpand - specifies the boolean for expand\n     * @param {boolean} isEdit - specifies the boolean for edit\n     * @returns {Element} returns the element\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes, isExpand, isEdit) {\n        return this.refreshCell(cell, data, attributes, isEdit);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     *\n     * @param {Element} td - specifies the element\n     * @param {Cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {Object} attributes - specifies the attribute\n     * @returns {void}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var isEdit = this.parent.editSettings.mode === 'Batch' && td.classList.contains('e-editedbatchcell');\n        if (this.parent.isReact) {\n            td.innerHTML = '';\n            var cellIndex = td.cellIndex;\n            var parentRow = td.parentElement;\n            remove(td);\n            var newTD = this.refreshCell(cell, data, attributes, isEdit);\n            this.cloneAttributes(newTD, td);\n            if (parentRow.cells.length !== cellIndex - 1) {\n                parentRow.insertBefore(newTD, parentRow.cells[cellIndex]);\n            }\n            else {\n                parentRow.appendChild(newTD);\n            }\n        }\n        else {\n            var node = this.refreshCell(cell, data, attributes, isEdit);\n            td.innerHTML = '';\n            td.setAttribute('aria-label', node.getAttribute('aria-label'));\n            var elements = [].slice.call(node.childNodes);\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                td.appendChild(elem);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CellRenderer.prototype.cloneAttributes = function (target, source) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var attrs = source.attributes;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var i = attrs.length;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var attr;\n        while (i--) {\n            attr = attrs[i];\n            target.setAttribute(attr.name, attr.value);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes, isEdit) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        if (this.evaluate(node, cell, data, attributes, fData, isEdit) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add(literals.gridChkBox);\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     *\n     * @param {Element} node - specifies the node\n     * @param {string|Element} innerHtml - specifies the innerHTML\n     * @param {string} property - specifies the element\n     * @returns {Element} returns the element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @param {HTMLElement} node - specifies the node\n     * @param {cell<Column>} cell - specifies the cell\n     * @param {Object} attributes - specifies the attributes\n     * @returns {void}\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            setStyleAndAttributes(node, { 'data-cell': column.headerText });\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': literals.ariaColIndex };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (cell.isColumnSelected) {\n            classes.push.apply(classes, ['e-columnselection']);\n        }\n        if (cell.cellType === CellType.Header) {\n            attr[prop.colindex] = cell.colIndex;\n        }\n        else if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n *\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     *\n     * @returns {string | Element} returns the element\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param {Cell} cell - specifies the column\n     * @param {Object} data - specifies the data\n     * @param {object} attributes - specifies the aattributes\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Element} node - specifies the noe\n     * @returns {Element} returns the element\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        var hValueAccer;\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (!isNullOrUndefined(column.headerValueAccessor)) {\n            hValueAccer = this.getValue(column.headerText, column);\n        }\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            if (!isNullOrUndefined(hValueAccer)) {\n                value = hValueAccer;\n            }\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                var foreignColumn = this.parent.getForeignKeyColumns();\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field || (foreignColumn.length\n                            && column.foreignKeyValue === this.parent.filterSettings.columns[count].field)) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            //need to pass the template id for blazor headertemplate\n            var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n            var str = 'isStringTemplate';\n            var col = column;\n            var isReactCompiler = this.parent.isReact && typeof (column.headerTemplate) !== 'string';\n            if (isReactCompiler) {\n                var copied = { 'index': colIndex };\n                node.firstElementChild.innerHTML = '';\n                column.getHeaderTemplate()(extend(copied, col), gridObj, 'headerTemplate', headerTempID, this.parent[str], null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                result = column.getHeaderTemplate()(extend({ 'index': colIndex }, col), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n                node.firstElementChild.innerHTML = '';\n                appendChildren(node.firstElementChild, result);\n            }\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.getValue = function (field, column) {\n        return column.headerValueAccessor(field, column);\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     *\n     * @param  {Element} node - specifies the node\n     * @param  {string|Element} innerHtml - specifies the innerHtml\n     * @returns {Element} returns the element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n *\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param {Cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {object} attributes - specifies the attributes\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', {\n            className: 'e-stackedheadercelldiv',\n            attrs: { 'e-mappinguid': cell.column.uid }\n        });\n        var column = cell.column;\n        node.appendChild(div);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            appendChildren(div, column.getHeaderTemplate()(column, this.parent, 'headerTemplate'));\n        }\n        else {\n            this.appendHtml(div, column.headerText, column.getDomSetter());\n        }\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            node.classList.add('e-ellipsistooltip');\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        if (cell.column.customAttributes) {\n            setStyleAndAttributes(node, cell.column.customAttributes);\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = cell.column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n *\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Object} data - specifies the data\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n *\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption',\n            attrs: { id: _this.parent.element.id + 'captioncell', role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Object} data - specifies the GroupedData\n     * @returns {Element} returns the element\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            var isReactCompiler = this.parent.isReact && typeof (gObj.groupSettings.captionTemplate) !== 'string';\n            if (isReactCompiler) {\n                var tempID = gObj.element.id + 'captionTemplate';\n                templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent, 'captionTemplate', tempID, null, null, node);\n                this.parent.renderTemplates();\n            }\n            else if (this.parent.isVue) {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n        }\n        else {\n            if (gObj.groupSettings.enableLazyLoading) {\n                node.innerHTML = cell.column.headerText + ': ' + value;\n            }\n            else {\n                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n            }\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n *\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param {Cell} cell - specifies the cell\n     * @param {Object} data - specifies the Object\n     * @param {string} data.field - Defines the field\n     * @param {string} data.key - Defines the key\n     * @param {number} data.count - Defines the count\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n *\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     *\n     * @param {Cell} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {string} data.field - Defines the field\n     * @param {string} data.key - Defines the key\n     * @param {Object} attr - specifies the attribute\n     * @param {boolean} isExpand - specifies isexpand\n     * @returns {Element} returns the element\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data, attr, isExpand) {\n        var node = this.element.cloneNode();\n        node.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', isExpand ? 'true' : 'false');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', {\n            className: isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' : 'e-icons e-gnextforward e-icon-grightarrow'\n        }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n *\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Object} data - specifies the data\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n *\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Object} data - specifies the data\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n *\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     *\n     * @param {Cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {Object} attributes - specifies the attributes\n     * @returns {Element} returns the element\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n *\n * @hidden\n */\nvar RowDragDropRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropRenderer, _super);\n    function RowDragDropRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowdragdrop',\n            attrs: { role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     *\n     * @param {Cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    RowDragDropRenderer.prototype.render = function (cell, data) {\n        var nodeElement = this.element.cloneNode();\n        nodeElement.appendChild(this.parent.createElement('div', {\n            className: 'e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon'\n        }));\n        if (cell.isSelected) {\n            nodeElement.classList.add('e-selectionbackground');\n            nodeElement.classList.add('e-active');\n        }\n        return nodeElement;\n    };\n    return RowDragDropRenderer;\n}(CellRenderer));\nexport { RowDragDropRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n *\n * @hidden\n */\nvar RowDragDropHeaderRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropHeaderRenderer, _super);\n    function RowDragDropHeaderRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-rowdragheader' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     *\n     * @param  {Cell} cell - specifies the cell\n     * @param  {Object} data - specifies the data\n     * @returns {Element} returns the element\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    RowDragDropHeaderRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return RowDragDropHeaderRenderer;\n}(CellRenderer));\nexport { RowDragDropHeaderRenderer };\n","import { remove, resetBlazorTemplate, blazorTemplates } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifies the serviceLocator\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.counter = 0;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     *\n     * @returns {void}\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        gObj.notify(e.requestType + \"-begin\", e);\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                return;\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                var currentViewData = gObj.getCurrentViewRecords().length;\n                // eslint-disable-next-line max-len\n                if (!(currentViewData - dataLength) && count && ((gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize) === count) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n                && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length\n                && _this.parent.contentModule.getGroupCache()[_this.parent.pageSettings.currentPage]) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                _this.refreshDataManager(args);\n            }\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        if (gObj.pageSettings.template) {\n            resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].template) {\n                blazorTemplates[gObj.element.id + gridColumns[i].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid, 'Template');\n            }\n            if (gridColumns[i].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[i].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[k].columns.length; j++) {\n                if (gObj.aggregates[k].columns[j].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     *\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.parent.notify(events.resetInfiniteBlocks, args);\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().querySelector('.' + literals.content), true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered, args);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1, action: args });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred, args) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred, action: args });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector(literals.tbody);\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement(literals.tbody);\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        var tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: (gObj.getVisibleColumns().length + spanCount).toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (!isNullOrUndefined(columns[i][cFormat])) {\n                columns[i].format = columns[i][cFormat];\n            }\n            if (!isNullOrUndefined(columns[i].validationRules) && !isNullOrUndefined(columns[i].validationRules[equalTo])) {\n                columns[i].validationRules[equalTo][0] = this.parent.element.id + columns[i].validationRules[equalTo][0];\n            }\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[i].format)));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                var isServerRendered = 'isServerRendered';\n                var isServerDateMap = this.parent[isServerRendered] || this.parent.printModule.isPrintGrid();\n                setFormatter(this.locator, columns[i], isServerDateMap);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    /**\n     * @param {ReturnType} e - specifies the return type\n     * @param {NotifyArgs} args - specifies the Notifyargs\n     * @returns {void}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache\n            && (args.requestType === 'delete' || (args.requestType === 'save' && this.parent.infiniteScrollModule.requestType === 'add'));\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            if (_this.isInfiniteEnd(args) && !len) {\n                _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.editReset, {});\n            _this.parent.notify(events.tooltipDestroy, {});\n            _this.contentRenderer.prevCurrentView = _this.parent.currentViewData.slice();\n            gObj.currentViewData = dataArgs.result;\n            gObj.notify(events.refreshInfiniteCurrentViewData, { args: args, data: dataArgs.result });\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                if (_this.parent.groupSettings.enableLazyLoading\n                    && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n                    _this.parent.notify(events.groupComplete, args);\n                }\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n                    _this.updateColumnType(gObj.dataSource[0]);\n                }\n                else {\n                    _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n                }\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[content].scrollTop };\n                }\n                if (!isInfiniteDelete) {\n                    if (_this.parent.enableImmutableMode) {\n                        _this.contentRenderer.immutableModeRendering(args);\n                    }\n                    else {\n                        _this.contentRenderer.refreshContentRows(args);\n                    }\n                }\n                else {\n                    _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                }\n            }\n            else {\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().querySelector('.' + literals.content), false);\n                _this.renderEmptyRow();\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = _this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n            _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n            _this.parent.getDataModule().isQueryInvokedFromData = false;\n        });\n    };\n    /**\n     * @param {object} e - specifies the object\n     * @param {Object[]} e.result - specifies the result\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().querySelector('.' + literals.content), { busy: false, invalid: true });\n        this.setRowCount(1);\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.setRowCount = function (dataRowCount) {\n        this.ariaService.setOptions(this.parent.getHeaderTable(), {\n            rowcount: dataRowCount ? dataRowCount.toString() : '1'\n        });\n    };\n    Render.prototype.isInfiniteEnd = function (args) {\n        return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns, null, this.parent);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.isAutoGen = true;\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.iterateComplexColumns = function (obj, field, split) {\n        var keys = Object.keys(obj);\n        for (var i = 0; i < keys.length; i++) {\n            var childKeys = typeof obj[keys[i]] === 'object' && obj[keys[i]] && !(obj[keys[i]] instanceof Date) ?\n                Object.keys(obj[keys[i]]) : [];\n            if (childKeys.length) {\n                this.iterateComplexColumns(obj[keys[i]], field + (keys[i] + '.'), split);\n            }\n            else {\n                split[this.counter] = field + keys[i];\n                this.counter++;\n            }\n        }\n    };\n    Render.prototype.buildColumns = function (record) {\n        var cols = [];\n        var complexCols = {};\n        this.iterateComplexColumns(record, '', complexCols);\n        var columns = Object.keys(complexCols).filter(function (e) { return complexCols[e] !== 'BlazId'; }).\n            map(function (field) { return complexCols[field]; });\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /**\n     * @param {ReturnType} e - specifies the Return type\n     * @returns {Promise<Object>} returns the object\n     * @hidden\n     */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                predicate.push(new Predicate('field', '==', groups[i].field).and(_this.getPredicate('key', 'equal', groups[i].key)));\n            }\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                rPredicate.push(this.getPredicate(groups[i].field, 'equal', groups[i].key));\n            }\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var dm = new DataManager(untouched);\n        var elements = current;\n        for (var i = 0; i < elements.length; i++) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', elements[i].field).and(this.getPredicate('key', 'equal', elements[i].key))))[0];\n            elements[i].count = uGroup.count;\n            var itemGroup = elements[i].items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                elements[i].items = this.updateGroupInfo(elements[i].items, uGroup.items);\n            }\n            var rows = this.parent.aggregates;\n            for (var j = 0; j < rows.length; j++) {\n                var row = rows[j];\n                for (var k = 0; k < row.columns.length; k++) {\n                    var types = row.columns[k].type instanceof Array ? (row.columns[k].type) :\n                        [(row.columns[k].type)];\n                    for (var l = 0; l < types.length; l++) {\n                        var key = row.columns[k].field + ' - ' + types[l].toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = this.parent;\n                        if (types[l] === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            elements[i].aggregates[key] = row.columns[k].customAggregate ?\n                                row.columns[k].customAggregate\n                                    .call(context, data_1, row.columns[k]) : '';\n                        }\n                        else {\n                            // eslint-disable-next-line max-len\n                            elements[i].aggregates[key] = DataUtil.aggregates[types[l].toLowerCase()](data, row.columns[k].field);\n                        }\n                    }\n                }\n            }\n        }\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n *\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            // eslint-disable-next-line no-throw-literal\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { EventHandler, remove } from '@syncfusion/ej2-base';\nimport { parentsUntil, addBiggerDialog, addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ResponsiveDialogAction } from '../base/enum';\n/**\n *\n * The `ResponsiveDialogRenderer` module is used to render the responsive dialogs.\n */\nvar ResponsiveDialogRenderer = /** @class */ (function () {\n    function ResponsiveDialogRenderer(parent, serviceLocator) {\n        this.sortedCols = [];\n        this.sortPredicate = [];\n        /** @hidden */\n        this.isCustomDialog = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ResponsiveDialogRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: events.filterDialogClose, handler: this.closeCustomDialog },\n            { event: events.refreshCustomFilterOkBtn, handler: this.refreshCustomFilterOkBtn },\n            { event: events.renderResponsiveCmenu, handler: this.renderResponsiveContextMenu },\n            { event: events.filterCmenuSelect, handler: this.renderCustomFilterDiv },\n            { event: events.customFilterClose, handler: this.customExFilterClose },\n            { event: events.refreshCustomFilterClearBtn, handler: this.refreshCustomFilterClearBtn }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.onActionCompleteFn = this.editComplate.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    ResponsiveDialogRenderer.prototype.customExFilterClose = function () {\n        this.isCustomDlgRender = false;\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDiv = function () {\n        var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n        var title = header.querySelector('.e-dlg-custom-header');\n        var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n        this.isCustomDlgRender = true;\n        this.parent.filterModule.filterModule.closeDialog();\n        this.saveBtn.element.style.display = '';\n        this.refreshCustomFilterOkBtn({ disabled: false });\n        this.backBtn.element.style.display = 'none';\n        closeBtn.style.display = '';\n        title.innerHTML = this.parent.localeObj.getConstant('CustomFilter');\n        var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n        this.customExcelFilterParent = this.parent.createElement('div', { className: 'e-xl-customfilterdiv e-default-filter' });\n        content.appendChild(this.customExcelFilterParent);\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContextMenu = function (args) {\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n            var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n            var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n            var text = header.querySelector('.e-dlg-custom-header');\n            if (args.isOpen) {\n                content.firstChild.style.display = 'none';\n                content.appendChild(args.target);\n                closeBtn.style.display = 'none';\n                this.saveBtn.element.style.display = 'none';\n                this.filterClearBtn.element.style.display = 'none';\n                text.innerHTML = args.header;\n                var backBtn = this.parent.createElement('button');\n                var span = this.parent.createElement('span', { className: 'e-btn-icon e-resfilterback e-icons' });\n                backBtn.appendChild(span);\n                this.backBtn = new Button({\n                    cssClass: 'e-res-back-btn'\n                });\n                this.backBtn.appendTo(backBtn);\n                text.parentElement.insertBefore(backBtn, text);\n            }\n            else if (this.backBtn && !this.isCustomDlgRender) {\n                content.firstChild.style.display = '';\n                remove(this.backBtn.element);\n                closeBtn.style.display = '';\n                this.saveBtn.element.style.display = '';\n                if (this.isFiltered) {\n                    this.filterClearBtn.element.style.display = '';\n                }\n                text.innerHTML = this.getHeaderTitle({ action: ResponsiveDialogAction.isFilter }, args.col);\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterClearBtn = function (args) {\n        if (this.filterClearBtn) {\n            this.isFiltered = args.isFiltered;\n            this.filterClearBtn.element.style.display = args.isFiltered ? '' : 'none';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterOkBtn = function (args) {\n        if (this.saveBtn) {\n            this.saveBtn.disabled = args.disabled;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContent = function (col) {\n        var _this = this;\n        var gObj = this.parent;\n        if (col) {\n            this.filterParent = this.parent.createElement('div', { className: 'e-mainfilterdiv e-default-filter', id: col.uid + '-main-filter' });\n            return this.filterParent;\n        }\n        else {\n            var cols = gObj.getColumns();\n            this.customColumnDiv = gObj.createElement('div', { className: 'columndiv', styles: 'width: 100%' });\n            var sortBtnParent = gObj.createElement('div', { className: 'e-ressortbutton-parent' });\n            var filteredCols = [];\n            var isSort = this.action === ResponsiveDialogAction.isSort;\n            var isFilter = this.action === ResponsiveDialogAction.isFilter;\n            if (isFilter) {\n                for (var i = 0; i < gObj.filterSettings.columns.length; i++) {\n                    filteredCols.push(gObj.filterSettings.columns[i].field);\n                }\n            }\n            for (var i = 0; i < cols.length; i++) {\n                if (!cols[i].visible || (!cols[i].allowSorting && isSort) || (!cols[i].allowFiltering && isFilter)) {\n                    continue;\n                }\n                var cDiv = gObj.createElement('div', { className: 'e-responsivecoldiv' });\n                cDiv.setAttribute('data-e-mappingname', cols[i].field);\n                cDiv.setAttribute('data-e-mappinguid', cols[i].uid);\n                var span = gObj.createElement('span', { innerHTML: cols[i].headerText, className: 'e-res-header-text' });\n                cDiv.appendChild(span);\n                this.customColumnDiv.appendChild(cDiv);\n                if (isSort) {\n                    var fields = this.getSortedFieldsAndDirections('field');\n                    var index = fields.indexOf(cols[i].field);\n                    var button = gObj.createElement('button', { id: gObj.element.id + cols[i].field + 'sortbutton' });\n                    var clone = sortBtnParent.cloneNode();\n                    clone.appendChild(button);\n                    cDiv.appendChild(clone);\n                    var btnObj = new Button({\n                        cssClass: 'e-ressortbutton'\n                    });\n                    btnObj.appendTo(button);\n                    button.innerHTML = index > -1 ? this.parent.sortSettings.columns[index].direction : 'None';\n                    button.onclick = function (e) {\n                        _this.sortButtonClickHandler(e.target);\n                    };\n                }\n                if (isFilter && filteredCols.indexOf(cols[i].field) > -1) {\n                    var divIcon = gObj.createElement('div', { className: 'e-icons e-res-icon e-filtersetdiv' });\n                    var iconSpan = gObj.createElement('span', { className: 'e-icons e-res-icon e-filterset' });\n                    iconSpan.setAttribute('colType', cols[i].type);\n                    divIcon.appendChild(iconSpan);\n                    cDiv.appendChild(divIcon);\n                }\n            }\n            EventHandler.add(this.customColumnDiv, 'click', this.customFilterColumnClickHandler, this);\n            return this.customColumnDiv;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getSortedFieldsAndDirections = function (name) {\n        var fields = [];\n        for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n            fields.push(this.parent.sortSettings.columns[i][name]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.sortButtonClickHandler = function (target) {\n        if (target) {\n            var columndiv = parentsUntil(target, 'e-responsivecoldiv');\n            var field = columndiv.getAttribute('data-e-mappingname');\n            if (!this.parent.allowMultiSorting) {\n                this.sortPredicate = [];\n                this.sortedCols = [];\n                this.isSortApplied = false;\n                this.resetSortButtons(target);\n            }\n            var txt = target.textContent;\n            var direction = txt === 'None' ? 'Ascending' : txt === 'Ascending' ? 'Descending' : 'None';\n            target.innerHTML = direction;\n            this.setSortedCols(field, direction);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.resetSortButtons = function (target) {\n        var buttons = [].slice.call(this.customColumnDiv.getElementsByClassName('e-ressortbutton'));\n        for (var i = 0; i < buttons.length; i++) {\n            if (buttons[i] !== target) {\n                buttons[i].innerHTML = 'None';\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setSortedCols = function (field, direction) {\n        var fields = this.getCurrentSortedFields();\n        var index = fields.indexOf(field);\n        if (this.parent.allowMultiSorting && index > -1) {\n            this.sortedCols.splice(index, 1);\n            this.sortPredicate.splice(index, 1);\n        }\n        this.isSortApplied = true;\n        if (direction !== 'None') {\n            this.sortedCols.push(field);\n            this.sortPredicate.push({ field: field, direction: direction });\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getCurrentSortedFields = function () {\n        var fields = [];\n        for (var i = 0; i < this.sortedCols.length; i++) {\n            fields.push(this.sortedCols[i]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.customFilterColumnClickHandler = function (e) {\n        if (this.action !== ResponsiveDialogAction.isFilter) {\n            return;\n        }\n        var gObj = this.parent;\n        var target = e.target;\n        if (gObj.filterSettings.type !== 'FilterBar') {\n            if (target.classList.contains('e-responsivecoldiv') || target.parentElement.classList.contains('e-responsivecoldiv')) {\n                var field = target.getAttribute('data-e-mappingname');\n                if (!field) {\n                    field = target.parentElement.getAttribute('data-e-mappingname');\n                }\n                if (field) {\n                    var col = gObj.getColumnByField(field);\n                    this.isRowResponsive = true;\n                    this.showResponsiveDialog(col);\n                }\n            }\n            else if (target.classList.contains('e-filterset') || target.parentElement.classList.contains('e-filtersetdiv')) {\n                var colDiv = parentsUntil(target, 'e-responsivecoldiv');\n                if (colDiv) {\n                    var field = colDiv.getAttribute('data-e-mappingname');\n                    var col = gObj.getColumnByField(field);\n                    if (col.filter.type === 'Menu' || (!col.filter.type && gObj.filterSettings.type === 'Menu')) {\n                        this.isDialogClose = true;\n                    }\n                    this.parent.filterModule.filterModule.clearCustomFilter(col);\n                    this.removeCustomDlgFilterEle(target);\n                }\n            }\n        }\n    };\n    /**\n     * Function to show the responsive dialog\n     *\n     * @param {Column} col - specifies the column\n     * @returns {void}\n     */\n    ResponsiveDialogRenderer.prototype.showResponsiveDialog = function (col) {\n        if (this.isCustomDialog && this.action === ResponsiveDialogAction.isFilter && !this.isRowResponsive) {\n            this.renderCustomFilterDialog();\n        }\n        else {\n            this.filteredCol = col;\n            this.renderResponsiveDialog(col);\n            if (this.parent.enableAdaptiveUI && col) {\n                this.parent.filterModule.setFilterModel(col);\n                this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(col, undefined));\n            }\n            if (this.action === ResponsiveDialogAction.isSort) {\n                var args = {\n                    cancel: false, dialogObj: this.customResponsiveDlg, requestType: 'beforeOpenAptiveSortDialog'\n                };\n                this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            this.customResponsiveDlg.show(true);\n            this.customResponsiveDlg.element.style.maxHeight = '100%';\n            this.setTopToChildDialog(this.customResponsiveDlg.element);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setTopToChildDialog = function (dialogEle) {\n        var child = dialogEle.querySelector('.e-dialog');\n        if (child) {\n            var top_1 = dialogEle.querySelector('.e-dlg-header-content').getBoundingClientRect().height;\n            child.style.top = top_1 + 'px';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'customfilter', className: 'e-customfilterdiv e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customFilterDlg = this.getDialogOptions(col, true);\n        var args = {\n            cancel: false, dialogObj: this.customFilterDlg, requestType: 'beforeOpenAptiveFilterDialog'\n        };\n        this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n        if (args.cancel) {\n            return;\n        }\n        this.customFilterDlg.appendTo(outerDiv);\n        this.customFilterDlg.show(true);\n        this.customFilterDlg.element.style.maxHeight = '100%';\n    };\n    ResponsiveDialogRenderer.prototype.getDialogOptions = function (col, isCustomFilter, id) {\n        var options = new Dialog({\n            isModal: true,\n            showCloseIcon: true,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            target: this.parent.adaptiveDlgTarget ? this.parent.adaptiveDlgTarget : document.body,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            content: this.renderResponsiveContent(col),\n            open: this.dialogOpen.bind(this),\n            created: this.dialogCreated.bind(this),\n            close: this.beforeDialogClose.bind(this),\n            width: '100%',\n            height: '100%',\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        options[isStringTemplate] = true;\n        if (isCustomFilter) {\n            options.header = this.renderResponsiveHeader(col, undefined, true);\n            options.cssClass = 'e-customfilter';\n        }\n        else {\n            options.header = this.renderResponsiveHeader(col);\n            options.cssClass = this.parent.rowRenderingMode === 'Vertical' && this.action === ResponsiveDialogAction.isFilter\n                ? 'e-res' + id + ' e-row-responsive-filter' : 'e-res' + id;\n        }\n        return options;\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var id = this.action === ResponsiveDialogAction.isFilter ? 'filter' : 'sort';\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'responsive' + id, className: 'e-res' + id + 'div e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customResponsiveDlg = this.getDialogOptions(col, false, id);\n        this.customResponsiveDlg.appendTo(outerDiv);\n    };\n    ResponsiveDialogRenderer.prototype.dialogCreated = function () {\n        addBiggerDialog(this.parent);\n    };\n    ResponsiveDialogRenderer.prototype.dialogOpen = function () {\n        if (this.action === ResponsiveDialogAction.isSort && this.parent.allowMultiSorting) {\n            for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n                this.sortedCols.push(this.parent.sortSettings.columns[i].field);\n                var sortField = this.parent.sortSettings.columns[i].field;\n                var sortDirection = this.parent.sortSettings.columns[i].direction;\n                this.sortPredicate.push({ field: sortField, direction: sortDirection });\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.beforeDialogClose = function (args) {\n        this.isDialogClose = args.element && !args.element.querySelector('.e-xl-customfilterdiv')\n            && args.element.classList.contains('e-resfilterdiv');\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            if (args.element.classList.contains('e-resfilterdiv')) {\n                this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender);\n            }\n            else if (args.element.classList.contains('e-customfilterdiv')) {\n                this.closeCustomFilter();\n            }\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.closeCustomDialog();\n        }\n        this.parent.off(events.enterKeyHandler, this.keyHandler);\n    };\n    ResponsiveDialogRenderer.prototype.sortColumn = function () {\n        if (!this.isSortApplied) {\n            this.closeCustomDialog();\n            return;\n        }\n        if (this.sortPredicate.length) {\n            this.parent.setProperties({ sortSettings: { columns: [] } }, true);\n        }\n        for (var i = 0; i < this.sortPredicate.length; i++) {\n            this.parent.sortColumn(this.sortPredicate[i].field, this.sortPredicate[i].direction, this.parent.allowMultiSorting);\n        }\n        if (!this.sortPredicate.length) {\n            this.parent.clearSorting();\n        }\n        this.closeCustomDialog();\n    };\n    ResponsiveDialogRenderer.prototype.getHeaderTitle = function (args, col) {\n        var gObj = this.parent;\n        var title;\n        if (this.action === ResponsiveDialogAction.isEdit) {\n            title = gObj.localeObj.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n        }\n        else if (this.action === ResponsiveDialogAction.isAdd) {\n            title = gObj.localeObj.getConstant('AddFormTitle');\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            title = col ? col.headerText || col.field : gObj.localeObj.getConstant('FilterButton');\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            title = gObj.localeObj.getConstant('Sort');\n        }\n        return title;\n    };\n    ResponsiveDialogRenderer.prototype.getDialogName = function (action) {\n        var name;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            name = 'dialogEdit_wrapper_title';\n        }\n        else if (action === ResponsiveDialogAction.isFilter) {\n            name = 'responsive_filter_dialog_wrapper';\n        }\n        return name;\n    };\n    ResponsiveDialogRenderer.prototype.getButtonText = function (action) {\n        var text;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            text = 'Save';\n        }\n        else if (action === ResponsiveDialogAction.isFilter || this.action === ResponsiveDialogAction.isSort) {\n            text = 'OKButton';\n        }\n        return text;\n    };\n    /**\n     * Function to render the responsive header\n     *\n     * @param {Column} col - specifies the column\n     * @param {ResponsiveDialogArgs} args - specifies the responsive dialog arguments\n     * @param {boolean} isCustomFilter - specifies whether it is custom filter or not\n     * @returns {HTMLElement | string} returns the html element or string\n     */\n    ResponsiveDialogRenderer.prototype.renderResponsiveHeader = function (col, args, isCustomFilter) {\n        var _this = this;\n        var gObj = this.parent;\n        gObj.on(events.enterKeyHandler, this.keyHandler, this);\n        var id = gObj.element.id + this.getDialogName(this.action);\n        var header = gObj.createElement('div', { className: 'e-res-custom-element' });\n        var titleDiv = gObj.createElement('div', { className: 'e-dlg-custom-header', id: id });\n        titleDiv.innerHTML = this.getHeaderTitle(args, col);\n        header.appendChild(titleDiv);\n        var saveBtn = gObj.createElement('button');\n        if (!isCustomFilter) {\n            this.saveBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-apply-btn'\n            });\n            saveBtn.innerHTML = gObj.localeObj.getConstant(this.getButtonText(this.action));\n            this.saveBtn.appendTo(saveBtn);\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            saveBtn.onclick = function (e) {\n                _this.dialogHdrBtnClickHandler();\n            };\n        }\n        var isSort = this.action === ResponsiveDialogAction.isSort;\n        var isFilter = this.action === ResponsiveDialogAction.isFilter;\n        if (isFilter || isSort) {\n            var id_1 = isSort ? 'sort' : 'filter';\n            var clearBtn = gObj.createElement('button');\n            this.filterClearBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-' + id_1 + '-clear-btn'\n            });\n            if (isFilter) {\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-icon-filter-clear e-icons' });\n                clearBtn.appendChild(span);\n            }\n            else {\n                clearBtn.innerHTML = gObj.localeObj.getConstant('Clear');\n            }\n            header.appendChild(clearBtn);\n            this.filterClearBtn.appendTo(clearBtn);\n            clearBtn.onclick = function (e) {\n                if ((parentsUntil(e.target, 'e-customfilter'))) {\n                    _this.parent.filterModule.clearFiltering();\n                    _this.removeCustomDlgFilterEle();\n                }\n                else {\n                    if (isFilter) {\n                        _this.filterClear();\n                    }\n                    else {\n                        _this.resetSortButtons();\n                        _this.sortedCols = [];\n                        _this.sortPredicate = [];\n                        _this.isSortApplied = true;\n                    }\n                }\n            };\n            header.appendChild(clearBtn);\n        }\n        if (!isCustomFilter) {\n            header.appendChild(saveBtn);\n        }\n        return header;\n    };\n    ResponsiveDialogRenderer.prototype.filterClear = function () {\n        this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);\n        this.parent.filterModule.filterModule.closeResponsiveDialog();\n    };\n    ResponsiveDialogRenderer.prototype.dialogHdrBtnClickHandler = function () {\n        if (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd) {\n            this.parent.endEdit();\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            this.parent.filterModule.filterModule.applyCustomFilter({ col: this.filteredCol, isCustomFilter: this.isCustomDlgRender });\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortColumn();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomDialog = function () {\n        if (this.isCustomDlgRender) {\n            var mainfilterdiv = this.customResponsiveDlg.element.querySelector('.e-mainfilterdiv');\n            remove(mainfilterdiv);\n            return;\n        }\n        this.isRowResponsive = false;\n        this.isCustomDlgRender = false;\n        this.destroyCustomFilterDialog();\n    };\n    ResponsiveDialogRenderer.prototype.destroyCustomFilterDialog = function () {\n        if (!this.customResponsiveDlg) {\n            return;\n        }\n        var elem = document.getElementById(this.customResponsiveDlg.element.id);\n        if (this.customResponsiveDlg && !this.customResponsiveDlg.isDestroyed && elem) {\n            this.customResponsiveDlg.destroy();\n            remove(elem);\n        }\n        this.closeCustomFilter();\n        if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortPredicate = [];\n            this.sortedCols = [];\n            this.isSortApplied = false;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomFilter = function () {\n        if (!this.isDialogClose && this.customFilterDlg) {\n            var customEle = document.getElementById(this.customFilterDlg.element.id);\n            if (this.customFilterDlg && !this.customFilterDlg.isDestroyed && customEle) {\n                this.customFilterDlg.destroy();\n                remove(customEle);\n            }\n        }\n        this.isCustomDialog = false;\n        this.isDialogClose = false;\n    };\n    ResponsiveDialogRenderer.prototype.removeCustomDlgFilterEle = function (target) {\n        if (target) {\n            if (target.parentElement.classList.contains('e-filtersetdiv')) {\n                remove(target.parentElement);\n            }\n            else {\n                remove(target);\n            }\n        }\n        else {\n            var child = this.customColumnDiv.children;\n            for (var i = 0; i < child.length; i++) {\n                target = child[i].querySelector('.e-filtersetdiv');\n                if (target) {\n                    remove(target);\n                    i--;\n                }\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.keyHandler = function (e) {\n        if (e.keyCode === 13 && ((this.action === ResponsiveDialogAction.isFilter\n            && e.target.classList.contains('e-searchinput'))\n            || (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd))) {\n            this.dialogHdrBtnClickHandler();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.editComplate = function (args) {\n        if (args.requestType === 'save' || args.requestType === 'cancel') {\n            this.parent.off(events.enterKeyHandler, this.keyHandler);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.removeEventListener = function () {\n        if (this.customColumnDiv) {\n            EventHandler.remove(this.customColumnDiv, 'click', this.customFilterColumnClickHandler);\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.parent.removeEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    return ResponsiveDialogRenderer;\n}());\nexport { ResponsiveDialogRenderer };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogRenderer } from '../renderer/responsive-dialog-renderer';\n/**\n * ServiceLocator\n *\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            // eslint-disable-next-line no-throw-literal\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    ServiceLocator.prototype.registerAdaptiveService = function (type, isAdaptiveUI, action) {\n        if (isAdaptiveUI) {\n            type.responsiveDialogRenderer = new ResponsiveDialogRenderer(type.parent, type.serviceLocator);\n            type.responsiveDialogRenderer.action = action;\n        }\n        else {\n            if (type.responsiveDialogRenderer) {\n                type.responsiveDialogRenderer.removeEventListener();\n                type.responsiveDialogRenderer = undefined;\n            }\n        }\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n *\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            // eslint-disable-next-line no-throw-literal\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged, preventFrozenScrollRefresh } from '../base/constant';\nimport { Column } from '../models/column';\nimport { parentsUntil, ispercentageWidth, getScrollBarWidth } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * ColumnWidthService\n *\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        var columns = this.parent.getColumns();\n        for (var j = 0; j < columns.length; j++) {\n            this.setColumnWidth(columns[j], wFlag && this.parent.enableColumnVirtualization ? undefined : j + i);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            this.setColumnWidth(new Column({ width: '30px' }), columns.length);\n        }\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto' &&\n                typeof (this.parent.width) === 'string' && this.parent.width.indexOf('%') === -1) {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            else {\n                difference = this.parent.element.getBoundingClientRect().width - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                var index = this.parent.getColumnIndexByField(collection[i].field) + this.parent.getIndentCount();\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, index);\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', index, true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        if (this.parent.getColumns().length < 1) {\n            return;\n        }\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        if (this.parent.groupSettings.columns.length > index && ispercentageWidth(this.parent)) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = (30 / elementWidth * 100).toFixed(1) + '%';\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var isDraggable = this.parent.isRowDragable();\n        frzCols = frzCols && isDraggable ? frzCols + 1 : frzCols;\n        var mHdr = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader);\n        var mCont = this.parent.getContent().querySelector('.' + literals.movableContent);\n        var freezeLeft = this.parent.getFrozenLeftColumnsCount();\n        var freezeRight = this.parent.getFrozenRightColumnsCount();\n        var movableCount = this.parent.getMovableColumnsCount();\n        var isColFrozen = freezeLeft !== 0 || freezeRight !== 0;\n        if (frzCols && index >= frzCols) {\n            if (!mHdr || !mHdr.querySelector(literals.colGroup)) {\n                return;\n            }\n            headerCol = mHdr.querySelector(literals.colGroup).children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mHdr.scrollLeft > 0) {\n            var colGroup = mHdr.querySelector(literals.colGroup);\n            headerCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else if (isColFrozen) {\n            var target = void 0;\n            if (freezeLeft && !freezeRight) {\n                index = isDraggable ? index - 1 : index;\n                target = index < freezeLeft ? header : mHdr;\n            }\n            else if (!freezeLeft && freezeRight) {\n                target = index >= movableCount ? header : mHdr;\n            }\n            else if (freezeLeft && freezeRight) {\n                index = isDraggable ? index - 1 : index;\n                var frHdr = this.parent.getFrozenRightHeader();\n                target = index < freezeLeft ? header : index < (freezeLeft + movableCount) ? mHdr : frHdr;\n            }\n            headerCol = this.getColumnLevelFrozenColgroup(index, freezeLeft, movableCount, target);\n            if (!headerCol) {\n                return;\n            }\n        }\n        else {\n            headerCol = header.querySelector(literals.colGroup).children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = '';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.' + literals.movableContent)\n                .querySelector(literals.colGroup).children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mCont.scrollLeft > 0) {\n            var colGroup = this.parent.getContent().querySelector('.' + literals.movableContent)\n                .querySelector(literals.colGroup);\n            contentCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else if (isColFrozen) {\n            var target = void 0;\n            if (freezeLeft && !freezeRight) {\n                target = index < freezeLeft ? content : mCont;\n            }\n            if (!freezeLeft && freezeRight) {\n                target = index >= movableCount ? content : mCont;\n            }\n            if (freezeLeft && freezeRight) {\n                var frCont = this.parent.getContent().querySelector('.e-frozen-right-content');\n                target = index < freezeLeft ? content : index < (freezeLeft + movableCount) ? mCont : frCont;\n            }\n            contentCol = this.getColumnLevelFrozenColgroup(index, freezeLeft, movableCount, target);\n        }\n        else {\n            contentCol = content.querySelector(literals.colGroup).children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = '';\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n            var editTableCol = [];\n            for (var i = 0; i < edit.length; i++) {\n                if (parentsUntil(edit[i], 'e-grid').id === this.parent.element.id) {\n                    for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                        editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n                    }\n                }\n            }\n            if (edit.length && editTableCol.length) {\n                editTableCol[index].style.width = fWidth;\n            }\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshFrozenScrollbar();\n        }\n    };\n    ColumnWidthService.prototype.getColumnLevelFrozenColgroup = function (index, left, movable, ele) {\n        if (!ele || !ele.querySelector(literals.colGroup)) {\n            return null;\n        }\n        var columns = this.parent.getColumns();\n        var isDrag = this.parent.isRowDragable();\n        var frzMode = this.parent.getFrozenMode();\n        var headerCol;\n        var colGroup = [].slice.call(ele.querySelector(literals.colGroup).children);\n        if (frzMode === 'Right' && isDrag && index === (movable + this.parent.getFrozenRightColumnsCount())) {\n            headerCol = colGroup[colGroup.length - 1];\n        }\n        else if (isDrag && index === -1) {\n            headerCol = colGroup[0];\n        }\n        else if (columns[index].freeze === 'Left') {\n            headerCol = colGroup[isDrag ? (index + 1) : index];\n        }\n        else if (columns[index].freeze === 'Right') {\n            headerCol = colGroup[index - (left + movable)];\n        }\n        else {\n            headerCol = colGroup[index - left];\n        }\n        return headerCol;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnWidthService.prototype.refreshFrozenScrollbar = function () {\n        var args = { cancel: false };\n        this.parent.notify(preventFrozenScrollRefresh, args);\n        if (args.cancel) {\n            return;\n        }\n        var scrollWidth = getScrollBarWidth();\n        var frozenScrollbar = this.parent.element.querySelector('.e-frozenscrollbar');\n        var movableScrollbar = this.parent.element.querySelector('.e-movablescrollbar');\n        var frozencontent = this.parent.getContent().querySelector('.' + literals.frozenContent);\n        var movableContent = this.parent.getContent().querySelector('.' + literals.movableContent);\n        var frozenWidth = frozencontent.firstElementChild.getBoundingClientRect().width;\n        var movableWidth = movableContent.firstElementChild.getBoundingClientRect().width;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenWidth = frozenWidth + scrollWidth;\n        }\n        frozenScrollbar.style.width = frozenWidth + 'px';\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            var frozenRightScrollbar = this.parent.element.querySelector('.e-frozen-right-scrollbar');\n            var frozenRightWidth = this.parent.getContent().querySelector('.e-frozen-right-content')\n                .firstElementChild.getBoundingClientRect().width;\n            if (this.parent.height !== 'auto') {\n                frozenRightWidth = frozenRightWidth + scrollWidth;\n            }\n            frozenRightScrollbar.style.width = frozenRightWidth + 'px';\n        }\n        else {\n            if (this.parent.enableColumnVirtualization) {\n                var placeHolder = this.parent.getMovableVirtualContent().querySelector('.e-virtualtrack');\n                if (placeHolder) {\n                    movableWidth = placeHolder.scrollWidth;\n                }\n            }\n            if (this.parent.getFrozenMode() !== 'Right' && this.parent.height !== 'auto') {\n                movableWidth = movableWidth + scrollWidth;\n            }\n        }\n        movableScrollbar.firstElementChild.style.width = movableWidth + 'px';\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = [literals.gridHeader, literals.gridFooter, 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (this.parent.isFrozenGrid() && isNullOrUndefined(column.width) &&\n            (column.getFreezeTableName() === literals.frozenLeft || column.getFreezeTableName() === literals.frozenRight)) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        var left = this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenColumns();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (tableType === 'movable') {\n            if (right) {\n                columns.splice(left + movable, columns.length);\n            }\n            if (left) {\n                columns.splice(0, left);\n            }\n        }\n        else if (tableType === 'freeze-left') {\n            columns.splice(left, columns.length);\n        }\n        else if (tableType === 'freeze-right') {\n            columns.splice(0, left + movable);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenRightTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze-right');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        var headerTbl = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('.' + literals.table);\n        var cntTbl = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.' + literals.table);\n        headerTbl.style.width = freezeWidth;\n        cntTbl.style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenLeftTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze-left');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        if (this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.' + literals.movableContent).firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.isFrozenGrid()) {\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                this.setWidthToFrozenLeftTable();\n            }\n            this.setWidthToMovableTable();\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.setWidthToFrozenRightTable();\n            }\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            tWidth = this.isAutoResize() ? '100%' : tWidth;\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    ColumnWidthService.prototype.isAutoResize = function () {\n        return this.parent.allowResizing && this.parent.resizeSettings.mode === 'Auto';\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\nimport { Row } from '../models/row';\nimport { RowModelGenerator } from './row-model-generator';\nimport { parentsUntil, addRemoveEventListener } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * FocusStrategy class\n *\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = false;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.refMatrix = this.refreshMatrix(true);\n        this.actions = ['downArrow', 'upArrow'];\n        this.isVirtualScroll = false;\n        this.parent = parent;\n        this.rowModelGen = new RowModelGenerator(this.parent);\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(!this.parent.enableHeaderFocus && this.parent.frozenRows === 0, this.parent.isFrozenGrid());\n        if (!this.parent.enableHeaderFocus && !this.parent.getCurrentViewRecords().length && ((this.parent.editSettings.mode !== 'Batch')\n            || (this.parent.editSettings.mode === 'Batch' && !this.parent.editModule.getBatchChanges()[literals.addedRecords].length))) {\n            this.getContent().matrix.\n                generate(this.rowModelGen.generateRows({ rows: [new Row({ isDataRow: true })] }), this.getContent().selector, false);\n        }\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        if (parentsUntil(e.target, 'e-filterbarcell') &&\n            e.target.classList.contains('e-input-group-icon')) {\n            return;\n        }\n        var isContent = !isNullOrUndefined(closest(e.target, '.' + literals.gridContent));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.' + literals.gridHeader));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.' + literals.frozenContent)) ||\n            !isNullOrUndefined(closest(e.target, '.' + literals.frozenHeader));\n        var isFrozenRight = false;\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            isFrozenRight = !isNullOrUndefined(closest(e.target, '.e-frozen-right-content')) ||\n                !isNullOrUndefined(closest(e.target, '.e-frozen-right-header'));\n            isFrozen = isFrozen && !isFrozenRight;\n        }\n        if (!isContent && isNullOrUndefined(closest(e.target, '.' + literals.gridHeader)) ||\n            e.target.classList.contains(literals.content) ||\n            !isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            return;\n        }\n        this.setActive(isContent, isFrozen, isFrozenRight);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.' + literals.gridHeader))) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen, isFrozenRight);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        this.activeKey = e.action;\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen, swapInfo.toFrozenRight);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.content.lastIdxCell ? false : this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown', 'altDownArrow'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        var th = closest(target, 'th') && !closest(target, 'th').tabIndex;\n        if (e.target.classList.contains('e-filterbaroperator') && (e.keyCode === 13 || e.keyCode === 27)) {\n            var inputTarget = closest(e.target, '.e-filterbarcell');\n            inputTarget.querySelector('input').focus();\n        }\n        if (th && closest(document.activeElement, '.e-filterbarcell') !== null) {\n            this.removeFocus();\n        }\n        var filterCell = closest(document.activeElement, '.e-filterbarcell') !== null;\n        if (this.parent.enableHeaderFocus && filterCell) {\n            var matrix = this.active.matrix;\n            var current = matrix.current;\n            filterCell = matrix.matrix[current[0]].lastIndexOf(1) !== current[1];\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (filterCell ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.' + literals.gridContent) === null && closest(target, '.' + literals.gridHeader) === null)\n            || (e.action === 'space' && (!target.classList.contains(literals.gridChkBox) && closest(target, '.' + literals.gridChkBox) === null\n                && closest(target, '.e-headerchkcelldiv') === null))) || closest(target, '.e-filter-popup') !== null;\n    };\n    FocusStrategy.prototype.focusVirtualElement = function (e) {\n        var _this = this;\n        if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var data = { virtualData: {}, isAdd: false, isCancel: false };\n            this.parent.notify(event.getVirtualData, data);\n            var isKeyFocus = this.actions.some(function (value) { return value === _this.activeKey; });\n            var isSelected = this.parent.contentModule ?\n                this.parent.contentModule.selectedRowIndex > -1 : false;\n            if (data.isAdd || Object.keys(data.virtualData).length || isKeyFocus || data.isCancel || isSelected) {\n                this.parent.notify(event.resetVirtualFocus, { isCancel: false });\n                data.isCancel = false;\n                this.parent.contentModule.selectedRowIndex = -1;\n                if (isKeyFocus) {\n                    this.activeKey = this.empty;\n                    this.parent.notify('virtaul-key-handler', e);\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.currentInfo.elementToFocus.focus({ preventScroll: true });\n            }\n            else {\n                if (this.isVirtualScroll) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this.currentInfo.elementToFocus.focus({ preventScroll: true });\n                }\n                else {\n                    this.currentInfo.elementToFocus.focus();\n                }\n            }\n        }\n        this.isVirtualScroll = false;\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen, isFrozenRight) {\n        this.active = content ? isFrozen ? this.fContent : isFrozenRight ? this.frContent : this.content :\n            isFrozen ? this.fHeader : isFrozenRight ? this.frHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element, e) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () {\n            if (!isNullOrUndefined(_this.currentInfo.elementToFocus)) {\n                if (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) {\n                    _this.focusVirtualElement(e);\n                }\n                else {\n                    _this.currentInfo.elementToFocus.focus();\n                }\n            }\n        }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.parent.notify(event.virtaulCellFocus, e);\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    FocusStrategy.prototype.addOutline = function () {\n        var info = this.getContent().getFocusInfo();\n        if (info.element) {\n            addClass([info.element], ['e-focused']);\n            addClass([info.elementToFocus], ['e-focus']);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    FocusStrategy.prototype.focusHeader = function () {\n        this.setActive(false, this.parent.isFrozenGrid());\n        this.resetFocus();\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    FocusStrategy.prototype.focusContent = function () {\n        this.setActive(true, this.parent.isFrozenGrid());\n        this.resetFocus();\n    };\n    FocusStrategy.prototype.resetFocus = function () {\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        this.focus();\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus, e);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.frContent && (e.args && e.args.renderFrozenRightContent)) {\n                _this.frContent = new FixedRightContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && (e.args && e.args.renderFrozenRightContent) && !_this.frHeader) {\n                _this.frHeader = new FixedRightHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : (e.args && e.args.renderFrozenRightContent)\n                ? _this.frContent : _this.content : (e.args && e.args.isFrozen) ? _this.fHeader : (e.args && e.args.renderFrozenRightContent)\n                ? _this.frHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            if (_this.parent.isCollapseStateEnabled() && content) {\n                rows = rows.filter(function (x) { return x.visible !== false; });\n            }\n            var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);\n            if (e.name === 'batchAdd' && _this.parent.isFrozenGrid()) {\n                var mRows = _this.parent.getMovableRowsObject();\n                var newMovableRows = mRows.map(function (row) { return row.clone(); });\n                var newFrozenRows = rows.map(function (row) { return row.clone(); });\n                _this.fContent.matrix.generate(newFrozenRows, _this.fContent.selector, isRowTemplate);\n                _this.content.matrix.generate(newMovableRows, _this.content.selector, isRowTemplate);\n                if (_this.parent.getFrozenMode() === literals.leftRight) {\n                    var frRows = _this.parent.getFrozenRightRowsObject();\n                    var newfrRows = frRows.map(function (row) { return row.clone(); });\n                    _this.frContent.matrix.generate(newfrRows, _this.frContent.selector, isRowTemplate);\n                }\n            }\n            else {\n                cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);\n            }\n            cFocus.generateRows(updateRow, {\n                matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader\n                    : (e.args && e.args.renderFrozenRightContent) ? _this.frHeader : _this.header\n            });\n            if (!Browser.isDevice && e && e.args) {\n                if (!_this.focusByClick && e.args.requestType === 'paging') {\n                    _this.skipFocus = false;\n                    _this.parent.element.focus();\n                }\n                if (e.args.requestType === 'grouping') {\n                    _this.skipFocus = true;\n                }\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.isVirtualScroll = true;\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.evtHandlers = [{ event: event.keyPressed, handler: this.onKeyPress },\n            { event: event.click, handler: this.onClick },\n            { event: event.contentReady, handler: this.refMatrix },\n            { event: event.partialRefresh, handler: this.refMatrix },\n            { event: event.refreshExpandandCollapse, handler: this.refMatrix },\n            { event: event.headerRefreshed, handler: this.refreshMatrix() },\n            { event: event.closeEdit, handler: this.restoreFocus },\n            { event: event.restoreFocus, handler: this.restoreFocus },\n            { event: 'start-edit', handler: this.clearIndicator },\n            { event: 'start-add', handler: this.clearIndicator },\n            { event: 'sorting-complete', handler: this.restoreFocus },\n            { event: 'filtering-complete', handler: this.filterfocus },\n            { event: 'grouping-complete', handler: this.restoreFocusWithAction },\n            { event: 'ungrouping-complete', handler: this.restoreFocusWithAction },\n            { event: event.batchAdd, handler: this.refMatrix },\n            { event: event.batchCancel, handler: this.refMatrix },\n            { event: event.batchDelete, handler: this.refMatrix },\n            { event: event.detailDataBound, handler: this.refMatrix },\n            { event: event.onEmpty, handler: this.refMatrix },\n            { event: event.cellFocused, handler: this.internalCellFocus }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    FocusStrategy.prototype.filterfocus = function () {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            this.restoreFocus();\n        }\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.restoreFocusWithAction = function (e) {\n        if (!this.parent.enableInfiniteScrolling) {\n            var matrix = this.getContent().matrix;\n            var current = matrix.current;\n            switch (e.requestType) {\n                case 'grouping':\n                case 'ungrouping':\n                    current[1] = current.length &&\n                        !this.parent.groupSettings.showGroupedColumn && !isNullOrUndefined(matrix.matrix[current[0]]) ?\n                        matrix.matrix[current[0]].indexOf(1) : e.requestType === 'grouping' ? current[1] + 1 : current[1] - 1;\n                    break;\n            }\n            this.getContent().matrix.current = current;\n            this.addFocus(this.getContent().getFocusInfo());\n        }\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget || !Object.keys(this.prevIndexes).length ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (!this.parent.isFrozenGrid() && this.parent.frozenRows === 0) {\n            return;\n        }\n        // eslint-disable-next-line prefer-const\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.isFrozenGrid() }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n *\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        var emptyTable = true;\n        if (isNullOrUndefined(this.matrix[rowIndex])) {\n            return null;\n        }\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && (action === 'downArrow' || action === 'enter')) {\n            navigator[0] = -1;\n        }\n        if (first === null) {\n            for (var i = 0; i < this.rows; i++) {\n                if (this.matrix[i].some(function (v) { return v === 1; })) {\n                    emptyTable = false;\n                    break;\n                }\n            }\n            if (emptyTable) {\n                rowIndex = this.current[0];\n                return [rowIndex, columnIndex];\n            }\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector, isRowTemplate) {\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        for (var i = 0; i < rows.length; i++) {\n            var cells = rows[i].cells.filter(function (c) { return c.isSpanned !== true; });\n            this.columns = Math.max(cells.length - 1, this.columns | 0);\n            for (var j = 0; j < cells.length; j++) {\n                this.set(i, j, rows[i].visible === false ? false : selector(rows[i], cells[j], isRowTemplate));\n            }\n        }\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.lastIdxCell = false;\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.isFrozenGrid() ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString() || (this.matrix.current[0] === this.matrix.rows &&\n                this.matrix.current.toString() === current.toString())) {\n                return false;\n            }\n            else {\n                current = this.editNextRow(current[0], current[1], e.action);\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.editNextRow = function (rowIndex, cellIndex, action) {\n        var gObj = this.parent;\n        var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);\n        var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);\n        var cell = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (action === 'tab' && editNextRow) {\n            rowIndex++;\n            var index = (this.getTable().rows[rowIndex].getElementsByClassName('e-indentcell').length +\n                this.getTable().rows[rowIndex].getElementsByClassName('e-detailrowcollapse').length);\n            cellIndex = visibleIndex + index;\n        }\n        if (action === 'shiftTab' && editNextRow) {\n            rowIndex--;\n            cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);\n        }\n        return !cell.classList.contains(literals.rowCell) && !cell.classList.contains('e-headercell') &&\n            !cell.classList.contains('e-groupcaption') ?\n            this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action) || (this.matrix.current.length === 0)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        this.target = target;\n        target = (target.classList.contains(literals.rowCell) ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains(literals.table) ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex) ||\n            (!parentsUntil(e.target, literals.rowCell) && !parentsUntil(e.target, 'e-groupcaption'))) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        var isTemplate = !isNullOrUndefined(closest(element, '.e-templatecell'));\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? isTemplate && child.length > 1 ? this.target : child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell, isRowTemplate) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible))\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn)\n            || (row.isDataRow && isRowTemplate))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.nextRowFocusValidate = function (index) {\n        var lastIndex = index;\n        for (var i = index, len = this.matrix.rows; i < len; i++) {\n            if (this.matrix.matrix[index].indexOf(1) === -1) {\n                index = index + 1;\n            }\n            else {\n                return index;\n            }\n        }\n        this.lastIdxCell = true;\n        return lastIndex;\n    };\n    ContentFocus.prototype.previousRowFocusValidate = function (index) {\n        var firstIndex = index;\n        for (var i = index, len = 0; i >= len; i--) {\n            if (this.matrix.matrix[index].indexOf(1) === -1) {\n                index = index - 1;\n                if (index < 0) {\n                    this.lastIdxCell = true;\n                    return firstIndex;\n                }\n            }\n            else {\n                return index;\n            }\n        }\n        return firstIndex;\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.getFrozenLeftCount() &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var right = ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns);\n        var frSwap = this.parent.getFrozenMode() === literals.leftRight && right;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenSwap = right;\n        }\n        this.lastIdxCell = false;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        if (action === 'tab' && !this.parent.isEdit &&\n            current[1] === this.matrix.matrix[current[0]].lastIndexOf(1) && this.matrix.matrix.length - 1 !== current[0]) {\n            this.matrix.current[0] = this.nextRowFocusValidate(this.matrix.current[0] + 1);\n            this.matrix.current[1] = -1;\n            frozenSwap = this.parent.isFrozenGrid();\n        }\n        if (action === 'shiftTab' && !this.parent.isEdit &&\n            current[0] !== 0 && this.matrix.matrix[current[0]].indexOf(1) === current[1]) {\n            this.matrix.current[0] = this.previousRowFocusValidate(this.matrix.current[0] - 1);\n            this.matrix.current[1] = this.matrix.matrix[current[0]].length;\n        }\n        var isHeaderFocus = false;\n        var row = document.activeElement.parentElement;\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && row.classList.contains(literals.row)) {\n            var rowIndex = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n            isHeaderFocus = rowIndex > 0;\n        }\n        var info = {\n            swap: !isHeaderFocus ? ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap || frSwap : false,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap,\n            toFrozenRight: frSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === literals.leftRight) {\n            if (action === 'leftArrow' || action === 'shiftTab') {\n                current[0] = previous[0];\n                current[1] = active.matrix.columns + 1;\n            }\n            if (this.parent.getFrozenMode() === literals.leftRight && (action === 'rightArrow' || action === 'tab')) {\n                current[0] = previous[0];\n                current[1] = -1;\n            }\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains(literals.rowCell);\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        // eslint-disable-next-line max-len\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute(literals.ariaRowIndex), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute(literals.ariaColIndex), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            if (!isNullOrUndefined(table.rows[rowIndex])) {\n                var cell = void 0;\n                cellIndex = table.querySelector('.e-emptyrow') ? 0 : cellIndex;\n                if (table.rows[rowIndex].cells[0].classList.contains('e-editcell')) {\n                    cell = table.rows[rowIndex].cells[0].querySelectorAll('td')[cellIndex];\n                }\n                else {\n                    cell = table.rows[rowIndex].cells[cellIndex];\n                }\n                var isCellWidth = cell.getBoundingClientRect().width !== 0;\n                if (action === 'enter' || action === 'shiftEnter') {\n                    return isCellWidth && cell.classList.contains(literals.rowCell);\n                }\n                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains(literals.rowCell)) {\n                    return isCellWidth;\n                }\n                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                    return isCellWidth;\n                }\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains(literals.rowCell) && !cell.classList.contains('e-unboundcell')\n                && (!cell.classList.contains('e-templatecell') || cell.classList.contains('e-editedbatchcell'))\n                && !cell.classList.contains('e-detailcell') : true;\n    };\n    ContentFocus.prototype.getGridSeletion = function () {\n        return this.parent.allowSelection && this.parent.selectionSettings.allowColumnSelection;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.isFrozenGrid() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains(literals.rowCell) ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (e.target.classList.contains('e-columnheader') ||\n            e.target.querySelector('.e-stackedheadercell')) {\n            return false;\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (!isNullOrUndefined(info.element)) {\n            info.elementToFocus = this.getFocusable(info.element);\n            info.outline = !info.element.classList.contains('e-filterbarcell');\n        }\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate || !isNullOrUndefined(cell.column.template))) ||\n            cell.column.type === 'checkbox' || cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.getFrozenLeftCount() &&\n            (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') && current[1] === 0;\n        var right = (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion())\n            || action === 'tab') && current[1] === this.matrix.columns;\n        var frSwap = this.parent.getFrozenMode() === literals.leftRight && right;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenSwap = right;\n        }\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var isLastCell;\n        var lastRow;\n        var headerSwap = frozenSwap || frSwap;\n        var fMatrix = this.parent.focusModule.fHeader && this.parent.focusModule.fHeader.matrix.matrix;\n        var isPresent = fMatrix && !isNullOrUndefined(fMatrix[current[0]]);\n        if (this.parent.enableHeaderFocus && action === 'tab') {\n            lastRow = this.matrix.matrix.length - 1 === current[0];\n            isLastCell = current[1] === this.matrix.matrix[current[0]].lastIndexOf(1);\n            if (isLastCell) {\n                if (!lastRow) {\n                    this.matrix.current[0] = this.matrix.current[0] + 1;\n                }\n                else {\n                    this.matrix.current[0] = 0;\n                }\n                this.matrix.current[1] = -1;\n            }\n            if (this.parent.isFrozenGrid() && lastRow && isLastCell) {\n                frozenSwap = true;\n                headerSwap = false;\n            }\n        }\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                (isPresent && (frozenSwap || frSwap)) || (action === 'tab' && lastRow && isLastCell),\n            toHeader: headerSwap,\n            toFrozen: frozenSwap,\n            toFrozenRight: frSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === literals.leftRight) {\n            if (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') {\n                current1[0] = previous[0];\n                current1[1] = active.matrix.columns + 1;\n            }\n            if (this.parent.getFrozenMode() === literals.leftRight\n                && (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab')) {\n                current1[0] = previous[0];\n                current1[1] = -1;\n            }\n        }\n        else if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            var cells = rows[0].cells;\n            for (var i = 0; i < cells.length; i++) {\n                this.matrix.set(length, i, cells[i].visible && cells[i].column.allowFiltering !== false);\n            }\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var toHeader = (action === 'upArrow' || enterFrozen) && current[0] === 0;\n        if (this.parent.getFrozenMode() === 'Right') {\n            var swap = toHeader || ((action === 'shiftTab' || action === 'leftArrow') && current[1] === 0);\n            return { swap: swap, toHeader: toHeader, toFrozen: toHeader };\n        }\n        return {\n            swap: toHeader || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: toHeader,\n            toFrozen: toHeader\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (this.parent.getFrozenMode() === 'Right') {\n            if (action === 'rightArrow' || action === 'tab') {\n                current2[0] = previous[0];\n                current2[1] = -1;\n            }\n        }\n        else {\n            if (action === 'tab' && this.parent.enableHeaderFocus) {\n                current2[0] = previous[0];\n                current2[1] = -1;\n            }\n            if (action === 'leftArrow' || action === 'shiftTab') {\n                current2[0] = previous[0];\n                current2[1] = active.matrix.columns + 1;\n            }\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var hMatrix = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix;\n        var isPresent = hMatrix && !isNullOrUndefined(hMatrix[current[0]]);\n        if (this.parent.getFrozenMode() === 'Right') {\n            var frSwap = (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion())\n                || action === 'shiftTab') && current[1] === 0;\n            var swap = ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                (isPresent && frSwap);\n            var toFrozen = (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1;\n            return { swap: swap, toHeader: frSwap, toFrozen: toFrozen };\n        }\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1 || ((action === 'rightArrow' ||\n                (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') &&\n                current[1] === this.matrix.columns && isPresent),\n            toHeader: (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') &&\n                current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (this.parent.getFrozenMode() === 'Right') {\n            if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n                current3[0] = previous[0];\n                current3[1] = -1;\n            }\n        }\n        else {\n            if (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') {\n                current3[0] = previous[0];\n                current3[1] = active.matrix.columns + 1;\n            }\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\nvar FixedRightContentFocus = /** @class */ (function (_super) {\n    __extends(FixedRightContentFocus, _super);\n    function FixedRightContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedRightContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozen-right-content .e-table');\n    };\n    FixedRightContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var toHeader = (action === 'upArrow' || enterFrozen) && current[0] === 0;\n        return {\n            swap: toHeader || ((action === 'shiftTab' || action === 'leftArrow') && current[1] === 0),\n            toHeader: toHeader,\n            toFrozenRight: toHeader\n        };\n    };\n    FixedRightContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current2[0] = previous[0];\n            current2[1] = -1;\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedRightContentFocus;\n}(ContentFocus));\nexport { FixedRightContentFocus };\nvar FixedRightHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedRightHeaderFocus, _super);\n    function FixedRightHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedRightHeaderFocus.prototype.jump = function (action, current) {\n        var headerMat = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix;\n        var isPresent = headerMat && !isNullOrUndefined(headerMat[current[0]]);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var frozenSwap = (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion())\n            || action === 'shiftTab') && current[1] === 0;\n        var swap = ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n            (isPresent && frozenSwap);\n        var toFrozen = (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1;\n        return { swap: swap, toHeader: frozenSwap, toFrozenRight: toFrozen };\n    };\n    FixedRightHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozen-right-header .e-table'));\n    };\n    FixedRightHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n            current3[0] = previous[0];\n            current3[1] = 0;\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedRightHeaderFocus;\n}(HeaderFocus));\nexport { FixedRightHeaderFocus };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the column chooser behavior of the Grid.\n */\nvar ColumnChooserSettings = /** @class */ (function (_super) {\n    __extends(ColumnChooserSettings, _super);\n    function ColumnChooserSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('startsWith')\n    ], ColumnChooserSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(false)\n    ], ColumnChooserSettings.prototype, \"ignoreAccent\", void 0);\n    return ColumnChooserSettings;\n}(ChildProperty));\nexport { ColumnChooserSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler, createElement, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest, select } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, isGroupAdaptive, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport { getCellsByTableName, getCellByColAndRowIndex, parentsUntil, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend, setChecked } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {SelectionSettings} selectionSettings - specifies the selectionsettings\n     * @param {ServiceLocator} locator - specifies the ServiceLocator\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal letiables\n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        /**\n         * @hidden\n         */\n        this.preventFocus = false;\n        /**\n         *  @hidden\n         */\n        this.selectedColumnsIndexes = [];\n        this.checkBoxState = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.clearRowCheck = false;\n        this.selectRowCheck = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.deSelectedData = [];\n        this.needColumnSelection = false;\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.isPersisted = false;\n        this.cmdKeyPressed = false;\n        this.cellselected = false;\n        this.isMultiSelection = false;\n        this.isAddRowsToSelection = false;\n        this.initialRowSelection = false;\n        this.isPrevRowSelection = false;\n        /**\n         * @hidden\n         */\n        this.autoFillRLselection = true;\n        this.bottom = '0 0 2px 0';\n        this.top = '2px 0 0 0';\n        /* eslint-disable */\n        this.right_bottom = '0 2px 2px 0';\n        this.bottom_left = '0 0 2px 2px';\n        this.top_right = '2px 2px 0 0';\n        this.top_left = '2px 0 0 2px';\n        this.top_bottom = '2px 0 2px 0';\n        this.top_right_bottom = '2px 2px 2px 0';\n        this.top_bottom_left = '2px 0 2px 2px';\n        this.top_right_left = '2px 2px 0 2px';\n        this.right_bottom_left = '0 2px 2px 2px';\n        this.all_border = '2px';\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.wireEvents();\n    }\n    Selection.prototype.initializeSelection = function () {\n        this.parent.log('selection_key_missing');\n        this.render();\n    };\n    /**\n     * The function used to trigger onActionBegin\n     *\n     * @param {Object} args - specifies the args\n     * @param {string} type - specifies the type\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (!this.isMultiSelection && (!isNullOrUndefined(args.cellIndex) || !isNullOrUndefined(args.rowIndex))) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {Object} args - specifies the args\n     * @param {string} type - specifies the type\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n        this.isMultiSelection = false;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        this.unWireEvents();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n        EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' && this.parent.editModule &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid() && this.parent.getContent().querySelector('.' + literals.movableContent)) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getSelectedFrozenRightRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid() && gObj.getFrozenMode() === literals.leftRight && gObj.getFrozenRightContent()) {\n            return gObj.getFrozenRightRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        if (gObj.editSettings.mode === 'Batch' && gObj.editModule) {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = gObj.editSettings.newRowPosition === 'Bottom' ?\n                currentRecords.concat(this.parent.editModule.getBatchChanges()[literals.addedRecords]) :\n                this.parent.editModule.getBatchChanges()[literals.addedRecords].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[literals.deletedRecords];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     *\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @returns {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {\n            this.addRowsToSelection([index]);\n            return;\n        }\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(index);\n        var selectData;\n        var isRemoved = false;\n        if (gObj.enableVirtualization && index > -1) {\n            var e = { selectedIndex: index, isAvailable: true };\n            this.parent.notify(events.selectVirtualRow, e);\n            var frozenData = gObj.isFrozenGrid() ? gObj.contentModule.getRowObjectByIndex(index)\n                : null;\n            if (selectedRow && (gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')) || frozenData)) {\n                selectData = frozenData ? frozenData : gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n            }\n            else {\n                if (e.isAvailable && !gObj.selectionSettings.persistSelection) {\n                    var prevSelectedData = this.parent.getSelectedRecords();\n                    if (prevSelectedData.length > 0) {\n                        this.clearRowSelection();\n                    }\n                }\n                return;\n            }\n        }\n        else {\n            selectData = this.getCurrentBatchRecordChanges()[index];\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        this.activeTarget();\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget, cancel: false, isInteracted: this.isInteracted,\n                isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n            };\n            args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can));\n        }\n        else {\n            this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can)(args);\n        }\n    };\n    Selection.prototype.rowSelectingCallBack = function (args, isToggle, index, selectData, isRemoved, isRowSelected, can) {\n        var _this = this;\n        return function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.index = index;\n            _this.toggle = isToggle;\n            _this.data = selectData;\n            _this.removed = isRemoved;\n            if (isRowSelected && _this.selectionSettings.persistSelection && !(_this.selectionSettings.checkboxMode === 'ResetOnRowClick')) {\n                _this.clearSelectedRow(index);\n                _this.selectRowCallBack();\n            }\n            else if (!isRowSelected && _this.selectionSettings.persistSelection &&\n                _this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                _this.selectRowCallBack();\n            }\n            if (_this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n                _this.clearSelection();\n            }\n            if (!_this.selectionSettings.persistSelection || _this.selectionSettings.checkboxMode === 'ResetOnRowClick' ||\n                (!_this.parent.isCheckBoxSelection && _this.selectionSettings.persistSelection)) {\n                _this.selectRowCheck = true;\n                _this.clearRow();\n            }\n        };\n    };\n    Selection.prototype.selectRowCallBack = function () {\n        var gObj = this.parent;\n        var args;\n        var index = this.index;\n        var isToggle = this.toggle;\n        var selectData = this.data;\n        var isRemoved = this.removed;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(index);\n        if (!isToggle && !isRemoved) {\n            if (this.selectedRowIndexes.indexOf(index) <= -1) {\n                this.updateRowSelection(selectedRow, index);\n                this.selectMovableRow(selectedMovableRow, selectedFrozenRightRow, index);\n            }\n            this.selectRowIndex(index);\n        }\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                previousRowIndex: this.prevRowIndex, target: this.actualTarget, isInteracted: this.isInteracted,\n                isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked\n            };\n            args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n        this.isInteracted = false;\n        this.updateRowProps(index);\n    };\n    Selection.prototype.selectMovableRow = function (selectedMovableRow, selectedFrozenRightRow, index) {\n        if (this.parent.isFrozenGrid()) {\n            this.updateRowSelection(selectedMovableRow, index);\n            if (this.parent.getFrozenMode() === literals.leftRight && selectedFrozenRightRow) {\n                this.updateRowSelection(selectedFrozenRightRow, index);\n            }\n        }\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow, frRow) {\n        if (this.parent.isFrozenGrid()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            var frozenRightRow = 'frozenRightRow';\n            var previousFrozenRightRow = 'previousFrozenRightRow';\n            if (this.parent.getFrozenMode() === literals.leftRight && frRow) {\n                mObj[frozenRightRow] = frRow;\n                mObj[previousFrozenRightRow] = this.parent.getFrozenRightDataRows()[this.prevRowIndex];\n            }\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     *\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @returns {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.selectRowIndex(endIndex);\n    };\n    /**\n     * Selects a collection of rows by index.\n     *\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @returns {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var _this = this;\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        this.isMultiSelection = true;\n        var selectedRows = [];\n        var foreignKeyData = [];\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(rowIndex);\n        var can = 'cancel';\n        var selectedData = [];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        for (var i = 0, len = rowIndexes.length; i < len; i++) {\n            var currentRow = this.parent.getDataRows()[rowIndexes[i]];\n            var rowObj = this.getRowObj(currentRow);\n            if (rowObj) {\n                selectedData.push(rowObj.data);\n                selectedRows.push(currentRow);\n                foreignKeyData.push(rowObj.foreignKeyData);\n            }\n        }\n        var isHybrid = 'isHybrid';\n        this.activeTarget();\n        var args;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: this.actualTarget,\n                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                isInteracted: this.isInteracted, isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n            args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n        }\n        else {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n        }\n        this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.clearRow();\n            _this.selectRowIndex(rowIndexes.slice(-1)[0]);\n            var selectRowFn = function (index) {\n                _this.updateRowSelection(gObj.getRowByIndex(index), index);\n                if (gObj.isFrozenGrid()) {\n                    var rightEle = _this.parent.getFrozenMode() === literals.leftRight ? gObj.getFrozenRightRowByIndex(index)\n                        : undefined;\n                    _this.selectMovableRow(gObj.getMovableRowByIndex(index), rightEle, index);\n                }\n                _this.updateRowProps(rowIndex);\n            };\n            if (!_this.isSingleSel()) {\n                for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                    var rowIdx = rowIndexes_1[_i];\n                    selectRowFn(rowIdx);\n                }\n            }\n            else {\n                selectRowFn(rowIndex);\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                args = {\n                    rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: _this.actualTarget,\n                    prevRow: gObj.getRows()[_this.prevRowIndex], previousRowIndex: _this.prevRowIndex,\n                    data: _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n                args = _this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            }\n            else {\n                args = {\n                    rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: _this.prevRowIndex,\n                    row: selectedRows, prevRow: gObj.getRows()[_this.prevRowIndex],\n                    data: _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n            }\n            if (_this.isRowSelected) {\n                _this.onActionComplete(args, events.rowSelected);\n            }\n            _this.isInteracted = false;\n        });\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     *\n     * @param {number} rowIndexes - Specifies the row indexes.\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        this.isMultiSelection = true;\n        var indexes = gObj.getSelectedRowIndexes().concat(rowIndexes);\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var selectedFrozenRightRow = !this.isSingleSel() ? this.getSelectedFrozenRightRow(rowIndexes[0]) :\n            this.getSelectedFrozenRightRow(rowIndexes[rowIndexes.length - 1]);\n        if ((!this.isRowType() || this.isEditing()) && !this.selectionSettings.checkboxOnly) {\n            return;\n        }\n        var args;\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            this.selectRowIndex(rowIndex);\n            if (isUnSelected && ((checkboxColumn.length ? true : this.selectionSettings.enableToggle) || this.isMultiCtrlRequest)) {\n                this.isAddRowsToSelection = true;\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                if (this.isCancelDeSelect) {\n                    return;\n                }\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                this.selectRowIndex(this.selectedRowIndexes.length ? this.selectedRowIndexes[this.selectedRowIndexes.length - 1] : -1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                if (selectedFrozenRightRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedFrozenRightRow), 1);\n                    selectedFrozenRightRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedFrozenRightRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow], undefined, [selectedFrozenRightRow]);\n                this.isInteracted = false;\n                this.isMultiSelection = false;\n                this.isAddRowsToSelection = false;\n            }\n            else {\n                var isHybrid = 'isHybrid';\n                this.activeTarget();\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n                }\n                else {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this.parent.trigger(events.rowSelecting, this.fDataUpdate(args));\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    this.disableInteracted();\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                this.selectMovableRow(selectedMovableRow, selectedFrozenRightRow, rowIndex);\n            }\n            if (!isUnSelected) {\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n                }\n                else {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                        row: selectedRow, prevRow: gObj.getRows()[this.prevRowIndex],\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.isInteracted = false;\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        // eslint-disable-next-line prefer-const\n        var _a = (startIndex <= endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowCheck = true;\n        this.clearRowSelection();\n    };\n    Selection.prototype.clearRowCallBack = function () {\n        if (this.isCancelDeSelect && this.parent.checkAllRows !== 'Check') {\n            return;\n        }\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.selectRowIndex(-1);\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.clearSelectedRow = function (index) {\n        if (this.toggle) {\n            var selectedEle = this.parent.getRowByIndex(index);\n            if (!this.disableUI) {\n                selectedEle.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedEle, false, true, 'e-selectionbackground', 'e-active');\n            }\n            this.removed = true;\n            this.updatePersistCollection(selectedEle, false);\n            this.updateCheckBoxes(selectedEle);\n            this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);\n            this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if ((this.parent.isPersistSelection || this.parent.selectionSettings.persistSelection &&\n            this.parent.getPrimaryKeyFieldNames().length > 0) && !isNullOrUndefined(selectedRow)) {\n            if (!this.parent.isPersistSelection) {\n                this.ensureCheckboxFieldSelection();\n            }\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState, rowIndex) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                setChecked(chkBox, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(rowIndex);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.isFrozenGrid() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)');\n            if (this.parent.contextMenuModule && this.mouseButton === 2) {\n                target = this.parent.contextMenuModule.cell;\n            }\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     *\n     * @returns {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (this.selectionSettings.persistSelection && this.persistSelectedData.length) {\n            this.deSelectedData = iterateExtend(this.persistSelectedData);\n        }\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            if (this.parent.isPersistSelection) {\n                this.persistSelectedData = [];\n                this.selectedRowState = {};\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.clearColumnSelection();\n            this.prevRowIndex = undefined;\n            this.enableSelectMultiTouch = false;\n            this.isInteracted = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     *\n     * @returns {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows_1 = this.parent.getDataRows();\n            var data_1 = [];\n            var row_1 = [];\n            var mRow_1 = [];\n            var fRightRow_1 = [];\n            var rowIndex_1 = [];\n            var foreignKeyData_1 = [];\n            var target_1 = this.target;\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.editSettings.mode === 'Batch' ?\n                    this.parent.getRows()[this.selectedRowIndexes[i]]\n                    : this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data_1.push(rowObj.data);\n                    row_1.push(currentRow);\n                    rowIndex_1.push(this.selectedRowIndexes[i]);\n                    foreignKeyData_1.push(rowObj.foreignKeyData);\n                }\n                if (gObj.isFrozenGrid()) {\n                    mRow_1.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                    if (gObj.getFrozenMode() === literals.leftRight) {\n                        fRightRow_1.push(gObj.getFrozenRightRows()[this.selectedRowIndexes[i]]);\n                    }\n                }\n            }\n            if (this.selectionSettings.persistSelection && this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                this.isRowClicked = this.checkSelectAllClicked ? true : false;\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1, function () {\n                if (_this.isCancelDeSelect && (_this.isRowClicked || _this.checkSelectAllClicked || (_this.isInteracted &&\n                    !_this.parent.isPersistSelection))) {\n                    if (_this.parent.isPersistSelection) {\n                        if (_this.getCheckAllStatus(_this.parent.element.querySelector('.e-checkselectall')) === 'Intermediate') {\n                            for (var i = 0; i < _this.selectedRecords.length; i++) {\n                                _this.updatePersistCollection(_this.selectedRecords[i], true);\n                            }\n                        }\n                        else {\n                            _this.parent.checkAllRows = 'Check';\n                            _this.updatePersistSelectedData(true);\n                        }\n                    }\n                    if (_this.clearRowCheck) {\n                        _this.clearRowCallBack();\n                        _this.clearRowCheck = false;\n                        if (_this.selectRowCheck) {\n                            _this.selectRowCallBack();\n                            _this.selectRowCheck = false;\n                        }\n                    }\n                    return;\n                }\n                var element = [].slice.call(rows_1.filter(function (record) { return record.hasAttribute('aria-selected'); }));\n                for (var j = 0; j < element.length; j++) {\n                    if (!_this.disableUI || isBlazor()) {\n                        element[j].removeAttribute('aria-selected');\n                        _this.addRemoveClassesForRow(element[j], false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    // tslint:disable-next-line:align\n                    if (!_this.isPrevRowSelection) {\n                        _this.updatePersistCollection(element[j], false);\n                    }\n                    _this.updateCheckBoxes(element[j]);\n                }\n                for (var i = 0, len = _this.selectedRowIndexes.length; i < len; i++) {\n                    var movableRow = _this.getSelectedMovableRow(_this.selectedRowIndexes[i]);\n                    if (movableRow) {\n                        if (!_this.disableUI || isBlazor()) {\n                            movableRow.removeAttribute('aria-selected');\n                            _this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                        }\n                        _this.updateCheckBoxes(movableRow);\n                        if (!_this.isPrevRowSelection) {\n                            _this.updatePersistCollection(movableRow, false);\n                        }\n                    }\n                    var frRow = _this.getSelectedFrozenRightRow(_this.selectedRowIndexes[i]);\n                    if (frRow) {\n                        if (!_this.disableUI) {\n                            frRow.removeAttribute('aria-selected');\n                            _this.addRemoveClassesForRow(frRow, false, true, 'e-selectionbackground', 'e-active');\n                        }\n                        _this.updateCheckBoxes(frRow);\n                        if (!_this.isPrevRowSelection) {\n                            _this.updatePersistCollection(frRow, false);\n                        }\n                    }\n                }\n                _this.selectedRowIndexes = [];\n                _this.selectedRecords = [];\n                _this.isRowSelected = false;\n                _this.selectRowIndex(-1);\n                _this.isPrevRowSelection = false;\n                _this.rowDeselect(events.rowDeselected, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1, undefined, fRightRow_1);\n                if (_this.clearRowCheck) {\n                    _this.clearRowCallBack();\n                    _this.clearRowCheck = false;\n                    if (_this.selectRowCheck) {\n                        _this.selectRowCallBack();\n                        _this.selectRowCheck = false;\n                    }\n                }\n            }, fRightRow_1);\n        }\n        else {\n            if (this.clearRowCheck) {\n                this.clearRowCallBack();\n                this.clearRowCheck = false;\n                if (this.selectRowCheck) {\n                    this.selectRowCallBack();\n                    this.selectRowCheck = false;\n                }\n            }\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow, rowDeselectCallBack, frozenRightRow) {\n        var _this = this;\n        if ((this.selectionSettings.persistSelection && (this.isRowClicked || this.checkSelectAllClicked)) ||\n            !this.selectionSettings.persistSelection) {\n            var cancl_1 = 'cancel';\n            var isSingleDeSel = rowIndex.length === 1 && this.deSelectedData.length === 1;\n            var rowDeselectObj = {\n                rowIndex: rowIndex[0], data: this.selectionSettings.persistSelection && (this.parent.checkAllRows === 'Uncheck' &&\n                    !isSingleDeSel) && this.selectionSettings.checkboxMode !== 'ResetOnRowClick' ? this.deSelectedData : data,\n                foreignKeyData: foreignKeyData, cancel: false, isInteracted: this.isInteracted,\n                isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n            };\n            if (type === 'rowDeselected') {\n                delete rowDeselectObj.cancel;\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                var rowInString = 'row';\n                var target_2 = 'target';\n                var rowidx = 'rowIndex';\n                var rowidxex = 'rowIndexes';\n                var data_2 = 'data';\n                var foreignKey = 'foreignKeyData';\n                rowDeselectObj[rowInString] = row;\n                rowDeselectObj[target_2] = this.actualTarget;\n                var isHeaderCheckBxClick = this.actualTarget && !isNullOrUndefined(closest(this.actualTarget, 'thead'));\n                if (isHeaderCheckBxClick || rowIndex.length > 1) {\n                    rowDeselectObj[rowidx] = rowIndex[0];\n                    rowDeselectObj[rowidxex] = rowIndex;\n                }\n                else if (rowIndex.length === 1) {\n                    rowDeselectObj[data_2] = rowDeselectObj[data_2][0];\n                    rowDeselectObj[rowInString] = rowDeselectObj[rowInString][0];\n                    rowDeselectObj[foreignKey] = rowDeselectObj[foreignKey][0];\n                    if (this.isAddRowsToSelection) {\n                        rowDeselectObj[rowidxex] = rowIndex;\n                    }\n                }\n            }\n            else {\n                var rowIndex_2 = 'rowIndex';\n                var data_3 = 'data';\n                rowDeselectObj[rowIndex_2] = rowDeselectObj[rowIndex_2][rowDeselectObj[rowIndex_2].length - 1];\n                rowDeselectObj[data_3] = rowDeselectObj[data_3][rowDeselectObj[data_3].length - 1];\n            }\n            this.parent.trigger(type, (!isBlazor() || this.parent.isJsComponent) && this.parent.isFrozenGrid() ? __assign({}, rowDeselectObj, { mRow: mRow, frozenRightRow: frozenRightRow }) : rowDeselectObj, function (args) {\n                _this.isCancelDeSelect = args[cancl_1];\n                if (!_this.isCancelDeSelect || (!_this.isRowClicked && !_this.isInteracted && !_this.checkSelectAllClicked)) {\n                    _this.updatePersistCollection(row[0], false);\n                    _this.updateCheckBoxes(row[0], undefined, rowIndex[0]);\n                    if (mRow) {\n                        _this.updateCheckBoxes(mRow[0], undefined, rowIndex[0]);\n                    }\n                    if (frozenRightRow) {\n                        _this.updateCheckBoxes(frozenRightRow[0], undefined, rowIndex[0]);\n                    }\n                }\n                if (rowDeselectCallBack !== undefined) {\n                    rowDeselectCallBack();\n                }\n            });\n        }\n        else if (this.selectionSettings.persistSelection && !this.isInteracted) {\n            if (rowDeselectCallBack !== undefined) {\n                rowDeselectCallBack();\n            }\n        }\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByIndex(cellIndex.cellIndex);\n        var frzCols = gObj.isFrozenGrid();\n        if (frzCols) {\n            if (col.getFreezeTableName() === 'movable') {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     *\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @returns {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var currentCell = 'currentCell';\n                args[currentCell] = selectedCell;\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));\n            this.cellselected = true;\n        }\n        else {\n            this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);\n        }\n    };\n    Selection.prototype.successCallBack = function (cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {\n        var _this = this;\n        return function (cellSelectingArgs) {\n            var cncl = 'cancel';\n            var currentCell = 'currentCell';\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            if (!isToggle) {\n                cellSelectingArgs[currentCell] = cellSelectingArgs[currentCell] ? cellSelectingArgs[currentCell] : selectedCell;\n            }\n            _this.clearCell();\n            if (!isToggle) {\n                _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isToggle) {\n                var args = void 0;\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                    args = {\n                        data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                        selectedRowCellIndex: _this.selectedRowCellIndexes,\n                        previousRowCell: _this.prevECIdxs ?\n                            _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    args[previousRowCellIndex] = _this.prevECIdxs;\n                }\n                else {\n                    args = { data: selectedData, cellIndex: cellIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n                }\n                _this.updateCellProps(cellIndex, cellIndex);\n                _this.onActionComplete(args, events.cellSelected);\n            }\n        };\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     *\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @returns {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        var _this = this;\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            args[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), function (cellSelectingArgs) {\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            _this.clearCell();\n            if (startIndex.rowIndex > endIndex.rowIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n                if (_this.selectionSettings.cellSelectionMode.indexOf('Box') < 0) {\n                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : _this.getLastColIndex(i);\n                }\n                else {\n                    min = startIndex.cellIndex;\n                    max = endIndex.cellIndex;\n                }\n                cellIndexes = [];\n                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                    if (frzCols) {\n                        if (j < frzCols) {\n                            selectedCell = gObj.getCellFromIndex(i, j);\n                        }\n                        else {\n                            selectedCell = gObj.getMovableCellFromIndex(i, j);\n                        }\n                    }\n                    else {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    if (!selectedCell) {\n                        continue;\n                    }\n                    cellIndexes.push(j);\n                    _this.updateCellSelection(selectedCell);\n                    _this.addAttribute(selectedCell);\n                }\n                _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n            }\n            var cellSelectedArgs;\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                cellSelectedArgs = {\n                    data: selectedData, cellIndex: edIndex, currentCell: gObj.getCellFromIndex(edIndex.rowIndex, edIndex.cellIndex),\n                    selectedRowCellIndex: _this.selectedRowCellIndexes,\n                    previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                cellSelectedArgs[previousRowCellIndex] = _this.prevECIdxs;\n            }\n            else {\n                cellSelectedArgs = { data: selectedData, cellIndex: edIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n            }\n            if (!_this.isDragged) {\n                _this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                _this.cellselected = true;\n            }\n            _this.updateCellProps(stIndex, edIndex);\n        });\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     *\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @returns {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var cellSelectArgs;\n        var isHybrid = 'isHybrid';\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n        }\n        this.onActionBegin(cellSelectArgs, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        var cellSelectedArgs;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectedArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectedArgs = { data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                selectedRowCellIndex: this.selectedRowCellIndexes };\n        }\n        this.onActionComplete(cellSelectedArgs, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     *\n     * @param {IIndex} cellIndexes - Defines the collection of row and column index.\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell;\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        var isHybrid = 'isHybrid';\n        var left = gObj.getFrozenLeftCount();\n        var movable = gObj.getMovableColumnsCount();\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.hideAutoFill();\n        var col = gObj.getColumnByIndex(cellIndexes[0].cellIndex);\n        var rowObj;\n        gridActionHandler(this.parent, function (tableName, rows) {\n            rowObj = rows[cellIndexes[0].rowIndex];\n        }, [\n            !col.getFreezeTableName() || col.getFreezeTableName() === literals.frozenLeft ? gObj.getRowsObject() : [],\n            col.getFreezeTableName() === 'movable' ? gObj.getMovableRowsObject() : [],\n            col.getFreezeTableName() === literals.frozenRight ? gObj.getFrozenRightRowsObject() : []\n        ]);\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            var idx = col.getFreezeTableName() === 'movable' ? cellIndex.cellIndex - left\n                : col.getFreezeTableName() === literals.frozenRight ? cellIndex.cellIndex - (left + movable) : cellIndex.cellIndex;\n            foreignKeyData.push(rowObj.cells[idx].foreignKeyData);\n            var args = void 0;\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest,\n                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                    previousRowCell: this.prevECIdxs ?\n                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            else {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest, isCtrlPressed: this.isMultiCtrlRequest\n                };\n            }\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    if (selectedCellIdx.length === 0) {\n                        this.selectedRowCellIndexes.splice(index, 1);\n                    }\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                if (!isNullOrUndefined(args) && args[cncl] === true) {\n                    return;\n                }\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isUnSelected) {\n                var cellSelectedArgs = void 0;\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    cellSelectedArgs = {\n                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                            undefined, selectedRowCellIndex: this.selectedRowCellIndexes\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n                }\n                else {\n                    cellSelectedArgs = { data: selectedData, cellIndex: cellIndexes[0], selectedRowCellIndex: this.selectedRowCellIndexes };\n                }\n                this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                this.cellselected = true;\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var frzCols = this.parent.isFrozenGrid();\n        var col = this.parent.getColumnByIndex(index);\n        var cells = getCellsByTableName(this.parent, col, rowIndex);\n        if (cells) {\n            for (var m = 0; m < cells.length; m++) {\n                var colIndex = parseInt(cells[m].getAttribute(literals.ariaColIndex), 10);\n                if (colIndex === index) {\n                    if (frzCols) {\n                        if (col.getFreezeTableName() === 'movable') {\n                            m += this.parent.getFrozenLeftCount();\n                        }\n                        else if (col.getFreezeTableName() === literals.frozenRight) {\n                            m += (this.parent.getFrozenLeftColumnsCount() + this.parent.getMovableColumnsCount());\n                        }\n                    }\n                    return m;\n                }\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute(literals.ariaColIndex), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains(literals.gridChkBox)) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains(literals.gridChkBox)) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     *\n     * @returns {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var frzCols = gObj.isFrozenGrid();\n            this.hideAutoFill();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        var col = gObj.getColumnByIndex(rowCell[i].cellIndexes[j]);\n                        cells.push(getCellByColAndRowIndex(this.parent, col, rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                    else {\n                        if (rowObj.cells) {\n                            foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        }\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            if (this.bdrElement) {\n                this.showHideBorders('none');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            if (!this.isDragged && this.cellselected) {\n                this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n            }\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.isFrozenGrid()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                rows = gObj.addMovableRows(rows, gObj.getFrozenRightDataRows());\n            }\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].getElementsByClassName('e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute(literals.ariaRowIndex), 10);\n            if (!this.isCellDrag) {\n                this.hideAutoFill();\n                this.selectRowsByRange(this.startDIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, literals.rowCell);\n                if (td) {\n                    this.startAFCell = this.startCell;\n                    this.endAFCell = parentsUntil(e.target, literals.rowCell);\n                    this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute(literals.ariaColIndex), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (e, rowIndex, cellIndex) {\n        if (!this.isAutoFillSel) {\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.drawBorders();\n        }\n        else { //Autofill\n            this.showAFBorders();\n            this.selectLikeAutoFill(e);\n        }\n    };\n    Selection.prototype.drawBorders = function () {\n        if (this.selectionSettings.cellSelectionMode === 'BoxWithBorder' && this.selectedRowCellIndexes.length && !this.parent.isEdit) {\n            this.parent.element.classList.add('e-enabledboxbdr');\n            if (!this.bdrElement) {\n                this.createBorders();\n            }\n            this.positionBorders();\n        }\n        else {\n            this.showHideBorders('none');\n        }\n    };\n    Selection.prototype.isLastCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[cells.length - 1] === cell;\n    };\n    Selection.prototype.isLastRow = function (cell) {\n        var rows = [].slice.call(closest(cell, literals.tbody).querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[rows.length - 1];\n    };\n    Selection.prototype.isFirstRow = function (cell) {\n        var rows = [].slice.call(closest(cell, literals.tbody).querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[0];\n    };\n    Selection.prototype.isFirstCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[0] === cell;\n    };\n    Selection.prototype.setBorders = function (parentEle, border, bdrStr) {\n        var cells = [].slice.call(parentEle.getElementsByClassName('e-cellselectionbackground')).\n            filter(function (ele) { return ele.style.display === ''; });\n        if (cells.length) {\n            var isFrozen = this.parent.isFrozenGrid();\n            var start = cells[0];\n            var end = cells[cells.length - 1];\n            var stOff = start.getBoundingClientRect();\n            var endOff = end.getBoundingClientRect();\n            var parentOff = start.offsetParent.getBoundingClientRect();\n            var rowHeight = this.isLastRow(end) && (bdrStr === '1' || bdrStr === '2' || bdrStr === '5') ? 2 : 0;\n            var topOffSet = this.parent.frozenRows && (bdrStr === '1' || bdrStr === '2') &&\n                this.isFirstRow(start) ? 1.5 : 0;\n            var leftOffset = isFrozen && (bdrStr === '2' || bdrStr === '4') && this.isFirstCell(start) ? 1 : 0;\n            var rightOffset = ((this.parent.getFrozenMode() === 'Right' && (bdrStr === '1' || bdrStr === '3'))\n                || (this.parent.getFrozenMode() === literals.leftRight && (bdrStr === '5' || bdrStr === '6')))\n                && this.isFirstCell(start) ? 1 : 0;\n            if (this.parent.enableRtl) {\n                border.style.right = parentOff.right - stOff.right - leftOffset + 'px';\n                border.style.width = stOff.right - endOff.left + leftOffset + 1 + 'px';\n            }\n            else {\n                border.style.left = stOff.left - parentOff.left - leftOffset - rightOffset + 'px';\n                border.style.width = endOff.right - stOff.left + leftOffset - rightOffset + 1 + 'px';\n            }\n            border.style.top = stOff.top - parentOff.top - topOffSet + 'px';\n            border.style.height = endOff.top - stOff.top > 0 ?\n                (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) - rowHeight + topOffSet + 'px' :\n                endOff.height + topOffSet - rowHeight + 1 + 'px';\n            this.selectDirection += bdrStr;\n        }\n        else {\n            border.style.display = 'none';\n        }\n    };\n    Selection.prototype.positionBorders = function () {\n        this.updateStartEndCells();\n        if (!this.startCell || !this.bdrElement || !this.selectedRowCellIndexes.length) {\n            return;\n        }\n        this.selectDirection = '';\n        this.showHideBorders('');\n        this.setBorders(this.parent.getContentTable(), this.bdrElement, '1');\n        if (this.parent.isFrozenGrid()) {\n            this.setBorders(this.parent.contentModule.getMovableContent(), this.mcBdrElement, '2');\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                this.setBorders(this.parent.contentModule.getFrozenRightContent(), this.frcBdrElement, '5');\n            }\n        }\n        if (this.parent.frozenRows) {\n            this.setBorders(this.parent.getHeaderTable(), this.fhBdrElement, '3');\n            if (this.parent.isFrozenGrid()) {\n                this.setBorders(this.parent.headerModule.getMovableHeader(), this.mhBdrElement, '4');\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.setBorders(this.parent.headerModule.getFrozenRightHeader(), this.frhBdrElement, '6');\n                }\n            }\n        }\n        this.applyBorders(this.selectDirection);\n    };\n    /* eslint-enable */\n    Selection.prototype.applyBothFrozenBorders = function (str) {\n        var rtl = this.parent.enableRtl;\n        switch (str.length) {\n            case 6:\n                {\n                    this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;\n                    this.mcBdrElement.style.borderWidth = this.bottom;\n                    this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;\n                    this.mhBdrElement.style.borderWidth = this.top;\n                    this.frcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;\n                    this.frhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;\n                }\n                break;\n            case 4:\n                {\n                    if (str.includes('1') && str.includes('2') && str.includes('3') && str.includes('4')) {\n                        this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;\n                        this.mhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;\n                        this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;\n                        this.mcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;\n                    }\n                    if (str.includes('2') && str.includes('4') && str.includes('5') && str.includes('6')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;\n                        this.mhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;\n                        this.frcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;\n                        this.frhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;\n                    }\n                }\n                break;\n            case 3:\n                {\n                    this.bdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                    this.mcBdrElement.style.borderWidth = this.top_bottom;\n                    this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                    if (this.parent.frozenRows) {\n                        this.fhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                        this.mhBdrElement.style.borderWidth = this.top_bottom;\n                        this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                    }\n                }\n                break;\n            case 2:\n                {\n                    if (str.includes('1')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                        if (this.parent.frozenRows) {\n                            this.fhBdrElement.style.borderWidth = this.top_right_left;\n                        }\n                    }\n                    if (str.includes('2')) {\n                        this.bdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                        this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                        if (this.parent.frozenRows) {\n                            this.mhBdrElement.style.borderWidth = this.top_right_left;\n                        }\n                    }\n                    if (str.includes('3')) {\n                        this.mhBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                        this.bdrElement.style.borderWidth = this.right_bottom_left;\n                    }\n                    if (str.includes('4')) {\n                        this.fhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                        this.frhBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;\n                        this.mcBdrElement.style.borderWidth = this.right_bottom_left;\n                    }\n                    if (str.includes('5')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                        if (this.parent.frozenRows) {\n                            this.frhBdrElement.style.borderWidth = this.top_right_left;\n                        }\n                    }\n                    if (str.includes('6')) {\n                        this.mhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;\n                        this.frcBdrElement.style.borderWidth = this.right_bottom_left;\n                    }\n                }\n                break;\n            default:\n                this.bdrElement.style.borderWidth = this.all_border;\n                this.mcBdrElement.style.borderWidth = this.all_border;\n                this.frcBdrElement.style.borderWidth = this.all_border;\n                if (this.parent.frozenRows) {\n                    this.fhBdrElement.style.borderWidth = this.all_border;\n                    this.mhBdrElement.style.borderWidth = this.all_border;\n                    this.frhBdrElement.style.borderWidth = this.all_border;\n                }\n                break;\n        }\n    };\n    Selection.prototype.applyBorders = function (str) {\n        var rtl = this.parent.enableRtl;\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            this.applyBothFrozenBorders(str);\n        }\n        else {\n            switch (str.length) {\n                case 4:\n                    {\n                        if (this.parent.getFrozenMode() === 'Right') {\n                            this.bdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;\n                            this.mcBdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;\n                            this.fhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;\n                            this.mhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;\n                        }\n                        else {\n                            this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;\n                            this.mcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;\n                            this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;\n                            this.mhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;\n                        }\n                    }\n                    break;\n                case 2:\n                    {\n                        if (this.parent.getFrozenMode() === 'Right') {\n                            this.bdrElement.style.borderWidth = str.includes('2') ? rtl ? this.top_bottom_left\n                                : this.top_right_bottom : this.right_bottom_left;\n                            this.mcBdrElement.style.borderWidth = str.includes('1') ? rtl ? this.top_right_bottom\n                                : this.top_bottom_left : this.right_bottom_left;\n                            if (this.parent.frozenRows) {\n                                this.fhBdrElement.style.borderWidth = str.includes('1') ? this.top_right_left\n                                    : rtl ? this.top_bottom_left : this.top_right_bottom;\n                                this.mhBdrElement.style.borderWidth = str.includes('2') ? this.top_right_left\n                                    : rtl ? this.top_right_bottom : this.top_bottom_left;\n                            }\n                        }\n                        else {\n                            this.bdrElement.style.borderWidth = str.includes('2') ? rtl ? this.top_right_bottom\n                                : this.top_bottom_left : this.right_bottom_left;\n                            if (this.parent.isFrozenGrid()) {\n                                this.mcBdrElement.style.borderWidth = str.includes('1') ? rtl ? this.top_bottom_left\n                                    : this.top_right_bottom : this.right_bottom_left;\n                            }\n                            if (this.parent.frozenRows) {\n                                this.fhBdrElement.style.borderWidth = str.includes('1') ? this.top_right_left\n                                    : rtl ? this.top_right_bottom : this.top_bottom_left;\n                                if (this.parent.isFrozenGrid()) {\n                                    this.mhBdrElement.style.borderWidth = str.includes('2') ? this.top_right_left\n                                        : rtl ? this.top_bottom_left : this.top_right_bottom;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                default:\n                    this.bdrElement.style.borderWidth = this.all_border;\n                    if (this.parent.isFrozenGrid()) {\n                        this.mcBdrElement.style.borderWidth = this.all_border;\n                    }\n                    if (this.parent.frozenRows) {\n                        this.fhBdrElement.style.borderWidth = this.all_border;\n                        if (this.parent.isFrozenGrid()) {\n                            this.mhBdrElement.style.borderWidth = this.all_border;\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    Selection.prototype.createBorders = function () {\n        if (!this.bdrElement) {\n            this.bdrElement = this.parent.getContentTable().parentElement.appendChild(createElement('div', {\n                className: 'e-xlsel', id: this.parent.element.id + '_bdr',\n                styles: 'width: 2px; border-width: 0;'\n            }));\n            if (this.parent.isFrozenGrid()) {\n                this.mcBdrElement = this.parent.contentModule.getMovableContent().appendChild(createElement('div', {\n                    className: 'e-xlsel', id: this.parent.element.id + '_mcbdr',\n                    styles: 'height: 2px; border-width: 0;'\n                }));\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.frcBdrElement = this.parent.contentModule.getFrozenRightContent().appendChild(createElement('div', {\n                        className: 'e-xlsel', id: this.parent.element.id + '_frcbdr',\n                        styles: 'height: 2px; border-width: 0;'\n                    }));\n                }\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_fhbdr', styles: 'height: 2px;' }));\n            }\n            if (this.parent.frozenRows && this.parent.isFrozenGrid()) {\n                this.mhBdrElement = this.parent.headerModule.getMovableHeader().appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_mhbdr', styles: 'height: 2px;' }));\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.frhBdrElement = this.parent.headerModule.getFrozenRightHeader().appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_frhbdr', styles: 'height: 2px;' }));\n                }\n            }\n        }\n    };\n    Selection.prototype.showHideBorders = function (display) {\n        if (this.bdrElement) {\n            this.bdrElement.style.display = display;\n            if (this.parent.isFrozenGrid()) {\n                this.mcBdrElement.style.display = display;\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.frcBdrElement.style.display = display;\n                }\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement.style.display = display;\n            }\n            if (this.parent.frozenRows && this.parent.isFrozenGrid()) {\n                this.mhBdrElement.style.display = display;\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.frhBdrElement.style.display = display;\n                }\n            }\n        }\n    };\n    Selection.prototype.drawAFBorders = function () {\n        if (!this.bdrAFBottom) {\n            this.createAFBorders();\n        }\n        this.positionAFBorders();\n    };\n    Selection.prototype.positionAFBorders = function () {\n        if (!this.startCell || !this.bdrAFLeft) {\n            return;\n        }\n        var stOff = this.startAFCell.getBoundingClientRect();\n        var endOff = this.endAFCell.getBoundingClientRect();\n        var top = endOff.top - stOff.top > 0 ? 1 : 0;\n        var firstCellTop = endOff.top - stOff.top >= 0 && (parentsUntil(this.startAFCell, literals.movableContent) ||\n            parentsUntil(this.startAFCell, 'e-frozencontent')) && this.isFirstRow(this.startAFCell) ? 1.5 : 0;\n        var firstCellLeft = (parentsUntil(this.startAFCell, literals.movableContent) ||\n            parentsUntil(this.startAFCell, literals.movableHeader)) && this.isFirstCell(this.startAFCell) ? 1 : 0;\n        var rowHeight = this.isLastRow(this.endAFCell) && (parentsUntil(this.endAFCell, literals.movableContent) ||\n            parentsUntil(this.endAFCell, 'e-frozencontent')) ? 2 : 0;\n        var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();\n        var parentRect = this.parent.element.getBoundingClientRect();\n        var sTop = this.startAFCell.offsetParent.parentElement.scrollTop;\n        var sLeft = this.startAFCell.offsetParent.parentElement.scrollLeft;\n        var scrollTop = sTop - this.startAFCell.offsetTop;\n        var scrollLeft = sLeft - this.startAFCell.offsetLeft;\n        var totalHeight = this.parent.element.clientHeight;\n        var totalWidth = this.parent.element.clientWidth;\n        scrollTop = scrollTop > 0 ? Math.floor(scrollTop) - 1 : 0;\n        scrollLeft = scrollLeft > 0 ? scrollLeft : 0;\n        var left = stOff.left - parentRect.left;\n        if (!this.parent.enableRtl) {\n            this.bdrAFLeft.style.left = left - firstCellLeft + scrollLeft - 1 + 'px';\n            this.bdrAFRight.style.left = endOff.left - parentRect.left - 2 + endOff.width + 'px';\n            this.bdrAFRight.style.width = totalWidth <= parseInt(this.bdrAFRight.style.left, 10) ? '0px' : '2px';\n            this.bdrAFTop.style.left = left + scrollLeft - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10)\n                - firstCellLeft + 1 + 'px';\n            if (totalWidth <= (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10))) {\n                var leftRemove = (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10)) - totalWidth;\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - leftRemove + 'px';\n            }\n        }\n        else {\n            var scrolloffSet = (parentsUntil(this.startAFCell, literals.movableContent) ||\n                parentsUntil(this.startAFCell, literals.movableHeader)) ? stOff.right -\n                this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width -\n                parentRect.left : 0;\n            this.bdrAFLeft.style.right = parentRect.right - endOff.right - 2 + endOff.width + 'px';\n            this.bdrAFLeft.style.width = totalWidth <= parseInt(this.bdrAFLeft.style.right, 10) ? '0px' : '2px';\n            this.bdrAFRight.style.right = parentRect.right - stOff.right - firstCellLeft + scrolloffSet - 1 + 'px';\n            this.bdrAFTop.style.left = endOff.left - parentRect.left - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFLeft.style.right, 10) - parseInt(this.bdrAFRight.style.right, 10)\n                - firstCellLeft + 1 + 'px';\n            if (parseInt(this.bdrAFTop.style.left, 10) < 0) {\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) + 'px';\n                this.bdrAFTop.style.left = '0px';\n            }\n        }\n        this.bdrAFLeft.style.top = stOff.top - parentRect.top - firstCellTop + scrollTop + 'px';\n        this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + firstCellTop - rowHeight - scrollTop + 'px' :\n            endOff.height + firstCellTop - rowHeight - scrollTop + 'px';\n        this.bdrAFRight.style.top = this.bdrAFLeft.style.top;\n        this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        this.bdrAFTop.style.top = this.bdrAFRight.style.top;\n        this.bdrAFBottom.style.left = this.bdrAFTop.style.left;\n        this.bdrAFBottom.style.top = parseFloat(this.bdrAFLeft.style.top) + parseFloat(this.bdrAFLeft.style.height) - top - 1 + 'px';\n        this.bdrAFBottom.style.width = totalHeight <= parseFloat(this.bdrAFBottom.style.top) ? '0px' : this.bdrAFTop.style.width;\n        if (totalHeight <= (parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10))) {\n            var topRemove = parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10) - totalHeight;\n            this.bdrAFLeft.style.height = parseInt(this.bdrAFLeft.style.height, 10) - topRemove + 'px';\n            this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        }\n    };\n    Selection.prototype.createAFBorders = function () {\n        if (!this.bdrAFLeft) {\n            this.bdrAFLeft = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafleft', styles: 'width: 2px;' }));\n            this.bdrAFRight = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafright', styles: 'width: 2px;' }));\n            this.bdrAFBottom = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafbottom', styles: 'height: 2px;' }));\n            this.bdrAFTop = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdraftop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = '';\n            this.bdrAFRight.style.display = '';\n            this.bdrAFBottom.style.display = '';\n            this.bdrAFTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = 'none';\n            this.bdrAFRight.style.display = 'none';\n            this.bdrAFBottom.style.display = 'none';\n            this.bdrAFTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.updateValue = function (rIdx, cIdx, cell) {\n        var args = this.createBeforeAutoFill(rIdx, cIdx, cell);\n        if (!args.cancel) {\n            var col = this.parent.getColumnByIndex(cIdx);\n            if (this.parent.editModule && cell) {\n                if (col.type === 'number') {\n                    this.parent.editModule.updateCell(rIdx, col.field, parseInt(args.value, 10));\n                }\n                else {\n                    this.parent.editModule.updateCell(rIdx, col.field, args.value);\n                }\n            }\n        }\n    };\n    Selection.prototype.createBeforeAutoFill = function (rowIndex, colIndex, cell) {\n        var col = this.parent.getColumnByIndex(colIndex);\n        var args = {\n            column: col,\n            value: cell.innerText\n        };\n        this.parent.trigger(events.beforeAutoFill, args);\n        return args;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Selection.prototype.getAutoFillCells = function (rowIndex, startCellIdx) {\n        var cls = '.e-cellselectionbackground';\n        var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll(cls));\n        if (this.parent.isFrozenGrid()) {\n            cells = cells.concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll(cls)));\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                cells = cells.concat([].slice.call(this.parent.getFrozenRightDataRows()[rowIndex].querySelectorAll(cls)));\n            }\n        }\n        return cells;\n    };\n    Selection.prototype.selectLikeAutoFill = function (e, isApply) {\n        var startrowIdx = parseInt(parentsUntil(this.startAFCell, literals.row).getAttribute(literals.ariaRowIndex), 10);\n        var startCellIdx = parseInt(this.startAFCell.getAttribute(literals.ariaColIndex), 10);\n        var endrowIdx = parseInt(parentsUntil(this.endAFCell, literals.row).getAttribute(literals.ariaRowIndex), 10);\n        var endCellIdx = parseInt(this.endAFCell.getAttribute(literals.ariaColIndex), 10);\n        var rowLen = this.selectedRowCellIndexes.length - 1;\n        var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;\n        switch (true) { //direction\n            case !isApply && this.endAFCell.classList.contains('e-cellselectionbackground') &&\n                !!parentsUntil(e.target, literals.rowCell):\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);\n                this.drawAFBorders();\n                break;\n            case this.autoFillRLselection && startCellIdx + colLen < endCellIdx && //right\n                endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen // right bottom\n                && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx: //right top\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);\n                endrowIdx = parseInt(parentsUntil(this.endAFCell, literals.row).getAttribute(literals.ariaRowIndex), 10);\n                endCellIdx = parseInt(this.endAFCell.getAttribute(literals.ariaColIndex), 10);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var cellIdx = parseInt(this.endCell.getAttribute(literals.ariaColIndex), 10);\n                    for (var i = startrowIdx; i <= endrowIdx; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        var c = 0;\n                        for (var j = cellIdx + 1; j <= endCellIdx; j++) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });\n                }\n                break;\n            case this.autoFillRLselection && startCellIdx > endCellIdx && // left\n                startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top\n                startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx: // left bottom\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        cells.reverse();\n                        var c = 0;\n                        for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });\n                }\n                break;\n            case startrowIdx > endrowIdx: //up\n                this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute(literals.ariaRowIndex), 10);\n                    var r = trIdx;\n                    for (var i = startrowIdx - 1; i >= endrowIdx; i--) {\n                        if (r === this.startIndex - 1) {\n                            r = trIdx;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        var c = 0;\n                        r--;\n                        for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });\n                }\n                break;\n            default: //down\n                this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute(literals.ariaRowIndex), 10);\n                    var r = this.startIndex;\n                    for (var i = trIdx + 1; i <= endrowIdx; i++) {\n                        if (r === trIdx + 1) {\n                            r = this.startIndex;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        r++;\n                        var c = 0;\n                        for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {\n                            this.updateValue(i, m, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });\n                }\n                break;\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {\n            this.mUPTarget = parentsUntil(e.target, literals.rowCell);\n        }\n        else {\n            this.mUPTarget = null;\n        }\n        if (this.isDragged && !this.isAutoFillSel && this.selectionSettings.mode === 'Cell') {\n            var target = e.target;\n            var rowIndex = parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            var cellIndex = parseInt(target.getAttribute(literals.ariaColIndex), 10);\n            this.isDragged = false;\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isDragged = false;\n        this.updateAutoFillPosition();\n        if (this.isAutoFillSel) {\n            var lastCell = parentsUntil(e.target, literals.rowCell);\n            this.endAFCell = lastCell ? lastCell : this.endCell === this.endAFCell ? this.startAFCell : this.endAFCell;\n            this.startAFCell = this.startCell;\n            this.updateStartCellsIndex();\n            this.selectLikeAutoFill(e, true);\n            this.updateAutoFillPosition();\n            this.hideAFBorders();\n            this.positionBorders();\n            this.isAutoFillSel = false;\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        if (this.parent.frozenRows) {\n            EventHandler.remove(this.parent.getHeaderContent(), 'mousemove', this.mouseMoveHandler);\n        }\n        EventHandler.remove(document, 'mouseup', this.mouseUpHandler);\n    };\n    Selection.prototype.hideAutoFill = function () {\n        if (this.autofill) {\n            this.autofill.style.display = 'none';\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.updateAutoFillPosition = function () {\n        if (this.parent.enableAutoFill && !this.parent.isEdit &&\n            this.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()\n            && this.selectedRowCellIndexes.length) {\n            var index = parseInt(this.target.getAttribute(literals.ariaColIndex), 10);\n            var rindex = parseInt(this.target.getAttribute('index'), 10);\n            var rowIndex = this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex;\n            var cells = this.getAutoFillCells(rowIndex, index).filter(function (ele) { return ele.style.display === ''; });\n            var col = this.parent.getColumnByIndex(index);\n            var isFrozenCol = col.getFreezeTableName() === 'movable';\n            var isFrozenRow = rindex < this.parent.frozenRows;\n            var isFrozenRight = this.parent.getFrozenMode() === literals.leftRight\n                && col.getFreezeTableName() === literals.frozenRight;\n            if (!select('#' + this.parent.element.id + '_autofill', parentsUntil(this.target, literals.table))) {\n                if (select('#' + this.parent.element.id + '_autofill', this.parent.element)) {\n                    select('#' + this.parent.element.id + '_autofill', this.parent.element).remove();\n                }\n                this.autofill = createElement('div', { className: 'e-autofill', id: this.parent.element.id + '_autofill' });\n                this.autofill.style.display = 'none';\n                if (!isFrozenRow) {\n                    if (!isFrozenCol) {\n                        this.parent.getContentTable().parentElement.appendChild(this.autofill);\n                    }\n                    else {\n                        this.parent.contentModule.getMovableContent().appendChild(this.autofill);\n                    }\n                }\n                else {\n                    if (!isFrozenCol) {\n                        this.parent.getHeaderTable().parentElement.appendChild(this.autofill);\n                    }\n                    else {\n                        this.parent.headerModule.getMovableHeader().appendChild(this.autofill);\n                    }\n                }\n                if (isFrozenRight) {\n                    if (isFrozenRow) {\n                        this.parent.getFrozenRightHeader().appendChild(this.autofill);\n                    }\n                    else {\n                        this.parent.getFrozenRightContent().appendChild(this.autofill);\n                    }\n                }\n            }\n            var cell = cells[cells.length - 1];\n            if (cell && cell.offsetParent) {\n                var clientRect = cell.getBoundingClientRect();\n                var parentOff = cell.offsetParent.getBoundingClientRect();\n                var colWidth = this.isLastCell(cell) ? 4 : 0;\n                var rowHeight = this.isLastRow(cell) ? 3 : 0;\n                if (!this.parent.enableRtl) {\n                    this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 4 - colWidth + 'px';\n                }\n                else {\n                    this.autofill.style.right = parentOff.right - clientRect.right + clientRect.width - 4 - colWidth + 'px';\n                }\n                this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 5 - rowHeight + 'px';\n            }\n            this.autofill.style.display = '';\n        }\n        else {\n            this.hideAutoFill();\n        }\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        this.mouseButton = e.button;\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id || parentsUntil(target, literals.headerContent) && !this.parent.frozenRows ||\n            parentsUntil(target, 'e-editedbatchcell') || parentsUntil(target, literals.editedRow)) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (parentsUntil(target, literals.rowCell) && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop && !gObj.isEdit && !this.parent.selectionSettings.checkboxOnly) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                this.enableDrag(e, true);\n            }\n        }\n        this.updateStartEndCells();\n        if (target.classList.contains('e-autofill') || target.classList.contains('e-xlsel')) {\n            this.isCellDrag = true;\n            this.isAutoFillSel = true;\n            this.enableDrag(e);\n        }\n    };\n    Selection.prototype.updateStartEndCells = function () {\n        var cells = [].slice.call(this.parent.element.getElementsByClassName('e-cellselectionbackground'));\n        this.startCell = cells[0];\n        this.endCell = cells[cells.length - 1];\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, literals.rowCell).getAttribute(literals.ariaColIndex), 10);\n        }\n    };\n    Selection.prototype.updateStartCellsIndex = function () {\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, literals.rowCell).getAttribute(literals.ariaColIndex), 10);\n        }\n    };\n    Selection.prototype.enableDrag = function (e, isUpdate) {\n        var gObj = this.parent;\n        if (isUpdate) {\n            var tr = closest(e.target, 'tr');\n            this.startDIndex = parseInt(tr.getAttribute(literals.ariaRowIndex), 10);\n            this.startDCellIndex = parseInt(parentsUntil(e.target, literals.rowCell).getAttribute(literals.ariaColIndex), 10);\n        }\n        document.body.classList.add('e-disableuserselect');\n        var gBRect = gObj.element.getBoundingClientRect();\n        var postion = getPosition(e);\n        this.x = postion.x - gBRect.left;\n        this.y = postion.y - gBRect.top;\n        EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n        if (this.parent.frozenRows) {\n            EventHandler.add(gObj.getHeaderContent(), 'mousemove', this.mouseMoveHandler, this);\n        }\n        EventHandler.add(document, 'mouseup', this.mouseUpHandler, this);\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfiniteScroll) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.uiUpdate, handler: this.enableAfterRender },\n            { event: events.initialEnd, handler: this.initializeSelection },\n            { event: events.rowSelectionComplete, handler: this.onActionComplete },\n            { event: events.cellSelectionComplete, handler: this.onActionComplete },\n            { event: events.inBoundModelChanged, handler: this.onPropertyChanged },\n            { event: events.cellFocused, handler: this.onCellFocused },\n            { event: events.beforeFragAppend, handler: this.clearSelAfterRefresh },\n            { event: events.columnPositionChanged, handler: this.columnPositionChanged },\n            { event: events.contentReady, handler: this.initialEnd },\n            { event: events.rowsRemoved, handler: this.rowsRemoved },\n            { event: events.headerRefreshed, handler: this.refreshHeader }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.wireEvents = function () {\n        this.isMacOS = navigator.userAgent.indexOf('Mac OS') !== -1;\n        if (this.isMacOS) {\n            EventHandler.add(this.parent.element, 'keydown', this.keyDownHandler, this);\n            EventHandler.add(this.parent.element, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Selection.prototype.unWireEvents = function () {\n        if (this.isMacOS) {\n            EventHandler.remove(this.parent.element, 'keydown', this.keyDownHandler);\n            EventHandler.remove(this.parent.element, 'keyup', this.keyUpHandler);\n        }\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.initPerisistSelection();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n        EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n                this.prevCIdxs = undefined;\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n                this.prevRowIndex = undefined;\n            }\n            if (this.selectedColumnsIndexes.length > 1) {\n                this.clearColumnSelection();\n                this.prevColIndex = undefined;\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevColIndex = undefined;\n        }\n        this.isPersisted = true;\n        this.checkBoxSelectionChanged();\n        this.isPersisted = false;\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n        this.drawBorders();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function (e) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLeftRightFrozen = this.parent.getFrozenMode() === literals.leftRight;\n        if (!isFrozen || (isFrozen && (!isLeftRightFrozen && !e.args.isFrozen)\n            || (isLeftRightFrozen && e.args.renderFrozenRightContent))) {\n            this.parent.off(events.contentReady, this.initialEnd);\n            this.selectRow(this.parent.selectedRowIndex);\n        }\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        var gobj = this.parent;\n        gobj.off(events.contentReady, this.checkBoxSelectionChanged);\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection && !this.isPersisted) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            if (!query.params) {\n                query.params = this.parent.query.params;\n            }\n            var dataManager = data.getData({}, query);\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote() && !isBlazor()) {\n            if (state) {\n                if (this.parent.groupSettings.columns.length) {\n                    for (var _i = 0, _a = this.getData().records; _i < _a.length; _i++) {\n                        var data = _a[_i];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n                else {\n                    for (var _b = 0, _c = this.getData(); _b < _c.length; _b++) {\n                        var data = _c[_b];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (this.parent.isCheckBoxSelection && this.parent.isFrozenGrid()) {\n            var mtbody = this.parent.getMovableContentTbody();\n            if (mtbody.querySelector('.e-checkselect')) {\n                rows = this.parent.getMovableRows();\n            }\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                var frtbody = this.parent.getFrozenRightContentTbody();\n                if (frtbody.querySelector('.e-checkselect')) {\n                    rows = this.parent.getFrozenRightRows();\n                }\n            }\n        }\n        this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n        if (this.parent.allowPaging) {\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (rows !== null && rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data ? rowObj.data[this.primaryKey] : null : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' &&\n                    this.totalRecordsCount === Object.keys(this.selectedRowState).length && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute(literals.ariaRowIndex), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            if (this.isSingleSel() && indexes.length > 0) {\n                this.selectRow(indexes[0], true);\n            }\n            else {\n                this.selectRows(indexes);\n            }\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.' + literals.editedRow);\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            var records = e.data;\n            var data = records.slice();\n            for (var i = 0; i < data.length; i++) {\n                if (!isNullOrUndefined(data[i][this.primaryKey])) {\n                    this.updatePersistDelete(data[i][this.primaryKey]);\n                }\n            }\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (e.requestType === 'paging') {\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            if (this.selectedRecords.length) {\n                this.isPrevRowSelection = true;\n            }\n            this.refreshPersistSelection();\n        }\n        if (this.parent.enableVirtualization) {\n            this.setCheckAllState();\n        }\n        this.initialRowSelection = this.isRowType() && this.parent.element.querySelectorAll('.e-selectionbackground') &&\n            this.parent.getSelectedRows().length ? true : false;\n        if (this.parent.isCheckBoxSelection && !this.initialRowSelection) {\n            var totalRecords = this.parent.getRowsObject();\n            var indexes = [];\n            for (var i = 0; i < totalRecords.length; i++) {\n                if (totalRecords[i].isSelected) {\n                    indexes.push(i);\n                }\n            }\n            if (indexes.length) {\n                this.selectRows(indexes);\n            }\n            this.initialRowSelection = true;\n        }\n    };\n    Selection.prototype.updatePersistSelectedData = function (checkState) {\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = (!this.parent.getDataModule().isRemote() && !isBlazor()) ?\n                    this.parent.groupSettings.columns.length ? this.getData().records.slice() :\n                        this.getData().slice() : this.persistSelectedData;\n            }\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.parent.checkAllRows = 'Check';\n            this.updatePersistSelectedData(checkState);\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));\n        }\n        else {\n            this.parent.checkAllRows = 'Uncheck';\n            this.updatePersistSelectedData(checkState);\n            this.clearSelection();\n        }\n        this.chkAllCollec = [];\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n            }\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        this.isHeaderCheckboxClicked = true;\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        if (this.parent.isPersistSelection && this.parent.allowPaging) {\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.' + literals.rowCell);\n        var gObj = this.parent;\n        this.isMultiCtrlRequest = true;\n        var rIndex = 0;\n        this.isHeaderCheckboxClicked = false;\n        if (isGroupAdaptive(gObj)) {\n            var uid = target.parentElement.getAttribute('data-uid');\n            rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n        }\n        else {\n            rIndex = parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10);\n        }\n        if (this.parent.isPersistSelection && this.parent.element.getElementsByClassName(literals.addedRow).length > 0 &&\n            this.parent.editSettings.newRowPosition === 'Top') {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute(literals.ariaColIndex), 10));\n        this.moveIntoUncheckCollection(closest(target, '.' + literals.row));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && !this.parent.getDataModule().isRemote()\n            && !(isBlazor() && this.parent.isServerRendered)) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                var dataLength = this.getData().length;\n                for (var data = 0; data < dataLength; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                var row = this.parent.getRowByIndex(index);\n                if (index && row && row.getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkToSelectAll = void 0;\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRowIndexes.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            var input = this.getCheckAllBox();\n            if (input) {\n                var spanEle = input.nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                setChecked(input, false);\n                input.indeterminate = false;\n                if (checkToSelectAll || checkedLen === this.totalRecordsCount && this.totalRecordsCount\n                    || ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                        && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()\n                        && !(isBlazor() && this.parent.isServerRendered)\n                        && (this.getData().length && checkedLen === this.getData().length))) {\n                    addClass([spanEle], ['e-check']);\n                    setChecked(input, true);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (!this.selectedRowIndexes.length ||\n                    checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                    input.indeterminate = true;\n                }\n                if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.keyDownHandler = function (e) {\n        // Below are keyCode for command key in MAC OS. Safari/Chrome(91-Left command, 93-Right Command), Opera(17), FireFox(224)\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = true;\n        }\n    };\n    Selection.prototype.keyUpHandler = function (e) {\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = false;\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.actualTarget = target;\n        if (this.selectionSettings.persistSelection) {\n            this.deSelectedData = iterateExtend(this.persistSelectedData);\n        }\n        if (parentsUntil(target, literals.row) || parentsUntil(target, 'e-headerchkcelldiv') ||\n            (this.selectionSettings.allowColumnSelection && target.classList.contains('e-headercell'))) {\n            this.isInteracted = true;\n        }\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch ||\n            (this.isMacOS && this.cmdKeyPressed);\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        this.checkSelectAllClicked = checkWrap && checkWrap.getElementsByClassName('e-checkselectall') ||\n            (this.selectionSettings.persistSelection && parentsUntil(target, literals.row)) ? true : false;\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        this.drawBorders();\n        this.updateAutoFillPosition();\n        target = parentsUntil(target, literals.rowCell);\n        if ((target && target.parentElement.classList.contains(literals.row) && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                }\n            }\n            else {\n                var gObj = this.parent;\n                var rIndex = 0;\n                if (isGroupAdaptive(gObj)) {\n                    var uid = target.parentElement.getAttribute('data-uid');\n                    rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n                }\n                else {\n                    rIndex = parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10);\n                }\n                if (this.parent.isPersistSelection && this.parent.element.getElementsByClassName(literals.addedRow).length > 0) {\n                    ++rIndex;\n                }\n                if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {\n                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute(literals.ariaColIndex), 10));\n                }\n                this.parent.hoverFrozenRows(e);\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.' + literals.row));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        else if (e.target.classList.contains('e-headercell') &&\n            !e.target.classList.contains('e-stackedheadercell')) {\n            var uid = e.target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            this.headerSelectionHandler(this.parent.getColumnIndexByUid(uid));\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        if (isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            this.preventFocus = false;\n        }\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        if (!this.selectionSettings.enableSimpleMultiRowSelection) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n                (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                    || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n        }\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, this.selectionSettings.enableToggle);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, this.selectionSettings.enableToggle);\n            if (this.selectedRowCellIndexes.length) {\n                this.updateAutoFillPosition();\n            }\n            this.drawBorders();\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection &&\n                !closest(this.target, '.' + literals.rowCell).classList.contains(literals.gridChkBox))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.updateAutoFillPosition();\n            this.drawBorders();\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n            this.showHideBorders('none');\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute(literals.ariaRowIndex));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.isFrozenGrid() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump &&\n            !this.selectionSettings.allowColumnSelection) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space')\n            && !(e.element.classList.contains('e-detailrowexpand') || e.element.classList.contains('e-detailrowcollapse'));\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.' + literals.rowCell))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.' + literals.rowCell))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n        }\n        if (this.parent.isFrozenGrid()) {\n            var cIdx = Number(e.element.getAttribute(literals.ariaColIndex));\n            var selectedIndexes = this.parent.getSelectedRowCellIndexes();\n            if (selectedIndexes.length && prev.cellIndex === 0) {\n                prev.cellIndex = selectedIndexes[selectedIndexes.length - 1].cellIndexes[0];\n            }\n            prev.cellIndex = !isNullOrUndefined(prev.cellIndex) ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n            cellIndex = cIdx;\n        }\n        if ((headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 &&\n            e.keyArgs.action !== 'space' && rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) &&\n            !this.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        this.preventFocus = true;\n        var columnIndex = this.getKeyColIndex(e);\n        if (this.needColumnSelection) {\n            cellIndex = columnIndex;\n        }\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.target = e.element;\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n            case 'tab':\n                if (this.parent.editSettings.allowNextRowEdit) {\n                    this.selectRow(rowIndex);\n                }\n                break;\n        }\n        this.needColumnSelection = false;\n        this.preventFocus = false;\n        this.positionBorders();\n        this.updateAutoFillPosition();\n    };\n    Selection.prototype.getKeyColIndex = function (e) {\n        var uid;\n        var index = null;\n        var stackedHeader = e.element.querySelector('.e-stackedheadercelldiv');\n        if (this.selectionSettings.allowColumnSelection && parentsUntil(e.element, 'e-columnheader')) {\n            this.needColumnSelection = e.container.isHeader ? true : false;\n            if (stackedHeader) {\n                if (e.keyArgs.action === 'rightArrow' || e.keyArgs.action === 'leftArrow') {\n                    return index;\n                }\n                uid = stackedHeader.getAttribute('e-mappinguid');\n                var innerColumn = this.getstackedColumns(this.parent.getColumnByUid(uid).columns);\n                var lastIndex = this.parent.getColumnIndexByUid(innerColumn[innerColumn.length - 1].uid);\n                var firstIndex = this.parent.getColumnIndexByUid(innerColumn[0].uid);\n                index = this.prevColIndex >= lastIndex ? firstIndex : lastIndex;\n            }\n            else {\n                index = this.parent.getColumnIndexByUid(e.element\n                    .querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            }\n        }\n        return index;\n    };\n    /**\n     * Apply ctrl + A key selection\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.getCurrentBatchRecordChanges().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumn(cellIndex);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute(literals.ariaColIndex), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).getElementsByClassName(literals.rowCell)[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).getElementsByClassName(literals.rowCell)[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).getElementsByClassName(literals.rowCell)[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumn(cellIndex);\n        }\n        else if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     *\n     * @param {number} rowIndex - specfies the rowIndex\n     * @param {number} cellIndex - specifies the CellIndex\n     * @returns {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        this.isMultiShiftRequest = true;\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumnsByRange(this.prevColIndex, cellIndex);\n        }\n        else {\n            this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.getstackedColumns = function (column) {\n        var innerColumnIndexes = [];\n        for (var i = 0, len = column.length; i < len; i++) {\n            if (column[i].columns) {\n                this.getstackedColumns(column[i].columns);\n            }\n            else {\n                innerColumnIndexes.push(column[i]);\n            }\n        }\n        return innerColumnIndexes;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.getElementsByClassName(literals.rowCell));\n            var detailIndentCell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            var dragdropIndentCell = row.querySelector('.e-rowdragdrop');\n            if (detailIndentCell) {\n                cells.push(detailIndentCell);\n            }\n            if (dragdropIndentCell) {\n                cells.push(dragdropIndentCell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     *\n     * @returns {Object[]} returns the Object\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    /**\n     * Select the column by passing start column index\n     *\n     * @param {number} index - specifies the index\n     * @returns {void}\n     */\n    Selection.prototype.selectColumn = function (index) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[index])) {\n            return;\n        }\n        var column = gObj.getColumnByIndex(index);\n        var selectedCol = gObj.getColumnHeaderByUid(column.uid);\n        var isColSelected = selectedCol.classList.contains('e-columnselection');\n        if ((!gObj.selectionSettings.allowColumnSelection)) {\n            return;\n        }\n        var isMultiColumns = this.selectedColumnsIndexes.length > 1 &&\n            this.selectedColumnsIndexes.indexOf(index) > -1;\n        this.clearColDependency();\n        if (!isColSelected || !this.selectionSettings.enableToggle || isMultiColumns) {\n            var args = {\n                columnIndex: index, headerCell: selectedCol,\n                column: column,\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n            this.onActionBegin(args, events.columnSelecting);\n            if (args.cancel) {\n                this.disableInteracted();\n                return;\n            }\n            if (!(gObj.selectionSettings.enableToggle && index === this.prevColIndex && isColSelected) || isMultiColumns) {\n                this.updateColSelection(selectedCol, index);\n            }\n            var selectedArgs = {\n                columnIndex: index, headerCell: selectedCol,\n                column: column,\n                target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n            };\n            this.onActionComplete(selectedArgs, events.columnSelected);\n        }\n        this.updateColProps(index);\n    };\n    /**\n     * Select the columns by passing start and end column index\n     *\n     * @param  {number} startIndex - specifies the start index\n     * @param  {number} endIndex - specifies the end index\n     * @returns {void}\n     */\n    Selection.prototype.selectColumnsByRange = function (startIndex, endIndex) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[startIndex])) {\n            return;\n        }\n        var indexes = [];\n        if (gObj.selectionSettings.type === 'Single' || isNullOrUndefined(endIndex)) {\n            indexes[0] = startIndex;\n        }\n        else {\n            var min = startIndex < endIndex;\n            for (var i = startIndex; min ? i <= endIndex : i >= endIndex; min ? i++ : i--) {\n                indexes.push(i);\n            }\n        }\n        this.selectColumns(indexes);\n    };\n    /**\n     * Select the columns by passing column indexes\n     *\n     * @param  {number[]} columnIndexes - specifies the columnIndexes\n     * @returns {void}\n     */\n    Selection.prototype.selectColumns = function (columnIndexes) {\n        var gObj = this.parent;\n        var selectedCol = this.getselectedCols();\n        if (gObj.selectionSettings.type === 'Single') {\n            columnIndexes = [columnIndexes[0]];\n        }\n        if (!gObj.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        this.clearColDependency();\n        var selectingArgs = {\n            columnIndex: columnIndexes[0], headerCell: selectedCol,\n            columnIndexes: columnIndexes,\n            column: gObj.getColumnByIndex(columnIndexes[0]),\n            cancel: false, target: this.actualTarget,\n            isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n        };\n        this.onActionBegin(selectingArgs, events.columnSelecting);\n        if (selectingArgs.cancel) {\n            this.disableInteracted();\n            return;\n        }\n        for (var i = 0, len = columnIndexes.length; i < len; i++) {\n            this.updateColSelection(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(columnIndexes[i]).uid), columnIndexes[i]);\n        }\n        selectedCol = this.getselectedCols();\n        var selectedArgs = {\n            columnIndex: columnIndexes[0], headerCell: selectedCol,\n            columnIndexes: columnIndexes,\n            column: gObj.getColumnByIndex(columnIndexes[0]),\n            target: this.actualTarget,\n            isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n        };\n        this.onActionComplete(selectedArgs, events.columnSelected);\n        this.updateColProps(columnIndexes[0]);\n    };\n    /**\n     * Select the column with existing column by passing column index\n     *\n     * @param  {number} startIndex - specifies the start index\n     * @returns {void}\n     */\n    Selection.prototype.selectColumnWithExisting = function (startIndex) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[startIndex])) {\n            return;\n        }\n        var newCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(startIndex).uid);\n        var selectedCol = this.getselectedCols();\n        if (gObj.selectionSettings.type === 'Single') {\n            this.clearColDependency();\n        }\n        if (!gObj.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        if (this.selectedColumnsIndexes.indexOf(startIndex) > -1) {\n            this.clearColumnSelection(startIndex);\n        }\n        else {\n            var selectingArgs = {\n                columnIndex: startIndex, headerCell: selectedCol,\n                columnIndexes: this.selectedColumnsIndexes,\n                column: gObj.getColumnByIndex(startIndex),\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n            this.onActionBegin(selectingArgs, events.columnSelecting);\n            if (selectingArgs.cancel) {\n                this.disableInteracted();\n                return;\n            }\n            this.updateColSelection(newCol, startIndex);\n            selectedCol = this.getselectedCols();\n            var selectedArgs = {\n                columnIndex: startIndex, headerCell: selectedCol,\n                column: gObj.getColumnByIndex(startIndex),\n                columnIndexes: this.selectedColumnsIndexes,\n                target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n            };\n            this.onActionComplete(selectedArgs, events.columnSelected);\n        }\n        this.updateColProps(startIndex);\n    };\n    /**\n     * Clear the column selection\n     *\n     * @param {number} clearIndex - specifies the clearIndex\n     * @returns {void}\n     */\n    Selection.prototype.clearColumnSelection = function (clearIndex) {\n        if (this.isColumnSelected) {\n            var gObj = this.parent;\n            if (!isNullOrUndefined(clearIndex) && this.selectedColumnsIndexes.indexOf(clearIndex) === -1) {\n                return;\n            }\n            var index = !isNullOrUndefined(clearIndex) ? clearIndex :\n                this.selectedColumnsIndexes[this.selectedColumnsIndexes.length - 1];\n            var col = gObj.getColumnByIndex(index);\n            var selectedCol = void 0;\n            var column = gObj.getColumnByIndex(index);\n            if (col.getFreezeTableName() === literals.frozenRight) {\n                selectedCol = gObj.getFrozenRightColumnHeaderByIndex(index);\n            }\n            else if (col.getFreezeTableName() === 'movable') {\n                selectedCol = gObj.getMovableColumnHeaderByIndex(index);\n            }\n            else {\n                selectedCol = gObj.getColumnHeaderByUid(column.uid);\n            }\n            var deselectedArgs = {\n                columnIndex: index, headerCell: selectedCol,\n                columnIndexes: this.selectedColumnsIndexes,\n                column: column,\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted\n            };\n            var isCanceled = this.columnDeselect(deselectedArgs, events.columnDeselecting);\n            if (isCanceled) {\n                this.disableInteracted();\n                return;\n            }\n            var selectedHeader = !isNullOrUndefined(clearIndex) ? [selectedCol] :\n                [].slice.call(gObj.getHeaderContent().getElementsByClassName('e-columnselection'));\n            var selectedCells = this.getSelectedColumnCells(clearIndex);\n            for (var i = 0, len = selectedHeader.length; i < len; i++) {\n                addRemoveActiveClasses([selectedHeader[i]], false, 'e-columnselection');\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                addRemoveActiveClasses([selectedCells[i]], false, 'e-columnselection');\n            }\n            if (!isNullOrUndefined(clearIndex)) {\n                this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(clearIndex), 1);\n                this.parent.getColumns()[clearIndex].isSelected = false;\n            }\n            else {\n                this.columnDeselect(deselectedArgs, events.columnDeselected);\n                this.selectedColumnsIndexes = [];\n                this.isColumnSelected = false;\n                this.parent.getColumns().filter(function (col) { return col.isSelected = false; });\n            }\n        }\n    };\n    Selection.prototype.getselectedCols = function () {\n        var gObj = this.parent;\n        var selectedCol;\n        if (this.selectedColumnsIndexes.length > 1) {\n            selectedCol = [];\n            for (var i = 0; i < this.selectedColumnsIndexes.length; i++) {\n                (selectedCol).push(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[i]).uid));\n            }\n        }\n        else {\n            selectedCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);\n        }\n        return selectedCol;\n    };\n    Selection.prototype.getSelectedColumnCells = function (clearIndex) {\n        var gObj = this.parent;\n        var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);\n        var rows = isRowTemplate ? gObj.getRows() : gObj.getDataRows();\n        var movableRows;\n        var frRows;\n        if (gObj.isFrozenGrid() && gObj.getContent().querySelector('.' + literals.movableContent)) {\n            movableRows = isRowTemplate ? gObj.getMovableRows() : gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, movableRows);\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                frRows = isRowTemplate ? gObj.getFrozenRightRows() : gObj.getFrozenRightDataRows();\n                rows = gObj.addMovableRows(rows, frRows);\n            }\n        }\n        var seletedcells = [];\n        var selectionString = !isNullOrUndefined(clearIndex) ? '[aria-colindex=\"' + clearIndex + '\"]' : '.e-columnselection';\n        for (var i = 0, len = rows.length; i < len; i++) {\n            seletedcells = seletedcells.concat([].slice.call(rows[i].querySelectorAll(selectionString)));\n        }\n        return seletedcells;\n    };\n    Selection.prototype.columnDeselect = function (args, event) {\n        if (event === 'columnDeselected') {\n            delete args.cancel;\n        }\n        this.onActionComplete(args, event);\n        return args.cancel;\n    };\n    Selection.prototype.updateColProps = function (startIndex) {\n        this.prevColIndex = startIndex;\n        this.isColumnSelected = this.selectedColumnsIndexes.length && true;\n    };\n    Selection.prototype.clearColDependency = function () {\n        this.clearColumnSelection();\n        this.selectedColumnsIndexes = [];\n    };\n    Selection.prototype.updateColSelection = function (selectedCol, startIndex) {\n        if (isNullOrUndefined(this.parent.getColumns()[startIndex])) {\n            return;\n        }\n        var left = this.parent.getFrozenLeftCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var col = this.parent.getColumnByIndex(startIndex);\n        var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);\n        var rows;\n        this.selectedColumnsIndexes.push(startIndex);\n        this.parent.getColumns()[startIndex].isSelected = true;\n        if (col.getFreezeTableName() === literals.frozenRight) {\n            startIndex = startIndex - (left + movable);\n            rows = isRowTemplate ? this.parent.getFrozenRightRows() : this.parent.getFrozenRightDataRows();\n        }\n        else if (col.getFreezeTableName() === 'movable') {\n            startIndex = startIndex - left;\n            rows = isRowTemplate ? this.parent.getMovableRows() : this.parent.getMovableDataRows();\n        }\n        else {\n            startIndex = startIndex + this.parent.getIndentCount();\n            rows = isRowTemplate ? this.parent.getRows() : this.parent.getDataRows();\n        }\n        addRemoveActiveClasses([selectedCol], true, 'e-columnselection');\n        for (var j = 0, len = rows.length; j < len; j++) {\n            if (rows[j].classList.contains(literals.row)) {\n                if ((rows[j].classList.contains(literals.editedRow) || rows[j].classList.contains(literals.addedRow)) &&\n                    this.parent.editSettings.mode === 'Normal' && !isNullOrUndefined(rows[j].querySelector('tr').childNodes[startIndex])) {\n                    addRemoveActiveClasses([rows[j].querySelector('tr').childNodes[startIndex]], true, 'e-columnselection');\n                }\n                else if (!isNullOrUndefined(rows[j].childNodes[startIndex])) {\n                    addRemoveActiveClasses([rows[j].childNodes[startIndex]], true, 'e-columnselection');\n                }\n            }\n        }\n    };\n    Selection.prototype.headerSelectionHandler = function (colIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            this.selectColumn(colIndex);\n        }\n        else if (this.isMultiShiftRequest) {\n            this.selectColumnsByRange(isUndefined(this.prevColIndex) ? colIndex : this.prevColIndex, colIndex);\n        }\n        else {\n            this.selectColumnWithExisting(colIndex);\n        }\n    };\n    // eslint-disable-next-line camelcase\n    Selection.prototype.addEventListener_checkbox = function () {\n        var _this = this;\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.parent.on(events.beforeRefreshOnDataChange, this.initPerisistSelection, this);\n        this.parent.on(events.onEmpty, this.setCheckAllForEmptyGrid, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.resizeEndFn = function () {\n            _this.updateAutoFillPosition();\n            _this.drawBorders();\n        };\n        this.resizeEndFn.bind(this);\n        this.parent.addEventListener(events.resizeStop, this.resizeEndFn);\n    };\n    // eslint-disable-next-line camelcase\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.onEmpty, this.setCheckAllForEmptyGrid);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.beforeRefreshOnDataChange, this.initPerisistSelection);\n    };\n    Selection.prototype.setCheckAllForEmptyGrid = function () {\n        var checkAllBox = this.getCheckAllBox();\n        if (checkAllBox) {\n            this.parent.isCheckBoxSelection = true;\n            var spanEle = checkAllBox.nextElementSibling;\n            removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n        }\n    };\n    Selection.prototype.dataReady = function (e) {\n        this.isHeaderCheckboxClicked = false;\n        var isInfinitecroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfinitecroll) {\n            this.disableUI = !this.parent.enableImmutableMode;\n            this.clearSelection();\n            this.setCheckAllState();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.selectRowIndex = function (index) {\n        this.parent.isSelectedRowIndexUpdating = true;\n        this.parent.selectedRowIndex = index;\n    };\n    Selection.prototype.disableInteracted = function () {\n        this.isInteracted = false;\n    };\n    Selection.prototype.activeTarget = function () {\n        this.actualTarget = this.isInteracted ? this.actualTarget : null;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](grid/#searchsettings/).\n     *\n     * @param  {string} searchString - Defines the key.\n     * @returns {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @param {NotifyArgs} e - specfies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    /**\n     * The function used to store the requestType\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isGroupAdaptive } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     *\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @returns {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = true;\n        }\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     *\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @returns {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = false;\n        }\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key) {\n            return iterateArrayOrObject(_this.parent.columnModel, function (item) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     *\n     * @private\n     * @param {Column[]} columns - Specifies the columns.\n     * @param {Column[]} changedStateColumns - specifies the changedStateColumns\n     * @returns {void}\n     */\n    ShowHide.prototype.setVisible = function (columns, changedStateColumns) {\n        var _this = this;\n        if (changedStateColumns === void 0) { changedStateColumns = []; }\n        changedStateColumns = (changedStateColumns.length > 0) ? changedStateColumns : columns;\n        var args = {\n            requestType: 'columnstate',\n            cancel: false,\n            columns: changedStateColumns\n        };\n        var cancel = 'cancel';\n        this.parent.trigger(events.actionBegin, args, function (showHideArgs) {\n            var currentViewCols = _this.parent.getColumns();\n            columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n            if (showHideArgs[cancel]) {\n                _this.parent.notify(events.resetColumns, { showHideArgs: showHideArgs });\n                if (columns.length > 0) {\n                    columns[0].visible = true;\n                }\n                return;\n            }\n            if (isGroupAdaptive(_this.parent)) {\n                _this.parent.contentModule.emptyVcRows();\n            }\n            if (_this.parent.allowSelection && _this.parent.getSelectedRecords().length &&\n                !_this.parent.selectionSettings.persistSelection) {\n                _this.parent.clearSelection();\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                var colsInCurrentView = columns.filter(function (col1) { return (currentViewCols.some(function (col2) { return col1.field === col2.field; })); });\n                if (colsInCurrentView.length) {\n                    _this.parent.notify(events.columnVisibilityChanged, columns);\n                }\n            }\n            else {\n                _this.parent.notify(events.columnVisibilityChanged, columns);\n            }\n            var params = {\n                requestType: 'columnstate',\n                columns: changedStateColumns\n            };\n            _this.parent.trigger(events.actionComplete, params);\n            if (_this.parent.columnQueryMode !== 'All') {\n                _this.parent.refresh();\n            }\n        });\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh, virtualScrollEdit, infiniteScrollHandler, closeFilterDialog } from '../base/constant';\nimport { lazyLoadScrollHandler, checkScrollReset } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as literals from '../base/string-literals';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Scroll(parent) {\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @param {boolean} uiupdate - specifies the uiupdate\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().querySelector('.' + literals.content);\n        var height = this.parent.height;\n        if (this.parent.isFrozenGrid() && this.parent.height !== 'auto' && this.parent.height.toString().indexOf('%') < 0) {\n            height = parseInt(height, 10) - Scroll.getScrollBarWidth();\n        }\n        if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== 'auto') {\n            var tbody = this.parent.getHeaderContent().querySelector(literals.tbody);\n            mHdrHeight = tbody ? tbody.offsetHeight : 0;\n            if (tbody && mHdrHeight) {\n                var add = tbody.getElementsByClassName(literals.addedRow).length;\n                var height_1 = add * this.parent.getRowHeight();\n                mHdrHeight -= height_1;\n            }\n            content.style.height = formatUnit(height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(height);\n        }\n        this.ensureOverflow(content);\n        if (this.parent.isFrozenGrid()) {\n            this.refresh();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        var padding = this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === literals.leftRight ? '0.5px' : '1px';\n        content.querySelector('.' + literals.headerContent).style[cssProps.border] = scrollWidth > 0 ? padding : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @param {boolean} rtl - specifies the rtl\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        var hDiv = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n        hDiv.style[cssProps.border] = '';\n        hDiv.parentElement.style[cssProps.padding] = '';\n        var footerDiv = this.parent.getFooterContent();\n        if (footerDiv && footerDiv.classList.contains('e-footerpadding')) {\n            footerDiv.classList.remove('e-footerpadding');\n        }\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](grid/#height/) must be set to 100%.\n     *\n     * @returns {void}\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the  '.' + literals.gridContent;\n        if (this.parent.isFrozenGrid()) {\n            content.firstElementChild.style.height = 'calc(100% - ' + getScrollBarWidth() + 'px)';\n        }\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.isFrozenGrid()) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n        else {\n            this.parent.getHeaderContent().querySelector('.' + literals.headerContent).scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onFrozenContentScroll = function () {\n        var _this = this;\n        return function (e) {\n            if (_this.content.querySelector(literals.tbody) === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                _this.parent.notify(infiniteScrollHandler, e);\n            }\n            _this.previousValues.top = e.target.scrollTop;\n        };\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains(literals.headerContent);\n        return function (e) {\n            if (_this.content.querySelector(literals.tbody) === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                _this.parent.notify(infiniteScrollHandler, { target: e.target, isLeft: _this.previousValues.left !== left });\n            }\n            if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {\n                var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;\n                _this.parent.notify(lazyLoadScrollHandler, { scrollDown: isDown });\n            }\n            _this.parent.notify(virtualScrollEdit, {});\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            _this.parent.notify(closeFilterDialog, e);\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onCustomScrollbarScroll = function (mCont, mHdr) {\n        var _this = this;\n        var content = mCont;\n        var header = mHdr;\n        return function (e) {\n            if (_this.content.querySelector(literals.tbody) === null) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (_this.previousValues.left === left) {\n                return;\n            }\n            content.scrollLeft = left;\n            header.scrollLeft = left;\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var isFrozen = _this.parent.isFrozenGrid();\n            var pageXY = _this.getPointXY(e);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            var mHdr = isFrozen ?\n                _this.parent.getHeaderContent().querySelector('.' + literals.movableHeader) :\n                _this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n            var mCont = isFrozen ?\n                _this.parent.getContent().querySelector('.' + literals.movableContent) :\n                _this.parent.getContent().querySelector('.' + literals.content);\n            if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                return;\n            }\n            e.preventDefault();\n            mHdr.scrollLeft = left;\n            mCont.scrollLeft = left;\n            if (isFrozen) {\n                var scrollBar = _this.parent.getContent().querySelector('.e-movablescrollbar');\n                scrollBar.scrollLeft = left;\n            }\n            _this.pageXY.x = pageXY.x;\n            _this.previousValues.left = left;\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.isFrozenGrid();\n            this.content = this.parent.getContent().querySelector('.' + literals.content);\n            this.header = this.parent.getHeaderContent().querySelector('.' + literals.headerContent);\n            var mCont = this.content.querySelector('.' + literals.movableContent);\n            var mHdr = this.header.querySelector('.' + literals.movableHeader);\n            var mScrollBar = this.parent.getContent().querySelector('.e-movablescrollbar');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (this.parent.isFrozenGrid()) {\n                EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(mCont, mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mHdr), this);\n                EventHandler.add(mHdr, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mCont), this);\n                EventHandler.add(this.content, 'scroll', this.onFrozenContentScroll(), this);\n                EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n                EventHandler.add(mCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mCont, 'touchmove pointermove', this.onTouchScroll(mHdr), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            var args = { cancel: false };\n            _this.parent.notify(checkScrollReset, args);\n            if (!_this.parent.enableVirtualization && !_this.parent.enableInfiniteScrolling) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.isFrozenGrid()) {\n                        addClass(_this.parent.getContent().querySelector('.' + literals.movableContent).querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if (!args.cancel) {\n                    if ((_this.parent.frozenRows > 0 || _this.parent.isFrozenGrid()) && _this.header.querySelector('.' + literals.movableHeader)) {\n                        _this.header.querySelector('.' + literals.movableHeader).scrollLeft = _this.previousValues.left;\n                    }\n                    else {\n                        _this.header.scrollLeft = _this.previousValues.left;\n                    }\n                    _this.content.scrollLeft = _this.previousValues.left;\n                    _this.content.scrollTop = _this.previousValues.top;\n                }\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.isFrozenGrid() && _this.header.querySelector('.' + literals.movableHeader)) {\n                _this.header.querySelector('.' + literals.movableHeader).scrollLeft =\n                    _this.content.querySelector('.' + literals.movableContent).scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @param {boolean} rtl - specifies the rtl\n     * @returns {ScrollCss} returns the ScrollCss\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[width]));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        var cont = this.parent.getContent().querySelector('.' + literals.content);\n        removeClass([this.parent.getHeaderContent().querySelector('.' + literals.headerContent)], literals.headerContent);\n        removeClass([cont], literals.content);\n        //Remove height\n        cont.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(cont, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     *\n     * @returns {number} return the width\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @param {Function} value - specifies the value\n     * @returns {void}\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /**\n     * @returns {Function} returns the Function\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @param {Object} helper - specifies the helper\n     * @returns {void}\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @param {CellType} type - specifies the cell type\n     * @returns {Object} returns the object\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @param {Object} prop - returns the Object\n     * @returns {void}\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove, EventHandler, isUndefined, closest, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        EventHandler.add(this.parent.element, 'keydown', this.pasteHandler, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.click, this.clickHandler);\n        EventHandler.remove(this.parent.element, 'keydown', this.pasteHandler);\n    };\n    Clipboard.prototype.clickHandler = function (e) {\n        var target = e.target;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        target = parentsUntil(target, 'e-rowcell');\n    };\n    Clipboard.prototype.pasteHandler = function (e) {\n        var _this = this;\n        var grid = this.parent;\n        var isMacLike = /(Mac)/i.test(navigator.platform);\n        if (e.keyCode === 86 && (e.ctrlKey || (isMacLike && e.metaKey)) && !grid.isEdit) {\n            var target = closest(document.activeElement, '.' + literals.rowCell);\n            if (!target || !grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n                grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n                return;\n            }\n            this.activeElement = document.activeElement;\n            this.clipBoardTextArea.value = '';\n            var x_1 = window.scrollX;\n            var y_1 = window.scrollY;\n            this.clipBoardTextArea.focus();\n            setTimeout(function () {\n                _this.activeElement.focus();\n                window.scrollTo(x_1, y_1);\n                _this.paste(_this.clipBoardTextArea.value, _this.parent.getSelectedRowCellIndexes()[0].rowIndex, _this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0]);\n            }, 10);\n        }\n    };\n    /**\n     * Paste data from clipboard to selected cells.\n     *\n     * @param {boolean} data - Specifies the date for paste.\n     * @param {boolean} rowIndex - Specifies the row index.\n     * @param {boolean} colIndex - Specifies the column index.\n     * @returns {void}\n     */\n    Clipboard.prototype.paste = function (data, rowIndex, colIndex) {\n        var grid = this.parent;\n        var cIdx = colIndex;\n        var rIdx = rowIndex;\n        var col;\n        var value;\n        var isAvail;\n        if (!grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n            grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n            return;\n        }\n        var rows = data.split('\\n');\n        var cols;\n        var dataRows = grid.getDataRows();\n        var mRows;\n        var frRows;\n        var isFrozen = this.parent.isFrozenGrid();\n        if (isFrozen) {\n            mRows = grid.getMovableDataRows();\n            if (grid.getFrozenRightColumnsCount()) {\n                frRows = grid.getFrozenRightDataRows();\n            }\n        }\n        for (var r = 0; r < rows.length; r++) {\n            cols = rows[r].split('\\t');\n            cIdx = colIndex;\n            if ((r === rows.length - 1 && rows[r] === '') || isUndefined(grid.getRowByIndex(rIdx))) {\n                cIdx++;\n                break;\n            }\n            for (var c = 0; c < cols.length; c++) {\n                isAvail = grid.getCellFromIndex(rIdx, cIdx);\n                if (isFrozen) {\n                    var fTr = dataRows[rIdx];\n                    var mTr = mRows[rIdx];\n                    isAvail = !fTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') ?\n                        mTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') : true;\n                    if (frRows && !isAvail) {\n                        var frTr = frRows[rIdx];\n                        isAvail = frTr.querySelector('[aria-colindex=\"' + cIdx + '\"]');\n                    }\n                }\n                if (!isAvail) {\n                    cIdx++;\n                    break;\n                }\n                col = grid.getColumnByIndex(cIdx);\n                value = col.getParser() ? col.getParser()(cols[c]) : cols[c];\n                if (col.allowEditing && !col.isPrimaryKey && !col.template) {\n                    var args = {\n                        column: col,\n                        data: value,\n                        rowIndex: rIdx\n                    };\n                    this.parent.trigger(events.beforePaste, args);\n                    rIdx = args.rowIndex;\n                    if (!args.cancel) {\n                        if (grid.editModule) {\n                            if (col.type === 'number') {\n                                this.parent.editModule.updateCell(rIdx, col.field, parseFloat(args.data));\n                            }\n                            else {\n                                grid.editModule.updateCell(rIdx, col.field, args.data);\n                            }\n                        }\n                    }\n                }\n                cIdx++;\n            }\n            rIdx++;\n        }\n        grid.selectionModule.selectCellsByRange({ rowIndex: rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });\n        var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);\n        if (cell) {\n            classList(cell, ['e-focus', 'e-focused'], []);\n        }\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.isFrozenGrid();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var frRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frRows = this.parent.getFrozenRightRows();\n                }\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].\n                        querySelectorAll('.e-rowcell:not(.e-hide)'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell:not(.e-hide)')));\n                        if (frRows) {\n                            cells.push.apply(cells, [].slice.call(frRows[selectedIndexes[i]].querySelectorAll('.e-rowcell:not(.e-hide)')));\n                        }\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            getElementsByClassName('e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]]\n                                .getElementsByClassName('e-cellselectionbackground')));\n                            if (frRows) {\n                                cells.push.apply(cells, [].slice.call(frRows[obj.rowIndexes[i]]\n                                    .getElementsByClassName('e-cellselectionbackground')));\n                            }\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.getElementsByClassName('e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                var colIdx = parseInt(cells[j].getAttribute(literals.ariaColIndex), 10);\n                this.copyContent += this.parent.getColumns()[colIdx].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].innerText;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     *\n     * @returns {void}\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort(function (a, b) { return a - b; });\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { isNullOrUndefined, setValue, getValue, isBlazor } from '@syncfusion/ej2-base';\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, remove, classList, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, isGroupAdaptive, refreshForeignData } from './util';\nimport { getRowHeight, setColumnIndex, Global, ispercentageWidth, renderMovable, getNumberFormat } from './util';\nimport { setRowElements, resetRowIndex, compareChanges, getCellByColAndRowIndex, performComplexDataOperation } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { ColumnChooserSettings } from '../models/column-chooser-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    __decorate([\n        Property(false)\n    ], SortDescriptor.prototype, \"isFromGroup\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property(false)\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"uid\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"isForeignKey\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the infinite scroll behavior of Grid.\n */\nvar InfiniteScrollSettings = /** @class */ (function (_super) {\n    __extends(InfiniteScrollSettings, _super);\n    function InfiniteScrollSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InfiniteScrollSettings.prototype, \"enableCache\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"maxBlocks\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"initialBlocks\", void 0);\n    return InfiniteScrollSettings;\n}(ChildProperty));\nexport { InfiniteScrollSettings };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"enableCaseSensitivity\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"showFilterBarOperator\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableSimpleMultiRowSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"enableToggle\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"allowColumnSelection\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the resize behavior of the Grid.\n */\nvar ResizeSettings = /** @class */ (function (_super) {\n    __extends(ResizeSettings, _super);\n    function ResizeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Normal')\n    ], ResizeSettings.prototype, \"mode\", void 0);\n    return ResizeSettings;\n}(ChildProperty));\nexport { ResizeSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"enableLazyLoading\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('Top')\n    ], EditSettings.prototype, \"newRowPosition\", void 0);\n    __decorate([\n        Property({})\n    ], EditSettings.prototype, \"dialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowNextRowEdit\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {GridModel} options - specifies the options\n     * @param {string | HTMLElement} element - specifies the element\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.keyA = false;\n        _this.frozenRightCount = 0;\n        _this.frozenLeftCount = 0;\n        _this.tablesCount = 1;\n        _this.movableCount = 0;\n        _this.visibleFrozenLeft = 0;\n        _this.visibleFrozenRight = 0;\n        _this.visibleMovable = 0;\n        _this.frozenLeftColumns = [];\n        _this.frozenRightColumns = [];\n        _this.movableColumns = [];\n        _this.media = {};\n        _this.isFreezeRefresh = false;\n        /** @hidden */\n        _this.tableIndex = 0;\n        _this.componentRefresh = Component.prototype.refresh;\n        /** @hidden */\n        _this.isVirtualAdaptive = false;\n        /** @hidden */\n        _this.vRows = [];\n        /** @hidden */\n        _this.vcRows = [];\n        /** @hidden */\n        _this.vGroupOffsets = {};\n        /** @hidden */\n        _this.rowUid = 0;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.lockcolPositionCount = 0;\n        /** @hidden */\n        _this.prevPageMoving = false;\n        /** @hidden */\n        _this.pageTemplateChange = false;\n        /** @hidden */\n        _this.isAutoGen = false;\n        _this.mediaBindInstance = {};\n        /** @hidden */\n        _this.commandDelIndex = undefined;\n        /** @hidden */\n        _this.asyncTimeOut = 50;\n        /** @hidden */\n        _this.isExportGrid = false;\n        // enable/disable logger for MVC & Core\n        _this.enableLogger = true;\n        _this.needsID = true;\n        Grid_1.Inject(Selection);\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    Grid_1 = Grid;\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} returns the persist data\n     */\n    Grid.prototype.getPersistData = function () {\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex', 'scrollPosition'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: [], scrollPosition: []\n        };\n        for (var i = 0; i < keyEntity.length; i++) {\n            var currentObject = this[keyEntity[i]];\n            for (var _i = 0, _a = ignoreOnPersist[keyEntity[i]]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        }\n        var temp = this.pageSettings.template;\n        var settings = Object.assign({ template: undefined }, this.pageSettings);\n        this.setProperties({ pageSettings: settings }, true);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isAngular) {\n            delete this.groupSettings['properties']['captionTemplate'];\n        }\n        this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);\n        var persistData = this.addOnPersist(keyEntity);\n        settings.template = temp;\n        this.setProperties({ pageSettings: settings }, true);\n        return persistData;\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the module Declaration\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        this.setFrozenCount();\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows || this.frozenRightCount || this.frozenLeftCount) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.enableInfiniteScrolling) {\n            modules.push({\n                member: 'infiniteScroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            modules.push({\n                member: 'lazyLoadGroup',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n        if (this.enableLogger) {\n            modules.push({ member: 'logger', args: [this] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     *\n     * @returns {void}\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.allowServerDataBinding = false;\n        this.ignoreCollectionWatch = true;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.componentRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            UnGroupButton: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No matches found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Autofit all columns',\n            autoFit: 'Autofit this column',\n            AutoFitAll: 'Autofit all columns',\n            AutoFit: 'Autofit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No matches found',\n            ClearFilter: 'Clear Filter',\n            Clear: 'Clear',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:',\n            FilterMenuDialogARIA: 'Filter menu dialog',\n            ExcelFilterDialogARIA: 'Excel filter dialog',\n            DialogEditARIA: 'Edit dialog',\n            ColumnChooserDialogARIA: 'Column chooser dialog',\n            ColumnMenuDialogARIA: 'Column menu dialog',\n            CustomFilterDialogARIA: 'Customer filter dialog',\n            SortAtoZ: 'Sort A to Z',\n            SortZtoA: 'Sort Z to A',\n            SortByOldest: 'Sort by Oldest',\n            SortByNewest: 'Sort by Newest',\n            SortSmallestToLargest: 'Sort Smallest to Largest',\n            SortLargestToSmallest: 'Sort Largest to Smallest',\n            Sort: 'Sort'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H',\n            ctrlSpace: 'ctrl+space',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow'\n        };\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.log(['module_missing', 'promise_enabled', 'locale_missing', 'check_datasource_columns']);\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        if (this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === undefined) {\n            this.isVirtualAdaptive = true;\n        }\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        if (this.enablePersistence) {\n            this.notify(events.columnsPrepared, {});\n        }\n        this.getMediaColumns();\n        setColumnIndex(this.columns);\n        this.checkLockColumns(this.columns);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.showSpinner = function () {\n        if (!this.isExportGrid) {\n            showSpinner(this.element);\n        }\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.hideSpinner = function () {\n        if (!this.isExportGrid) {\n            hideSpinner(this.element);\n        }\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().getElementsByClassName('e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia) && (isNullOrUndefined(gcol[index].visible) || gcol[index].visible)) {\n                        this.pushMediaColumn(gcol[index], index);\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.pushMediaColumn = function (col, index) {\n        this.mediaCol.push(col);\n        this.media[col.uid] = window.matchMedia(col.hideAtMedia);\n        this.mediaQueryUpdate(index, this.media[col.uid]);\n        this.mediaBindInstance[index] = this.mediaQueryUpdate.bind(this, index);\n        this.media[col.uid].addListener(this.mediaBindInstance[index]);\n    };\n    /**\n     * @param {Column} col - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.updateMediaColumns = function (col) {\n        if (!this.enableColumnVirtualization) {\n            var index = this.getColumnIndexByUid(col.uid);\n            for (var i = 0; i < this.mediaCol.length; i++) {\n                if (col.uid === this.mediaCol[i].uid) {\n                    this.mediaCol.splice(i, 1);\n                    return;\n                }\n            }\n            this.pushMediaColumn(col, index);\n        }\n    };\n    /**\n     * @param {number} columnIndex - specifies the column index\n     * @param {MediaQueryList} e - specifies the MediaQueryList\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        if (this.mediaCol.some(function (mediaColumn) { return mediaColumn.uid === col.uid; })) {\n            col.visible = e.matches;\n            if (this.isInitialLoad) {\n                this.invokedFromMedia = true;\n                if (col.visible) {\n                    this.showHider.show(col.headerText, 'headerText');\n                }\n                else {\n                    this.showHider.hide(col.headerText, 'headerText');\n                }\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        var footerContent = this.element.querySelector('.' + literals.gridFooter);\n        if (this.aggregates.length && this.element.scrollHeight > this.height && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n        }\n        if (this.rowRenderingMode === 'Vertical') {\n            if (this.enableHover) {\n                this.setProperties({ enableAdaptiveUI: true, enableHover: false }, true);\n                removeClass([this.element], 'e-gridhover');\n            }\n        }\n    };\n    Grid.prototype.removeMediaListener = function () {\n        for (var i = 0; i < this.mediaCol.length; i++) {\n            this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index]);\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     *\n     * @returns {void}\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.' + literals.gridHeader) &&\n            gridElement.querySelector('.' + literals.gridContent) ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.removeMediaListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n        if (this.isAngular && !this.isFreezeRefresh) {\n            this.element = null;\n        }\n        this.isFreezeRefresh = false;\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    Grid.prototype.enableBoxSelection = function () {\n        if (this.enableAutoFill) {\n            this.selectionSettings.cellSelectionMode = 'BoxWithBorder';\n            this.element.classList.add('e-afenabled');\n        }\n        else {\n            this.element.classList.remove('e-afenabled');\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {GridModel} newProp - Defines new properties\n     * @param {GridModel} oldProp - Defines old properties\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        this.log('module_missing');\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    if (this.pageTemplateChange) {\n                        this.pageTemplateChange = false;\n                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                        break;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize)\n                        && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    this.renderModule.refresh();\n                    this.headerModule.refreshUI();\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'enableAutoFill':\n                    if (this.selectionModule) {\n                        this.enableBoxSelection();\n                        this.selectionModule.updateAutoFillPosition();\n                    }\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'enableInfiniteScrolling':\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                case 'enableVirtualization':\n                case 'currencyCode':\n                case 'locale':\n                    this.log('frozen_rows_columns');\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'query':\n                    if (!this.getDataModule().isQueryInvokedFromData) {\n                        requireRefresh = true;\n                    }\n                    this.getDataModule().isQueryInvokedFromData = false;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, requireGridRefresh);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.getFrozenColumns() || this.frozenRows) {\n                if (!(isBlazor() && this.isServerRendered)) {\n                    this.freezeRefresh();\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n            this.maintainSelection(newProp.selectedRowIndex);\n        }\n    };\n    Grid.prototype.extendedPropertyChange = function (prop, newProp, requireGridRefresh) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar && this.toolbarModule) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems && this.contextMenuModule) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu && this.columnMenuModule) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n                    this.refreshHeader();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                // eslint-disable-next-line no-case-declarations\n                var pending_1 = this.getDataModule().getState();\n                if (Object.getPrototypeOf(newProp).deepWatch) {\n                    var pKeyField = this.getPrimaryKeyFieldNames()[0];\n                    for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {\n                        this.setRowData(getValue(pKeyField, this.dataSource[props[i]]), this.dataSource[props[i]]);\n                    }\n                }\n                else if (pending_1.isPending) {\n                    var gResult = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    var names = (pending_1.group || []);\n                    for (var i = 0; i < names.length; i++) {\n                        gResult = DataUtil.group(gResult, names[i], pending_1.aggregates || []);\n                    }\n                    this.dataSource = {\n                        result: gResult, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    this.getDataModule().setState({});\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    if (!requireGridRefresh) {\n                        this.renderModule.refresh();\n                        if (this.isCheckBoxSelection) {\n                            this.notify(events.beforeRefreshOnDataChange, {});\n                        }\n                    }\n                }\n                this.scrollRefresh();\n                break;\n            case 'enableHover':\n                // eslint-disable-next-line no-case-declarations\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n            case 'selectedRowIndex':\n                if (!this.isSelectedRowIndexUpdating) {\n                    this.selectRow(newProp.selectedRowIndex);\n                }\n                this.isSelectedRowIndexUpdating = false;\n                break;\n            case 'resizeSettings':\n                this.widthService.setWidthToTable();\n                break;\n            case 'enableAdaptiveUI':\n                this.notify(events.setFullScreenDialog, {});\n                break;\n            case 'rowRenderingMode':\n                this.enableVerticalRendering();\n                this.notify(events.rowModeChange, {});\n                this.refresh();\n                break;\n        }\n    };\n    Grid.prototype.maintainSelection = function (index) {\n        var _this = this;\n        if (index !== -1) {\n            var fn_1 = function () {\n                _this.selectRow(index);\n                _this.off(events.contentReady, fn_1);\n            };\n            this.on(events.contentReady, fn_1, this);\n        }\n    };\n    /**\n     * @param {Object} prop - Defines the property\n     * @param {boolean} muteOnChange - Defines the mute on change\n     * @returns {void}\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        var filterSettings = 'filterSettings';\n        if (prop[filterSettings] && this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.setTablesCount = function () {\n        var frozenCols = this.getFrozenColumns();\n        var frozenLeft = this.getFrozenLeftColumnsCount();\n        var frozenRight = this.getFrozenRightColumnsCount();\n        if (frozenCols && !frozenLeft && !frozenRight) {\n            this.tablesCount = 2;\n        }\n        else if (!frozenCols && (frozenLeft || frozenRight)) {\n            if ((frozenLeft && !frozenRight) || (frozenRight && !frozenLeft)) {\n                this.tablesCount = 2;\n            }\n            else if (frozenLeft && frozenRight) {\n                this.tablesCount = 3;\n            }\n        }\n    };\n    /**\n     * @hidden\n     * @returns {number} - Returns the tables count\n     */\n    Grid.prototype.getTablesCount = function () {\n        return this.tablesCount;\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerCells = [].slice.call(this.getHeaderContent().querySelectorAll('.e-headercell:not(.e-stackedheadercell)'));\n        var stdHdrCell = [].slice.call(this.getHeaderContent().getElementsByClassName('e-stackedheadercell'));\n        var cols = this.getColumns();\n        if (this.enableColumnVirtualization && this.getFrozenColumns()) {\n            var cells = this.contentModule.getHeaderCells();\n            headerCells = cells.length ? cells : headerCells;\n        }\n        for (var i = 0; i < headerCells.length; i++) {\n            var cell = headerCells[i];\n            if (this.allowGrouping || this.allowReordering || this.allowSorting) {\n                if (!cols[i].allowReordering || !cols[i].allowSorting || !cols[i].allowGrouping) {\n                    cell.classList.add('e-defaultcursor');\n                }\n                else {\n                    cell.classList.add('e-mousepointer');\n                }\n            }\n        }\n        for (var count = 0; count < stdHdrCell.length; count++) {\n            if (this.allowReordering) {\n                stdHdrCell[count].classList.add('e-mousepointer');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateColumnLevelFrozen();\n        this.updateFrozenColumns();\n        this.updateLockableColumns();\n    };\n    Grid.prototype.updateColumnLevelFrozen = function () {\n        var cols = this.columnModel;\n        var leftCols = [];\n        var rightCols = [];\n        var movableCols = [];\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var col = cols[i];\n                if (col.freeze === 'Left') {\n                    col.freezeTable = literals.frozenLeft;\n                    leftCols.push(col);\n                }\n                else if (col.freeze === 'Right') {\n                    col.freezeTable = literals.frozenRight;\n                    rightCols.push(col);\n                }\n                else {\n                    col.freezeTable = 'movable';\n                    movableCols.push(col);\n                }\n            }\n            this.columnModel = leftCols.concat(movableCols).concat(rightCols);\n        }\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            return;\n        }\n        var cols = this.columnModel;\n        var directFrozenCount = this.frozenColumns;\n        var totalFrozenCount = this.getFrozenColumns();\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var col = cols[i];\n            if (directFrozenCount) {\n                if (i < directFrozenCount) {\n                    col.freezeTable = literals.frozenLeft;\n                }\n                else {\n                    col.freezeTable = 'movable';\n                }\n            }\n            if (col.isFrozen && i >= directFrozenCount) {\n                col.freezeTable = literals.frozenLeft;\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n            else if (totalFrozenCount && !directFrozenCount) {\n                col.freezeTable = 'movable';\n            }\n        }\n    };\n    Grid.prototype.getFrozenLeftCount = function () {\n        return this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n    };\n    Grid.prototype.isFrozenGrid = function () {\n        return this.getFrozenColumns() !== 0 || this.getFrozenLeftColumnsCount() !== 0 || this.getFrozenRightColumnsCount() !== 0;\n    };\n    Grid.prototype.getFrozenMode = function () {\n        return this.frozenName;\n    };\n    Grid.prototype.updateLockableColumns = function () {\n        var cols = this.columnModel;\n        var frozenCount = 0;\n        var movableCount = 0;\n        var frozenColumns = this.getFrozenColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].lockColumn) {\n                if (i < frozenColumns) {\n                    cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);\n                    frozenCount++;\n                }\n                else {\n                    cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);\n                    movableCount++;\n                }\n            }\n        }\n    };\n    Grid.prototype.checkLockColumns = function (cols) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                this.checkLockColumns(cols[i].columns);\n            }\n            else if (cols[i].lockColumn) {\n                this.lockcolPositionCount++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     *\n     * @param {boolean} isRefresh - Defines the boolean whether to refresh\n     * @returns {Column[]} - returns the column\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        if (this.contentModule && this.enableColumnVirtualization && this.isFrozenGrid() && inview.length\n            && inview[0] > 0) {\n            var frozenCols = this.contentModule.ensureFrozenCols(columns);\n            columns = frozenCols;\n        }\n        return columns;\n    };\n    /**\n     * @private\n     * @param {string} stackedHeader - Defines the stacked header\n     * @param {Column[]} col - Defines the column\n     * @returns {Column} Returns the Column\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     * @returns {number[]} Returns the column indexes\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     * @returns {Query} - returns the query\n     */\n    Grid.prototype.getQuery = function () {\n        return this.query;\n    };\n    /**\n     * @private\n     * @returns {object} - returns the locale constants\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @param {number[]} indexes - specifies the indexes\n     * @returns {void}\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     *\n     * @returns {Column[]} returns the column\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        return this.getCurrentVisibleColumns();\n    };\n    /**\n     * Gets the header div of the Grid.\n     *\n     * @returns {Element} - Returns the element\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     *\n     * @param  {Element} element - Specifies the Grid header.\n     * @returns {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     *\n     * @returns {Element} - Returns the element\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     *\n     * @param  {Element} element - Specifies the Grid content table.\n     * @returns {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     *\n     * @returns {Element} Returns the element\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     *\n     * @param  {Element} element - Specifies the Grid content.\n     * @returns {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     *\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     *\n     * @param  {Element} element - Specifies the Grid header table.\n     * @returns {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     *\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFooterContent = function () {\n        this.footerElement = this.element.getElementsByClassName(literals.gridFooter)[0];\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     *\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        this.footerElement = this.element.getElementsByClassName(literals.gridFooter)[0];\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     *\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     *\n     * @param  {Element} element - Specifies the Grid pager.\n     * @returns {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     *\n     * @param  {number} index - Specifies the row index.\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     *\n     * @param  {number} index - Specifies the row index.\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets a frozen tables row by index.\n     *\n     * @param  {number} index - Specifies the row index.\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFrozenRowByIndex = function (index) {\n        return this.getFrozenDataRows()[index];\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     *\n     * @returns {Element[]} returns the element\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Gets a frozen right tables row element by index.\n     *\n     * @param  {number} index - Specifies the row index.\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.contentModule.getFrozenRightRowByIndex(index);\n    };\n    /**\n     * Get a row information based on cell\n     *\n     * @param {Element | EventTarget} target - specifies the element\n     * @returns {RowInfo} returns the row info\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand')))) {\n            var cell = closest(ele, '.' + literals.rowCell);\n            if (!cell) {\n                var row = closest(ele, '.' + literals.row);\n                if (!isNullOrUndefined(row)) {\n                    var rowObj = this.getRowObjectFromUID(row.getAttribute('data-uid'));\n                    var rowIndex = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n                    args = { row: row, rowData: rowObj.data, rowIndex: rowIndex };\n                }\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute(literals.ariaColIndex), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.' + literals.row);\n                var rowIndex = parseInt(row_1.getAttribute(literals.ariaRowIndex), 10);\n                var frzCols = this.getFrozenColumns();\n                var tableName = this.columnModel[cellIndex].getFreezeTableName();\n                var rows = this.contentModule.getRows();\n                var index = cellIndex + this.getIndentCount();\n                if (this.isFrozenGrid()) {\n                    if (tableName === literals.frozenLeft) {\n                        rows = this.contentModule.getRows();\n                    }\n                    else if (tableName === 'movable') {\n                        index = cellIndex - frzCols - this.frozenLeftCount;\n                        rows = this.contentModule.getMovableRows();\n                    }\n                    else if (tableName === literals.frozenRight) {\n                        index = cellIndex - (this.frozenLeftCount + this.movableCount);\n                        rows = this.contentModule.getFrozenRightRows();\n                    }\n                }\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = {};\n                var column = void 0;\n                if (Object.keys(rowsObject).length) {\n                    rowData = rowsObject[0].data;\n                    column = rowsObject[0].cells[index].column;\n                }\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     *\n     * @returns {Element[]} returns the element\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets the Grid's frozen right content rows from frozen grid.\n     *\n     * @returns {Element[]} returns the element\n     */\n    Grid.prototype.getFrozenRightRows = function () {\n        return this.contentModule.getFrozenRightRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     *\n     * @returns {Element[]} returns the element\n     */\n    Grid.prototype.getDataRows = function () {\n        return this.getAllDataRows();\n    };\n    /**\n     * @param {boolean} includeAdd - specifies includeAdd\n     * @returns {Element[]} returns the element\n     * @hidden\n     */\n    Grid.prototype.getAllDataRows = function (includeAdd) {\n        if (isNullOrUndefined(this.getContentTable().querySelector(literals.tbody))) {\n            return [];\n        }\n        var tbody = this.isFrozenGrid() ? this.getFrozenLeftContentTbody()\n            : this.getContentTable().querySelector(literals.tbody);\n        var rows = [].slice.call(tbody.children);\n        if (this.frozenRows) {\n            var hdrTbody = this.isFrozenGrid() ? this.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.tbody)\n                : this.getHeaderTable().querySelector(literals.tbody);\n            var freezeRows = [].slice.call(hdrTbody.children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * @param {HTMLElement[]} fRows - Defines the frozen Rows\n     * @param {HTMLElement[]} mrows - Defines the movable Rows\n     * @returns {HTMLElement[]} Returns the element\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows, includAdd) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains(literals.row) && (!rows[i].classList.contains('e-hiddenrow') || includAdd)) {\n                if (this.isCollapseStateEnabled()) {\n                    dRows[parseInt(rows[i].getAttribute('aria-rowindex'), 10)] = rows[i];\n                }\n                else {\n                    dRows.push(rows[i]);\n                }\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     *\n     * @returns {Element[]} Returns the element\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        return this.getAllMovableDataRows();\n    };\n    /**\n     * @param {boolean} includeAdd Defines the include add in boolean\n     * @returns {Element[]} Returns the element\n     * @hidden\n     */\n    Grid.prototype.getAllMovableDataRows = function (includeAdd) {\n        if (!this.isFrozenGrid()) {\n            return [];\n        }\n        var rows = [].slice.call(this.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody).children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody).children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Gets all the Grid's frozen table data rows.\n     *\n     * @returns {Element[]} returns the element\n     */\n    Grid.prototype.getFrozenDataRows = function () {\n        return this.getAllFrozenDataRows();\n    };\n    /**\n     * @param {boolean} includeAdd Defines the include add in boolean\n     * @returns {Element[]} Returns the element\n     * @hidden\n     */\n    Grid.prototype.getAllFrozenDataRows = function (includeAdd) {\n        var rows = [].slice.call(this.getContent().querySelector('.' + literals.frozenContent).querySelector(literals.tbody).children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.tbody).children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Gets all the Grid's frozen right table data rows.\n     *\n     * @returns {Element[]} Returns the Element\n     */\n    Grid.prototype.getFrozenRightDataRows = function () {\n        return this.getAllFrozenRightDataRows();\n    };\n    /**\n     * @param {boolean} includeAdd Defines the include add in boolean\n     * @returns {Element[]} Returns the element\n     * @hidden\n     */\n    Grid.prototype.getAllFrozenRightDataRows = function (includeAdd) {\n        if (this.getFrozenMode() !== 'Right' && this.getFrozenMode() !== 'Left-Right') {\n            return [];\n        }\n        var rows = [].slice.call(this.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody).children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.tbody).children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     * @returns {void}\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var isRight = this.getFrozenMode() === 'Right';\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var fieldIdx = this.getColumnIndexByField(field);\n        var col = this.getColumnByField(field);\n        var rowObjects = col.getFreezeTableName() === 'movable' ? this.contentModule.getMovableRows() :\n            col.getFreezeTableName() === 'frozen-right' ? this.getFrozenRightRowsObject() : this.contentModule.getRows();\n        var selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        var tr = selectedRow ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var left = this.getFrozenLeftColumnsCount() || this.getFrozenColumns();\n            var movable = this.getMovableColumnsCount();\n            if (this.isRowDragable() && !isRight) {\n                left++;\n            }\n            var frIdx = left + movable;\n            var td = this.getCellFromIndex(selectedRow[rowIdx], fieldIdx);\n            if (!isNullOrUndefined(td)) {\n                var Idx = col.getFreezeTableName() === 'movable' ? left : col.getFreezeTableName() === 'frozen-right' ? frIdx : 0;\n                if (this.groupSettings.columns.length) {\n                    fieldIdx = fieldIdx + this.groupSettings.columns.length;\n                }\n                if (this.childGrid || this.detailTemplate) {\n                    fieldIdx++;\n                }\n                if (this.isRowDragable() && !isRight) {\n                    fieldIdx++;\n                }\n                var sRow = selectedRow[cells][fieldIdx - Idx];\n                cell.refreshTD(td, sRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(selectedRow) && !isNullOrUndefined(selectedRow['changes'])) {\n                    selectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * @param {string} columnUid - Defines column uid\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.refreshReactColumnTemplateByUid = function (columnUid) {\n        var _this = this;\n        if (this.isReact) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.clearTemplate(['columnTemplate'], undefined, function () {\n                var cells = 'cells';\n                var rowIdx = 'index';\n                var rowsObj = _this.getRowsObject();\n                var indent = _this.getIndentCount();\n                var cellIndex = _this.getNormalizedColumnIndex(columnUid);\n                for (var j = 0; j < rowsObj.length; j++) {\n                    if (rowsObj[j].isDataRow && !isNullOrUndefined(rowsObj[j].index)) {\n                        var cell = rowsObj[j][cells][cellIndex];\n                        var cellRenderer = new CellRenderer(_this, _this.serviceLocator);\n                        var td = _this.getCellFromIndex(rowsObj[j].index, cellIndex - indent);\n                        cellRenderer.refreshTD(td, cell, rowsObj[j].data, { index: rowsObj[j][rowIdx] });\n                    }\n                }\n            });\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {Object} rowData - To update new data for the particular row.\n     * @returns {void}\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        var selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     *\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        var col = this.getColumnByIndex(columnIndex);\n        return getCellByColAndRowIndex(this, col, rowIndex, columnIndex);\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     *\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        if (this.frozenName === 'Left-Right' && columnIndex >= this.movableCount) {\n            return undefined;\n        }\n        var index = this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n        return this.getMovableDataRows()[rowIndex] &&\n            this.getMovableDataRows()[rowIndex].getElementsByClassName(literals.rowCell)[columnIndex - index];\n    };\n    /**\n     * Gets a frozen right table cell by row and column index.\n     *\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getFrozenRightCellFromIndex = function (rowIndex, columnIndex) {\n        var index = this.getFrozenLeftColumnsCount() + this.getMovableColumnsCount();\n        var rows = this.getFrozenRightDataRows();\n        return rows[rowIndex] && rows[rowIndex].getElementsByClassName(literals.rowCell)[columnIndex - index];\n    };\n    /**\n     * Gets a column header by column index.\n     *\n     * @param  {number} index - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().getElementsByClassName('e-headercell')[index];\n    };\n    /**\n     * Gets a movable column header by column index.\n     *\n     * @param  {number} index - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getMovableColumnHeaderByIndex = function (index) {\n        var left = this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n        return this.getMovableVirtualHeader().getElementsByClassName('e-headercell')[index - left];\n    };\n    /**\n     * Gets a frozen right column header by column index.\n     *\n     * @param  {number} index - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getFrozenRightColumnHeaderByIndex = function (index) {\n        var left = this.getFrozenLeftColumnsCount() + this.getMovableColumnsCount();\n        return this.getFrozenRightHeader().getElementsByClassName('e-headercell')[index - left];\n    };\n    /**\n     * Gets a frozen left column header by column index.\n     *\n     * @param  {number} index - Specifies the column index.\n     * @returns {Element} Returns the Element\n     */\n    Grid.prototype.getFrozenLeftColumnHeaderByIndex = function (index) {\n        return this.getFrozenVirtualHeader().getElementsByClassName('e-headercell')[index];\n    };\n    /**\n     * @param {string} uid - Defines the uid\n     * @param {boolean} isMovable - Defines isMovable\n     * @param {boolean} isFrozenRight - Defines isFrozenRight\n     * @returns {Row<Column>} Returns the row object\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid, isMovable, isFrozenRight) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.isFrozenGrid()) {\n            if (!row || isMovable || isFrozenRight) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                if ((!row && this.getFrozenMode() === 'Left-Right') || isFrozenRight) {\n                    row = this.rowObject(this.contentModule.getFrozenRightRows(), uid);\n                }\n                return row;\n            }\n        }\n        if (isNullOrUndefined(row) && this.enableVirtualization && this.groupSettings.columns.length > 0) {\n            row = this.rowObject(this.vRows, uid);\n            return row;\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     * @returns {Row<Column>[]} Returns the Row object\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     * @returns {Row<Column>[]} Returns the Row object\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        var rows = [];\n        if (this.isFrozenGrid()) {\n            rows = this.contentModule.getMovableRows();\n        }\n        return rows;\n    };\n    /**\n     * @hidden\n     * @returns {Row<Column>[]} Returns the Row object\n     */\n    Grid.prototype.getFrozenRightRowsObject = function () {\n        var rows = [];\n        if (this.getFrozenMode() === 'Right' || this.getFrozenMode() === 'Left-Right') {\n            rows = this.contentModule.getFrozenRightRows();\n        }\n        return rows;\n    };\n    /**\n     * Gets a column header by column name.\n     *\n     * @param  {string} field - Specifies the column name.\n     * @returns {Element} - Returns the element\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        var column = this.getColumnByField(field);\n        return column ? this.getColumnHeaderByUid(column.uid) : undefined;\n    };\n    /**\n     * Gets a column header by UID.\n     *\n     * @param {string} uid - Specifies the column uid.\n     * @returns {Element} - Returns the element\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        var element = this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']');\n        return element ? element.parentElement : undefined;\n    };\n    /**\n     * @hidden\n     * @param {number} index - Defines the index\n     * @returns {Column} Returns the column\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     *\n     * @param  {string} field - Specifies the column name.\n     * @returns {Column} Returns the column\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     *\n     * @param  {string} field - Specifies the column name.\n     * @returns {number} Returns the index by field\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     *\n     * @param  {string} uid - Specifies the column UID.\n     * @returns {Column} Returns the column\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns().concat(this.getStackedColumns(this.columns)), function (item) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * @param {Column[]} columns - Defines the columns\n     * @param {Column[]} stackedColumn - Defines the stacked columns\n     * @returns {Column[]} Returns the columns\n     * @hidden\n     */\n    Grid.prototype.getStackedColumns = function (columns, stackedColumn) {\n        if (stackedColumn === void 0) { stackedColumn = []; }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                stackedColumn.push(column);\n                this.getStackedColumns(column.columns, stackedColumn);\n            }\n        }\n        return stackedColumn;\n    };\n    /**\n     * Gets a column index by UID.\n     *\n     * @param  {string} uid - Specifies the column UID.\n     * @returns {number} Returns the column by index\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     *\n     * @param  {string} field - Specifies the column name.\n     * @returns {string} Returns the column by field\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets column index by column uid value.\n     *\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @returns {number} Returns the column by field\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        return index + this.getIndentCount();\n    };\n    /**\n     * Gets indent cell count.\n     *\n     * @private\n     * @returns {number} Returns the indent count\n     */\n    Grid.prototype.getIndentCount = function () {\n        var index = 0;\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        if (this.isRowDragable() && isNullOrUndefined(this.rowDropSettings.targetID)) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     *\n     * @returns {string[]} Returns the Field names\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     *\n     * @returns {Function} Returns the row TEmplate\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     *\n     * @private\n     * @returns {Function} Returns the Detail template\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     *\n     * @private\n     * @returns {Function}Returns the Edit template\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit header template.\n     *\n     * @private\n     * @returns {Function} returns template function\n     */\n    Grid.prototype.getEditHeaderTemplate = function () {\n        return this.editHeaderTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit footer template.\n     *\n     * @private\n     * @returns {Function} Returns the Footer template\n     */\n    Grid.prototype.getEditFooterTemplate = function () {\n        return this.editFooterTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     *\n     * @returns {string[]} Returns the field names\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.refresh = function () {\n        if (!this.isDestroyed) {\n            this.headerModule.refreshUI();\n            this.updateStackedFilter();\n            this.renderModule.refresh();\n        }\n    };\n    /**\n     * Refreshes the Grid header.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     *\n     * @returns {Element[]} Returns the element\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     *\n     * @returns {number[]} Returns the Selected row indexes\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     *\n     * @returns {number[]} Returns the Selected row cell indexes\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];\n    };\n    /**\n     * Gets the collection of selected records.\n     *\n     * @returns {Object[]} Returns the selected records\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the collection of selected columns uid.\n     *\n     * @returns {string[]} Returns the selected column uid\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedColumnsUid = function () {\n        var _this = this;\n        var uid = [];\n        if (this.selectionModule) {\n            this.selectionModule.selectedColumnsIndexes.filter(function (i) { return uid.push(_this.getColumns()[i].uid); });\n        }\n        return uid;\n    };\n    /**\n     * Gets the data module.\n     *\n     * @returns {Data} Returns the data\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     *\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @returns {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     *\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @returns {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the Frozen column\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0, 0);\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the Frozen Right column count\n     */\n    Grid.prototype.getFrozenRightColumnsCount = function () {\n        return this.frozenRightCount;\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the Frozen Left column\n     */\n    Grid.prototype.getFrozenLeftColumnsCount = function () {\n        return this.frozenLeftCount;\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the movable column count\n     */\n    Grid.prototype.getMovableColumnsCount = function () {\n        return this.movableCount;\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.setFrozenCount = function () {\n        this.frozenLeftCount = this.frozenRightCount = this.movableCount = 0;\n        this.visibleFrozenLeft = this.visibleFrozenRight = this.visibleMovable = 0;\n        this.frozenLeftColumns = [];\n        this.frozenRightColumns = [];\n        this.movableColumns = [];\n        this.splitFrozenCount(this.columns);\n        if (this.frozenColumns && (this.frozenLeftCount || this.frozenRightCount)) {\n            this.setProperties({ frozenColumns: 0 }, true);\n        }\n        this.setTablesCount();\n        if (this.frozenLeftCount && !this.frozenRightCount) {\n            this.frozenName = 'Left';\n        }\n        else if (this.frozenRightCount && !this.frozenLeftCount) {\n            this.frozenName = 'Right';\n        }\n        else if (this.frozenLeftCount && this.frozenRightCount) {\n            this.frozenName = 'Left-Right';\n        }\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the visible Frozen left count\n     */\n    Grid.prototype.getVisibleFrozenLeftCount = function () {\n        return this.visibleFrozenLeft;\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the visible Frozen Right count\n     */\n    Grid.prototype.getVisibleFrozenRightCount = function () {\n        return this.visibleFrozenRight;\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the visible movable count\n     */\n    Grid.prototype.getVisibleMovableCount = function () {\n        return this.visibleMovable;\n    };\n    /**\n     * @hidden\n     * @returns {Column[]} Returns the column\n     */\n    Grid.prototype.getFrozenRightColumns = function () {\n        return this.frozenRightColumns;\n    };\n    /**\n     * @hidden\n     * @returns {Column[]} Returns the column\n     */\n    Grid.prototype.getFrozenLeftColumns = function () {\n        return this.frozenLeftColumns;\n    };\n    /**\n     * @hidden\n     * @returns {Column[]} Returns the column\n     */\n    Grid.prototype.getMovableColumns = function () {\n        return this.movableColumns;\n    };\n    Grid.prototype.splitFrozenCount = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].columns) {\n                this.splitFrozenCount(columns[i].columns);\n            }\n            else {\n                if (columns[i].freeze === 'Right') {\n                    if (columns[i].visible !== false) {\n                        this.visibleFrozenRight++;\n                    }\n                    this.frozenRightColumns.push(columns[i]);\n                    this.frozenRightCount++;\n                }\n                else if (columns[i].freeze === 'Left') {\n                    if (columns[i].visible !== false) {\n                        this.visibleFrozenLeft++;\n                    }\n                    this.frozenLeftColumns.push(columns[i]);\n                    this.frozenLeftCount++;\n                }\n                else {\n                    if (columns[i].visible !== false) {\n                        this.visibleMovable++;\n                    }\n                    this.movableColumns.push(columns[i]);\n                    this.movableCount++;\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns the visible frozen columns count\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    /**\n     * Get the current Filter operator and field.\n     *\n     * @returns {FilterUI} Returns the filter UI\n     */\n    Grid.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var columns = this.columnModel;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (columns[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].visible && (columns[i].freeze === 'Left' || columns[i].freeze === 'Right')) {\n                    visibleFrozenColumns++;\n                }\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        if (!this.frozenLeftCount && !this.frozenRightCount) {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                if (cols[i].columns) {\n                    cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n                }\n                else {\n                    if (cols[i].isFrozen && cols[i].visible) {\n                        cnt++;\n                    }\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt, index) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt, index);\n            }\n            else {\n                if (cols[i].isFrozen && index > this.frozenColumns - 1) {\n                    cnt++;\n                }\n                index++;\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     *\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @returns {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        if (this.pagerModule) {\n            this.pagerModule.goToPage(pageNo);\n        }\n    };\n    /**\n     * Defines the text of external message.\n     *\n     * @param  {string} message - Defines the message to update.\n     * @returns {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        if (this.pagerModule) {\n            this.pagerModule.updateExternalMessage(message);\n        }\n    };\n    /**\n     * Sorts a column with the given options.\n     *\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @returns {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        if (this.sortModule) {\n            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        if (this.sortModule) {\n            this.sortModule.clearSorting();\n        }\n    };\n    /**\n     * Remove sorted column by field name.\n     *\n     * @param {string} field - Defines the column field name to remove sort.\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        if (this.sortModule) {\n            this.sortModule.removeSortColumn(field);\n        }\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     *\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @returns {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        if (this.filterModule) {\n            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n        }\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     *\n     * @param {string[]} fields - Defines the Fields\n     * @returns {void}\n     */\n    Grid.prototype.clearFiltering = function (fields) {\n        if (this.filterModule) {\n            this.filterModule.clearFiltering(fields);\n        }\n    };\n    /**\n     * Removes filtered column by field name.\n     *\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        if (this.filterModule) {\n            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n        }\n    };\n    /**\n     * Selects a row by given index.\n     *\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @returns {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRow(index, isToggle);\n        }\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     *\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @returns {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRows(rowIndexes);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearSelection();\n        }\n    };\n    /**\n     * Selects a cell by the given index.\n     *\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @returns {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCell(cellIndex, isToggle);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     *\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @returns {void}\n     */\n    Grid.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        this.selectionModule.selectCellsByRange(startIndex, endIndex);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./#searchsettings/).\n     *\n     * @param  {string} searchString - Defines the key.\n     * @returns {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        if (this.searchModule) {\n            this.searchModule.search(searchString);\n        }\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./#printmode).\n     *\n     * @returns {void}\n     */\n    Grid.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.print();\n        }\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     *\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     * @returns {void}\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        if (this.editModule) {\n            this.editModule.deleteRecord(fieldname, data);\n        }\n    };\n    /**\n     * Starts edit the selected row. At least one row must be selected before invoking this method.\n     * `editSettings.allowEditing` should be true.\n     * {% codeBlock src='grid/startEdit/index.md' %}{% endcodeBlock %}\n     *\n     * @returns {void}\n     */\n    Grid.prototype.startEdit = function () {\n        if (this.editModule) {\n            this.editModule.startEdit();\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.endEdit = function () {\n        if (this.editModule) {\n            this.editModule.endEdit();\n        }\n    };\n    /**\n     * Cancels edited state.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.closeEdit = function () {\n        if (this.editModule) {\n            this.editModule.closeEdit();\n        }\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     *\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     * @returns {void}\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        if (this.editModule) {\n            this.editModule.addRecord(data, index);\n        }\n    };\n    /**\n     * Delete any visible row by TR element.\n     *\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     * @returns {void}\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        if (this.editModule) {\n            this.editModule.deleteRow(tr);\n        }\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     *\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     * @returns {void}\n     */\n    Grid.prototype.editCell = function (index, field) {\n        if (this.editModule) {\n            this.editModule.editCell(index, field);\n        }\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     *\n     * @returns {void}\n     * {% codeBlock src='grid/saveCell/index.md' %}{% endcodeBlock %}\n     */\n    Grid.prototype.saveCell = function () {\n        if (this.editModule) {\n            this.editModule.saveCell();\n        }\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     *\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     * @returns {void}\n     */\n    Grid.prototype.updateCell = function (rowIndex, field, value) {\n        if (this.editModule) {\n            this.editModule.updateCell(rowIndex, field, value);\n        }\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     *\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     * @returns {void}\n     * {% codeBlock src='grid/updateRow/index.md' %}{% endcodeBlock %}\n     */\n    Grid.prototype.updateRow = function (index, data) {\n        if (this.editModule) {\n            this.editModule.updateRow(index, data);\n        }\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     *\n     * @returns {Object} Returns the batch changes\n     */\n    Grid.prototype.getBatchChanges = function () {\n        if (this.editModule) {\n            return this.editModule.getBatchChanges();\n        }\n        return {};\n    };\n    /**\n     * Enables or disables ToolBar items.\n     *\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @returns {void}\n     */\n    Grid.prototype.enableToolbarItems = function (items, isEnable) {\n        if (this.toolbarModule) {\n            this.toolbarModule.enableItems(items, isEnable);\n        }\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     *\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     * @returns {void}\n     */\n    Grid.prototype.copy = function (withHeader) {\n        if (this.clipboardModule) {\n            this.clipboardModule.copy(withHeader);\n        }\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        var _this = this;\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector(literals.colGroup).childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector(literals.colGroup).childNodes);\n        var perPixel = indentWidth / 30;\n        var i = this.getFrozenMode() === 'Right' ? this.frozenRightCount : 0;\n        var parentOffset = this.element.offsetWidth;\n        var applyWidth = function (index, width) {\n            if (ispercentageWidth(_this)) {\n                var newWidth = (width / parentOffset * 100).toFixed(1) + '%';\n                headerCol[index].style.width = newWidth;\n                contentCol[index].style.width = newWidth;\n            }\n            else {\n                headerCol[index].style.width = width + 'px';\n                contentCol[index].style.width = width + 'px';\n            }\n            _this.notify(events.columnWidthChanged, { index: index, width: width });\n        };\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (indentWidth < 1) {\n            indentWidth = 1;\n        }\n        if (this.enableColumnVirtualization || this.isAutoGen) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isDetail()) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isRowDragable()) {\n            applyWidth(i, indentWidth);\n        }\n        this.isAutoGen = false;\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.resetIndentWidth = function () {\n        if (ispercentageWidth(this)) {\n            this.getHeaderTable().querySelector('.e-emptycell').removeAttribute('indentRefreshed');\n            this.widthService.setWidthToColumns();\n            this.recalcIndentWidth();\n        }\n        if ((this.width === 'auto' || typeof (this.width) === 'string' && this.width.indexOf('%') !== -1)\n            && this.getColumns().filter(function (col) { return (!col.width || col.width === 'auto') && col.minWidth; }).length > 0) {\n            var tgridWidth = this.widthService.getTableWidth(this.getColumns());\n            this.widthService.setMinwidthBycalculation(tgridWidth);\n        }\n        if (this.isFrozenGrid() && this.widthService) {\n            this.widthService.refreshFrozenScrollbar();\n        }\n        if (this.allowTextWrap && this.textWrapSettings.wrapMode !== 'Content') {\n            this.notify(events.refreshHandlers, {});\n        }\n    };\n    /**\n     * @hidden\n     * @returns {boolean} Returns isRowDragable\n     */\n    Grid.prototype.isRowDragable = function () {\n        return this.allowRowDragAndDrop && !this.rowDropSettings.targetID;\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     *\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @returns {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumns(fromFName, toFName);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByIndex multiple times,\n     * then you won't get the same results every time.\n     *\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Grid.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByTargetIndex multiple times,\n     * then you will get the same results every time.\n     *\n     * @param  {string} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Grid.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid Row position with given indexes.\n     *\n     * @param  {number} fromIndexes - Defines the origin Indexes.\n     * @param  {number} toIndex - Defines the destination Index.\n     * @returns {void}\n     */\n    Grid.prototype.reorderRows = function (fromIndexes, toIndex) {\n        if (this.rowDragAndDropModule) {\n            this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);\n        }\n    };\n    /**\n     * @param {ReturnType} e - Defines the Return type\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.refreshDataSource = function (e) {\n        this.notify('refreshdataSource', e);\n    };\n    /**\n     * @param {boolean} enable -Defines the enable\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.disableRowDD = function (enable) {\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerRows = headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell');\n        var rows = this.getRows();\n        var disValue = enable ? 'none' : '';\n        setStyleAttribute(headerTable.querySelector(literals.colGroup).childNodes[0], { 'display': disValue });\n        setStyleAttribute(contentTable.querySelector(literals.colGroup).childNodes[0], { 'display': disValue });\n        for (var i = 0; i < this.getRows().length; i++) {\n            var ele = rows[i].firstElementChild;\n            if (enable) {\n                addClass([ele], 'e-hide');\n            }\n            else {\n                removeClass([ele], ['e-hide']);\n            }\n        }\n        for (var j = 0; j < headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell').length; j++) {\n            var ele = headerRows[j];\n            if (enable) {\n                addClass([ele], 'e-hide');\n            }\n            else {\n                removeClass([ele], ['e-hide']);\n            }\n        }\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     *\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @returns {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        if (this.resizeModule) {\n            this.resizeModule.autoFitColumns(fieldNames);\n        }\n    };\n    /**\n     * @param {number} x - Defines the number\n     * @param {number} y - Defines the number\n     * @param {Element} target - Defines the Element\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.renderColumnChooser(x, y, target);\n        }\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending', isFromGroup: true });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    if (column) {\n                        column.visible = false;\n                    }\n                    else {\n                        this_1.log('initial_action', { moduleName: 'group', columnName: gCols[i] });\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            for (var i = 0; i < sCols.length; i++) {\n                this.sortedColumns.push(sCols[i].field);\n            }\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        this.editHeaderTemplateFn = templateCompiler(this.editSettings.headerTemplate);\n        this.editFooterTemplateFn = templateCompiler(this.editSettings.footerTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.enableVerticalRendering = function () {\n        if (this.rowRenderingMode === 'Vertical') {\n            this.element.classList.add('e-row-responsive');\n        }\n        else {\n            this.element.classList.remove('e-row-responsive');\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.rowRenderingMode === 'Vertical') {\n            this.element.classList.add('e-row-responsive');\n        }\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n        this.enableBoxSelection();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: literals.content, attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.getElementsByClassName('e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n            if (this.textWrapSettings.wrapMode !== 'Content') {\n                this.notify(events.refreshHandlers, {});\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.getElementsByClassName('e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n        if (this.textWrapSettings.wrapMode !== 'Content') {\n            this.notify(events.refreshHandlers, {});\n        }\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    /** @hidden\n     * @returns {void}\n     */\n    Grid.prototype.freezeRefresh = function () {\n        this.isFreezeRefresh = true;\n        if (this.enableVirtualization) {\n            this.pageSettings.currentPage = 1;\n        }\n        this.componentRefresh();\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var headerTable = this.getHeaderTable();\n        var headerDivTag = 'e-gridheader';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var table = element.classList.contains('e-headercell') ? htable : ctable;\n        var ele = element.classList.contains('e-headercell') ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        var width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (this.prevElement !== element || e.type === 'mouseout') {\n                this.toolTipObj.close();\n            }\n            var tagName = e.target.tagName;\n            var elemNames = ['A', 'BUTTON', 'INPUT'];\n            if (element && e.type !== 'mouseout' && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.prevElement = element;\n                    this.toolTipObj.open(element);\n                }\n            }\n        }\n        this.hoverFrozenRows(e);\n    };\n    /**\n     * @param {MouseEvent} e - Defines the mouse event\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.hoverFrozenRows = function (e) {\n        if (this.isFrozenGrid()) {\n            var row = parentsUntil(e.target, literals.row);\n            if ([].slice.call(this.element.getElementsByClassName('e-frozenhover')).length && e.type === 'mouseout') {\n                var rows = [].slice.call(this.element.getElementsByClassName('e-frozenhover'));\n                for (var i = 0; i < rows.length; i++) {\n                    rows[i].classList.remove('e-frozenhover');\n                }\n            }\n            else if (row) {\n                var rows = [].slice.call(this.element.querySelectorAll('tr[aria-rowindex=\"' + row.getAttribute(literals.ariaRowIndex) + '\"]'));\n                rows.splice(rows.indexOf(row), 1);\n                for (var i = 0; i < rows.length; i++) {\n                    if (row.getAttribute('aria-selected') !== 'true' && rows[i]) {\n                        rows[i].classList.add('e-frozenhover');\n                    }\n                    else if (rows[i]) {\n                        rows[i].classList.remove('e-frozenhover');\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        if (this.clipMode === 'EllipsisWithTooltip') {\n            return true;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     *\n     * @param {Element} table - Defines the table\n     * @param {string} tag - Defines the tag\n     * @param {string} type - Defines the type\n     * @returns {HTMLDivElement} Returns the HTML div ELement\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.onKeyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     *\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.element, 'dblclick', this.dblClickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyPressHandler, this);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        EventHandler.add(window, 'resize', this.resetIndentWidth, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseout', this.mouseMoveHandler, this);\n        EventHandler.add(this.getContent(), 'touchstart', this.tapEvent, this);\n        EventHandler.add(document.body, 'keydown', this.keyDownHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     *\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.element, 'dblclick', this.dblClickHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseout', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyPressHandler);\n        EventHandler.remove(this.getContent(), 'touchstart', this.tapEvent);\n        EventHandler.remove(document.body, 'keydown', this.keyDownHandler);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        EventHandler.remove(window, 'resize', this.resetIndentWidth);\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.onKeyPressed, this);\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.onKeyPressed);\n    };\n    /**\n     * Get current visible data of grid.\n     *\n     * @returns {Object[]} Returns the current view records\n     * @isGenericType true\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        if (isGroupAdaptive(this)) {\n            return isNullOrUndefined(this.currentViewData.records) ?\n                this.currentViewData : this.currentViewData.records;\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            return this.currentViewData;\n        }\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length\n            && this.currentViewData.records) ? this.currentViewData.records\n            : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.getElementsByClassName('e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, literals.gridContent) ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop &&\n            !(parentsUntil(e.target, 'e-filterbarcell'))) {\n            e.preventDefault();\n        }\n        var args = this.getRowInfo(e.target);\n        var cancel = 'cancel';\n        args[cancel] = false;\n        var isDataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            isDataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        if (isDataRow) {\n            this.trigger(events.recordClick, args);\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, literals.row);\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains(literals.editedRow) || tr.classList.contains(literals.addedRow));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, literals.rowCell) &&\n            parentsUntil(e.target, literals.rowCell).classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var dataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            dataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        if (dataRow) {\n            this.trigger(events.recordDoubleClick, args);\n        }\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        var relatedTarget = e.relatedTarget;\n        var ariaOwns = relatedTarget ? relatedTarget.getAttribute('aria-owns') : null;\n        if ((!relatedTarget || (!parentsUntil(relatedTarget, 'e-grid') &&\n            (!isNullOrUndefined(ariaOwns) &&\n                (ariaOwns)) !== e.target.getAttribute('aria-owns')))\n            && !this.keyPress && this.isEdit && !Browser.isDevice) {\n            if (this.editSettings.mode === 'Batch') {\n                this.editModule.saveCell();\n                this.notify(events.editNextValCell, {});\n            }\n            if (this.editSettings.mode === 'Normal') {\n                this.editModule.editFormValidate();\n            }\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @param {Object} persistedData - Defines the persisted data\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.mergePersistGridData = function (persistedData) {\n        var data = this.getLocalData();\n        if (!(isNullOrUndefined(data) || (data === '')) || !isNullOrUndefined(persistedData)) {\n            var dataObj = !isNullOrUndefined(persistedData) ? persistedData : JSON.parse(data);\n            if (this.enableVirtualization) {\n                dataObj.pageSettings.currentPage = 1;\n            }\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        setColumnIndex(this[key]);\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var storedColumns = storedColumn;\n        var _loop_2 = function (i) {\n            var localCol = columns.filter(function (tCol) { return tCol.index === storedColumns[i].index; })[0];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    this_2.mergeColumns(storedColumns[i].columns, localCol.columns);\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n                else {\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < storedColumns.length; i++) {\n            _loop_2(i);\n        }\n    };\n    /**\n     * @hidden\n     * @returns {boolean} Returns the isDetail\n     */\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyPressHandler = function (e) {\n        var presskey = extend(e, { cancel: false });\n        this.trigger('keyPressed', presskey);\n        if (presskey.cancel === true) {\n            e.stopImmediatePropagation();\n        }\n    };\n    Grid.prototype.keyDownHandler = function (e) {\n        if (e.altKey) {\n            if (e.keyCode === 74) { //alt j\n                if (this.keyA) { //alt A J\n                    this.notify(events.groupCollapse, { target: e.target, collapse: false });\n                    this.keyA = false;\n                }\n                else {\n                    this.focusModule.focusHeader();\n                    this.focusModule.addOutline();\n                }\n            }\n            if (e.keyCode === 87) { //alt w\n                this.focusModule.focusContent();\n                this.focusModule.addOutline();\n            }\n            if (e.keyCode === 65) { //alt A\n                this.keyA = true;\n            }\n            if (e.keyCode === 72 && this.keyA) { //alt A H\n                this.notify(events.groupCollapse, { target: e.target, collapse: true });\n                this.keyA = false;\n            }\n        }\n        if (e.keyCode === 13) {\n            this.notify(events.enterKeyHandler, e);\n        }\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        else {\n            this.keyPress = true;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @param {Function[]} modules - Defines the modules\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        setColumnIndex(this.columns);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     *\n     * @returns {Column[]} Returns Foreign key column\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     * @returns {number} Returns row height\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.setFrozenCount();\n        var fCnt = this.getContent().querySelector('.e-frozen-left-content');\n        var frCnt = this.getContent().querySelector('.e-frozen-right-content');\n        var isColFrozen = !this.frozenRightCount && !this.frozenLeftCount;\n        var isFrozen = this.getFrozenColumns() !== 0;\n        if (!isFrozen && ((!fCnt && this.frozenLeftCount) || (!frCnt && this.frozenRightCount) || (fCnt && !this.frozenLeftCount)\n            || (frCnt && !this.frozenRightCount))) {\n            this.tableIndex = 0;\n            this.tablesCount = 1;\n            if (this.enableColumnVirtualization) {\n                this.columnModel = [];\n                this.updateColumnModel(this.columns);\n            }\n            this.freezeRefresh();\n        }\n        else if (isColFrozen && ((this.getFrozenColumns() === 1 && !fCnt) || (this.getFrozenColumns() === 0 && fCnt))) {\n            this.tableIndex = 0;\n            this.tablesCount = 1;\n            if (this.enableColumnVirtualization) {\n                this.columnModel = [];\n                this.updateColumnModel(this.columns);\n            }\n            this.freezeRefresh();\n        }\n        else {\n            this.isPreventScrollEvent = true;\n            this.updateColumnObject();\n            this.checkLockColumns(this.getColumns());\n            this.refresh();\n            if (this.isFrozenGrid()) {\n                var mTbl = this.contentModule.getMovableContent().querySelector('.' + literals.table);\n                remove(mTbl.querySelector(literals.colGroup));\n                var colGroup = ((this.getHeaderContent()\n                    .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup)).cloneNode(true));\n                mTbl.insertBefore(colGroup, mTbl.querySelector(literals.tbody));\n                if (this.getFrozenMode() === 'Left-Right') {\n                    var frTbl = this.contentModule.getFrozenRightContent().querySelector('.' + literals.table);\n                    remove(frTbl.querySelector(literals.colGroup));\n                    var colGrp = ((this.getHeaderContent()\n                        .querySelector('.e-frozen-right-header').querySelector(literals.colGroup)).cloneNode(true));\n                    frTbl.insertBefore(colGrp, frTbl.querySelector(literals.tbody));\n                }\n            }\n        }\n        if (this.isFrozenGrid()) {\n            var left = this.getContent().querySelector('.e-movablescrollbar').scrollLeft;\n            this.headerModule.getMovableHeader().scrollLeft = left;\n            this.contentModule.getMovableContent().scrollLeft = left;\n        }\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     *\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {Workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns {Promise<any>} Returns the excelexport\n     * @blazorType void\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;\n    };\n    /**\n     * Export Grid data to CSV file.\n     *\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {Workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns {Promise<any>} Returns csv export\n     * @blazorType void\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;\n    };\n    /**\n     * Export Grid data to PDF document.\n     *\n     * @param {pdfExportProperties} pdfExportProperties - Defines the export properties of the Grid.\n     * @param {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @returns {Promise<any>} Returns pdfexport\n     * @blazorType void\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;\n    };\n    /**\n     * Groups a column by column name.\n     *\n     * @param  {string} columnName - Defines the column name to group.\n     * @returns {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.groupColumn(columnName);\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.groupExpandAll = function () {\n        if (this.groupModule) {\n            this.groupModule.expandAll();\n        }\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.groupCollapseAll = function () {\n        if (this.groupModule) {\n            this.groupModule.collapseAll();\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     *\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @returns {void}\n     */\n    // public expandCollapseRows(target: Element): void {\n    //     if (this.groupModule) {\n    //         this.groupModule.expandCollapseRows(target);\n    //     }\n    // }\n    /**\n     * Clears all the grouped columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.clearGrouping = function () {\n        if (this.groupModule) {\n            this.groupModule.clearGrouping();\n        }\n    };\n    /**\n     * Ungroups a column by column name.\n     *\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * {% codeBlock src='grid/ungroupColumn/index.md' %}{% endcodeBlock %}\n     * @returns {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.ungroupColumn(columnName);\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param {number} x - Defines the X axis.\n     * @param {number} y - Defines the Y axis.\n     * @returns {void}\n     */\n    Grid.prototype.openColumnChooser = function (x, y) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.openColumnChooser(x, y);\n        }\n    };\n    Grid.prototype.scrollRefresh = function () {\n        var _this = this;\n        var refresh = function () {\n            _this.scrollModule.refresh();\n            _this.off(events.contentReady, refresh);\n        };\n        this.on(events.contentReady, refresh, this);\n    };\n    /**\n     * Collapses a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @returns {void}\n     */\n    // public detailCollapse(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.collapse(target);\n    //     }\n    // }\n    /**\n     * Collapses all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.detailCollapseAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.collapseAll();\n        }\n    };\n    /**\n     * Expands a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @returns {void}\n     */\n    // public detailExpand(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.expand(target);\n    //     }\n    // }\n    /**\n     * Expands all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.detailExpandAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.expandAll();\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.clearCellSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearCellSelection();\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.clearRowSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearRowSelection();\n        }\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     *\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @returns {void}\n     */\n    Grid.prototype.selectCells = function (rowCellIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCells(rowCellIndexes);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     *\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @returns {void}\n     */\n    Grid.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRowsByRange(startIndex, endIndex);\n        }\n    };\n    /**\n     * @hidden\n     * @returns {boolean} Returns whether context menu is open or not\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @param {Function} module - Defines the module\n     * @returns {boolean} return the injected modules\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     *\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     * @param {any} index - specifies the index\n     */\n    // eslint-disable-next-line\n    Grid.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * @param {string | string[]} type - Defines the type\n     * @param {Object} args - Defines the arguments\n     * @returns {void}\n     * @hidden\n     * @private\n     */\n    Grid.prototype.log = function (type, args) {\n        // eslint-disable-next-line\n        this.loggerModule ? this.loggerModule.log(type, args) : (function () { return 0; })();\n    };\n    /**\n     * @param {Element} element - Defines the element\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.applyBiggerTheme = function (element) {\n        if (this.element.classList.contains('e-bigger')) {\n            element.classList.add('e-bigger');\n        }\n    };\n    /**\n     * @hidden\n     * @returns {Object} Returns the previous row data\n     */\n    Grid.prototype.getPreviousRowData = function () {\n        var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;\n        return previousRowData;\n    };\n    /**\n     * Hides the scrollbar placeholder of Grid content when grid content is not overflown.\n     *\n     * @returns {void}\n     */\n    Grid.prototype.hideScroll = function () {\n        var content = this.getContent().querySelector('.' + literals.content);\n        var scrollBar = this.getContent().querySelector('.e-scrollbar');\n        if (content.scrollHeight <= content.clientHeight) {\n            this.scrollModule.removePadding();\n            content.style.overflowY = 'auto';\n        }\n        if (this.isFrozenGrid() && scrollBar) {\n            var mvblScrollBar = this.getContent().querySelector('.e-movablescrollbar');\n            var mvblChild = this.getContent().querySelector('.e-movablechild');\n            scrollBar.style.display = 'flex';\n            if (mvblScrollBar.offsetWidth >= mvblChild.offsetWidth) {\n                scrollBar.style.display = 'none';\n                this.notify(events.frozenHeight, 0);\n            }\n        }\n    };\n    /**\n     * Get row index by primary key or row data.\n     *\n     * @param  {string | Object} value - Defines the primary key value.\n     * @returns {number} Returns the index\n     */\n    Grid.prototype.getRowIndexByPrimaryKey = function (value) {\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        value = typeof value === 'object' ? value[pkName] : value;\n        var rows = this.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDetailRow || rows[i].isCaptionRow) {\n                continue;\n            }\n            var pKvalue = rows[i].data[pkName];\n            if (pkName.split('.').length > 1) {\n                pKvalue = performComplexDataOperation(pkName, rows[i].data);\n            }\n            if (pKvalue === value) {\n                return rows[i].index;\n            }\n        }\n        return -1;\n    };\n    /**\n     * @param {string} field - Defines the field name\n     * @returns {Column} returns the column\n     * @hidden\n     */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByFieldFromAllCols = function (field) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (field === gCols[i].field) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n     * @param {string} uid - Defines the uid\n     * @returns {Column} returns the column\n     * @hidden\n     */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByUidFromAllCols = function (uid) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (uid === gCols[i].uid) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n     * Get all filtered records from the Grid and it returns array of objects for the local dataSource, returns a promise object if the Grid has remote data.\n     *\n     * @returns {Object[] | Promise<Object>} Returns the filtered records\n     * @deprecated\n     */\n    Grid.prototype.getFilteredRecords = function () {\n        if (this.allowFiltering && this.filterSettings.columns.length) {\n            var query = this.renderModule.data.generateQuery(true);\n            if (this.dataSource && this.renderModule.data.isRemote() && this.dataSource instanceof DataManager) {\n                return this.renderModule.data.getData(this.dataSource, query);\n            }\n            else {\n                if (this.dataSource instanceof DataManager) {\n                    return this.dataSource.executeLocal(query);\n                }\n                else {\n                    return new DataManager(this.dataSource, query).executeLocal(query);\n                }\n            }\n        }\n        return [];\n    };\n    Grid.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * @param {TouchEventArgs} e - Defines the TouchEventArgs\n     * @returns {void}\n     * @hidden\n     */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    // eslint-disable-next-line\n    Grid.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.dblClickHandler(e);\n                this.notify(events.doubleTap, e);\n            }\n        }\n    };\n    /**\n     * @param {string} prefix - specifies the prefix\n     * @returns {string} returns the row uid\n     * @hidden\n     */\n    Grid.prototype.getRowUid = function (prefix) {\n        return \"\" + prefix + this.rowUid++;\n    };\n    /**\n     * @hidden\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getMovableVirtualContent = function () {\n        return this.getContent().querySelector('.' + literals.movableContent);\n    };\n    /**\n     * @hidden\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFrozenVirtualContent = function () {\n        return this.getContent().querySelector('.' + literals.frozenContent);\n    };\n    /**\n     * @hidden\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getMovableVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.' + literals.movableHeader);\n    };\n    /**\n     * @hidden\n     * @returns {Element} returns the element\n     */\n    Grid.prototype.getFrozenVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.' + literals.frozenHeader);\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    Grid.prototype.getRowElementByUID = function (uid) {\n        var rowEle;\n        var rows = [];\n        if (this.isFrozenGrid()) {\n            var fRows = [].slice.call(this.getFrozenVirtualContent().querySelector(literals.tbody).children);\n            var mRows = [].slice.call(this.getMovableVirtualContent().querySelector(literals.tbody).children);\n            var frozenRigtRows = [];\n            if (this.tablesCount === 3) {\n                frozenRigtRows = [].slice.call(this.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody).children);\n            }\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getFrozenVirtualHeader().querySelector(literals.tbody).children);\n                rows = rows.concat([].slice.call(this.getMovableVirtualHeader().querySelector(literals.tbody).children));\n                if (this.tablesCount === 3) {\n                    var frHdr = this.getHeaderContent().querySelector('.e-frozen-right-header');\n                    rows = rows.concat([].slice.call(frHdr.querySelector(literals.tbody).children)).concat(frozenRigtRows);\n                }\n                rows = rows.concat(fRows).concat(mRows);\n            }\n            else {\n                rows = fRows.concat(mRows).concat(frozenRigtRows);\n            }\n        }\n        else {\n            var cntRows = [].slice.call(this.getContent().querySelector(literals.tbody).children);\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getHeaderContent().querySelector(literals.tbody).children);\n                rows = rows.concat(cntRows);\n            }\n            else {\n                rows = cntRows;\n            }\n        }\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            if (row.getAttribute('data-uid') === uid) {\n                rowEle = row;\n                break;\n            }\n        }\n        return rowEle;\n    };\n    /**\n     * Gets the hidden columns from the Grid.\n     *\n     * @returns {Column[]} Returns the Column\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getHiddenColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible === false) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * calculatePageSizeByParentHeight\n     *\n     * @param {number | string } containerHeight - specifies the container height\n     * @returns {number} returns the page size\n     * @deprecated\n     */\n    Grid.prototype.calculatePageSizeByParentHeight = function (containerHeight) {\n        if (this.allowPaging) {\n            if ((this.allowTextWrap && this.textWrapSettings.wrapMode === 'Header') || (!this.allowTextWrap)) {\n                var pagesize = 0;\n                if (containerHeight.indexOf('%') !== -1) {\n                    containerHeight = parseInt(containerHeight, 10) / 100 * this.element.clientHeight;\n                }\n                var nonContentHeight = this.getNoncontentHeight() + this.getRowHeight();\n                if (containerHeight > nonContentHeight) {\n                    var contentHeight = 0;\n                    contentHeight = containerHeight - this.getNoncontentHeight();\n                    pagesize = (contentHeight / this.getRowHeight());\n                }\n                if (pagesize > 0) {\n                    return Math.floor(pagesize);\n                }\n            }\n        }\n        return 0;\n    };\n    Grid.prototype.getNoncontentHeight = function () {\n        var height = 0;\n        if (!isNullOrUndefined(this.getHeaderContent().clientHeight)) {\n            height += this.getHeaderContent().clientHeight;\n        }\n        if (this.toolbar && !isNullOrUndefined(this.element.querySelector('.e-toolbar').clientHeight)) {\n            height += this.element.querySelector('.e-toolbar').clientHeight;\n        }\n        if (this.allowPaging && !isNullOrUndefined(this.element.querySelector('.e-gridpager').clientHeight)) {\n            height += this.element.querySelector('.e-gridpager').clientHeight;\n        }\n        if (this.showColumnChooser && !isNullOrUndefined(this.element.querySelector('.e-columnheader').clientHeight)) {\n            height += this.element.querySelector('.e-columnheader').clientHeight;\n        }\n        if (this.allowGrouping && this.groupSettings.showDropArea && !isNullOrUndefined(this.element.querySelector('.e-groupdroparea').clientHeight)) {\n            height += this.element.querySelector('.e-groupdroparea').clientHeight;\n        }\n        if (this.aggregates.length > 0 && !isNullOrUndefined(this.element.querySelector('.e-summaryrow').clientHeight)) {\n            for (var i = 0; i < this.element.getElementsByClassName('e-summaryrow').length; i++) {\n                height += this.element.getElementsByClassName('e-summaryrow')[i].clientHeight;\n            }\n        }\n        return height;\n    };\n    /**\n     *To perform aggregate operation on a column.\n     *\n     * @param  {AggregateColumnModel} summaryCol - Pass Aggregate Column details.\n     * @param  {Object} summaryData - Pass JSON Array for which its field values to be calculated.\n     * @returns {number} returns the summary values\n     * @deprecated\n     */\n    Grid.prototype.getSummaryValues = function (summaryCol, summaryData) {\n        return DataUtil.aggregates[summaryCol.type.toLowerCase()](summaryData, summaryCol.field);\n    };\n    /**\n     * Sends a Post request to export Grid to Excel file in server side.\n     *\n     * @param  {string} url - Pass Url for server side excel export action.\n     * @returns {void}\n     */\n    Grid.prototype.serverExcelExport = function (url) {\n        this.isExcel = true;\n        this.exportGrid(url);\n    };\n    /**\n     * Sends a Post request to export Grid to Pdf file in server side.\n     *\n     * @param  {string} url - Pass Url for server side pdf export action.\n     * @returns {void}\n     */\n    Grid.prototype.serverPdfExport = function (url) {\n        this.isExcel = false;\n        this.exportGrid(url);\n    };\n    /**\n     * Sends a Post request to export Grid to CSV file in server side.\n     *\n     * @param  {string} url - Pass Url for server side pdf export action.\n     * @returns {void}\n     */\n    Grid.prototype.serverCsvExport = function (url) {\n        this.isExcel = true;\n        this.exportGrid(url);\n    };\n    /**\n     * @param {string} url - Defines exporting url\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.exportGrid = function (url) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var grid = this;\n        var query = grid.getDataModule().generateQuery(true);\n        var state = new UrlAdaptor().processQuery(new DataManager({ url: '' }), query);\n        var queries = JSON.parse(state.data);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var gridModel = JSON.parse(this.addOnPersist(['allowGrouping', 'allowPaging', 'pageSettings', 'sortSettings', 'allowPdfExport', 'allowExcelExport', 'aggregates',\n            'filterSettings', 'groupSettings', 'columns', 'locale', 'searchSettings']));\n        var include = ['field', 'headerText', 'type', 'format', 'visible', 'foreignKeyValue', 'foreignKeyField',\n            'template', 'index', 'width', 'textAlign', 'headerTextAlign', 'columns'];\n        gridModel.filterSettings.columns = queries.where;\n        gridModel.searchSettings.fields = queries.search && queries.search[0]['fields'] || [];\n        gridModel.sortSettings.columns = queries.sorted;\n        gridModel.columns = this.setHeaderText(gridModel.columns, include);\n        var form = this.createElement('form', { id: 'ExportForm', styles: 'display:none;' });\n        var gridInput = this.createElement('input', { id: 'gridInput', attrs: { name: 'gridModel' } });\n        gridInput.value = JSON.stringify(gridModel);\n        form.method = 'POST';\n        form.action = url;\n        form.appendChild(gridInput);\n        document.body.appendChild(form);\n        form.submit();\n        form.remove();\n    };\n    /**\n     * @param {Column[]} columns - Defines array of columns\n     * @param {string[]} include - Defines array of sting\n     * @returns {Column[]} returns array of columns\n     * @hidden\n     */\n    Grid.prototype.setHeaderText = function (columns, include) {\n        for (var i = 0; i < columns.length; i++) {\n            var column = this.getColumnByUid(columns[i].uid);\n            columns[i].headerText = column.headerText;\n            if (!isNullOrUndefined(column.template)) {\n                columns[i].template = 'true';\n            }\n            if (columns[i].format) {\n                columns[i].format = getNumberFormat(this.getFormat(columns[i].format), columns[i].type, this.isExcel);\n            }\n            if (columns[i].columns) {\n                this.setHeaderText(columns[i].columns, include);\n            }\n            var keys = Object.keys(columns[i]);\n            for (var j = 0; j < keys.length; j++) {\n                if (include.indexOf(keys[j]) < 0) {\n                    delete columns[i][keys[j]];\n                }\n            }\n        }\n        return columns;\n    };\n    Grid.prototype.getFormat = function (format) {\n        return typeof (format) === 'object' ? !isNullOrUndefined(format.format) ?\n            format.format : format.skeleton : format;\n    };\n    /**\n     * @hidden\n     * @returns {boolean} returns the isCollapseStateEnabled\n     */\n    Grid.prototype.isCollapseStateEnabled = function () {\n        var isExpanded = 'isExpanded';\n        return this[isExpanded] === false;\n    };\n    /**\n     * @param {number} key - Defines the primary key value.\n     * @param {Object} rowData - Defines the rowData\n     * @returns {void}\n     * @deprecated\n     */\n    Grid.prototype.updateRowValue = function (key, rowData) {\n        var args = {\n            requestType: 'save', data: rowData\n        };\n        this.showSpinner();\n        this.notify(events.updateData, args);\n        this.refresh();\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.setForeignKeyData = function () {\n        this.dataBind();\n        var colpending = this.getDataModule().getForeignKeyDataState();\n        if (colpending.isPending) {\n            this.getDataModule().setForeignKeyDataState({});\n            colpending.resolver();\n        }\n        else {\n            this.getDataModule().setForeignKeyDataState({ isDataChanged: false });\n            if (this.contentModule || this.headerModule) {\n                this.renderModule.render();\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.resetFilterDlgPosition = function (field) {\n        var header = this.getColumnHeaderByField(field);\n        if (header) {\n            var target = header.querySelector('.e-filtermenudiv');\n            var filterDlg = document.querySelector('.e-filter-popup');\n            if (target && filterDlg) {\n                var gClient = this.element.getBoundingClientRect();\n                var fClient = target.getBoundingClientRect();\n                if (filterDlg) {\n                    filterDlg.style.left = (fClient.right - gClient.left).toString() + 'px';\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Grid.prototype.renderTemplates = function () {\n        var portals = 'portals';\n        this.notify('reactTemplateRender', this[portals]);\n        this.renderReactTemplates();\n    };\n    /**\n     * Apply the changes to the Grid without refreshing the rows.\n     *\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @returns {void}\n     */\n    Grid.prototype.batchUpdate = function (changes) {\n        this.processRowChanges(changes);\n    };\n    /**\n     * Apply the changes to the Grid in one batch after 50ms without refreshing the rows.\n     *\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @returns {void}\n     */\n    Grid.prototype.batchAsyncUpdate = function (changes) {\n        this.processBulkRowChanges(changes);\n    };\n    Grid.prototype.processBulkRowChanges = function (changes) {\n        var _this = this;\n        if (!this.dataToBeUpdated) {\n            this.dataToBeUpdated = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n            setTimeout(function () {\n                _this.processRowChanges(_this.dataToBeUpdated);\n                _this.dataToBeUpdated = null;\n            }, this.asyncTimeOut);\n        }\n        else {\n            var loopstring = [literals.addedRecords, literals.changedRecords, literals.deletedRecords];\n            var keyField = this.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < loopstring.length; i++) {\n                if (changes[loopstring[i]]) {\n                    compareChanges(this, changes, loopstring[i], keyField);\n                }\n            }\n        }\n    };\n    Grid.prototype.processRowChanges = function (changes) {\n        var _this = this;\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        changes = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n        var promise = this.getDataModule().saveChanges(changes, keyField, {}, this.getDataModule().generateQuery().requiresCount());\n        if (this.getDataModule().isRemote()) {\n            promise.then(function () {\n                _this.setNewData();\n            });\n        }\n        else {\n            this.setNewData();\n        }\n    };\n    Grid.prototype.setNewData = function () {\n        var _this = this;\n        var oldValues = JSON.parse(JSON.stringify(this.getCurrentViewRecords()));\n        var getData = this.getDataModule().getData({}, this.getDataModule().generateQuery().requiresCount());\n        getData.then(function (e) {\n            _this.bulkRefresh(e.result, oldValues, e.count);\n        });\n    };\n    Grid.prototype.deleteRowElement = function (row) {\n        var tr = this.getRowElementByUID(row.uid);\n        var index = parseInt(tr.getAttribute(literals.ariaRowIndex), 10);\n        remove(tr);\n        if (this.getFrozenColumns()) {\n            var mtr = this.getMovableRows()[index];\n            remove(mtr);\n        }\n    };\n    Grid.prototype.bulkRefresh = function (result, oldValues, count) {\n        var _this = this;\n        var rowObj = this.getRowsObject();\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        var _loop_3 = function (i) {\n            if (!result.filter(function (e) { return e[keyField] === rowObj[i].data[keyField]; }).length) {\n                this_3.deleteRowElement(rowObj[i]);\n                rowObj.splice(i, 1);\n                i--;\n            }\n            out_i_1 = i;\n        };\n        var this_3 = this, out_i_1;\n        for (var i = 0; i < rowObj.length; i++) {\n            _loop_3(i);\n            i = out_i_1;\n        }\n        var _loop_4 = function (i) {\n            var isRowExist;\n            oldValues.filter(function (e) {\n                if (e[keyField] === result[i][keyField]) {\n                    if (e !== result[i]) {\n                        _this.setRowData(result[i][keyField], result[i]);\n                    }\n                    isRowExist = true;\n                }\n            });\n            if (!isRowExist) {\n                this_4.renderRowElement(result[i], i);\n            }\n        };\n        var this_4 = this;\n        for (var i = 0; i < result.length; i++) {\n            _loop_4(i);\n        }\n        this.currentViewData = result;\n        var rows = [].slice.call(this.getContentTable().getElementsByClassName(literals.row));\n        resetRowIndex(this, this.getRowsObject(), rows);\n        setRowElements(this);\n        if (this.allowPaging) {\n            this.notify(events.inBoundModelChanged, { module: 'pager', properties: { totalRecordsCount: count } });\n        }\n    };\n    Grid.prototype.renderRowElement = function (data, index) {\n        var row = new RowRenderer(this.serviceLocator, null, this);\n        var model = new RowModelGenerator(this);\n        var modelData = model.generateRows([data]);\n        var tr = row.render(modelData[0], this.getColumns());\n        var mTr;\n        var mTbody;\n        this.addRowObject(modelData[0], index);\n        var tbody = this.getContentTable().querySelector(literals.tbody);\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (this.getFrozenColumns()) {\n                var moveTbody = this.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            }\n        }\n        if (this.getFrozenColumns()) {\n            mTr = renderMovable(tr, this.getFrozenColumns(), this);\n            if (this.frozenRows && index < this.frozenRows) {\n                mTbody = this.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody);\n            }\n            else {\n                mTbody = this.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n            }\n            mTbody.appendChild(mTr);\n            if (this.height === 'auto') {\n                this.notify(events.frozenHeight, {});\n            }\n        }\n        if (this.frozenRows && index < this.frozenRows) {\n            tbody = this.getHeaderContent().querySelector(literals.tbody);\n        }\n        else {\n            tbody = this.getContent().querySelector(literals.tbody);\n        }\n        tbody = this.getContent().querySelector(literals.tbody);\n        tbody.appendChild(tr);\n    };\n    Grid.prototype.addRowObject = function (row, index) {\n        var frzCols = this.getFrozenColumns();\n        if (frzCols) {\n            var mRows = this.getMovableRowsObject();\n            var mRow = row.clone();\n            mRow.cells = mRow.cells.slice(frzCols);\n            row.cells = row.cells.slice(0, frzCols);\n            mRows.splice(index, 1, mRow);\n        }\n        this.getRowsObject().splice(index, 1, row);\n    };\n    /**\n     * @param {string | number} height - specifies the height\n     * @returns {number | string} - specifies the height number\n     * @hidden\n     */\n    Grid.prototype.getHeight = function (height) {\n        if (!Number.isInteger(height) && height.indexOf('%') !== -1) {\n            height = parseInt(height, 10) / 100 * this.element.clientHeight;\n        }\n        else if (!Number.isInteger(height) && this.height !== 'auto') {\n            height = parseInt(height, 10);\n        }\n        else {\n            height = this.height;\n        }\n        return height;\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns frozen right content\n     */\n    Grid.prototype.getFrozenRightContent = function () {\n        return this.getContent().querySelector('.e-frozen-right-content');\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns frozen right header\n     */\n    Grid.prototype.getFrozenRightHeader = function () {\n        return this.getHeaderContent().querySelector('.e-frozen-right-header');\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns movable header tbody\n     */\n    Grid.prototype.getMovableHeaderTbody = function () {\n        return this.getMovableVirtualHeader().querySelector(literals.tbody);\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns movable content tbody\n     */\n    Grid.prototype.getMovableContentTbody = function () {\n        return this.getMovableVirtualContent().querySelector(literals.tbody);\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns frozen header tbody\n     */\n    Grid.prototype.getFrozenHeaderTbody = function () {\n        return this.getFrozenVirtualHeader().querySelector(literals.tbody);\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns frozen left content tbody\n     */\n    Grid.prototype.getFrozenLeftContentTbody = function () {\n        return this.getFrozenVirtualContent().querySelector(literals.tbody);\n    };\n    /**\n     * @hidden\n     * @returns {Element} - returns frozen right header tbody\n     */\n    Grid.prototype.getFrozenRightHeaderTbody = function () {\n        return this.getFrozenRightHeader().querySelector(literals.tbody);\n    };\n    /**\n     * @returns {Element} returns frozen right content tbody\n     * @hidden\n     */\n    Grid.prototype.getFrozenRightContentTbody = function () {\n        var cnt = this.getFrozenRightContent();\n        var tbody;\n        if (cnt) {\n            tbody = this.getFrozenRightContent().querySelector(literals.tbody);\n        }\n        return tbody;\n    };\n    /**\n     * @param {boolean} isCustom - Defines custom filter dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.showResponsiveCustomFilter = function (isCustom) {\n        if (this.filterModule) {\n            this.filterModule.showCustomFilter(isCustom || this.rowRenderingMode === 'Vertical');\n        }\n    };\n    /**\n     * @param {boolean} isCustom - Defines custom sort dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Grid.prototype.showResponsiveCustomSort = function (isCustom) {\n        if (this.sortModule) {\n            this.sortModule.showCustomSort(isCustom || this.rowRenderingMode === 'Vertical');\n        }\n    };\n    /**\n     * To manually show the vertical row mode filter dialog\n     *\n     * @returns {void}\n     */\n    Grid.prototype.showAdaptiveFilterDialog = function () {\n        if (this.enableAdaptiveUI) {\n            this.showResponsiveCustomFilter(true);\n        }\n    };\n    /**\n     * To manually show the vertical row sort filter dialog\n     *\n     * @returns {void}\n     */\n    Grid.prototype.showAdaptiveSortDialog = function () {\n        if (this.enableAdaptiveUI) {\n            this.showResponsiveCustomSort(true);\n        }\n    };\n    /**\n     * @param {boolean} isColVirtualization - Defines column virtualization\n     * @returns {Column[]} returns array of column models\n     * @hidden\n     */\n    Grid.prototype.getCurrentVisibleColumns = function (isColVirtualization) {\n        var cols = [];\n        var gridCols = isColVirtualization ? this.getColumns() : this.columnModel;\n        for (var _i = 0, gridCols_1 = gridCols; _i < gridCols_1.length; _i++) {\n            var col = gridCols_1[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    var Grid_1;\n    __decorate([\n        Property()\n    ], Grid.prototype, \"parentDetails\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAutoFill\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Complex({}, ResizeSettings)\n    ], Grid.prototype, \"resizeSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableInfiniteScrolling\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], Grid.prototype, \"clipMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, InfiniteScrollSettings)\n    ], Grid.prototype, \"infiniteScrollSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property('Horizontal')\n    ], Grid.prototype, \"rowRenderingMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAdaptiveUI\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableImmutableMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Complex({}, ColumnChooserSettings)\n    ], Grid.prototype, \"columnChooserSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableHeaderFocus\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Grid.prototype, \"hierarchyPrintMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Property({})\n    ], Grid.prototype, \"currentAction\", void 0);\n    __decorate([\n        Property('default version')\n    ], Grid.prototype, \"ej2StatePersistenceVersion\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportDetailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStartHelper\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenAdaptiveDialog\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"commandClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"keyPressed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePaste\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeAutoFill\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportGroupCaption\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupExpand\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupCollapse\", void 0);\n    Grid = Grid_1 = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IXLFilter} parent - specifies the IXLFilter\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[i].field,\n                    predicate: 'or',\n                    matchCase: fpred[i].ignoreCase,\n                    ignoreAccent: fpred[i].ignoreAccent,\n                    operator: fpred[i].operator,\n                    value: fpred[i].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n        var operator = this.options.isRemote ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'contains' : 'equal');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param {string} key - Defines localization key\n     * @returns {string} - returns localization label\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                // eslint-disable-next-line valid-typeof\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            enableRtl: this.parent.enableRtl,\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: document.body, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        this.dlg.setAttribute('aria-label', this.getLocalizedLabel('ExcelFilterDialogARIA'));\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if (this.parent.isReact && this.parent.destroyTemplate !== undefined) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n                this.parent.renderTemplates();\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /**\n     * @param {Column} col - Defines column details\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        // eslint-disable-next-line max-len\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) {\n                var value = e.target.value;\n                if (this.options.column.type === 'boolean') {\n                    if (value !== '' &&\n                        this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = true;\n                    }\n                    else if (value !== '' &&\n                        this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = false;\n                    }\n                }\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.options.isRemote ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type, ignoreAccent: this.options.ignoreAccent\n                    },\n                    field: this.options.field\n                };\n                if (value !== undefined && value !== null && value !== '') {\n                    if (this.isForeignColumn(this.options.column)) {\n                        this.foreignFilter(args, value);\n                    }\n                    else {\n                        this.options.handler(args);\n                    }\n                }\n                else {\n                    this.closeDialog();\n                }\n            }\n            else {\n                if (e.keyCode === 13) {\n                    this.fltrBtnHandler();\n                }\n                else {\n                    var text = e.target.firstChild.textContent.toLowerCase();\n                    if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                        this.fltrBtnHandler();\n                    }\n                    else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                        this.clearFilter();\n                    }\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var value;\n        var val;\n        var length;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                }\n                else {\n                    coll.push(fObj);\n                }\n                var args = {\n                    instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                    arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value, cancel: false\n                };\n                this.parent.notify(events.fltrPrevent, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            if (this.options.type === 'date' || this.options.type === 'datetime') {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[length], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'and', value: null\n                    });\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            // eslint-disable-next-line no-self-assign\n            filterargs.operator = filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, parsed, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime') {\n                operator = 'equal';\n                if (isNullOrUndefined(parsed) && val.length) {\n                    return;\n                }\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                predicte = getDatePredicate(filterObj, _this.options.type);\n            }\n            if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                query.where(pred.e);\n            }\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    foreignQuery.take(filterargs.filterChoiceCount);\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                query.take(filterargs.filterChoiceCount);\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        var query = this.getQuery();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            query.take(args.filterChoiceCount);\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            for (var j = 0; j < e.length; j++) {\n                runArray[i++](e[j].result);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n                var sSettings = this.parent.searchSettings;\n                var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) { return f.field; });\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n            if ((this.options.filteredColumns.length)) {\n                var cols = [];\n                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                    var filterColumn = this.options.filteredColumns[i];\n                    if (this.options.uid) {\n                        filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                        if (filterColumn.uid !== this.options.uid) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                    else {\n                        if (filterColumn.field !== this.options.field) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                }\n                var predicate = this.getPredicateFromCols(cols);\n                if (predicate) {\n                    query.where(predicate);\n                }\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if (this.sInput) {\n            this.sInput.focus();\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial, args);\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        this.parent.notify(events.beforeCheckboxRendererQuery, { query: query });\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.getElementsByClassName('e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string';\n            if (isReactCompiler) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue(key, data[i]);\n                var value = getValue(this.options.field, data[i]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[i] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            if (btn) {\n                btn.disabled = false;\n            }\n            disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.result[value];\n            return this.options.operator === 'notequal' ? !checkState : checkState;\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[len];\n            value = getObject(field, value); //local remote diff, check with mdu\n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilterBase.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var operate = 'or';\n        var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilterBase.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    if (cols[p].predicate === 'and' && cols[p].operator === 'equal') {\n                        predicate = predicate[operate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme, performComplexDataOperation } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\nimport * as literals from '../base/string-literals';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilterBase = /** @class */ (function (_super) {\n    __extends(ExcelFilterBase, _super);\n    /**\n     * Constructor for excel filtering module\n     *\n     * @param {IXLFilter} parent - parent details\n     * @param {Object} customFltrOperators - operator details\n     * @hidden\n     */\n    function ExcelFilterBase(parent, customFltrOperators) {\n        var _this = _super.call(this, parent) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter']\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ExcelFilterBase.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon, eleOptions) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.parent.allowSorting && this.parent.getModuleName() === 'grid'\n            && !this.options.isResponsiveFilter) {\n            var hdrele = this.parent.getColumnHeaderByUid(eleOptions.uid).getAttribute('aria-sort');\n            var colIsSort = this.parent.getColumnByField(eleOptions.field).allowSorting;\n            var isAsc = (!colIsSort || hdrele === 'Ascending') ? 'e-disabled e-excel-ascending' : 'e-excel-ascending';\n            var isDesc = (!colIsSort || hdrele === 'Descending') ? 'e-disabled e-excel-descending' : 'e-excel-descending';\n            var ascName = (type === 'string') ? this.getLocalizedLabel('SortAtoZ') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByOldest') : this.getLocalizedLabel('SortSmallestToLargest');\n            var descName = (type === 'string') ? this.getLocalizedLabel('SortZtoA') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByNewest') : this.getLocalizedLabel('SortLargestToSmallest');\n            ul.appendChild(this.createMenuElem(ascName, isAsc, 'e-sortascending'));\n            ul.appendChild(this.createMenuElem(descName, isDesc, 'e-sortdescending'));\n            var separator = this.parent.createElement('li', { className: 'e-separator e-menu-item e-excel-separator' });\n            ul.appendChild(separator);\n        }\n        if (!this.options.isResponsiveFilter) {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        }\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n        this.parent.notify(events.beforeFltrcMenuOpen, { element: this.menu });\n        this.parent.notify(events.refreshCustomFilterClearBtn, { isFiltered: isFiltered });\n    };\n    ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilterBase.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilterBase.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilterBase.prototype.clickExHandler = function (e) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem) {\n            if (this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n                this.clearFilter();\n                this.closeDialog();\n            }\n            else if (this.options.isResponsiveFilter\n                && this.getLocalizedLabel(options[this.options.type]) === menuItem.innerText.trim()) {\n                this.hoverHandler(e);\n            }\n        }\n    };\n    ExcelFilterBase.prototype.destroyCMenu = function () {\n        this.isCMenuOpen = false;\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n            this.parent.notify(events.renderResponsiveCmenu, { target: null, header: '', isOpen: false, col: this.options.column });\n        }\n    };\n    ExcelFilterBase.prototype.hoverHandler = function (e) {\n        if (this.options.isResponsiveFilter && e.type === 'mouseover') {\n            return;\n        }\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose.bind(this),\n                cssClass: this.options.isResponsiveFilter ? 'e-res-contextmenu-wrapper' : ''\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (this.options.isResponsiveFilter) {\n                var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n                var content = document.querySelector('.e-responsive-dialog > .e-dlg-header-content');\n                var height = content.offsetHeight + 4;\n                this.menuObj.element.style.height = 'calc(100% - ' + height + 'px)';\n                this.menuObj.open(height, 0, document.body);\n                var header = this.getLocalizedLabel(options[this.options.type]);\n                this.parent.notify(events.renderResponsiveCmenu, {\n                    target: this.menuObj.element.parentElement, header: header, isOpen: true\n                });\n            }\n            else {\n                if (Browser.isDevice) {\n                    var contextRect = this.getContextBounds();\n                    pos.top = (window.innerHeight - contextRect.height) / 2;\n                    pos.left = (window.innerWidth - contextRect.width) / 2;\n                    this.closeDialog();\n                }\n                else {\n                    pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                    pos.left = this.getCMenuYPosition(this.dlg);\n                }\n                this.menuObj.open(pos.top, pos.left, e.target);\n            }\n            applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilterBase.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilterBase.prototype.preventClose = function (args) {\n        if (this.options && this.options.isResponsiveFilter && args.event) {\n            var target = args.event.target;\n            var isFilterBack = target.classList.contains('e-resfilterback')\n                || target.classList.contains('e-res-back-btn') || target.classList.contains('e-menu-item');\n            args.cancel = !isFilterBack;\n        }\n        else {\n            if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n                args.cancel = true;\n            }\n        }\n    };\n    ExcelFilterBase.prototype.getContextBounds = function () {\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilterBase.prototype.getCMenuYPosition = function (target) {\n        var contextWidth = this.getContextBounds().width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilterBase.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2), options);\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        if (this.parent.enableRtl) {\n            this.dlg.classList.add('e-rtl');\n        }\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.parent.notify(events.filterDialogCreated, {});\n        this.wireExEvents();\n    };\n    ExcelFilterBase.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilterBase.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.parent.notify(events.filterCmenuSelect, {});\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    /**\n     * @hidden\n     * @param {MenuEventArgs} e - event args\n     * @returns {void}\n     */\n    ExcelFilterBase.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e ? e.element : undefined;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        if (this.options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-resfilter > .e-dlg-content > .e-xl-customfilterdiv');\n            responsiveCnt.appendChild(this.dlgDiv);\n        }\n        else {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                }\n                else {\n                    //(row.cells[1].querySelector('input:not([type=hidden])') as HTMLElement).focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.renderResponsiveDialog = function () {\n        if (this.options.isResponsiveFilter) {\n            var rowResponsiveDlg = document.querySelector('.e-row-responsive-filter');\n            if (rowResponsiveDlg) {\n                rowResponsiveDlg.classList.remove('e-row-responsive-filter');\n            }\n            this.dlgObj.buttons = [{}];\n            this.dlgObj.header = undefined;\n            this.dlgObj.position = { X: '', Y: '' };\n            this.dlgObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-xl-customfilterdiv');\n            this.dlgObj.width = '100%';\n            this.dlgObj.isModal = false;\n            this.dlgObj.showCloseIcon = false;\n        }\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    ExcelFilterBase.prototype.removeDialog = function () {\n        this.parent.notify(events.customFilterClose, {});\n        if (this.parent.isReact && this.parent.destroyTemplate !== undefined) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n        this.parent.notify(events.filterDialogClose, {});\n    };\n    ExcelFilterBase.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        if (!this.options.isResponsiveFilter) {\n            this.dlgObj.element.style.top = '0px';\n        }\n        else {\n            var content = document.querySelector('.e-responsive-dialog > .e-dlg-header-content');\n            var height = content.offsetHeight + 4;\n            this.dlgObj.element.style.top = height + 'px';\n        }\n        if (!this.options.isResponsiveFilter && Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.parent.notify(events.beforeCustomFilterOpen, { column: column, dialog: this.dialogObj });\n        this.dlgObj.show();\n        applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n    };\n    ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    /**\n     * @hidden\n     * @param {string} col - Defines column details\n     * @returns {void}\n     */\n    ExcelFilterBase.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * @hidden\n     * Filters grid row by column name with given options.\n     *\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     * @returns {void}\n     */\n    ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n        var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        var arg = {\n            instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n            arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, arg);\n        if (arg.cancel) {\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            // eslint-disable-next-line max-len\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (this.isForeignColumn(col)) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.options.column;\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl,\n            change: this.dropDownValueChange.bind(this)\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilterBase.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilterBase.prototype.dropDownValueChange = function (args) {\n        if (args.element.id.includes('-xlfl-frstoptr')) {\n            this.firstOperator = args.value.toString();\n        }\n        else {\n            this.secondOperator = args.value.toString();\n        }\n    };\n    /**\n     * @hidden\n     * @returns {FilterUI} returns filter UI\n     */\n    ExcelFilterBase.prototype.getFilterUIInfo = function () {\n        return { firstOperator: this.firstOperator, secondOperator: this.secondOperator, field: this.options.field };\n    };\n    ExcelFilterBase.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else if (isFirst && col.type === 'string' && !col.filter.operator) {\n            operator = 'startswith';\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilterBase.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement(literals.colGroup);\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        this.firstOperator = optr.operator;\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        this.secondOperator = optr.operator;\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ExcelFilterBase.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.options.filteredColumns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.options.column;\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var isReactCompiler = this.parent.isReact && typeof (this.options.column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n                appendChildren(valueDiv, element);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (this.parent.isAngular ? valueDiv.children[0] : valueDiv.querySelector('input')).id = isComplex ?\n                complexFieldName + elementId : column + elementId;\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n                if (isNullOrUndefined(flValue)) {\n                    flValue = undefined;\n                }\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilterBase.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue,\n            locale: this.parent.locale\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    // eslint-disable-next-line max-len\n    ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.options.column;\n        var isForeignColumn = this.isForeignColumn(colObj);\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.getQuery(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            text: fValue\n        }, colObj.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, this.getQuery());\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                actObj.dataSource = new DataManager(e);\n            });\n        }\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    return ExcelFilterBase;\n}(CheckBoxFilterBase));\nexport { ExcelFilterBase };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {SortSettings} sortSettings - specifies the SortSettings\n     * @param {string[]} sortedColumns - specifies the string\n     * @param {ServiceLocator} locator - specifies the ServiceLocator\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * The function used to update sortSettings\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            // eslint-disable-next-line no-self-assign\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     *\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @returns {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n        }\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;\n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget, cancel: false\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        this.sortedColumns.length = 0;\n        var sortColumns = this.sortSettings.columns;\n        for (var i = 0; i < sortColumns.length; i++) {\n            if (!sortColumns[i].isFromGroup) {\n                this.sortedColumns.push(sortColumns[i].field);\n            }\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     *\n     * @param {string} field - Defines the column field name to remove sort.\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin, target: this.currentTarget\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.setFullScreenDialog, handler: this.setFullScreenDialog },\n            { event: events.contentReady, handler: this.initialEnd },\n            { event: events.sortComplete, handler: this.onActionComplete },\n            { event: events.inBoundModelChanged, handler: this.onPropertyChanged },\n            { event: events.click, handler: this.clickHandler },\n            { event: events.headerRefreshed, handler: this.refreshSortIcons },\n            { event: events.keyPressed, handler: this.keyPressed },\n            { event: events.cancelBegin, handler: this.cancelBeginEvent }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * To destroy the sorting\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.refreshing) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv') &&\n            !parentsUntil(e.target, 'e-stackedheadercell') &&\n            !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection &&\n                e.target.classList.contains('e-headercell'))) {\n            var gObj_1 = this.parent;\n            var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n        if (parentsUntil(e.target, 'e-excel-ascending') ||\n            parentsUntil(e.target, 'e-excel-descending')) {\n            var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n            var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ?\n                'Ascending' : 'Descending';\n            this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.getElementsByClassName('e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.getElementsByClassName('e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch ||\n                (navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey));\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n                continue;\n            }\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (isNullOrUndefined(header) || (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    /**\n     * To show the responsive custom sort dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.showCustomSort = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     *\n     * @param {Pager} pagerModule - specifies the pagerModule\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     *\n     * @returns {void}\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     *\n     * @returns {void}\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     *\n     * @returns {void}\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     *\n     * @returns {void}\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     *\n     * @returns {void}\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerModule.element, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append, isBlazor } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     *\n     * @param {Pager} pagerModule - specifies the pager Module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     *\n     * @returns {void}\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     *\n     * @returns {void}\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        if (isBlazor()) {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('CurrentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('TotalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        }\n        else {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0, pagerObj.totalRecordsCount || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel(pagerObj.totalRecordsCount <= 1 ? 'totalItemInfo' : 'totalItemsInfo'), [pagerObj.totalRecordsCount || 0, pagerObj.totalRecordsCount ? (pagerObj.pageSize * (pagerObj.currentPage - 1)) + 1 : 0,\n                pagerObj.pageSize * pagerObj.currentPage > pagerObj.totalRecordsCount ? pagerObj.totalRecordsCount :\n                    pagerObj.pageSize * pagerObj.currentPage]);\n        }\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     *\n     * @returns {void}\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     *\n     * @returns {void}\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     *\n     * @param {PagerModel} options - specifies the options\n     * @param {string} element - specifies the element\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /** @hidden */\n        _this.hasParent = false;\n        _this.pageRefresh = 'pager-refresh';\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     *\n     * @returns {ModuleDeclaration[]} returns the modules declaration\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n        this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            totalItemInfo: '({0} item)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            CurrentPageInfo: '{0} of {1} pages',\n            TotalItemsInfo: '({0} items)',\n            FirstPageTooltip: 'Go to first page',\n            LastPageTooltip: 'Go to last page',\n            NextPageTooltip: 'Go to next page',\n            PreviousPageTooltip: 'Go to previous page',\n            NextPagerTooltip: 'Go to next pager',\n            PreviousPagerTooltip: 'Go to previous pager',\n            PagerDropDown: 'Items per page',\n            PagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        this.containerModule = new NumericContainer(this);\n        this.pagerMessageModule = new PagerMessage(this);\n    };\n    /**\n     * To Initialize the component rendering\n     *\n     * @returns {void}\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.on(this.pageRefresh, this.pagerTemplate, this);\n                this.notify(this.pageRefresh, {});\n            }\n            else {\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} returns the persist data\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Pager.prototype.destroy = function () {\n        if (this.isReactTemplate()) {\n            this.off(this.pageRefresh, this.pagerTemplate);\n            if (!this.hasParent) {\n                this.destroyTemplate(['template']);\n            }\n        }\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        if (!this.isReactTemplate()) {\n            this.element.innerHTML = '';\n        }\n    };\n    /**\n     * Destroys the given template reference.\n     *\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     * @param {any} index - Defines the index\n     */\n    // eslint-disable-next-line\n    Pager.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {PagerModel} newProp - specifies the new property\n     * @param {PagerModel} oldProp - specifies the old propety\n     * @returns {void}\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        if (oldProp.pageSize !== newProp.pageSize) {\n                            this.currentPage = 1;\n                        }\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    if (newProp.pageSize !== oldProp.pageSize) {\n                        this.pageSize = newProp.pageSize;\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    else {\n                        this.refresh();\n                    }\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param  {string} key - specifies the key\n     * @returns {string} returns the localized label\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     *\n     * @param  {number} pageNo - Defines page number.\n     * @returns {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    /**\n     * @param {number} pageSize - specifies the pagesize\n     * @returns {void}\n     * @hidden\n     */\n    Pager.prototype.setPageSize = function (pageSize) {\n        this.pageSize = pageSize;\n        this.dataBind();\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function (newProp, oldProp) {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {\n            var args = {\n                currentPage: this.currentPage,\n                newProp: newProp, oldProp: oldProp, cancel: false\n            };\n            this.trigger('click', args);\n            if (!args.cancel) {\n                this.refresh();\n            }\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        if (this.isReactTemplate() && this.hasParent) {\n            return;\n        }\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        var tempId = this.element.parentElement.id + '_template';\n        if (this.isReactTemplate()) {\n            this.getPagerTemplate()(data, this, 'template', tempId, null, null, this.element);\n            this.renderReactTemplates();\n        }\n        else {\n            result = isBlazor() ? this.getPagerTemplate()(data, this, 'template', tempId, this.isStringTemplate) :\n                this.isVue ? this.getPagerTemplate()(data, this) : this.getPagerTemplate()(data);\n            appendChildren(this.element, result);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /**\n     * @returns {Function} returns the function\n     * @hidden\n     */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    /**\n     * @param {string} template - specifies the template\n     * @returns {Function} returns the function\n     * @hidden\n     */\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     *\n     * @returns {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.updateTotalPages();\n                this.notify(this.pageRefresh, {});\n            }\n            else {\n                this.element.innerHTML = '';\n                this.updateTotalPages();\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.pagerdropdownModule) {\n                this.pagerdropdownModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('FirstPageTooltip') : this.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('PreviousPageTooltip') :\n                    this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('NextPageTooltip') :\n                    this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('LastPageTooltip') :\n                    this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            for (var i = 0; i < classList.length; i++) {\n                var element = this.element.querySelector(classList[i]);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            }\n        }\n    };\n    Pager.prototype.isReactTemplate = function () {\n        return this.isReact && this.template && typeof (this.template) !== 'string';\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     *\n     * @param {Pager} pagerModule - specifies the pagermodule\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     *\n     * @returns {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: isBlazor() ?\n                this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     *\n     * @param {ChangeEventArgs} e - specifies the changeeventargs\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.refresh();\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.refresh();\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: parseInt(this.dropDownListObject.value, 10) });\n    };\n    PagerDropDown.prototype.refresh = function () {\n        if (this.pagerCons) {\n            if (this.pagerModule.pageSize === this.pagerModule.totalRecordsCount) {\n                this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerAllDropDown') :\n                    this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            }\n            else {\n                this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                    this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = parseInt(item[i], 10) ? item[i].toString() : (this.pagerModule.getLocalizedLabel(item[i]) !== '')\n                ? this.pagerModule.getLocalizedLabel(item[i]) : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     *\n     * @param {string} args - specifies the arguments\n     * @param {string} args.requestType - specfies the request type\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     *\n     * @param {Pager} pagerModule - specifies the pagermodule\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     *\n     * @returns {void}\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     *\n     * @returns {void}\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        if (!isNullOrUndefined(this.element)) {\n            this.element.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the external message of the Pager.\n     *\n     * @returns {void}s\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent, addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {PageSettingsModel} pageSettings - specifies the PageSettingsModel\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.isInitialRender = true;\n        Pager.Inject(ExternalMessage, PagerDropDown);\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n            this.parent.pageTemplateChange = true;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        var pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n        this.pagerObj.hasParent = true;\n        this.pagerObj.on(events.pagerRefresh, this.renderReactPagerTemplate, this);\n        this.pagerObj.allowServerDataBinding = false;\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        if (!this.isInitialLoad) {\n            this.pageSettings.currentPage = 1;\n        }\n    };\n    Page.prototype.addAriaAttr = function () {\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            for (var j = 0; j < classList.length; j++) {\n                var element = this.element.querySelector(classList[j]);\n                if (this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n            }\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     *\n     * @returns {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     *\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @returns {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * @param {number} pageSize - specifies the page size\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.setPageSize = function (pageSize) {\n        this.pagerObj.setPageSize(pageSize);\n    };\n    /**\n     * The function used to update pageSettings model\n     *\n     * @param {NotifyArgs} e - specfies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });\n                    this.pagerObj.pageSize = e.oldProp.pageSize;\n                    gObj.pageSettings.pageSize = e.newProp.pageSize;\n                }\n                else if (e.currentPage) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                    this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ?\n                        this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;\n                }\n                this.isForceCancel = true;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.pageSettings.pageSize = this.pagerObj.pageSize;\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        var args = {\n            cancel: false, requestType: 'paging', previousPage: prevPage,\n            currentPage: e.currentPage, type: events.actionBegin\n        };\n        this.parent.notify(events.modelChanged, args);\n        if (args.cancel) {\n            e.cancel = true;\n        }\n        this.parent.requestTypeAction = 'paging';\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     *\n     * @param  {string} message - Defines the message to update.\n     * @returns {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function () {\n        this.isInitialLoad = true;\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.isReact = this.parent.isReact;\n        this.pagerObj.isVue = this.parent.isVue;\n        this.pagerObj.appendTo(this.element);\n        this.isInitialLoad = false;\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n            if (this.isReactTemplate()) {\n                this.pagerObj.updateTotalPages();\n                this.created();\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler,\n            created: this.created\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.addEventListener(events.created, this.handlers.created.bind(this));\n        }\n        this.evtHandlers = [{ event: events.initialLoad, handler: this.handlers.load },\n            { event: events.initialEnd, handler: this.handlers.end },\n            { event: events.dataReady, handler: this.handlers.ready },\n            { event: events.pageComplete, handler: this.handlers.complete },\n            { event: events.uiUpdate, handler: this.handlers.updateLayout },\n            { event: events.inBoundModelChanged, handler: this.handlers.inboundChange },\n            { event: events.keyPressed, handler: this.handlers.keyPress }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    Page.prototype.created = function () {\n        if (this.isInitialRender && this.isReactTemplate()) {\n            this.isInitialRender = false;\n            this.renderReactPagerTemplate();\n        }\n    };\n    Page.prototype.isReactTemplate = function () {\n        return this.parent.isReact && this.pagerObj.template && typeof (this.pagerObj.template) !== 'string';\n    };\n    Page.prototype.renderReactPagerTemplate = function () {\n        if (!this.isInitialRender && this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n            this.element.classList.add('e-pagertemplate');\n            this.pagerObj.compile(this.pagerObj.template);\n            var page = this.parent.pageSettings;\n            var data = {\n                currentPage: page.currentPage, pageSize: page.pageSize, pageCount: page.pageCount,\n                totalRecordsCount: page.totalRecordsCount, totalPages: this.pagerObj.totalPages\n            };\n            var tempId = this.parent.id + '_pagertemplate';\n            this.pagerObj.templateFn(data, this.parent, 'pagerTemplate', tempId, null, null, this.pagerObj.element);\n            this.parent.renderTemplates();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.removeEventListener(events.created, this.handlers.created);\n        }\n        this.parent.off(events.pagerRefresh, this.renderReactPagerTemplate);\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * To destroy the pager\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n        }\n        this.pagerObj.destroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue, closest } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../base/constant';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n *\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     *\n     * @returns {string} returns the gui\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    /* tslint:disable-next-line:max-func-body-length */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n                var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n                if (isReactCompiler) {\n                    column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, node);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                    appendChildren(node, element);\n                }\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell'\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                // render's the dropdownlist component if showFilterBarOperator sets to true\n                if (this.parent.filterSettings.showFilterBarOperator && this.parent.filterSettings.type === 'FilterBar'\n                    && !this.parent.isPrinting && isNullOrUndefined(column.filterTemplate)) {\n                    this.operatorIconRender(innerDIV, column, cell);\n                }\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     *\n     * @param {Element} node - specifies the node\n     * @param {string|Element} innerHtml - specifies the innerHTML\n     * @returns {Element} retruns the element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    FilterCellRenderer.prototype.operatorIconRender = function (innerDIV, column, cell) {\n        var gObj = this.parent;\n        var fbicon = this.parent.createElement('input', {\n            className: ' e-filterbaroperator e-icons e-icon-filter',\n            id: cell.column.uid\n        });\n        innerDIV.querySelector('span').appendChild(fbicon);\n        var operators = (column.filter && column.filter.operator) ? column.filter.operator : 'equal';\n        if (!isNullOrUndefined(gObj.filterModule.operators[column.field])) {\n            operators = gObj.filterModule.operators[column.field];\n        }\n        this.dropOptr = new DropDownList({\n            fields: { text: 'text', value: 'value' },\n            popupHeight: 'auto',\n            value: operators,\n            width: '0px',\n            enabled: column.allowFiltering,\n            popupWidth: 'auto',\n            enableRtl: this.parent.enableRtl,\n            change: this.internalEvent.bind(this),\n            beforeOpen: function () {\n                var operator = gObj.filterModule.customOperators;\n                this.dataSource = operator[gObj.getColumnByUid(this.element.id).type + 'Operator'];\n                for (var i = 0; i < this.dataSource.length; i++) {\n                    if (column.filter && column.filter.operator && isNullOrUndefined(gObj.filterModule.operators[column.field]) &&\n                        this.dataSource[i].value === column.filter.operator) {\n                        this.value = column.filter.operator;\n                    }\n                }\n            }\n        });\n        this.dropOptr.appendTo(fbicon);\n        var spanElmt = closest(this.dropOptr.element, 'span');\n        spanElmt.classList.add('e-filterbardropdown');\n        spanElmt.removeAttribute('tabindex');\n    };\n    FilterCellRenderer.prototype.internalEvent = function (e) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByUid(e.element.getAttribute('id'));\n        e.column = col;\n        gObj.filterModule.operators[col.field] = e.value;\n        gObj.notify(events.getFilterBarOperator, e);\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n *\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @param {Element} dlgConetntEle - specifies the content element\n     * @param {Element} target - specifies the target\n     * @param {Column} column - specifies the column\n     * @param {Dialog} dlgObj - specifies the dialog\n     * @param {Object[]} operator - specifies the operator list\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line max-len\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj, operator) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = !isNullOrUndefined(operator) ? operator :\n            (!isNullOrUndefined(this.parent.filterSettings.operators) && !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n                this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            cssClass: 'e-popup-flmenu',\n            enableRtl: this.parent.enableRtl,\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.renderResponsiveDropDownList = function (args) {\n        args.popup.element.style.width = '100%';\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n        if (this.parent.enableAdaptiveUI) {\n            this.renderResponsiveDropDownList(args);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            if (col.filter.operator) {\n                var optrLen = Object.keys(this.optrData).length;\n                for (var i = 0; i < optrLen; i++) {\n                    if (this.optrData[i].value === col.filter.operator) {\n                        selValue = this.optrData[i].text;\n                    }\n                }\n            }\n            else {\n                selValue = this.optrData[0].text;\n            }\n        }\n        return selValue;\n    };\n    /**\n     * @returns {string} returns the operator\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined, extend, getValue } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `string filterui` render string column.\n *\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = this.getAutoCompleteOptions(args);\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var foreignColumnQuery;\n        if (isForeignColumn) {\n            foreignColumnQuery = new Query();\n            foreignColumnQuery.params = this.parent.query.params;\n        }\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        var autoComplete = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: isForeignColumn ? foreignColumnQuery : this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return (getValue(_this.actObj.fields.value, mapObj));\n                    }).indexOf(getValue((_this.actObj.fields.value), obj)) === index;\n                });\n            }\n        }, args.column.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var query = this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, query);\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                autoComplete.dataSource = new DataManager(e);\n            });\n        }\n        return autoComplete;\n    };\n    StringFilterUI.prototype.write = function (args) {\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', this.parent.filterSettings.enableCaseSensitivity);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { extend, isUndefined } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n *\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.keyEventHandler = function (args) {\n        if (args.keyCode === 13 || args.keyCode === 9) {\n            var evt = document.createEvent('HTMLEvents');\n            evt.initEvent('change', false, true);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.dispatchEvent(evt);\n        }\n    };\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: typeof (args.column.format) === 'string' || isUndefined(args.column.format) ? args.column.format :\n                args.column.format.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl\n        }, args.column.filter.params));\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.element.addEventListener('keydown', this.keyEventHandler);\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n *\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList(extend({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        }, args.column.filter.params));\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n *\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this)\n            }, args.column.filter.params));\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this)\n            }, args.column.filter.params));\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { Browser, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * `filter menu` render boolean column.\n *\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.maxHeight = '350px';\n        this.isMenuCheck = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n        this.menuFilterBase = new CheckBoxFilterBase(parent);\n    }\n    FilterMenuRenderer.prototype.clearCustomFilter = function (col) {\n        this.clearBtnClick(col);\n    };\n    FilterMenuRenderer.prototype.applyCustomFilter = function (args) {\n        this.filterBtnClick(args.col);\n    };\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.options = args;\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function (target) {\n        if (!this.dlgObj) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            var argument = { cancel: false, column: this.col, target: target, element: elem };\n            this.parent.notify(events.filterMenuClose, argument);\n            if (argument.cancel) {\n                return;\n            }\n            this.isDialogOpen = false;\n            if (this.isMenuCheck) {\n                this.menuFilterBase.unWireEvents();\n                this.parent.off(events.cBoxFltrComplete, this.actionComplete);\n                this.isMenuCheck = false;\n            }\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n        this.parent.notify(events.filterDialogClose, {});\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: column.field, columnType: column.type\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('FilterMenuDialogARIA'));\n        if (this.parent.enableAdaptiveUI) {\n            var responsiveCnt = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlgDiv);\n        }\n        else {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.renderResponsiveDialog = function () {\n        var gObj = this.parent;\n        if (gObj.enableAdaptiveUI) {\n            this.dlgObj.position = { X: '', Y: '' };\n            this.dlgObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dlgObj.width = '100%';\n            this.dlgObj.isModal = false;\n            this.dlgObj.buttons = [{}];\n        }\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice && target) {\n            getFilterMenuPostion(target, this.dlgObj);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        if (this.parent.enableAdaptiveUI) {\n            this.dlgObj.element.style.left = '0px';\n            this.dlgObj.element.style.maxHeight = 'none';\n        }\n        else {\n            this.dlgObj.element.style.maxHeight = this.maxHeight;\n        }\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: column.field, columnType: column.type\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.isDialogOpen = true;\n        if (!this.isMenuCheck) {\n            this.parent.trigger(events.actionComplete, args);\n        }\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.parent.log('column_type_missing', { column: col });\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj, this.filterObj.menuOperator);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            var valueInString = 'value';\n            fltrData[column.field] = fltrData[valueInString] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.field];\n                fltrData[column.field] = undefined;\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                updateBlazorTemplate(tempID, 'FilterTemplate', column);\n                appendChildren(valueDiv, compElement);\n            }\n            if (this.isMenuCheck) {\n                this.menuFilterBase.cBox = this.dlgObj.element.querySelector('.e-checkboxlist.e-fields');\n                this.menuFilterBase.wireEvents();\n                this.parent.on(events.cBoxFltrComplete, this.actionComplete, this);\n                this.menuFilterBase.getAllData();\n            }\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.uid === column.uid) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        var flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                if (!isBlazor() && !isNullOrUndefined(element.children[0].ej2_instances)) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    fltrValue = (this.parent.isAngular ? element.children[0] :\n                        element.querySelector('input')).ej2_instances[0].value;\n                }\n                else {\n                    var eControl = element.querySelector('.e-control');\n                    fltrValue = col.type === 'boolean' ? eControl.checked :\n                        !isNullOrUndefined(eControl.ej2_instances) ?\n                            eControl.ej2_instances[0].value :\n                            eControl.value;\n                }\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                // eslint-disable-next-line\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.closeResponsiveDialog = function () {\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    /**\n     * @returns {FilterUI} returns the filterUI\n     * @hidden\n     */\n    FilterMenuRenderer.prototype.getFilterUIInfo = function () {\n        return { field: this.col.field, operator: this.flMuiObj.getFlOperator() };\n    };\n    FilterMenuRenderer.prototype.renderCheckBoxMenu = function () {\n        this.isMenuCheck = true;\n        this.menuFilterBase.updateModel(this.options);\n        this.menuFilterBase.getAndSetChkElem(this.options);\n        this.dlgObj.buttons = [{\n                click: this.menuFilterBase.btnClick.bind(this.menuFilterBase),\n                buttonModel: {\n                    content: this.menuFilterBase.getLocalizedLabel('FilterButton'),\n                    cssClass: 'e-primary', isPrimary: true\n                }\n            },\n            {\n                click: this.menuFilterBase.btnClick.bind(this.menuFilterBase),\n                buttonModel: { cssClass: 'e-flat', content: this.menuFilterBase.getLocalizedLabel('ClearButton') }\n            }];\n        this.menuFilterBase.dialogObj = this.dlgObj;\n        this.menuFilterBase.dlg = this.dlgObj.element;\n        this.menuFilterBase.dlg.classList.add('e-menucheckbox');\n        this.menuFilterBase.dlg.classList.remove('e-checkboxfilter');\n        this.maxHeight = '800px';\n        return this.menuFilterBase.sBox.innerHTML;\n    };\n    FilterMenuRenderer.prototype.actionComplete = function (args) {\n        if (this.isMenuCheck) {\n            this.parent.trigger(events.actionComplete, args);\n        }\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","import * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {FilterSettings} filterSettings - specifies the filtersettings\n     * @param {ServiceLocator} serviceLocator - specifies the ServiceLocator\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.parent = parent;\n        this.isresetFocus = true;\n        this.checkBoxBase = new CheckBoxFilterBase(parent);\n        this.addEventListener();\n    }\n    /**\n     * To destroy the check box filter.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.removeEventListener();\n        this.checkBoxBase.closeDialog();\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.checkBoxBase.openDialog(options);\n        this.parent.log('column_type_missing', { column: options.column });\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        this.destroy();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    CheckBoxFilter.prototype.closeResponsiveDialog = function () {\n        this.checkBoxBase.closeDialog();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    CheckBoxFilter.prototype.actionBegin = function (args) {\n        this.parent.trigger(events.actionBegin, args);\n    };\n    CheckBoxFilter.prototype.actionComplete = function (args) {\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.actionPrevent = function (args) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, args);\n            args.cancel = true;\n        }\n    };\n    CheckBoxFilter.prototype.clearCustomFilter = function (col) {\n        this.checkBoxBase.clearFilter(col);\n    };\n    CheckBoxFilter.prototype.applyCustomFilter = function () {\n        this.checkBoxBase.fltrBtnHandler();\n        this.checkBoxBase.closeDialog();\n    };\n    CheckBoxFilter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.cBoxFltrBegin, this.actionBegin, this);\n        this.parent.on(events.cBoxFltrComplete, this.actionComplete, this);\n        this.parent.on(events.fltrPrevent, this.actionPrevent, this);\n    };\n    CheckBoxFilter.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.cBoxFltrBegin, this.actionBegin);\n        this.parent.off(events.cBoxFltrComplete, this.actionComplete);\n        this.parent.off(events.fltrPrevent, this.actionPrevent);\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ExcelFilterBase } from '../common/excel-filter-base';\nimport { CheckBoxFilter } from './checkbox-filter';\nimport * as events from '../base/constant';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excelbox filtering module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {FilterSettings} filterSettings - specifies the Filtersettings\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @param {object} customFltrOperators - specifies the customFltrOperators\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.parent = parent;\n        _this.isresetFocus = true;\n        _this.excelFilterBase = new ExcelFilterBase(parent, customFltrOperators);\n        return _this;\n    }\n    /**\n     * To destroy the excel filter.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        this.excelFilterBase.closeDialog();\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        this.excelFilterBase.openDialog(options);\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        this.excelFilterBase.closeDialog();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ExcelFilter.prototype.clearCustomFilter = function (col) {\n        this.excelFilterBase.clearFilter(col);\n    };\n    ExcelFilter.prototype.closeResponsiveDialog = function (isCustomFilter) {\n        if (isCustomFilter) {\n            this.excelFilterBase.removeDialog();\n        }\n        else {\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.applyCustomFilter = function (args) {\n        if (!args.isCustomFilter) {\n            this.excelFilterBase.fltrBtnHandler();\n            this.excelFilterBase.closeDialog();\n        }\n        else {\n            this.excelFilterBase.filterBtnClick(args.col.field);\n        }\n    };\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        this.excelFilterBase.filterByColumn(fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue);\n    };\n    /**\n     * @returns {FilterUI} returns the filterUI\n     * @hidden\n     */\n    ExcelFilter.prototype.getFilterUIInfo = function () {\n        return this.excelFilterBase.getFilterUIInfo();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType, ResponsiveDialogAction } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {FilterSettings} filterSettings - specifies the filterSettings\n     * @param {ServiceLocator} serviceLocator - specifes the serviceLocator\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.filterByMethod = true;\n        this.refresh = true;\n        this.values = {};\n        this.operators = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        /** @hidden */\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        /** @hidden */\n        this.skipNumberInput = ['=', ' ', '!'];\n        this.skipStringInput = ['>', '<', '='];\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e) || (this.parent.getFrozenMode() === literals.leftRight &&\n            DataUtil.getObject('args.renderFrozenRightContent', e))) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                var row = this.generateRow();\n                row.data = this.values;\n                if (gObj.getFrozenMode() === 'Right') {\n                    var thead = gObj.getFrozenRightHeader().querySelector('thead');\n                    thead.appendChild(rowRenderer.element);\n                }\n                else {\n                    this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                }\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    rowdrag.className = 'e-dragheadercell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To show the responsive custom filter dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.showCustomFilter = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog(this.column);\n    };\n    /**\n     * To create the filter module.\n     *\n     * @param {Column} col - specifies the filtering column name\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.setFilterModel = function (col) {\n        var type = col.filter.type || this.parent.filterSettings.type;\n        this.filterModule = new this.type[type](this.parent, this.parent.filterSettings, this.serviceLocator, this.customOperators, this);\n    };\n    /**\n     * To destroy the filter bar.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.refreshing) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            var dropdownlist = [].slice.call(this.element.getElementsByClassName('e-filterbaroperator'));\n            for (var i = 0; i < dropdownlist.length; i++) {\n                dropdownlist[i].ej2_instances[0].destroy();\n            }\n        }\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.isFrozenGrid() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isFilter);\n        }\n    };\n    Filter.prototype.generateRow = function () {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        if (this.parent.getFrozenMode() === 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        this.filterObjIndex = this.getFilteredColsIndexByField(col);\n        this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n        var arrayVal = Array.isArray(this.value) ? this.value : [this.value];\n        for (var i = 0, len = arrayVal.length; i < len; i++) {\n            var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n            this.currentFilterObject = {\n                field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n                value: arrayVal[i], predicate: this.predicate,\n                matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n            };\n            var index = this.getFilteredColsIndexByField(col);\n            if (index > -1 && !Array.isArray(this.value)) {\n                this.filterSettings.columns[index] = this.currentFilterObject;\n            }\n            else {\n                this.filterSettings.columns.push(this.currentFilterObject);\n            }\n        }\n        // eslint-disable-next-line no-self-assign\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].uid === col.uid || (col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.refreshFilterValue = function () {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.columns.length &&\n            !this.parent.getCurrentViewRecords().length && this.parent.enablePersistence) {\n            this.initialEnd();\n            this.parent.removeEventListener(events.beforeDataBound, this.refreshFilterValue);\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        this.docClickHandler = this.clickHandler.bind(this);\n        EventHandler.add(document, 'click', this.docClickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n        this.parent.on(events.closeFilterDialog, this.clickHandler, this);\n        this.parent.addEventListener(events.beforeDataBound, this.refreshFilterValue.bind(this));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.docClickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n        this.parent.off(events.closeFilterDialog, this.clickHandler);\n    };\n    Filter.prototype.filterMenuClose = function () {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     *\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @returns {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var _this = this;\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.grabColumnByFieldFromAllCols(fieldName);\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            filterOperator = this.getOperatorName(fieldName);\n        }\n        if (!this.column) {\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.predicate = predicate ? predicate : Array.isArray(filterValue) ? 'or' : 'and';\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterCell && this.filterSettings.type === 'FilterBar') {\n            if (filterValue.length < 1 || (!this.filterByMethod &&\n                this.checkForSkipInput(this.column, filterValue))) {\n                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n                this.updateFilterMsg();\n                return;\n            }\n            if (filterCell.value !== filterValue) {\n                filterCell.value = filterValue;\n            }\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        var predObj = {\n            field: this.fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: this.operator,\n            value: this.value,\n            type: this.column.type\n        };\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === _this.fieldName);\n        });\n        if (filterColumn.length > 1 && !isNullOrUndefined(this.actualPredicate[this.fieldName])) {\n            this.actualPredicate[this.fieldName].push(predObj);\n        }\n        else {\n            this.actualPredicate[this.fieldName] = [predObj];\n        }\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    // To skip the second time request to server while applying initial filtering - EJ2-44361\n    Filter.prototype.skipUid = function (col) {\n        var flag = true;\n        var colLen = Object.keys((col));\n        for (var i = 0; i < colLen.length; i++) {\n            var key = Object.keys(col[colLen[i]]);\n            if (key.length === 1 && key[0] === 'uid') {\n                flag = false;\n            }\n        }\n        return flag;\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    // eslint-disable-next-line no-case-declarations\n                    var col = 'columns';\n                    // eslint-disable-next-line no-case-declarations\n                    var args = {\n                        currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                            this.column.field : undefined, action: 'filter', columns: this.filterSettings.columns,\n                        requestType: 'filtering', type: events.actionBegin, cancel: false\n                    };\n                    if (this.contentRefresh && this.skipUid(e.properties[col])) {\n                        this.parent.notify(events.modelChanged, args);\n                        if (args.cancel) {\n                            if (isNullOrUndefined(this.prevFilterObject)) {\n                                this.filterSettings.columns.splice(this.filterSettings.columns.length - 1, 1);\n                            }\n                            else {\n                                this.filterSettings.columns[this.filterObjIndex] = this.prevFilterObject;\n                            }\n                            return;\n                        }\n                        this.addFilteredClass(args.currentFilteringColumn);\n                        this.updateFilterIcon();\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'showFilterBarOperator':\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[i].uid);\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (this.cellText[this.filterSettings.columns[i].field] !== ''\n                        && !isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.updateFilterIcon = function () {\n        if (this.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrIconElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n            for (var i = 0, len = fltrIconElement.length; i < len; i++) {\n                fltrIconElement[i].removeAttribute('aria-filtered');\n                fltrIconElement[i].classList.remove('e-filtered');\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     *\n     * @param {string[]} fields - returns the fields\n     * @returns {void}\n     */\n    Filter.prototype.clearFiltering = function (fields) {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (!isNullOrUndefined(fields)) {\n            this.refresh = false;\n            fields.forEach(function (field) { _this.removeFilteredColsByField(field, false); });\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n            this.parent.renderModule.refresh();\n            this.refresh = true;\n            return;\n        }\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            cols[i].uid = cols[i].uid || this.parent.getColumnByField(cols[i].field).uid;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[i]).field, false);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.setFilterModel(col);\n        this.filterModule.openDialog(this.createOptions(col, target, left, top));\n    };\n    /**\n     * Create filter dialog options\n     *\n     * @param  {Column} col - Filtering column detail.\n     * @param  {Element} target -  Filter dialog target.\n     * @param  {number} left -  Filter dialog left position.\n     * @param  {number} top -  Filter dialog top position.\n     * @returns {Object} returns the created dialog options\n     * @hidden\n     */\n    Filter.prototype.createOptions = function (col, target, left, top) {\n        var gObj = this.parent;\n        var dataSource = col.filter.dataSource || gObj.dataSource && 'result' in gObj.dataSource ? gObj.dataSource :\n            gObj.getDataModule().dataManager;\n        var type = col.filter.type || this.parent.filterSettings.type;\n        var options = {\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format, height: 800, columns: gObj.getColumns(),\n            filteredColumns: gObj.filterSettings.columns, target: target, dataManager: gObj.getDataModule().dataManager,\n            formatFn: col.getFormatter(), ignoreAccent: gObj.filterSettings.ignoreAccent,\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: gObj.localeObj,\n            isRemote: gObj.getDataModule().isRemote(), allowCaseSensitive: this.filterSettings.enableCaseSensitivity,\n            isResponsiveFilter: this.parent.enableAdaptiveUI,\n            operator: this.actualPredicate[col.field] && type === 'Menu' ? this.actualPredicate[col.field][0].operator : 'equal'\n        };\n        return options;\n    };\n    /**\n     * Removes filtered column by field name.\n     *\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar - Specifies whether the filter bar value needs to be cleared.\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        var _loop_1 = function (i, len) {\n            cols[i].uid = cols[i].uid || this_1.parent.getColumnByField(cols[i].field).uid;\n            var len_1 = cols.length;\n            var column = this_1.parent.grabColumnByUidFromAllCols(filteredColsUid[i]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                var currentPred = this_1.filterSettings.columns.filter(function (e) {\n                    return e.uid === column.uid;\n                })[0];\n                if (this_1.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this_1.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this_1.values[field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[len_1].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this_1.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this_1.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this_1.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this_1.isRemove = true;\n                if (this_1.actualPredicate[field]) {\n                    delete this_1.actualPredicate[field];\n                }\n                if (this_1.values[field]) {\n                    delete this_1.values[field];\n                }\n                if (this_1.refresh) {\n                    this_1.parent.notify(events.modelChanged, {\n                        requestType: 'filtering', type: events.actionBegin, currentFilterObject: currentPred,\n                        currentFilterColumn: column, action: 'clearFilter'\n                    });\n                }\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            var state_1 = _loop_1(i, len);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandlerImmediate = function (e) {\n        if (e.keyCode !== 13) {\n            this.keyUpHandler(e);\n        }\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if (e.action === 'altDownArrow' && this.parent.filterSettings.showFilterBarOperator) {\n                var dropDownListInput = closest(target, 'span').querySelector('.e-filterbaroperator');\n                dropDownListInput.ej2_instances[0].showPopup();\n                dropDownListInput.focus();\n            }\n            if ((this.filterSettings.mode === 'Immediate' || (e.keyCode === 13 &&\n                !e.target.classList.contains('e-filterbaroperator')))\n                && e.keyCode !== 9 && !this.column.filterTemplate) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n        if (e.action === 'altDownArrow' && this.filterSettings.type !== 'FilterBar') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openMenuByField(column.field);\n                this.parent.focusModule.clearIndicator();\n            }\n        }\n        if (e.action === 'escape' && this.filterSettings.type === 'Menu' && this.filterModule) {\n            this.filterModule.closeDialog();\n            gObj.notify(events.restoreFocus, {});\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var column = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.grabColumnByUidFromAllCols(columns[index].uid) || gObj.grabColumnByFieldFromAllCols(columns[index].field);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging\n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        if (column.type === 'number') {\n            if (DataUtil.operatorSymbols[value] || this.skipNumberInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (this.skipStringInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.isFrozenGrid()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByMethod = false;\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.filterSettings.enableCaseSensitivity, this.ignoreAccent);\n        this.filterByMethod = true;\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    if (this.column.filter.operator) {\n                        this.operator = this.column.filter.operator;\n                    }\n                    else {\n                        this.operator = this.filterOperators.startsWith;\n                    }\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        // eslint-disable-next-line no-prototype-builtins\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function () {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.openMenuByField = function (field) {\n        var gObj = this.parent;\n        if (gObj.enableAdaptiveUI) {\n            this.showCustomFilter(false);\n            return;\n        }\n        var column = gObj.getColumnByField(field);\n        var header = gObj.getColumnHeaderByField(field);\n        var target = header.querySelector('.e-filtermenudiv');\n        if (!target) {\n            return;\n        }\n        var gClient = gObj.element.getBoundingClientRect();\n        var fClient = target.getBoundingClientRect();\n        this.filterDialogOpen(column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n    };\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.openMenuByField(col.field);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            if (parentsUntil(e.target, 'e-filterbarcell') &&\n                e.target.classList.contains('e-input-group-icon')) {\n                closest(e.target, 'div').querySelector('.e-filterbaroperator').focus();\n            }\n            if (e.target.classList.contains('e-list-item')) {\n                var inputId = document.querySelector('.e-popup-open').getAttribute('id').replace('_popup', '');\n                if (inputId.indexOf('grid-column') !== -1) {\n                    closest(document.getElementById(inputId), 'div').querySelector('.e-filtertext').focus();\n                }\n            }\n        }\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            var dialog = this.parent.enableAdaptiveUI ? parentsUntil(this.parent.element, 'e-dialog') :\n                document.querySelector('.e-dialog');\n            var hasDialog = false;\n            var popupEle = parentsUntil(target, 'e-popup');\n            var hasDialogClosed = document.querySelector('.e-filter-popup');\n            if (dialog && popupEle) {\n                hasDialog = dialog.id === popupEle.id;\n            }\n            if ((hasDialogClosed && (parentsUntil(target, 'e-excel-ascending') ||\n                parentsUntil(target, 'e-excel-descending')))) {\n                this.filterModule.closeDialog(target);\n            }\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule && (!parentsUntil(target, 'e-popup-wrapper')\n                && (!closest(target, '.e-filter-item.e-menu-item'))) && !datepickerEle) {\n                if ((hasDialog && (!parentsUntil(target, 'e-filter-popup'))\n                    && (!parentsUntil(target, 'e-popup-flmenu'))) || (!popupEle && hasDialogClosed)) {\n                    this.filterModule.isresetFocus = parentsUntil(target, 'e-grid') &&\n                        parentsUntil(target, 'e-grid').id === this.parent.element.id;\n                    this.filterModule.closeDialog(target);\n                }\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            args.requestType = 'filtering';\n            this.parent.renderModule.refresh(args); //hot-fix onpropertychanged not working for object { array }\n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent, cols[i].uid);\n        }\n    };\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        if (this.actualPredicate[fieldName]) {\n            this.actualPredicate[fieldName].push(obj);\n        }\n        else {\n            this.actualPredicate[fieldName] = [obj];\n        }\n        var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        if (this.parent.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else if (this.parent.getColumnByField(fieldName)) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    /**\n     * @hidden\n     * @returns {FilterUI} returns the FilterUI\n     */\n    Filter.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {string} returns the operator name\n     * @hidden\n     */\n    Filter.prototype.getOperatorName = function (field) {\n        return document.getElementById(this.parent.getColumnByField(field).uid).ej2_instances[0].value;\n    };\n    /**\n     * Renders checkbox items in Menu filter dialog.\n     *\n     * @returns {void}\n     */\n    Filter.prototype.renderCheckboxOnFilterMenu = function () {\n        return this.filterModule.renderCheckBoxMenu();\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, gridActionHandler, Global } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n *\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     *\n     * @param  {string|string[]} fName - Defines the field name.\n     * @returns {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n        if (this.parent.resizeSettings.mode === 'Auto') {\n            this.widthService.setWidthToTable();\n        }\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = literals.gridContent;\n        var footerDivTag = literals.gridFooter;\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var footerTextClone;\n        var columnIndexByField = this.parent.getColumnIndexByField(fName);\n        var left = gObj.getFrozenColumns() || gObj.getFrozenLeftColumnsCount();\n        var movable = gObj.getMovableColumnsCount();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (gObj.isFrozenGrid()) {\n            var col = gObj.getColumnByField(fName);\n            if (col.getFreezeTableName() === literals.frozenLeft) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                if (footerTable) {\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                }\n            }\n            else if (col.getFreezeTableName() === 'movable') {\n                headerTable = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).children[0];\n                contentTable = gObj.getContent().querySelector('.' + literals.movableContent).children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - left) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - left) + 1) + \")\");\n                }\n            }\n            else if (col.getFreezeTableName() === literals.frozenRight) {\n                headerTable = gObj.getHeaderContent().querySelector('.e-frozen-right-header').children[0];\n                contentTable = gObj.getContent().querySelector('.e-frozen-right-content').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - (left + movable)) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - (left + movable)) + 1) + \")\");\n                }\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            if (footerTable) {\n                footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            }\n        }\n        var indentWidthClone = [].slice.call(headerTable.querySelector('tr').getElementsByClassName('e-grouptopleftcell'));\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[i] = footerTextClone[i].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var wFooter = null;\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[columnIndexByField];\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n        if (parseInt(width, 10) > colMaxWidth) {\n            columnbyindex.width = colMaxWidth;\n        }\n        this.widthService.setColumnWidth(gObj.getColumns()[columnIndexByField]);\n        var result = gObj.getColumns().some(function (x) { return x.width === null\n            || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            var element = gObj.getColumns();\n            for (var i = 0; i < element.length; i++) {\n                if (element[i].visible) {\n                    tWidth = tWidth + parseFloat(element[i].width);\n                }\n            }\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.isFrozenGrid()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            if (this.parent.resizeSettings.mode === 'Auto') {\n                calcTableWidth = '100%';\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        for (var i = 0; i < fName.length; i++) {\n            var fieldName = fName[i];\n            var columnIndex = this.parent.getColumnIndexByField(fieldName);\n            var column = this.parent.getColumns()[columnIndex];\n            if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n                this.resizeColumn(fieldName, columnIndex);\n            }\n        }\n    };\n    /**\n     * To create table for autofit\n     *\n     * @param {Element} table - specifies the table\n     * @param {Element[]} text - specifies the text\n     * @param {string} tag - specifies the tag name\n     * @returns {number} returns the number\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        for (var i = 0; i < text.length; i++) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(text[i]);\n            myTable.appendChild(tr);\n        }\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n        this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n        this.parent.off(events.refreshHandlers, this.refreshHeight);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        var element = this.getResizeHandlers();\n        for (var i = 0; i < element.length; i++) {\n            if (element[i].parentElement.offsetHeight > 0) {\n                element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n            }\n        }\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.isFrozenGrid() ?\n            [].slice.call(this.parent.getHeaderContent().getElementsByClassName(resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        var element = [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.suppress));\n        for (var i = 0; i < element.length; i++) {\n            element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.touchResizeStart = function (e) {\n        if (!Global.timer) {\n            Global.timer = setTimeout(function () {\n                Global.timer = null;\n            }, 300);\n            return this.resizeStart(e);\n        }\n        else {\n            clearTimeout(Global.timer);\n            Global.timer = null;\n            this.callAutoFit(e);\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    if (this.parent.allowGrouping) {\n                        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                            this.widthService.setColumnWidth(new Column({ width: '30px' }), i);\n                        }\n                    }\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getMovableContentTbody();\n                    var ftbody = this.parent.getFrozenLeftContentTbody();\n                    var frtbody = this.parent.getFrozenRightContentTbody();\n                    var mtr = [].slice.call(mtbody.querySelectorAll('tr'));\n                    var ftr = [].slice.call(ftbody.querySelectorAll('tr'));\n                    var frTr = [];\n                    if (this.parent.getFrozenMode() === literals.leftRight && frtbody) {\n                        frTr = [].slice.call(frtbody.querySelectorAll('tr'));\n                    }\n                    var _loop_1 = function (i) {\n                        gridActionHandler(this_1.parent, function (tableName, row) {\n                            if (_this.parent.rowHeight) {\n                                row[i].style.height = _this.parent.rowHeight + 'px';\n                            }\n                            else {\n                                row[i].style.removeProperty('height');\n                            }\n                        }, [ftr, mtr, frTr]);\n                    };\n                    var this_1 = this;\n                    for (var i = 0; i < mtr.length; i++) {\n                        _loop_1(i);\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.column.getFreezeTableName() === literals.frozenRight) {\n                    if (this.parent.enableRtl) {\n                        this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                            - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                    }\n                    else {\n                        this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString())\n                            - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                    }\n                }\n                else if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { e: e, column: this.column };\n                this.parent.trigger(events.resizeStart, args, function (args) {\n                    if (args.cancel || _this.parent.isEdit) {\n                        _this.cancelResizeAction();\n                        return;\n                    }\n                    EventHandler.add(document, Browser.touchEndEvent, _this.resizeEnd, _this);\n                    EventHandler.add(_this.parent.element, Browser.touchMoveEvent, _this.resizing, _this);\n                    _this.updateCursor('add');\n                });\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.updateResizeEleHeight = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = this.element.parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        if (this.column.getFreezeTableName() === literals.frozenRight) {\n            mousemove = this.parent.enableRtl ? (pageX - this.pageX) : (this.pageX - pageX);\n        }\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if (this.column.getFreezeTableName() === literals.frozenRight) {\n            if ((this.parent.enableRtl && this.minMove >= pageX) || (!this.parent.enableRtl && this.minMove <= pageX)) {\n                width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n                this.pageX = pageX = this.minMove;\n            }\n        }\n        if ((this.column.getFreezeTableName() !== literals.frozenRight\n            && ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)))\n            || (this.column.getFreezeTableName() === literals.frozenRight && ((this.parent.enableRtl && this.minMove >= pageX)\n                || (!this.parent.enableRtl && this.minMove <= pageX)))) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            var totalWidth = 0;\n            for (var i = 0; i < columns.length; i++) {\n                totalWidth += parseFloat(columns[i].width.toString());\n            }\n            var colData = this.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = { e: e, column: this.column };\n        var content = this.parent.getContent().querySelector('.' + literals.content);\n        var cTable = content.querySelector('.' + literals.movableContent) ? content.querySelector('.' + literals.movableContent) : content;\n        if (cTable.scrollHeight > cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    this.getStackedWidth(col, width);\n                }\n                else {\n                    width += col.width;\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var isFrozen = this.parent.isFrozenGrid();\n        var height = isFrozen ? this.parent.getContent().querySelector('.' + literals.content).offsetHeight\n            : this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (isFrozen) {\n            if (parentsUntil(rect, literals.movableHeader)) {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelectorAll('tr'));\n            }\n            else if (right && parentsUntil(rect, 'e-frozen-right-header')) {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelectorAll('tr'));\n            }\n            else {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-left-header').querySelectorAll('tr'));\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        if (parentsUntil(rect, 'e-frozen-right-header')) {\n            pos.left += (this.parent.enableRtl ? rect.offsetWidth - 2 : 0 - 1);\n        }\n        else {\n            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        }\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n        if (this.parent.enableVirtualization) {\n            this.helper.classList.add('e-virtual-rhandler');\n        }\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left;\n        if (parentsUntil(rect, 'e-frozen-right-header')) {\n            left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? rect.offsetWidth - 2 : 0 - 1));\n        }\n        else {\n            left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        }\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.isFrozenGrid()) {\n            var table = closest(rect, '.' + literals.table);\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        var _this = this;\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(function () {\n                    _this.tapped = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return ((srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization)\n            || (this.parent.isFrozenGrid()\n                && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                    === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        // eslint-disable-next-line no-self-assign\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        if (!this.parent.getFrozenColumns() && this.parent.isFrozenGrid()) {\n            return this.parent.getColumns();\n        }\n        else {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                columnModel.push(cols[i]);\n                if (cols[i].columns) {\n                    subCols = subCols.concat(cols[i].columns);\n                }\n            }\n            if (subCols.length) {\n                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n            }\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.columns.filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                this.parent.notify(events.setReorderDestinationElement, { ele: destElem });\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    this.moveColumns(newIndex, columns[oldIdx]);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var isFrozen = !gObj.getFrozenColumns() && gObj.isFrozenGrid();\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : isFrozen ? this.parent.getColumns() : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.isFrozenGrid() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        var args = { column: column, destIndex: destIndex, columns: cols, parent: parent, cancel: false };\n        gObj.notify(events.refreshFrozenColumns, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        if (preventRefresh !== false) {\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'reorder', fromIndex: destIndex, toIndex: srcIdx, toColumnUid: column.uid\n            });\n        }\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var cols = !this.parent.getFrozenColumns() && this.parent.isFrozenGrid() ? this.parent.getColumns() :\n            this.parent.columns;\n        var headers = this.getHeaderCells();\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.' + literals.movableHeader).getElementsByClassName('e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === fromFName; })[0]\n            : this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === toFName; })[0]\n            : this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = toColumn;\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, fColumn, true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, true);\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        this.moveTargetColumn(this.parent.getColumnByField(fieldName), toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     *\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        if (typeof fromFName === 'string') {\n            this.reorderSingleColumn(fromFName, toFName);\n            this.fromCol = fromFName;\n        }\n        else {\n            this.reorderMultipleColumns(fromFName, toFName);\n            this.fromCol = fromFName[0];\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     *\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        this.moveTargetColumn(this.parent.getColumnByIndex(fromIndex), toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     *\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (typeof fieldName === 'string') {\n            this.reorderSingleColumnByTarget(fieldName, toIndex);\n        }\n        else {\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function (e) {\n        if (e && e.args.isXaxis) {\n            this.setDisplay('none');\n        }\n        var header = this.parent.element.querySelector('.' + literals.headerContent);\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specified the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n        var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n        if (target) {\n            this.parent.focusModule.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * To destroy the reorder\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlLeftArrow':\n            case 'ctrlRightArrow':\n                // eslint-disable-next-line no-case-declarations\n                var element = gObj.focusModule.currentInfo.element;\n                if (element && element.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                    var visibleCols = gObj.getVisibleColumns();\n                    var index = visibleCols.indexOf(column);\n                    var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n                    if (toCol && toCol.field && column.field) {\n                        this.reorderColumns(column.field, toCol.field);\n                    }\n                }\n                break;\n        }\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n        removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell\n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseRight = cliRect.right;\n        if (this.parent.isFrozenGrid()) {\n            this.updateFrozenScrollPosition(x, cliRect);\n        }\n        else {\n            var cliRectBaseLeft = cliRect.left;\n            var scrollElem_1 = this.parent.getContent().firstElementChild;\n            if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, true); }, 50);\n            }\n            else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, false); }, 50);\n            }\n        }\n    };\n    Reorder.prototype.updateFrozenScrollPosition = function (x, cliRect) {\n        var _this = this;\n        var scrollElem = this.parent.getContent().querySelector('.' + literals.movableContent);\n        var mhdrCliRect = this.parent.element.querySelector('.' + literals.movableHeader).getBoundingClientRect();\n        var left = this.parent.getFrozenLeftCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var cliRectBaseRight = right ? mhdrCliRect.right : cliRect.right;\n        var cliRectBaseLeft = left ? mhdrCliRect.left : cliRect.left;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        if (this.parent.isFrozenGrid() && target.classList.contains('e-headercell')) {\n            var left = this.parent.getFrozenLeftCount();\n            var right = this.parent.getFrozenRightColumnsCount();\n            var dropEle = this.element.querySelector('.e-headercelldiv');\n            var dropCol = dropEle ? this.parent.getColumnByUid(dropEle.getAttribute('data-uid')) : null;\n            var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n            var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n            var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n            if (col) {\n                if (left && !right && this.parent.getNormalizedColumnIndex(col.uid) >= left\n                    && ((isLeft && Math.round(cliRect.left) < fhdrWidth) || (!isLeft && mhdrRight < cliRect.right))) {\n                    return;\n                }\n                if (!left && right && dropCol && dropCol.getFreezeTableName() !== col.getFreezeTableName()\n                    && (!isLeft && Math.round(cliRect.right) < fhdrWidth)) {\n                    return;\n                }\n            }\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 7 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        this.x = getPosition(e.event).x + content.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} return the module name\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition, addRemoveActiveClasses, isActionPrevent } from '../base/util';\nimport { setRowsInTbody, resetRowIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport { Scroll } from '../actions/scroll';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * Reorder module is used to handle row reordering.\n *\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        this.selectedRows = [];\n        this.isOverflowBorder = true;\n        this.selectedRowColls = [];\n        this.isRefresh = true;\n        this.isReplaceDragEle = true;\n        this.istargetGrid = false;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement(literals.tbody);\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (gObj.rowDropSettings.targetID && ((!target.classList.contains('e-selectionbackground')\n                    && gObj.selectionSettings.type !== 'Single') || !parentsUntil(target, 'e-rowcell'))) ||\n                (!gObj.rowDropSettings.targetID && !parentsUntil(target, 'e-rowdragdrop'))) {\n                return false;\n            }\n            if (gObj.rowDropSettings.targetID &&\n                gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                gObj.selectRow(parseInt(_this.draggable.currentStateTarget.parentElement.getAttribute(literals.ariaRowIndex), 10));\n            }\n            _this.startedRow = closestElement(target, 'tr').cloneNode(true);\n            var frzCols = _this.parent.isFrozenGrid();\n            if (frzCols) {\n                var rowIndex = parseInt(closestElement(target, 'tr').getAttribute(literals.ariaRowIndex), 10);\n                _this.startedRow.innerHTML = '';\n                _this.startedRow.innerHTML += gObj.getRowByIndex(rowIndex).innerHTML;\n                _this.startedRow.innerHTML += gObj.getMovableRowByIndex(rowIndex).innerHTML;\n                if (gObj.getFrozenMode() === literals.leftRight) {\n                    _this.startedRow.innerHTML += gObj.getFrozenRightRowByIndex(rowIndex).innerHTML;\n                }\n            }\n            _this.processArgs(target);\n            var args = {\n                selectedRow: _this.rows, dragelement: target,\n                cloneElement: visualElement, cancel: false, data: _this.rowData\n            };\n            var selectedRows = gObj.getSelectedRows();\n            gObj.trigger(events.rowDragStartHelper, args);\n            var cancel = 'cancel';\n            if (args[cancel]) {\n                return false;\n            }\n            removeElement(_this.startedRow, '.e-indentcell');\n            removeElement(_this.startedRow, '.e-detailrowcollapse');\n            removeElement(_this.startedRow, '.e-detailrowexpand');\n            _this.removeCell(_this.startedRow, literals.gridChkBox);\n            var exp = new RegExp('e-active', 'g'); //high contrast issue\n            _this.startedRow.innerHTML = _this.startedRow.innerHTML.replace(exp, '');\n            tbody.appendChild(_this.startedRow);\n            if (gObj.getSelectedRowIndexes().length > 1 && _this.startedRow.hasAttribute('aria-selected')) {\n                var index = gObj.getFrozenMode() === literals.leftRight ? 3 : 2;\n                var dropCountEle = _this.parent.createElement('span', {\n                    className: 'e-dropitemscount', innerHTML: frzCols ? '' + selectedRows.length / index : '' + selectedRows.length\n                });\n                visualElement.appendChild(dropCountEle);\n            }\n            var ele = closestElement(target, 'tr').querySelector('.e-icon-rowdragicon');\n            if (ele) {\n                ele.classList.add('e-dragstartrow');\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            var target = e.target;\n            var spanCssEle = _this.parent.element.querySelector('.e-dropitemscount');\n            if (_this.parent.getSelectedRecords().length > 1 && spanCssEle) {\n                spanCssEle.style.left = _this.parent.element.querySelector('.e-cloneproperties table')\n                    .offsetWidth - 5 + 'px';\n            }\n            _this.processArgs(target);\n            gObj.trigger(events.rowDragStart, {\n                rows: _this.rows, target: e.target,\n                draggableType: 'rows', fromIndex: parseInt(_this.rows[0].getAttribute(literals.ariaRowIndex), 10),\n                data: (Object.keys(_this.rowData[0]).length > 0) ? _this.rowData : _this.currentViewData()\n            });\n            _this.dragStartData = _this.rowData;\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances &&\n                dropElem.ej2_instances[0].getModuleName() === 'grid') {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            _this.isDropGrid = _this.parent;\n            _this.istargetGrid = false;\n            if (_this.parent.rowDropSettings.targetID) {\n                var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n                _this.isDropGrid = dropElement.ej2_instances[0];\n                if (parentsUntil(e.target, 'e-grid')) {\n                    _this.istargetGrid = _this.parent.rowDropSettings.targetID === parentsUntil(e.target, 'e-grid').id;\n                }\n            }\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur', 'e-movecur']);\n            _this.isOverflowBorder = true;\n            _this.hoverState = gObj.enableHover;\n            var trElement = parentsUntil(target, 'e-grid') ? closestElement(e.target, 'tr') : null;\n            gObj.enableHover = false;\n            if (!e.target) {\n                return;\n            }\n            _this.processArgs(target);\n            var args = {\n                rows: _this.rows, target: target, draggableType: 'rows',\n                data: _this.rowData, originalEvent: e, cancel: false\n            };\n            gObj.trigger(events.rowDrag, args);\n            _this.stopTimer();\n            if (args.cancel) {\n                return;\n            }\n            gObj.element.classList.add('e-rowdrag');\n            _this.dragTarget = trElement && parentsUntil(target, 'e-grid').id === cloneElement.parentElement.id ?\n                parseInt(trElement.getAttribute(literals.ariaRowIndex), 10) : parseInt(_this.startedRow.getAttribute(literals.ariaRowIndex), 10);\n            if (gObj.rowDropSettings.targetID) {\n                if (!parentsUntil(target, 'e-grid') ||\n                    parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                }\n            }\n            else {\n                var elem = parentsUntil(target, 'e-grid');\n                if (elem && elem.id === cloneElement.parentElement.id) {\n                    classList(cloneElement, ['e-movecur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-movecur']);\n                }\n            }\n            if (parentsUntil(_this.isDropGrid.element, 'e-grid')) {\n                if ((!_this.isDropGrid.groupSettings.columns.length || e.target.classList.contains('e-selectionbackground')) &&\n                    !_this.isDropGrid.element.querySelector('.e-emptyrow')) {\n                    if (parentsUntil(target, 'e-grid') && parentsUntil(target, 'e-grid').id === _this.isDropGrid.element.id) {\n                        _this.updateScrollPostion(e.event);\n                    }\n                    if (((_this.isOverflowBorder || _this.parent.frozenRows > _this.dragTarget) &&\n                        (parseInt(_this.startedRow.getAttribute(literals.ariaRowIndex), 10) !== _this.dragTarget || _this.istargetGrid))\n                        || (_this.istargetGrid && trElement && _this.isDropGrid.getRowByIndex(_this.isDropGrid.getCurrentViewRecords().length - 1).\n                            getAttribute('data-uid') === trElement.getAttribute('data-uid'))) {\n                        _this.moveDragRows(e, _this.startedRow, trElement);\n                    }\n                    else {\n                        var islastRowIndex = void 0;\n                        if (_this.parent.enableVirtualization) {\n                            islastRowIndex = trElement && parseInt(trElement.getAttribute(literals.ariaRowIndex), 10) ===\n                                _this.parent.renderModule.data.dataManager.dataSource.json.length - 1;\n                        }\n                        else {\n                            var lastRowUid = _this.parent.getRowByIndex(_this.parent.getCurrentViewRecords().length - 1).\n                                getAttribute('data-uid');\n                            islastRowIndex = trElement && lastRowUid === trElement.getAttribute('data-uid') && lastRowUid !==\n                                _this.startedRow.getAttribute('data-uid');\n                        }\n                        if (islastRowIndex && !_this.parent.rowDropSettings.targetID) {\n                            var bottomborder = _this.parent.createElement('div', { className: 'e-lastrow-dragborder' });\n                            var gridcontentEle = _this.parent.getContent();\n                            bottomborder.style.width = _this.parent.element.offsetWidth - _this.getScrollWidth() + 'px';\n                            if (!gridcontentEle.getElementsByClassName('e-lastrow-dragborder').length) {\n                                gridcontentEle.classList.add('e-grid-relative');\n                                gridcontentEle.appendChild(bottomborder);\n                                bottomborder.style.bottom = _this.getScrollWidth() + 'px';\n                            }\n                        }\n                        _this.removeBorder(trElement);\n                    }\n                }\n                if (target && target.classList.contains(literals.content)\n                    && !_this.isDropGrid.element.querySelector('.e-emptyrow') && _this.istargetGrid) {\n                    _this.removeBorder(trElement);\n                    var rowIndex = _this.isDropGrid.getCurrentViewRecords().length - 1;\n                    var selector = '.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse';\n                    var rowElement = [];\n                    rowElement = [].slice.call(_this.isDropGrid.getRowByIndex(rowIndex).querySelectorAll(selector));\n                    if (_this.isDropGrid.isFrozenGrid()) {\n                        rowElement = _this.borderRowElement(rowIndex, selector);\n                    }\n                    if (rowElement.length > 0) {\n                        addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n                    }\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            if (isActionPrevent(_this.parent)) {\n                _this.parent.notify(events.preventBatch, {\n                    instance: _this, handler: _this.processDragStop, arg1: e\n                });\n            }\n            else {\n                _this.processDragStop(e);\n            }\n        };\n        this.processDragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var targetEle = _this.getElementFromPosition(e.helper, e.event);\n            var target = targetEle && !targetEle.classList.contains('e-dlg-overlay') ?\n                targetEle : e.target;\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElement && dropElement.ej2_instances &&\n                dropElement.ej2_instances[0].getModuleName() === 'grid') {\n                dropElement.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            if (parentsUntil(_this.isDropGrid.element, 'e-grid')) {\n                _this.stopTimer();\n                _this.isDropGrid.enableHover = _this.hoverState;\n                _this.isDropGrid.getContent().classList.remove('e-grid-relative');\n                _this.removeBorder(targetEle);\n                var stRow = _this.isDropGrid.element.querySelector('.e-dragstartrow');\n                if (stRow) {\n                    stRow.classList.remove('e-dragstartrow');\n                }\n            }\n            _this.processArgs(target);\n            if (_this.parent.enableVirtualization && isNullOrUndefined(_this.rows[0])) {\n                _this.dragTarget = null;\n                remove(e.helper);\n                return;\n            }\n            var args = {\n                target: target, draggableType: 'rows',\n                cancel: false,\n                fromIndex: parseInt(_this.rows[0].getAttribute(literals.ariaRowIndex), 10),\n                dropIndex: _this.dragTarget, rows: _this.rows,\n                data: (Object.keys(_this.dragStartData[0]).length > 0) ? _this.dragStartData : _this.currentViewData()\n            };\n            gObj.trigger(events.rowDrop, args, function () {\n                if (!(parentsUntil(target, literals.row) || parentsUntil(target, 'e-emptyrow')\n                    || parentsUntil(target, literals.gridContent)) || args.cancel) {\n                    _this.dragTarget = null;\n                    remove(e.helper);\n                    return;\n                }\n                _this.isRefresh = false;\n                var selectedIndexes = _this.parent.getSelectedRowIndexes();\n                if (gObj.isRowDragable()) {\n                    if (!_this.parent.rowDropSettings.targetID &&\n                        _this.startedRow.querySelector('td.e-selectionbackground') && selectedIndexes.length > 1 &&\n                        selectedIndexes.length !== _this.parent.getCurrentViewRecords().length) {\n                        _this.reorderRows(selectedIndexes, args.dropIndex);\n                    }\n                    else {\n                        _this.reorderRows([parseInt(_this.startedRow.getAttribute(literals.ariaRowIndex), 10)], _this.dragTarget);\n                    }\n                    _this.dragTarget = null;\n                    if (!gObj.rowDropSettings.targetID) {\n                        remove(e.helper);\n                        if (gObj.frozenRows && gObj.enableVirtualization) {\n                            gObj.refresh();\n                        }\n                        else {\n                            _this.rowOrder(args);\n                        }\n                    }\n                }\n                _this.isRefresh = true;\n            });\n        };\n        this.removeCell = function (targetRow, className) {\n            return [].slice.call(targetRow.querySelectorAll('td')).filter(function (cell) {\n                if (cell.classList.contains(className)) {\n                    targetRow.deleteCell(cell.cellIndex);\n                }\n            });\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.onDataBoundFn = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.refreshRow = function (args, tbody, mtbody, frTbody, target, mTarget, frTarget) {\n        var gObj = this.parent;\n        var frzCols = gObj.isFrozenGrid();\n        var isLeftRight = gObj.getFrozenMode() === literals.leftRight;\n        var tbodyMovableHeader;\n        var tbodyMovableContent;\n        var frHdr;\n        var frCnt;\n        var tbodyContent = gObj.getContentTable().querySelector(literals.tbody);\n        var tbodyHeader = gObj.getHeaderTable().querySelector(literals.tbody);\n        if (frzCols) {\n            tbodyMovableHeader = gObj.getMovableHeaderTbody();\n            tbodyMovableContent = gObj.getMovableContentTbody();\n            if (isLeftRight) {\n                frHdr = gObj.getFrozenRightHeaderTbody();\n                frCnt = gObj.getFrozenRightContentTbody();\n            }\n        }\n        var index = gObj.getFrozenMode() === literals.leftRight ? 3 : 2;\n        for (var i = 0, len = args.rows.length; i < len; i++) {\n            if (frzCols) {\n                if (i % index === 0) {\n                    tbody.insertBefore(args.rows[i], target);\n                }\n                else if (i % index === 1) {\n                    mtbody.insertBefore(args.rows[i], mTarget);\n                }\n                else {\n                    frTbody.insertBefore(args.rows[i], frTarget);\n                }\n            }\n            else {\n                tbody.insertBefore(args.rows[i], target);\n            }\n        }\n        var tr = [].slice.call(tbody.getElementsByClassName(literals.row));\n        var mtr;\n        var frTr;\n        if (frzCols) {\n            mtr = [].slice.call(mtbody.getElementsByClassName(literals.row));\n            if (isLeftRight) {\n                frTr = [].slice.call(frTbody.getElementsByClassName(literals.row));\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            this.refreshVirtualData(tr, mtr, frTr);\n        }\n        else {\n            this.refreshData(tr, mtr, frTr);\n        }\n        if (this.parent.frozenRows) {\n            var _loop_1 = function (i, len) {\n                if (i < this_1.parent.frozenRows) {\n                    setRowsInTbody(tbodyHeader, tbodyMovableHeader, frHdr, tr, mtr, frTr, function (tbody, rows) {\n                        tbody.appendChild(rows[i]);\n                    });\n                }\n                else {\n                    setRowsInTbody(tbodyContent, tbodyMovableContent, frCnt, tr, mtr, frTr, function (tbody, rows) {\n                        tbody.appendChild(rows[i]);\n                    });\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = tr.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n    };\n    RowDD.prototype.updateFrozenRowreOrder = function (args) {\n        var gObj = this.parent;\n        var tbodyMovH;\n        var tbodyMovC;\n        var tbodyFrH;\n        var tbodyFrC;\n        var frzCols = this.parent.isFrozenGrid();\n        var isLeftRight = gObj.getFrozenMode() === literals.leftRight;\n        var tbodyC = gObj.getContentTable().querySelector(literals.tbody);\n        var tbodyH = gObj.getHeaderTable().querySelector(literals.tbody);\n        if (frzCols) {\n            tbodyMovH = gObj.getMovableHeaderTbody();\n            tbodyMovC = gObj.getMovableContentTbody();\n            if (isLeftRight) {\n                tbodyFrH = gObj.getFrozenRightHeaderTbody();\n                tbodyFrC = gObj.getFrozenRightContentTbody();\n            }\n        }\n        var tr = [].slice.call(tbodyH.getElementsByClassName(literals.row)).concat([].slice.call(tbodyC.getElementsByClassName(literals.row)));\n        var mtr;\n        var frTr;\n        if (frzCols) {\n            mtr = [].slice.call(tbodyMovH.getElementsByClassName(literals.row))\n                .concat([].slice.call(tbodyMovC.getElementsByClassName(literals.row)));\n            if (isLeftRight) {\n                frTr = [].slice.call(tbodyFrH.getElementsByClassName(literals.row))\n                    .concat([].slice.call(tbodyFrC.getElementsByClassName(literals.row)));\n            }\n        }\n        var tbody = gObj.createElement(literals.tbody);\n        var mtbody = gObj.createElement(literals.tbody);\n        var frTbody = gObj.createElement(literals.tbody);\n        this.parent.clearSelection();\n        var targetRows = this.refreshRowTarget(args);\n        for (var i = 0, len = tr.length; i < len; i++) {\n            tbody.appendChild(tr[i]);\n            if (frzCols) {\n                mtbody.appendChild(mtr[i]);\n                if (isLeftRight) {\n                    frTbody.appendChild(frTr[i]);\n                }\n            }\n        }\n        this.refreshRow(args, tbody, mtbody, frTbody, targetRows.target, targetRows.mTarget, targetRows.frTarget);\n    };\n    RowDD.prototype.refreshRowTarget = function (args) {\n        var gObj = this.parent;\n        var mTr;\n        var frTr;\n        var targetIdx = parseInt(args.target.parentElement.getAttribute(literals.ariaRowIndex), 10);\n        if (args.fromIndex < args.dropIndex || args.fromIndex === args.dropIndex) {\n            targetIdx = targetIdx + 1;\n        }\n        var tr = gObj.getRowByIndex(targetIdx);\n        if (gObj.isFrozenGrid()) {\n            mTr = gObj.getMovableRowByIndex(targetIdx);\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                frTr = gObj.getFrozenRightRowByIndex(targetIdx);\n            }\n        }\n        var rows = {\n            target: tr, mTarget: mTr, frTarget: frTr\n        };\n        return rows;\n    };\n    RowDD.prototype.updateFrozenColumnreOrder = function (args) {\n        var gObj = this.parent;\n        var mtbody;\n        var frTbody;\n        var frzCols = this.parent.isFrozenGrid();\n        var tbody = gObj.getContentTable().querySelector(literals.tbody);\n        if (frzCols) {\n            mtbody = gObj.getMovableContentTbody();\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                frTbody = gObj.getFrozenRightContentTbody();\n            }\n        }\n        this.parent.clearSelection();\n        var targetRows = this.refreshRowTarget(args);\n        this.refreshRow(args, tbody, mtbody, frTbody, targetRows.target, targetRows.mTarget, targetRows.frTarget);\n    };\n    RowDD.prototype.refreshVirtualData = function (tr, mtr, frTr) {\n        var recordobj = {};\n        var currentViewData = this.parent.getCurrentViewRecords();\n        var startedRow = this.parent.isFrozenGrid() ? this.parent.getMovableRows()[0] : this.parent.getRows()[0];\n        var startIndex = parseInt(startedRow.getAttribute(literals.ariaRowIndex), 10);\n        for (var i = 0, len = tr.length; i < len; i++) {\n            var index = parseInt(tr[i].getAttribute(literals.ariaRowIndex), 10);\n            this.parent.notify(events.refreshVirtualCacheOnRowDD, { objIndex: index, end: i === tr.length - 1, startIndex: startIndex });\n            index = index - startIndex;\n            recordobj[i] = currentViewData[index];\n        }\n        var rowsElem = this.parent.getRows();\n        var mvbRows;\n        var frRightRow;\n        if (this.parent.isFrozenGrid()) {\n            mvbRows = this.parent.getMovableRows();\n            if (frTr) {\n                frRightRow = this.parent.getFrozenRightRows();\n            }\n        }\n        for (var i = 0, len = tr.length; i < len; i++) {\n            tr[i].setAttribute(literals.ariaRowIndex, (i + startIndex).toString());\n            rowsElem[i] = tr[i];\n            currentViewData[i] = recordobj[i];\n            if (this.parent.isFrozenGrid()) {\n                mtr[i].setAttribute(literals.ariaRowIndex, (i + startIndex).toString());\n                mvbRows[i] = mtr[i];\n                if (frTr) {\n                    frTr[i].setAttribute(literals.ariaRowIndex, (i + startIndex).toString());\n                    frRightRow[i] = frTr[i];\n                }\n            }\n        }\n    };\n    RowDD.prototype.refreshData = function (tr, mtr, frTr) {\n        var rowObj = {};\n        var movobj = {};\n        var frObj = {};\n        var recordobj = {};\n        var rowObjects = this.parent.getRowsObject();\n        var movbObject = this.parent.getMovableRowsObject();\n        var frRightObject = this.parent.getFrozenRightRowsObject();\n        var currentViewData = this.parent.getCurrentViewRecords();\n        for (var i = 0, len = tr.length; i < len; i++) {\n            var index = parseInt(tr[i].getAttribute(literals.ariaRowIndex), 10);\n            rowObj[i] = rowObjects[index];\n            recordobj[i] = currentViewData[index];\n            if (this.parent.isFrozenGrid()) {\n                movobj[i] = movbObject[index];\n                if (frTr) {\n                    frObj[i] = frRightObject[index];\n                }\n            }\n        }\n        var rows = this.parent.getRows();\n        var movbRows;\n        var frRightRows;\n        if (this.parent.isFrozenGrid()) {\n            movbRows = this.parent.getMovableRows();\n            if (frTr) {\n                frRightRows = this.parent.getFrozenRightRows();\n            }\n        }\n        for (var i = 0, len = tr.length; i < len; i++) {\n            rows[i] = tr[i];\n            rowObjects[i] = rowObj[i];\n            currentViewData[i] = recordobj[i];\n            if (this.parent.isFrozenGrid()) {\n                movbRows[i] = mtr[i];\n                movbObject[i] = movobj[i];\n                if (frTr) {\n                    frRightRows[i] = frTr[i];\n                    frRightObject[i] = frObj[i];\n                }\n            }\n        }\n        resetRowIndex(this.parent, rowObjects, tr);\n        if (this.parent.isFrozenGrid()) {\n            resetRowIndex(this.parent, movbObject, mtr);\n            if (frTr) {\n                resetRowIndex(this.parent, frRightObject, frTr);\n            }\n        }\n    };\n    RowDD.prototype.rowOrder = function (args) {\n        if (args.dropIndex === args.fromIndex || isNaN(args.dropIndex)) {\n            return;\n        }\n        if (this.parent.childGrid) {\n            this.parent.detailCollapseAll();\n            var rows = [].slice.call(this.parent.getContentTable().querySelector(literals.tbody).children);\n            var rowObjects = this.parent.getRowsObject();\n            rows.filter(function (row) {\n                if (row.classList.contains('e-detailrow')) {\n                    row.remove();\n                }\n            });\n            for (var i = 0, len = rowObjects.length; i < len; i++) {\n                if (!rowObjects[i]) {\n                    break;\n                }\n                if (rowObjects[i].isDetailRow) {\n                    this.parent.getRowsObject().splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (args.target.classList.contains('e-rowcelldrag')) {\n            args.target = args.target.parentElement;\n        }\n        if (this.parent.frozenRows) {\n            this.updateFrozenRowreOrder(args);\n        }\n        else {\n            this.updateFrozenColumnreOrder(args);\n        }\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            var indexes = [];\n            if (this.parent.filterSettings.columns.length || this.parent.sortSettings.columns.length) {\n                for (var i = 0, len = args.rows.length; i < len; i++) {\n                    indexes.push(parseInt(args.rows[i].getAttribute(literals.ariaRowIndex), 10));\n                }\n                this.selectedRowColls = indexes;\n            }\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.currentViewData = function () {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var currentVdata = [];\n        var fromIdx = parseInt(this.startedRow.getAttribute(literals.ariaRowIndex), 10);\n        for (var i = 0, n = selectedIndexes.length; i < n; i++) {\n            var currentV = 'currentViewData';\n            currentVdata[i] = this.parent[currentV][selectedIndexes[i]];\n        }\n        if (!this.parent.rowDropSettings.targetID && selectedIndexes.length === 0) {\n            currentVdata[0] = this.parent.currentViewData[fromIdx];\n        }\n        return currentVdata;\n    };\n    RowDD.prototype.saveChange = function (changeRecords, query) {\n        var _this = this;\n        this.parent.getDataModule().saveChanges(changeRecords, this.parent.getPrimaryKeyFieldNames()[0], {}, query)\n            .then(function () {\n            _this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }).catch(function (e) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    RowDD.prototype.reorderRows = function (fromIndexes, toIndex) {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var selectedRecords = [];\n        var draggedRecords = [];\n        var currentViewData = this.parent.renderModule.data.dataManager.dataSource.json;\n        var skip = this.parent.allowPaging ?\n            (this.parent.pageSettings.currentPage * this.parent.pageSettings.pageSize) - this.parent.pageSettings.pageSize : 0;\n        var dropIdx = toIndex + skip;\n        var actualIdx = fromIndexes[0] + skip;\n        for (var i = 0, len = fromIndexes.length; i < len; i++) {\n            draggedRecords[i] = currentViewData[fromIndexes[i] + skip];\n        }\n        for (var i = 0, len = selectedIndexes.length; i < len; i++) {\n            selectedRecords[i] = currentViewData[selectedIndexes[i] + skip];\n        }\n        for (var i = 0, len = draggedRecords.length; i < len; i++) {\n            if (i !== 0) {\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) ===\n                        JSON.stringify(draggedRecords[i])) {\n                        actualIdx = j;\n                        break;\n                    }\n                }\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(draggedRecords[i - 1])) {\n                        if (actualIdx > j) {\n                            dropIdx = j + 1;\n                        }\n                        break;\n                    }\n                }\n            }\n            this.reorderRow(actualIdx - skip, dropIdx - skip);\n        }\n        if (this.isRefresh) {\n            this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n        for (var i = 0, len = selectedRecords.length; i < len; i++) {\n            for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(selectedRecords[i])) {\n                    selectedIndexes[i] = j - skip;\n                    break;\n                }\n            }\n        }\n        this.selectedRowColls = selectedIndexes;\n    };\n    RowDD.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        this.draggable = new Draggable(gObj.element, {\n            dragTarget: '.e-rowcelldrag, .e-rowdragdrop, .e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    RowDD.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var y = getPosition(e).y;\n        var cliRect = this.isDropGrid.getContent().getBoundingClientRect();\n        var rowHeight = this.isDropGrid.getRowHeight() - 15;\n        var scrollElem = this.isDropGrid.getContent().firstElementChild;\n        if (cliRect.top >= y) {\n            var scrollPixel_1 = -(this.isDropGrid.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_1); }, 200);\n        }\n        else if (cliRect.top + this.isDropGrid.getContent().clientHeight - rowHeight - 33 <= y) {\n            var scrollPixel_2 = (this.isDropGrid.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_2); }, 200);\n        }\n    };\n    RowDD.prototype.setScrollDown = function (scrollElem, scrollPixel) {\n        scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    };\n    RowDD.prototype.moveDragRows = function (e, startedRow, targetRow) {\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        var element = closestElement(e.target, 'tr');\n        if (parentsUntil(element, 'e-grid') &&\n            (parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id || this.istargetGrid)) {\n            var targetElement = element ?\n                element : this.startedRow;\n            this.setBorder(targetElement, e.event, startedRow, targetRow);\n        }\n    };\n    RowDD.prototype.setBorder = function (element, event, startedRow, targetRow) {\n        var node = this.parent.element;\n        if (this.istargetGrid) {\n            node = this.isDropGrid.element;\n        }\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        if (parentsUntil(element, 'e-grid') && (!this.parent.rowDropSettings.targetID && element.classList.contains(literals.row) &&\n            parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id) || this.istargetGrid) {\n            removeClass(node.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'), ['e-dragborder']);\n            var rowElement = [];\n            var targetRowIndex = parseInt(targetRow.getAttribute(literals.ariaRowIndex), 10);\n            if (targetRow && targetRowIndex === 0) {\n                var div = this.parent.createElement('div', { className: 'e-firstrow-dragborder' });\n                var gridheaderEle = this.isDropGrid.getHeaderContent();\n                gridheaderEle.classList.add('e-grid-relative');\n                div.style.width = node.offsetWidth - this.getScrollWidth() + 'px';\n                if (!gridheaderEle.getElementsByClassName('e-firstrow-dragborder').length) {\n                    gridheaderEle.appendChild(div);\n                }\n            }\n            else if (this.parent.rowDropSettings.targetID && targetRow) {\n                element = this.isDropGrid.getRowByIndex(targetRowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else if (targetRow && parseInt(startedRow.getAttribute(literals.ariaRowIndex), 10) > targetRowIndex) {\n                element = this.parent.getRowByIndex(targetRowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else {\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            var frzCols = this.parent.isFrozenGrid();\n            if (targetRow && targetRowIndex !== 0 && frzCols) {\n                var rowIndex = parseInt(element.getAttribute(literals.ariaRowIndex), 10);\n                var selector = '.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse';\n                rowElement = this.borderRowElement(rowIndex, selector);\n            }\n            if (rowElement.length > 0) {\n                addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n            }\n        }\n    };\n    RowDD.prototype.borderRowElement = function (rowIndex, selector) {\n        var lastRow = [];\n        lastRow = [].slice.call(this.isDropGrid.getRowByIndex(rowIndex).querySelectorAll(selector)).\n            concat([].slice.call(this.isDropGrid.getMovableRowByIndex(rowIndex).querySelectorAll(selector)));\n        if (this.isDropGrid.getFrozenMode() === literals.leftRight) {\n            lastRow = lastRow.concat([].slice.call(this.isDropGrid.getFrozenRightRowByIndex(rowIndex).querySelectorAll(selector)));\n        }\n        return lastRow;\n    };\n    RowDD.prototype.getScrollWidth = function () {\n        var scrollElem = this.parent.getContent().firstElementChild;\n        return scrollElem.scrollWidth > scrollElem.offsetWidth ? Scroll.getScrollBarWidth() : 0;\n    };\n    RowDD.prototype.removeFirstRowBorder = function (element) {\n        if (this.isDropGrid.element.getElementsByClassName('e-firstrow-dragborder').length > 0 && element &&\n            element.rowIndex !== 0) {\n            remove(this.isDropGrid.element.getElementsByClassName('e-firstrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeLastRowBorder = function (element) {\n        var islastRowIndex;\n        if (this.parent.enableVirtualization) {\n            islastRowIndex = element && parseInt(element.getAttribute(literals.ariaRowIndex), 10) !==\n                this.parent.renderModule.data.dataManager.dataSource.json.length - 1;\n        }\n        else {\n            islastRowIndex = element &&\n                this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') !==\n                    element.getAttribute('data-uid');\n        }\n        if (this.parent.element.getElementsByClassName('e-lastrow-dragborder').length > 0 && element && islastRowIndex) {\n            remove(this.parent.element.getElementsByClassName('e-lastrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeBorder = function (element) {\n        this.removeFirstRowBorder(element);\n        if (!this.parent.rowDropSettings.targetID) {\n            this.removeLastRowBorder(element);\n        }\n        element = (this.isDropGrid.isFrozenGrid() ? this.isDropGrid.getMovableRows() : this.isDropGrid.getRows()).filter(function (row) {\n            return row.querySelector('td.e-dragborder');\n        })[0];\n        if (element) {\n            var rowElement = [].slice.call(element.getElementsByClassName('e-dragborder'));\n            if (this.parent.isFrozenGrid()) {\n                var rowIndex = parseInt(element.getAttribute(literals.ariaRowIndex), 10);\n                var selector = '.e-dragborder';\n                rowElement = this.borderRowElement(rowIndex, selector);\n            }\n            addRemoveActiveClasses(rowElement, false, 'e-dragborder');\n        }\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var position = getPosition(event);\n        element.style.display = 'none';\n        var target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    RowDD.prototype.onDataBound = function () {\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute(literals.ariaRowIndex), 10) : 0;\n    };\n    RowDD.prototype.singleRowDrop = function (e) {\n        var targetRow = closestElement(e.target, 'tr');\n        var srcControl = e.droppedElement.parentElement.ej2_instances[0];\n        var currentIndex = targetRow ? targetRow.rowIndex : srcControl.currentViewData.length - 1;\n        this.reorderRow(this.startedRowIndex, currentIndex);\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') !== 'grouping' &&\n            (parentsUntil(e.target, literals.row) || parentsUntil(e.target, 'e-emptyrow') || parentsUntil(e.target, literals.gridContent))) {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl = void 0;\n            var currentIndex = void 0;\n            if ((e.droppedElement.querySelector('tr').getAttribute('single-dragrow') !== 'true' &&\n                e.droppedElement.parentElement.id === gObj.element.id)\n                || (e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true' &&\n                    e.droppedElement.parentElement.id !== gObj.element.id)) {\n                return;\n            }\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else if (this.isSingleRowDragDrop || e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true') {\n                this.singleRowDrop(e);\n                return;\n            }\n            if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            if (isNaN(targetIndex)) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges\n            gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n            var selectedRows = srcControl.getSelectedRowIndexes();\n            var skip = srcControl.allowPaging ?\n                (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n            this.selectedRows = [];\n            for (var i = 0, len = records.length; i < len; i++) {\n                this.selectedRows.push(skip + selectedRows[i]);\n            }\n            srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n            srcControl.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n    };\n    RowDD.prototype.reorderRow = function (fromIndexes, toIndex) {\n        var gObj = this.parent;\n        if (!gObj.sortSettings.columns.length && !gObj.groupSettings.columns.length && !gObj.filterSettings.columns.length) {\n            //Todo: drag and drop mapper & BatchChanges\n            var skip = gObj.allowPaging ?\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : 0;\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            var fromIndex = fromIndexes;\n            toIndex = toIndex + skip;\n            this.selectedRows = gObj.getSelectedRowIndexes();\n            gObj.notify(events.rowPositionChanged, {\n                fromIndex: fromIndexes + skip,\n                toIndex: toIndex\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     *\n     * @returns {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.draggable.destroy();\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    RowDD.prototype.processArgs = function (target) {\n        var gObj = this.parent;\n        var dragIdx = parseInt(this.startedRow.getAttribute(literals.ariaRowIndex), 10);\n        if ((gObj.getSelectedRecords().length > 0 && this.startedRow.cells[0].classList.contains('e-selectionbackground') === false)\n            || gObj.getSelectedRecords().length === 0) {\n            this.rows = [this.parent.getRowByIndex(dragIdx)];\n            if (gObj.isFrozenGrid()) {\n                this.rows = [gObj.getRowByIndex(dragIdx), gObj.getMovableRowByIndex(dragIdx)];\n                if (gObj.getFrozenMode() === literals.leftRight) {\n                    this.rows = [gObj.getRowByIndex(dragIdx), gObj.getMovableRowByIndex(dragIdx), gObj.getFrozenRightRowByIndex(dragIdx)];\n                }\n            }\n            this.rowData = [this.parent.getRowInfo((this.startedRow).querySelector('.' + literals.rowCell)).rowData];\n        }\n        else {\n            this.rows = gObj.getSelectedRows();\n            this.rowData = gObj.getSelectedRecords();\n            if (this.parent.enableVirtualization) {\n                this.rows = [];\n                var selIndex = gObj.getSelectedRowIndexes();\n                for (var i = 0, len = selIndex.length; i < len; i++) {\n                    this.rows.push(gObj.getRowByIndex(selIndex[i]));\n                    if (gObj.isFrozenGrid()) {\n                        this.rows.push(gObj.getMovableRowByIndex(selIndex[i]));\n                        if (gObj.getFrozenMode() === literals.leftRight) {\n                            this.rows.push(gObj.getFrozenRightRowByIndex(selIndex[i]));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, isGroupAdaptive, updatecloneRow, getComplexFieldID, isComplexField } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {GroupSettingsModel} groupSettings - specifies the GroupSettingsModel\n     * @param {string[]} sortedColumns - specifies the sortedColumns\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        //Internal variables\n        this.sortRequired = true;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.reorderingColumns = [];\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element || (!target.classList.contains('e-drag') && _this.groupSettings.allowReordering)) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.dragStart = function (e) {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            if (_this.groupSettings.allowReordering) {\n                _this.animateDropper(e);\n            }\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            if (!_this.groupSettings.allowReordering) {\n                classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                if (!(parentsUntil(target, literals.gridContent) || parentsUntil(target, 'e-headercell'))) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            var preventDrop = !(parentsUntil(e.target, literals.gridContent) || parentsUntil(e.target, 'e-gridheader'));\n            if (_this.groupSettings.allowReordering && preventDrop) {\n                remove(e.helper);\n                if (parentsUntil(e.target, 'e-groupdroparea')) {\n                    _this.rearrangeGroup();\n                }\n                else if (!(parentsUntil(e.target, 'e-grid'))) {\n                    var field = _this.parent.getColumnByUid(e.helper.getAttribute('e-mappinguid')).field;\n                    if (_this.groupSettings.columns.indexOf(field) !== -1) {\n                        _this.ungroupColumn(field);\n                    }\n                }\n                return;\n            }\n            else if (preventDrop) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.animateDropper = function (e) {\n            var uid = _this.parent.element.querySelector('.e-cloneproperties').getAttribute('e-mappinguid');\n            var dragField = _this.parent.getColumnByUid(uid).field;\n            var parent = parentsUntil(e.target, 'e-groupdroparea');\n            var dropTarget = parentsUntil(e.target, 'e-group-animator');\n            var grouped = [].slice.call(_this.element.getElementsByClassName('e-groupheadercell'))\n                .map(function (e) { return e.querySelector('div').getAttribute('ej-mappingname'); });\n            var cols = JSON.parse(JSON.stringify(grouped));\n            if (dropTarget || parent) {\n                if (dropTarget) {\n                    var dropField = dropTarget.querySelector('div[ej-mappingname]').getAttribute('ej-mappingname');\n                    var dropIndex = +(dropTarget.getAttribute('index'));\n                    if (dropField !== dragField) {\n                        var dragIndex = cols.indexOf(dragField);\n                        if (dragIndex !== -1) {\n                            cols.splice(dragIndex, 1);\n                        }\n                        var flag = dropIndex !== -1 && dragIndex === dropIndex;\n                        cols.splice(dropIndex + (flag ? 1 : 0), 0, dragField);\n                    }\n                }\n                else if (parent && cols.indexOf(dragField) === -1) {\n                    cols.push(dragField);\n                }\n                _this.element.innerHTML = '';\n                if (cols.length && !_this.element.classList.contains('e-grouped')) {\n                    _this.element.classList.add('e-grouped');\n                }\n                _this.reorderingColumns = cols;\n                for (var c = 0; c < cols.length; c++) {\n                    _this.addColToGroupDrop(cols[c]);\n                }\n            }\n            else {\n                _this.addLabel();\n                _this.removeColFromGroupDrop(dragField);\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                _this.parent.log('action_disabled_column', { moduleName: _this.getModuleName(), columnName: column.headerText });\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.addLabel = function () {\n        if (!this.element.getElementsByClassName('e-group-animator').length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n    };\n    Group.prototype.rearrangeGroup = function () {\n        this.sortRequired = false;\n        this.updateModel();\n    };\n    Group.prototype.columnDrag = function (e) {\n        if (this.groupSettings.allowReordering) {\n            this.animateDropper(e);\n        }\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        if (e.target.classList.contains('e-groupdroparea')) {\n            this.element.classList.add('e-hover');\n        }\n        else {\n            this.element.classList.remove('e-hover');\n        }\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.headerDrop, this.columnDrop, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n        this.parent.on('blazor-action-begin', this.blazorActionBegin, this);\n        this.parent.on('group-expand-collapse', this.updateExpand, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n        this.parent.off('blazor-action-begin', this.blazorActionBegin);\n        this.parent.off('group-expand-collapse', this.updateExpand);\n    };\n    Group.prototype.blazorActionBegin = function () {\n        if (this.parent.allowGrouping && !this.parent.isCollapseStateEnabled()) {\n            this.expandAll();\n        }\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action !== 'ctrlSpace' && (!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                // eslint-disable-next-line no-case-declarations\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector(literals.tbody).children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains(literals.row) && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                // eslint-disable-next-line no-case-declarations\n                var element = this.focus.getFocusedElement();\n                // eslint-disable-next-line no-case-declarations\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n            case 'ctrlSpace':\n                // eslint-disable-next-line no-case-declarations\n                var elem = gObj.focusModule.currentInfo.element;\n                if (elem && elem.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(elem.firstElementChild.getAttribute('e-mappinguid'));\n                    if (column.field && gObj.groupSettings.columns.indexOf(column.field) < 0) {\n                        this.groupColumn(column.field);\n                    }\n                    else {\n                        this.ungroupColumn(column.field);\n                    }\n                }\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).getElementsByClassName('e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     *\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @returns {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector(literals.tbody).children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var dataManager = void 0;\n            var query = void 0;\n            var toExpand = [];\n            var gObj = this.parent;\n            var indent = trgt.parentElement.getElementsByClassName('e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, expand, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionExpand(trgt.parentElement);\n                }\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, !isHide, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionCollapse(trgt.parentElement);\n                }\n            }\n            this.aria.setExpand(trgt, expand);\n            if (!isGroupAdaptive(gObj) && !this.parent.groupSettings.enableLazyLoading) {\n                for (var i = 0, len = rows.length; i < len; i++) {\n                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                        if (isHide) {\n                            rows[i].style.display = 'none';\n                        }\n                        else {\n                            if (rows[i].getElementsByClassName('e-indentcell').length === indent + 1) {\n                                rows[i].style.display = '';\n                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n                                if (expandElem) {\n                                    toExpand.push(expandElem);\n                                }\n                                if (rows[i].classList.contains('e-detailrow')) {\n                                    if (rows[i - 1].getElementsByClassName('e-detailrowcollapse').length) {\n                                        rows[i].style.display = 'none';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n                this.updateVisibleexpandCollapseRows();\n                this.parent.notify(events.refreshExpandandCollapse, { rows: this.parent.getRowsObject() });\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.updateVisibleexpandCollapseRows = function () {\n        var rows = this.parent.getRowsObject();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].isDataRow && this.parent.getRowElementByUID(rows[i].uid).style.display === 'none') {\n                rows[i].visible = false;\n            }\n        }\n    };\n    Group.prototype.updateVirtualRows = function (gObj, target, isExpand, query, dataManager) {\n        var rObj = gObj.getRowObjectFromUID(target.closest('tr').getAttribute('data-uid'));\n        rObj.isExpand = isExpand;\n        updatecloneRow(gObj);\n        this.parent.notify(events.refreshVirtualMaxPage, {});\n        query = gObj.getDataModule().generateQuery(false);\n        query.queries = gObj.getDataModule().aggregateQuery(gObj.getQuery().clone()).queries;\n        var args = { requestType: 'virtualscroll', rowObject: rObj };\n        dataManager = gObj.getDataModule().getData(args, query.requiresCount());\n        dataManager.then(function (e) { return gObj.renderModule.dataManagerSuccess(e, args); });\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        if (!isExpand) {\n            this.parent.notify(events.initialCollapse, isExpand);\n        }\n        var rowNodes = this.parent.getContentTable().querySelector(literals.tbody).children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n        this.updateVisibleexpandCollapseRows();\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.parent.getRowsObject() });\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     *\n     * @returns {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        if (this.groupSettings.allowReordering) {\n            this.element.classList.add('e-group-animate');\n        }\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drag = new Draggable(this.element, {\n            dragTarget: this.groupSettings.allowReordering ? '.e-drag' : '.e-groupheadercell',\n            distance: this.groupSettings.allowReordering ? -10 : 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     *\n     * @param  {string} columnName - Defines the column name to group.\n     * @returns {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     *\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @returns {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        if (this.groupSettings.allowReordering) {\n            this.reorderingColumns = columns;\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns = this.reorderingColumns.length ? JSON.parse(JSON.stringify(this.reorderingColumns)) : columns;\n        if (this.sortRequired) {\n            if (columns.indexOf(this.colName) === -1) {\n                columns.push(this.colName);\n            }\n            this.groupAddSortingQuery(this.colName);\n        }\n        this.sortRequired = true;\n        this.parent.groupSettings.columns = columns;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending', isFromGroup: true });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.createElement = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var animator = this.parent.createElement('div', { className: 'e-grid-icon e-group-animator' });\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        if (isComplexField(field)) {\n            childDiv.setAttribute('ej-complexname', getComplexFieldID(field));\n        }\n        var column = this.parent.getColumnByField(field);\n        //Todo headerTemplateID for grouped column, disableHtmlEncode\n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        // if (!isNullOrUndefined(column.headerTemplate)) {\n        //     if (column.headerTemplate.indexOf('#') !== -1) {\n        //         childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n        //     } else {\n        //         childDiv.innerHTML = column.headerTemplate;\n        //     }\n        //     childDiv.firstElementChild.classList.add('e-grouptext');\n        // } else {\n        if (this.groupSettings.allowReordering) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-drag e-icons e-icon-drag', innerHTML: '&nbsp;',\n                attrs: { title: 'Drag', tabindex: '-1', 'aria-label': 'Drag the grouped column' }\n            }));\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-grouptext', innerHTML: column.headerText,\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        // }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'),\n                tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        if (this.groupSettings.allowReordering) {\n            animator.appendChild(groupedColumn);\n            animator.appendChild(this.createSeparator());\n            groupedColumn = animator;\n        }\n        return groupedColumn;\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var groupElem = isComplexField(field) ? this.parent.element.querySelector('.e-groupdroparea div[ej-complexname=' +\n            getComplexFieldID(field) + ']') : this.parent.element.querySelector('.e-groupdroparea div[ej-mappingname=' + field + ']');\n        if (this.groupSettings.allowReordering && groupElem) {\n            return;\n        }\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        var groupedColumn = this.createElement(field);\n        if (this.groupSettings.allowReordering) {\n            var index = this.element.getElementsByClassName('e-group-animator').length;\n            groupedColumn.setAttribute('index', index.toString());\n        }\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl\n    };\n    Group.prototype.createSeparator = function () {\n        return this.parent.createElement('span', {\n            className: 'e-nextgroup e-icons e-icon-next', innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'Separator for the grouped columns' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        });\n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].getElementsByClassName('e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            var elem = this.getGHeaderCell(field);\n            if (this.groupSettings.allowReordering) {\n                var parent_1 = parentsUntil(elem, 'e-group-animator');\n                remove(parent_1);\n            }\n            else {\n                remove(elem);\n            }\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    // eslint-disable-next-line no-case-declarations\n                    var args = void 0;\n                    if (this.contentRefresh) {\n                        if (!this.isAppliedUnGroup) {\n                            if (!this.isAppliedGroup) {\n                                this.updateGroupDropArea(true);\n                                for (var j = 0; j < this.parent.sortSettings.columns.length; j++) {\n                                    if (this.parent.sortSettings.columns[j].isFromGroup) {\n                                        this.parent.sortSettings.columns.splice(j, 1);\n                                        j--;\n                                    }\n                                }\n                                for (var i = 0; i < this.groupSettings.columns.length; i++) {\n                                    this.colName = this.groupSettings.columns[i];\n                                    var col = this.parent.getColumnByField(this.colName);\n                                    col.visible = this.parent.groupSettings.showGroupedColumn;\n                                    this.groupAddSortingQuery(this.colName);\n                                    if (i < this.groupSettings.columns.length - 1) {\n                                        this.addColToGroupDrop(this.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = {\n                                columnName: this.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin\n                            };\n                        }\n                        else {\n                            args = { columnName: this.colName, requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this.groupSettings.showGroupedColumn) {\n                            var columns = e.oldProperties[prop];\n                            for (var i = 0; i < columns.length; i++) {\n                                if (e.properties[prop].indexOf(columns[i]) === -1) {\n                                    this.parent.getColumnByField(columns[i]).visible = true;\n                                }\n                            }\n                        }\n                        this.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this.updateGroupDropArea();\n                    if (this.groupSettings.showDropArea) {\n                        this.element.style.display = '';\n                    }\n                    else {\n                        this.element.style.display = 'none';\n                    }\n                    break;\n                case 'showGroupedColumn':\n                    this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n                    this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this.parent.refreshHeader();\n                    break;\n                case 'enableLazyLoading':\n                    this.parent.freezeRefresh();\n                    break;\n            }\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.getElementsByClassName(className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.isDestroyed && !this.parent.refreshing) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (i === (len - 1)) {\n                this.contentRefresh = true;\n            }\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).getElementsByClassName('e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['groupFooterTemplate', 'groupCaptionTemplate', 'footerTemplate']);\n        }\n        for (var i = 0; i < updateSummaryRows.length; i++) {\n            var row = updateSummaryRows[i];\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[i] ? summaryRows[i].uid : '' };\n            this.parent.notify(events.refreshAggregateCell, args);\n        }\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            for (var i = 0; i < deletedCols.length; i++) {\n                var index = mergeData.indexOf(deletedCols[i]);\n                mergeData.splice(index, 1);\n            }\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        for (var j = 0; j < aggregateRows.length; j++) {\n            var row = aggregateRows[j];\n            for (var k = 0; k < row.columns.length; k++) {\n                var aggr = {};\n                var type = row.columns[k].type.toString();\n                aggr = { type: type.toLowerCase(), field: row.columns[k].field };\n                aggregates.push(aggr);\n            }\n        }\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        for (var l = 0; l < groupedCols.length; l++) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, groupedCols[l], aggregates, null, null);\n        }\n        return result;\n    };\n    Group.prototype.updateExpand = function (args) {\n        var uid = args.uid;\n        var isExpand = args.isExpand;\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            if (row.uid === uid || isNullOrUndefined(uid)) {\n                row.isExpand = isExpand;\n                var _loop_1 = function (j) {\n                    var childRow = rows[j];\n                    var closestParent = void 0;\n                    if (childRow.parentUid !== row.uid) {\n                        closestParent = rows.filter(function (x) { return x.uid === childRow.parentUid; })[0];\n                    }\n                    if (childRow.parentUid === row.uid) {\n                        childRow.visible = row.isExpand;\n                    }\n                    else if (!isNullOrUndefined(closestParent) && childRow.parentUid === closestParent.uid) {\n                        if (closestParent.isExpand && closestParent.visible === true) {\n                            childRow.visible = true;\n                        }\n                        else if (closestParent.isExpand && closestParent.visible === false) {\n                            childRow.visible = false;\n                        }\n                    }\n                    if (isNullOrUndefined(uid)) {\n                        return \"break\";\n                    }\n                };\n                for (var j = i + 1; j < rows.length; j++) {\n                    var state_1 = _loop_1(j);\n                    if (state_1 === \"break\")\n                        break;\n                }\n            }\n        }\n        this.parent.notify(events.contentReady, { rows: rows, args: { isFrozen: false, rows: rows } });\n    };\n    return Group;\n}());\nexport { Group };\n","import { removeClass, addClass, extend } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifes the serviceLocator\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string';\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler) {\n                        gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID));\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    childGrid.isLegacyTemplate = gObj.isReact\n                        || gObj.isLegacyTemplate;\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid('')\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                gObj.getRowsObject().splice(rowObj.index + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n                addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[detailrowIdx].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute(literals.ariaRowIndex), 10) === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    /**\n     * @hidden\n     * @param {IGrid} gObj - specifies the grid Object\n     * @param {Row<Column>}rowObj - specifies the row object\n     * @param {string} printMode - specifies the printmode\n     * @returns {Object} returns the object\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n            }\n            gridModel = extend({}, {}, gObj.childGrid, true);\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @returns {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @returns {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            if (isExpand) {\n                this.expand(td);\n            }\n            else {\n                this.collapse(td);\n            }\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                // eslint-disable-next-line no-case-declarations\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    if (e.action === 'altDownArrow') {\n                        this.expand(td);\n                    }\n                    else {\n                        this.collapse(td);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                // eslint-disable-next-line no-case-declarations\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[i].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor, select } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren, parentsUntil, addRemoveEventListener } from '../base/util';\nimport { ResponsiveToolbarAction } from '../base/enum';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n *\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        var isAdaptive = this.parent.enableAdaptiveUI;\n        var excludingItems = ['Edit', 'Delete', 'Update', 'Cancel'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n            if (isAdaptive) {\n                this.predefinedItems[item].text = '';\n                this.predefinedItems[item].visible = excludingItems.indexOf(item) === -1;\n            }\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper',\n            type: 'Input'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: isAdaptive ? '' : this.l10n.getConstant('Columnchooser'),\n            tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right'\n        };\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                this.predefinedItems.responsiveFilter = {\n                    id: this.gridID + '_' + 'responsivefilter', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'resfilter-icon', tooltipText: this.l10n.getConstant('FilterButton')\n                };\n            }\n            if (this.parent.allowSorting) {\n                this.predefinedItems.responsiveSort = {\n                    id: this.gridID + '_' + 'responsivesort', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'ressort-icon', tooltipText: this.l10n.getConstant('Sort')\n                };\n            }\n        }\n        if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n            this.predefinedItems.responsiveBack = {\n                id: this.gridID + '_' + 'responsiveback', cssClass: 'e-gridresponsiveicons e-icons',\n                suffixIcon: 'e-' + 'resback-icon', visible: false\n            };\n        }\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n                if (this.parent.isReact) {\n                    this.parent.renderTemplates();\n                }\n            }\n            else {\n                this.toolbar.off('render-react-toolbar-template', this.addReactToolbarPortals);\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.toolbarCreated = function (isNormal) {\n        if (this.element.querySelector('.e-search-wrapper')) {\n            if (!this.parent.enableAdaptiveUI || isNormal) {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<div class=\"e-input-group e-search\" role=\"search\">\\\n                    <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n                    placeholder= \"' + this.l10n.getConstant('Search') + '\"/>\\\n                    <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n            else {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<span id=\"' + this.gridID\n                    + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n        }\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.toolbarCreated.bind(this)\n        });\n        this.toolbar.isReact = this.parent.isReact;\n        this.toolbar.on('render-react-toolbar-template', this.addReactToolbarPortals, this);\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.enableAdaptiveUI) {\n            this.element.classList.add('e-res-toolbar');\n        }\n        if (this.parent.toolbarTemplate) {\n            if (!isBlazor() && typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                var isReactCompiler = this.parent.isReact && typeof (this.parent.toolbarTemplate) !== 'string';\n                var ID = this.parent.element.id + 'toolbarTemplate';\n                if (isReactCompiler) {\n                    templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', ID, null, null, this.element);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n    };\n    Toolbar.prototype.addReactToolbarPortals = function (args) {\n        if (this.parent.isReact && args) {\n            this.parent.portals = this.parent.portals.concat(args);\n            this.parent.renderTemplates();\n        }\n    };\n    Toolbar.prototype.renderResponsiveSearch = function (isRender) {\n        if (isRender) {\n            this.toolbarCreated(true);\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isSearch);\n            this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n            var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n            right.classList.add('e-responsive-right');\n            if (this.parent.searchSettings) {\n                this.updateSearchBox();\n            }\n            this.searchBoxObj.searchFocus({ target: this.searchElement });\n            this.searchElement.focus();\n        }\n        else {\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n        }\n    };\n    Toolbar.prototype.refreshResponsiveToolbarItems = function (action) {\n        if (action === ResponsiveToolbarAction.isInitial) {\n            var id = this.parent.element.id;\n            var items = [id + '_edit', id + '_delete'];\n            var selectedRecords = this.parent.getSelectedRowIndexes();\n            var excludingItems = [id + '_responsiveback', id + '_update', id + '_cancel'];\n            for (var _i = 0, _a = this.toolbar.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n                if (toolbarEle) {\n                    if (items.indexOf(item.id) > -1) {\n                        if (selectedRecords.length) {\n                            toolbarEle.parentElement.classList.remove('e-hidden');\n                        }\n                        else {\n                            toolbarEle.parentElement.classList.add('e-hidden');\n                        }\n                    }\n                    else {\n                        if (excludingItems.indexOf(item.id) === -1) {\n                            toolbarEle.parentElement.classList.remove('e-hidden');\n                        }\n                        else {\n                            toolbarEle.parentElement.classList.add('e-hidden');\n                        }\n                    }\n                }\n            }\n            if (this.searchElement) {\n                var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n                right.classList.remove('e-responsive-right');\n                this.toolbarCreated(false);\n                this.unWireEvent();\n                this.searchElement = undefined;\n            }\n        }\n        if (action === ResponsiveToolbarAction.isSearch) {\n            var items = [this.parent.element.id + '_responsiveback', this.parent.element.id + '_search'];\n            for (var _b = 0, _c = this.toolbar.items; _b < _c.length; _b++) {\n                var item = _c[_b];\n                var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n                if (toolbarEle) {\n                    if (items.indexOf(item.id) > -1) {\n                        toolbarEle.parentElement.classList.remove('e-hidden');\n                    }\n                    else {\n                        toolbarEle.parentElement.classList.add('e-hidden');\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        if (edit.allowAdding) {\n            enableItems.push(this.gridID + '_add');\n        }\n        else {\n            disableItems.push(this.gridID + '_add');\n        }\n        if (edit.allowEditing && hasData) {\n            enableItems.push(this.gridID + '_edit');\n        }\n        else {\n            disableItems.push(this.gridID + '_edit');\n        }\n        if (edit.allowDeleting && hasData) {\n            enableItems.push(this.gridID + '_delete');\n        }\n        else {\n            disableItems.push(this.gridID + '_delete');\n        }\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.getElementsByClassName('e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                items.push(this.getItemObject('responsiveFilter'));\n            }\n            if (this.parent.allowSorting) {\n                items.push(this.getItemObject('responsiveSort'));\n            }\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n            items.push(this.getItemObject('responsiveBack'));\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     *\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = select('#' + item, this.element);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = args;\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton' && _this.searchElement) {\n                            _this.search();\n                        }\n                        else if (gObj.enableAdaptiveUI && !_this.searchElement\n                            && (toolbarargs.originalEvent.target.classList.contains('e-search-wrapper')\n                                || toolbarargs.originalEvent.target.id === gID + '_searchbutton')) {\n                            _this.renderResponsiveSearch(true);\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        /* eslint-disable */\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        /* eslint-enable */\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                    case gID + '_responsivefilter':\n                        gObj.showResponsiveCustomFilter();\n                        break;\n                    case gID + '_responsivesort':\n                        gObj.showResponsiveCustomSort();\n                        break;\n                    case gID + '_responsiveback':\n                        _this.renderResponsiveSearch(false);\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.reRenderToolbar = function () {\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.setFullScreenDialog, handler: this.reRenderToolbar },\n            { event: events.initialEnd, handler: this.render },\n            { event: events.uiUpdate, handler: this.onPropertyChanged },\n            { event: events.inBoundModelChanged, handler: this.updateSearchBox.bind(this) },\n            { event: events.modelChanged, handler: this.refreshToolbarItems },\n            { event: events.toolbarRefresh, handler: this.refreshToolbarItems },\n            { event: events.inBoundModelChanged, handler: this.modelChanged },\n            { event: events.dataBound, handler: this.refreshToolbarItems },\n            { event: events.click, handler: this.removeResponsiveSearch },\n            { event: events.rowModeChange, handler: this.reRenderToolbar }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.rowSelectedFunction = this.rowSelected.bind(this);\n        this.rowDeSelectedFunction = this.rowSelected.bind(this);\n        this.parent.addEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.addEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n        this.parent.removeEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.removeEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeResponsiveSearch = function (e) {\n        var target = e.target;\n        var isSearch = target.classList.contains('e-search-icon') || target.classList.contains('e-search-wrapper');\n        if (this.parent.enableAdaptiveUI && !isSearch && this.searchElement\n            && !parentsUntil(e.target, 'e-res-toolbar')) {\n            this.renderResponsiveSearch(false);\n        }\n    };\n    Toolbar.prototype.rowSelected = function () {\n        if (this.parent.enableAdaptiveUI) {\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend, addRemoveEventListener } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: literals.gridFooter });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.isFrozenGrid()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-left-footercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            var frDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-right-footercontent' });\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                innerDiv.appendChild(fDiv);\n                this.frozenContent = fDiv;\n            }\n            innerDiv.appendChild(mDiv);\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n            if (this.parent.getFrozenRightColumnsCount()) {\n                innerDiv.appendChild(frDiv);\n                this.frozenRightContent = frDiv;\n            }\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.' + literals.table);\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.isFrozenGrid()) {\n            var freezeTable = table.cloneNode(true);\n            var frTable = table.cloneNode(true);\n            if (frzCols) {\n                this.frozenContent.appendChild(freezeTable);\n                this.freezeTable = freezeTable;\n            }\n            if (this.parent.getFrozenRightColumnsCount()) {\n                remove(frTable.querySelector(literals.colGroup));\n                var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n                var frCol = (hdr.querySelector(literals.colGroup).cloneNode(true));\n                frTable.insertBefore(frCol, frTable.querySelector(literals.tbody));\n                this.frozenRightContent.appendChild(frTable);\n                this.frTable = frTable;\n            }\n            this.movableContent.appendChild(table);\n            remove(table.querySelector(literals.colGroup));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup)).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector(literals.tbody));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        // eslint-disable-next-line max-len\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (this.parent.isFrozenGrid()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            if (frzCols) {\n                this.freezeTable.tFoot.innerHTML = '';\n                this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n            }\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.frTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n            var movableLastCell = [].slice.call(this.getTable().getElementsByClassName('e-lastsummarycell'));\n            if (movableLastCell.length) {\n                for (var i = 0; i < movableLastCell.length; i++) {\n                    movableLastCell[i].style.borderRight = '0px';\n                }\n            }\n        }\n        // check freeze content have no row case\n        if (this.parent.isFrozenGrid()) {\n            var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent')\n                .getElementsByClassName('e-summaryrow'));\n            var frozenCnt = void 0;\n            if (frzCols) {\n                frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frozenCnt, movableCnt);\n                var frozenDiv = this.frozenContent;\n                if (!frozenDiv.offsetHeight) {\n                    frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (right) {\n                var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frCnt, movableCnt);\n                if (frozenCnt) {\n                    this.refreshHeight(frCnt, frozenCnt);\n                }\n                var frDiv = this.frTable;\n                if (!frDiv.offsetHeight) {\n                    frDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (this.parent.allowResizing) {\n                this.updateFooterTableWidth(this.getTable());\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n        for (var i = 0; i < frozenCnt.length; i++) {\n            var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n            var movableHeight = movableCnt[i].getBoundingClientRect().height;\n            if (frozenHeight < movableHeight) {\n                frozenCnt[i].classList.remove('e-hide');\n                frozenCnt[i].style.height = movableHeight + 'px';\n            }\n            else if (frozenHeight > movableHeight) {\n                movableCnt[i].classList.remove('e-hide');\n                movableCnt[i].style.height = frozenHeight + 'px';\n            }\n        }\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table\n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            // eslint-disable-next-line max-len\n            var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n            if (isXaxis) {\n                mheaderCol = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n            }\n            else {\n                mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n                this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector(literals.colGroup));\n            }\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.' + literals.movableContent).scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var left = this.parent.getVisibleFrozenLeftCount() || this.parent.getFrozenColumns();\n        var movable = this.parent.getVisibleMovableCount();\n        var right = this.parent.getVisibleFrozenRightCount();\n        var isDrag = this.parent.isRowDragable() && !(this.parent.getFrozenMode() === 'Right') ? 1 : 0;\n        if (left && index < (left + isDrag)) {\n            return this.freezeTable.querySelector(literals.colGroup).children[index];\n        }\n        else if (right && (index >= (left + movable + isDrag))) {\n            return this.frTable.querySelector(literals.colGroup).children[index - (left ? (left + movable + isDrag) :\n                (left + movable))];\n        }\n        return this.getColGroup().children[index - (left ? (left + isDrag) : left)];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: colGroupRefresh, handler: this.refreshCol },\n            { event: columnWidthChanged, handler: this.onWidthChange },\n            { event: scroll, handler: this.onScroll },\n            { event: columnVisibilityChanged, handler: this.columnVisibilityChanged },\n            { event: refreshFooterRenderer, handler: this.refreshFooterRenderer }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[i][key] === data[key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var isFiltered = false;\n        if (!this.parent.renderModule.data.isRemote() && this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            isFiltered = true;\n        }\n        var currentViewData = this.parent.dataSource instanceof Array ?\n            (isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource) : (this.parent.dataSource[gridData].json.length ?\n            this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords());\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords]) > -1) {\n                    isModified = true;\n                    // eslint-disable-next-line max-len\n                    dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords])]);\n                }\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[i]);\n                }\n            }\n            if (batchChanges[literals.addedRecords].length) {\n                for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n                    dataSource.push(batchChanges[literals.addedRecords][i]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[i].columns[j].type.toString();\n                data = dataSource;\n                agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n                aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n *\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            if (this.parent.rowRenderingMode === 'Vertical') {\n                node.style.display = 'none';\n            }\n            return true;\n        }\n        else {\n            if (this.parent.rowRenderingMode === 'Vertical') {\n                node.classList.add('e-lastsummarycell');\n            }\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        var tempID = '';\n        var gColumn = this.parent.getColumnByField(data[column.columnName].field);\n        if (!isNullOrUndefined(gColumn)) {\n            data[column.columnName].headerText = gColumn.headerText;\n            if (gColumn.isForeignColumn()) {\n                var fData = gColumn.columnData.filter(function (e) {\n                    return e[gColumn.foreignKeyField] === data[column.columnName].key;\n                })[0];\n                if (fData) {\n                    data[column.columnName].foreignKey = fData[gColumn.foreignKeyValue];\n                }\n            }\n        }\n        var isReactCompiler = this.parent.isReact && (column.footerTemplate ?\n            typeof (column.footerTemplate) !== 'string' : column.groupFooterTemplate ? typeof (column.groupFooterTemplate) !== 'string'\n            : column.groupCaptionTemplate ? typeof (column.groupCaptionTemplate) !== 'string' : false);\n        if (isReactCompiler) {\n            var prop = data[column.columnName];\n            if (tempObj.property === 'groupCaptionTemplate' || tempObj.property === 'groupFooterTemplate') {\n                var groupKey = 'groupKey';\n                var key = 'key';\n                prop[groupKey] = prop[key];\n            }\n            tempObj.fn(prop, this.parent, tempObj.property, tempID, null, null, node);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID));\n        }\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n *\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options, movableEle) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    if (_this.movableEle) {\n                        info.entered = right < _this.movableContainerRect.right;\n                        return right - _this.movableContainerRect.width <= _this.movableContainerRect.right;\n                    }\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    if (_this.movableEle) {\n                        return left + _this.movableContainerRect.width >= _this.movableContainerRect.left;\n                    }\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n        this.movableEle = movableEle;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n        if (this.options.movableContainer) {\n            this.movableContainerRect = this.options.movableContainer.getBoundingClientRect();\n            EventHandler.add(this.options.scrollbar, 'wheel', function () { return _this.fromWheel = true; }, this);\n            EventHandler.add(this.options.scrollbar, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n        }\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        if (this.movableContainerRect && (direction === 'left' || direction === 'right')) {\n            return info.check(this.movableEle.getBoundingClientRect(), info);\n        }\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        this.options.prevTop = this.options.prevLeft = 0;\n        return function (e) {\n            var top = _this.options.movableContainer ? _this.options.container.scrollTop : e.target.scrollTop;\n            var left = _this.options.movableContainer ? _this.options.scrollbar.scrollLeft : e.target.scrollLeft;\n            var direction = _this.options.prevTop < top ? 'down' : 'up';\n            direction = _this.options.prevLeft === left ? direction : _this.options.prevLeft < left ? 'right' : 'left';\n            _this.options.prevTop = top;\n            _this.options.prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                if (_this.movableEle && (direction === 'right' || direction === 'left')) {\n                    onEnterCallback(_this.movableEle, current, direction, { top: top, left: left }, _this.fromWheel, check);\n                }\n                else {\n                    onEnterCallback(_this.element, current, direction, { top: top, left: left }, _this.fromWheel, check);\n                }\n            }\n            if (check) {\n                var fn = debounced100;\n                //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.movableCache = {};\n        this.frozenRightCache = {};\n        this.rowCache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, e) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var info = e.virtualInfo = e.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        if ((isFrozen && (this.parent.getFrozenMode() !== literals.leftRight && !e.renderMovableContent)\n            || this.parent.getFrozenMode() === literals.leftRight && !e.renderMovableContent && !e.renderFrozenRightContent) || !isFrozen) {\n            this.checkAndResetCache(e.requestType);\n        }\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            return result = this.parent.vcRows;\n        }\n        if (this.parent.enableColumnVirtualization) {\n            for (var i = 0; i < info.blockIndexes.length; i++) {\n                if (this.isBlockAvailable(info.blockIndexes[i])) {\n                    this.cache[info.blockIndexes[i]] = this.rowModelGenerator.refreshRows(this.cache[info.blockIndexes[i]]);\n                }\n                if ((e.renderMovableContent && this.isMovableBlockAvailable(info.blockIndexes[i]))\n                    || (e.renderFrozenRightContent && this.isFrozenRightBlockAvailable(info.blockIndexes[i]))) {\n                    var cache = e.renderMovableContent\n                        ? this.movableCache : this.frozenRightCache;\n                    cache[info.blockIndexes[i]] = this.rowModelGenerator.refreshRows(cache[info.blockIndexes[i]]);\n                }\n            }\n        }\n        var values = info.blockIndexes;\n        for (var i = 0; i < values.length; i++) {\n            if (!this.isBlockAvailable(values[i])) {\n                var rows = this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: this.getStartIndex(values[i], data)\n                });\n                if (isGroupAdaptive(this.parent) && !this.parent.vcRows.length) {\n                    this.parent.vRows = rows;\n                    this.parent.vcRows = rows;\n                    this.parent.notify(events.refreshVirtualMaxPage, {});\n                }\n                var median = void 0;\n                if (isGroupAdaptive(this.parent)) {\n                    median = this.model.pageSize / 2;\n                    if (!this.isBlockAvailable(indexes[0])) {\n                        this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!this.isBlockAvailable(indexes[1])) {\n                        this.cache[indexes[1]] = rows.slice(median, this.model.pageSize);\n                    }\n                }\n                else {\n                    median = ~~Math.max(rows.length, this.model.pageSize) / 2;\n                    if (!this.isBlockAvailable(indexes[0])) {\n                        this.cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if (!this.isBlockAvailable(indexes[1])) {\n                        this.cache[indexes[1]] = rows.slice(median);\n                    }\n                }\n            }\n            if (this.parent.groupSettings.columns.length && !xAxis && this.cache[values[i]]) {\n                this.cache[values[i]] = this.updateGroupRow(this.cache[values[i]], values[i]);\n            }\n            if ((e.renderMovableContent && !this.isMovableBlockAvailable(values[i]))\n                || (e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(values[i]))) {\n                var cache = e.renderMovableContent\n                    ? this.movableCache : this.frozenRightCache;\n                var rows = this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: this.getStartIndex(values[i], data)\n                });\n                var median = ~~Math.max(rows.length, this.model.pageSize) / 2;\n                if ((e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(indexes[0]))\n                    || (e.renderMovableContent && !this.isMovableBlockAvailable(indexes[0]))) {\n                    cache[indexes[0]] = rows.slice(0, median);\n                }\n                if ((e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(indexes[1]))\n                    || (e.renderMovableContent && !this.isMovableBlockAvailable(indexes[1]))) {\n                    cache[indexes[1]] = rows.slice(median);\n                }\n            }\n            if (!e.renderMovableContent && !e.renderFrozenRightContent && this.cache[values[i]]) {\n                result.push.apply(result, this.cache[values[i]]);\n            }\n            else {\n                var cache = e.renderMovableContent\n                    ? this.movableCache : this.frozenRightCache;\n                if (cache[values[i]]) {\n                    result.push.apply(result, cache[values[i]]);\n                }\n            }\n            if (this.isBlockAvailable(values[i])) {\n                loadedBlocks.push(values[i]);\n            }\n        }\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else if (isFrozen) {\n            if ((e.renderMovableContent && (this.parent.getFrozenMode() === 'Left'\n                || this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenColumns())) || e.renderFrozenRightContent) {\n                this.parent.currentViewData = result.map(function (m) { return m.data; });\n            }\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.isMovableBlockAvailable = function (value) {\n        return value in this.movableCache;\n    };\n    VirtualRowModelGenerator.prototype.isFrozenRightBlockAvailable = function (value) {\n        return value in this.frozenRightCache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().querySelector('.' + literals.headerContent); }\n        if (this.parent.isFrozenGrid()) {\n            content = content.querySelector('.' + literals.movableHeader);\n        }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        this.addFrozenIndex(indexes);\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.addFrozenIndex = function (indexes) {\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization && indexes[0] === 0) {\n            for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n                indexes.push(indexes[indexes.length - 1] + 1);\n            }\n        }\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var actions = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'];\n        if (this.parent.getFrozenColumns() && this.parent.frozenRows && this.parent.enableColumnVirtualization && action === 'reorder') {\n            actions.splice(actions.indexOf(action), 1);\n        }\n        var clear = actions.some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n            this.movableCache = {};\n            this.frozenRightCache = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        var c = this.parent.groupSettings.columns;\n        for (var i = 0; i < c.length; i++) {\n            this.cOffsets[i] = (this.cOffsets[i - 1] | 0) + 30;\n        }\n        // eslint-disable-next-line prefer-spread\n        var blocks = Array.apply(null, Array(cLen)).map(function () { return col++; });\n        for (var j = 0; j < blocks.length; j++) {\n            blocks[j] = blocks[j] + gLen;\n            this.cOffsets[blocks[j]] = (this.cOffsets[blocks[j] - 1] | 0) + (isVisible(cols[j]) ? parseInt(cols[j].width, 10) : 0);\n        }\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var currentFirst = current[0];\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            if (Number(keys[i]) < block) {\n                rows = rows.concat(this.cache[keys[i]]);\n            }\n        }\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined\n                    && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            rows = rows.concat(this.cache[keys[i]]);\n        }\n        return rows;\n    };\n    VirtualRowModelGenerator.prototype.generateCells = function () {\n        var cells = [];\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            cells.push(this.rowModelGenerator.generateCell(cols[i]));\n        }\n        return cells;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues, resetRowObjectIndex } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualContentRenderer\n *\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        /** @hidden */\n        _this.startIndex = 0;\n        _this.preStartIndex = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        /** @hidden */\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        /** @hidden */\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.isBottom = false;\n        _this.rndrCount = 0;\n        _this.empty = undefined;\n        _this.isCancel = false;\n        _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save'];\n        _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n        /** @hidden */\n        _this.virtualData = {};\n        _this.emptyRowData = {};\n        _this.vfColIndex = [];\n        _this.frzIdx = 1;\n        _this.orderRowObj = [];\n        _this.mvbOrderRowObj = [];\n        _this.frOrderRowObj = [];\n        _this.isContextMenuOpen = false;\n        _this.isSelectionScroll = false;\n        _this.validationCheck = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().querySelector('.' + literals.content);\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n        var blockIndex = args.virtualInfo.blockIndexes;\n        var colsIndex = args.virtualInfo.columnIndexes;\n        var page = args.virtualInfo.page;\n        args.virtualInfo.blockIndexes = [1, 2];\n        args.virtualInfo.page = 1;\n        if (!args.renderMovableContent) {\n            args.virtualInfo.columnIndexes = [];\n        }\n        var recordslength = this.parent.getCurrentViewRecords().length;\n        var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n        var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n        args.virtualInfo.blockIndexes = blockIndex;\n        args.virtualInfo.columnIndexes = colsIndex;\n        args.virtualInfo.page = page;\n        return virtualRows.splice(0, this.parent.frozenRows);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        this.scrollAfterEdit();\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.' + literals.content) || this.content === document.activeElement;\n        }\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isGroupAdaptive(this.parent)) {\n            if ((info.axis === 'Y' && viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                && scrollArgs.direction === 'up' && viewInfo.blockIndexes[viewInfo.blockIndexes.length - 1] !== 2) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            if (Browser.isIE) {\n                this.parent.hideSpinner();\n            }\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            if (info.axis === 'Y') {\n                this.restoreEdit();\n            }\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.requestType = 'virtualscroll';\n        this.parent.notify(viewInfo.event, {\n            requestType: 'virtualscroll', virtualInfo: viewInfo,\n            focusElement: scrollArgs.focusElement\n        });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var isBlockAdded = false;\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.preStartIndex, endIndex: this.preEndIndex };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        if (isBlockAdded) {\n            infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n        }\n        if (this.activeKey === 'downArrow') {\n            var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n            if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n                infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n            }\n        }\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.setKeyboardNavIndex = function () {\n        this.blazorDataLoad = true;\n        if (this.activeKey === 'downArrow' || this.activeKey === 'upArrow') {\n            this.blzRowIndex = this.activeKey === 'downArrow' ? this.rowIndex + 1 : this.rowIndex - 1;\n            document.activeElement.blur();\n        }\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n            // To avoid frozen content white space issue\n            if (info.sentinelInfo.axis === 'X' || (info.sentinelInfo.axis === 'Y' && (info.page === this.prevInfo.page))) {\n                indexes = this.prevInfo.blockIndexes;\n            }\n        }\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    // tslint:disable-next-line:max-func-body-length\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var _this = this;\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var isFrozen = this.parent.isFrozenGrid();\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var colVFtable = this.parent.enableColumnVirtualization && isFrozen;\n        this.checkFirstBlockColIndexes(e);\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        if (colVFtable && info.columnIndexes[0] === frzCols) {\n            cBlock = (info.columnIndexes[0] - frzCols) - 1;\n        }\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        if (!this.requestTypes.some(function (value) { return value === _this.requestType; })) {\n            var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n            this.virtualEle.adjustTable(colVFtable ? 0 : cOffset, translate);\n            if (colVFtable) {\n                this.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(colVFtable ? 0 : cOffset, 0);\n            if (colVFtable) {\n                this.header.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            if (colVFtable) {\n                this.header.virtualEle.setMovableWrapperWidth(width);\n            }\n            else {\n                this.header.virtualEle.setWrapperWidth(width);\n            }\n        }\n        if (colVFtable) {\n            this.virtualEle.setMovableWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        else {\n            this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody;\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                tbody = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n            }\n            else if (!e.renderMovableContent) {\n                tbody = this.parent.getFrozenVirtualContent().querySelector(literals.tbody);\n            }\n            else if (e.renderMovableContent) {\n                tbody = this.parent.getMovableVirtualContent().querySelector(literals.tbody);\n            }\n        }\n        else {\n            tbody = this.parent.element.querySelector('.' + literals.content).querySelector(literals.tbody);\n        }\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (!isReact) {\n            target = this.parent.createElement(literals.tbody);\n            target.appendChild(newChild);\n        }\n        else {\n            target = newChild;\n        }\n        if (this.parent.frozenRows && e.requestType === 'virtualscroll' && this.parent.pageSettings.currentPage === 1) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                target.children[0].remove();\n            }\n        }\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.' + literals.table).appendChild(target);\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            }\n            else if (!e.renderMovableContent) {\n                this.parent.getFrozenVirtualContent().querySelector('.' + literals.table).appendChild(target);\n            }\n            else if (e.renderMovableContent) {\n                this.parent.getMovableVirtualContent().querySelector('.' + literals.table).appendChild(target);\n                if (this.parent.getFrozenMode() !== literals.leftRight) {\n                    this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n                }\n            }\n            if (this.vfColIndex.length) {\n                e.virtualInfo.columnIndexes = info.columnIndexes = extend([], this.vfColIndex);\n                this.vfColIndex = e.renderMovableContent ? [] : this.vfColIndex;\n            }\n        }\n        else {\n            this.getTable().appendChild(target);\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n            this.content.focus();\n        }\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        if (this.isBottom) {\n            this.isBottom = false;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage === lastPage) && blocks.length === 1) {\n            this.isBottom = true;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n        }\n        if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.parent.notify(events.autoCol, {});\n        }\n        this.focusCell(e);\n        this.restoreEdit(e);\n        this.restoreAdd(e);\n        this.ensureSelectedRowPosition();\n        this.validationScrollLeft(e, isFrozen);\n        if (!this.initialRowTop) {\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n        }\n    };\n    VirtualContentRenderer.prototype.validationScrollLeft = function (e, isFrozen) {\n        var left = this.parent.getFrozenColumns();\n        var table = this.parent.getFrozenMode();\n        var trigger = !isFrozen || e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent\n            : e.renderFrozenRightContent);\n        if (this.validationCheck && trigger) {\n            if (this.validationCol) {\n                var offset = this.vgenerator.cOffsets[(this.validationCol.index - this.parent.getVisibleFrozenColumns()) - 1];\n                this.validationCol = null;\n                if (this.parent.isFrozenGrid()) {\n                    this.movableContent.scrollLeft = offset;\n                }\n                else {\n                    this.content.scrollLeft = offset;\n                }\n            }\n            else {\n                this.validationCheck = false;\n                this.parent.editModule.editFormValidate();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.ensureSelectedRowPosition = function () {\n        if (!this.isSelection && this.isSelectionScroll && !isNullOrUndefined(this.selectRowIndex)) {\n            this.isSelectionScroll = false;\n            var row = this.parent.getRowByIndex(this.selectRowIndex);\n            if (row && !this.isRowInView(row)) {\n                this.rowSelected({ rowIndex: this.selectRowIndex, row: row }, true);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.checkFirstBlockColIndexes = function (e) {\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && e.virtualInfo.columnIndexes[0] === 0) {\n            var indexes = [];\n            var frozenCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n            if (!e.renderMovableContent && e.virtualInfo.columnIndexes.length > frozenCols) {\n                this.vfColIndex = e.virtualInfo.columnIndexes;\n                for (var i = 0; i < frozenCols; i++) {\n                    indexes.push(i);\n                }\n                e.virtualInfo.columnIndexes = indexes;\n            }\n            else if (e.renderMovableContent) {\n                if (!this.vfColIndex.length) {\n                    this.vfColIndex = extend([], e.virtualInfo.columnIndexes);\n                }\n                e.virtualInfo.columnIndexes = extend([], this.vfColIndex);\n                e.virtualInfo.columnIndexes.splice(0, frozenCols);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.focusCell = function (e) {\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            return;\n        }\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var cell = row.cells[this.cellIndex];\n        cell.focus({ preventScroll: true });\n        this.parent.selectRow(parseInt(row.getAttribute(literals.ariaRowIndex), 10));\n        this.activeKey = this.empty;\n    };\n    VirtualContentRenderer.prototype.restoreEdit = function (e) {\n        if (this.isNormaledit) {\n            var left = this.parent.getFrozenColumns();\n            var isFrozen = e && this.parent.isFrozenGrid();\n            var table = this.parent.getFrozenMode();\n            var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent\n                : e.renderFrozenRightContent);\n            if ((!isFrozen || (isFrozen && trigger)) && this.parent.editSettings.allowEditing\n                && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n                var row = this.getRowByIndex(this.editedRowIndex);\n                var content = this.content;\n                var keys = Object.keys(this.virtualData);\n                var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n                if (isFrozen && isXaxis) {\n                    row = this.parent.getMovableRowByIndex(this.editedRowIndex);\n                    content = this.movableContent;\n                }\n                if (keys.length && row && !content.querySelector('.' + literals.editedRow)) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (isXaxis || (top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight())) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n                if (row && this.content.querySelector('.' + literals.editedRow) && !keys.length) {\n                    var rowData = extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n            this.restoreAdd(e);\n        }\n    };\n    VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n        var editForms = [].slice.call(this.parent.element.getElementsByClassName('e-gridform'));\n        var isFormDestroyed = this.parent.editModule && this.parent.editModule.formObj\n            && this.parent.editModule.formObj.isDestroyed;\n        if (!isFormDestroyed) {\n            for (var i = 0; i < editForms.length; i++) {\n                rowData = this.parent.editModule.getCurrentEditedData(editForms[i], rowData);\n            }\n        }\n        return rowData;\n    };\n    VirtualContentRenderer.prototype.restoreAdd = function (e) {\n        var left = this.parent.getFrozenColumns();\n        var isFrozen = e && this.parent.isFrozenGrid();\n        var table = this.parent.getFrozenMode();\n        var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n        var startAdd = isXaxis && isFrozen ? !(this.parent.getMovableVirtualHeader().querySelector('.' + literals.addedRow)\n            || this.parent.getMovableVirtualContent().querySelector('.' + literals.addedRow)) : !this.parent.element.querySelector('.' + literals.addedRow);\n        var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n        if ((!isFrozen || (isFrozen && trigger)) && this.isNormaledit && this.isAdd && startAdd) {\n            var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n            var isBottom = this.parent.editSettings.newRowPosition === 'Bottom'\n                && this.parent.pageSettings.currentPage === this.maxPage;\n            if (isTop || isBottom) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    /**\n     * @param {number} height - specifies the height\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        if (this.parent.isFrozenGrid()) {\n            var virtualHeightTemp = (this.parent.pageSettings.currentPage === 1 && Object.keys(this.offsets).length <= 2) ?\n                this.offsets[1] : this.offsets[this.getTotalBlocks() - 2];\n            var scrollableElementHeight = this.content.clientHeight;\n            virtualHeightTemp = virtualHeightTemp > scrollableElementHeight ? virtualHeightTemp : 0;\n            // To overcome the white space issue in last page (instead of position absolute)\n            this.virtualEle.setVirtualHeight(virtualHeightTemp, width);\n        }\n        else {\n            var virtualHeight = (this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() :\n                this.getTotalBlocks()]);\n            this.virtualEle.setVirtualHeight(virtualHeight, width);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n            if (this.parent.isFrozenGrid()) {\n                this.virtualEle.setMovableVirtualHeight(1, width);\n                this.header.virtualEle.setMovableVirtualHeight(1, width);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = iOffset + 1;\n                }\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        if (result + blockHeight > this.offsets[totalBlocks]) {\n            result -= (result + blockHeight) - this.offsets[totalBlocks];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var colVFtable = _this.parent.enableColumnVirtualization && _this.parent.isFrozenGrid();\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            if (xAxis && !colVFtable) {\n                var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n                var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n                x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n            }\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(colVFtable ? 0 : x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (colVFtable) {\n                _this.virtualEle.adjustMovableTable(x, 0);\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(colVFtable ? 0 : x, 0);\n                if (colVFtable) {\n                    _this.header.virtualEle.adjustMovableTable(x, 0);\n                }\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        this.parent.notify(events.refreshVirtualFrozenHeight, {});\n        if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n        else {\n            this.activeKey = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.rowSelected = function (args, isSelection) {\n        if ((this.isSelection || isSelection) && !this.isLastBlockRow(args.rowIndex)) {\n            var transform = getTransformValues(this.content.firstElementChild);\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            var rowTop = args.row.getBoundingClientRect().top - gridTop;\n            var height = this.content.getBoundingClientRect().height;\n            var isBottom = height < rowTop;\n            var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n            var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n            this.virtualEle.adjustTable(transform.width, translateY);\n            var lastRowTop = this.content.querySelector('tbody').lastElementChild.getBoundingClientRect().top - gridTop;\n            if (lastRowTop < height) {\n                translateY = translateY + (height - (args.row.getBoundingClientRect().top - gridTop));\n                this.virtualEle.adjustTable(transform.width, translateY - (this.parent.getRowHeight() / 2));\n            }\n        }\n        this.isSelection = false;\n    };\n    VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var startIdx = (this.maxPage * this.parent.pageSettings.pageSize) - visibleRowCount;\n        return index >= startIdx;\n    };\n    VirtualContentRenderer.prototype.refreshVirtualCacheOnRowDD = function (args) {\n        var blockSize = this.getBlockSize();\n        var currentblk = Math.ceil((args.objIndex + 1) / blockSize);\n        var secondBlock = args.objIndex - args.startIndex >= blockSize ? blockSize : 0;\n        var thirdBlock = args.objIndex - args.startIndex >= (blockSize + blockSize) ? blockSize : 0;\n        this.orderRowObj.push(this.vgenerator.cache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n        if (this.parent.isFrozenGrid()) {\n            this.mvbOrderRowObj.push(this.vgenerator.movableCache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                // eslint-disable-next-line\n                this.frOrderRowObj.push(this.vgenerator.frozenRightCache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n            }\n        }\n        if (args.end === true) {\n            var currentBlocks = this.currentInfo.blockIndexes;\n            if (!currentBlocks) {\n                currentBlocks = [1, 2];\n            }\n            resetRowObjectIndex(this.parent, this.orderRowObj, args.startIndex);\n            if (this.parent.isFrozenGrid()) {\n                resetRowObjectIndex(this.parent, this.mvbOrderRowObj, args.startIndex);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    resetRowObjectIndex(this.parent, this.frOrderRowObj, args.startIndex);\n                }\n            }\n            for (var i = 0; i < currentBlocks.length; i++) {\n                this.vgenerator.cache[currentBlocks[i]] = this.orderRowObj.splice(0, blockSize);\n                if (this.parent.isFrozenGrid()) {\n                    this.vgenerator.movableCache[currentBlocks[i]] = this.mvbOrderRowObj.splice(0, blockSize);\n                    if (this.parent.getFrozenMode() === literals.leftRight) {\n                        this.vgenerator.frozenRightCache[currentBlocks[i]] = this.frOrderRowObj.splice(0, blockSize);\n                    }\n                }\n            }\n            this.orderRowObj = [];\n            this.orderRowObj = [];\n            this.mvbOrderRowObj = [];\n        }\n    };\n    VirtualContentRenderer.prototype.refreshMaxPage = function () {\n        if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n            this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n        }\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.parent[action](events.virtaulCellFocus, this.virtualCellFocus, this);\n        this.parent[action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent[action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n        this.parent[action](events.virtualScrollEdit, this.restoreEdit, this);\n        this.parent[action](events.virtualScrollEditSuccess, this.editSuccess, this);\n        this.parent[action](events.refreshVirtualCache, this.refreshCache, this);\n        this.parent[action](events.editReset, this.resetIsedit, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.virtualScrollEditCancel, this.editCancel, this);\n        this.parent[action](events.refreshVirtualCacheOnRowDD, this.refreshVirtualCacheOnRowDD, this);\n        this.parent[action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n        this.parent[action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n        this.parent[action](events.resetVirtualFocus, this.resetVirtualFocus, this);\n        this.parent[action](events.refreshVirtualEditFormCells, this.refreshCells, this);\n        this.parent[action](events.scrollToEdit, this.scrollToEdit, this);\n        var event = this.actions;\n        for (var i = 0; i < event.length; i++) {\n            this.parent[action](event[i] + \"-begin\", this.onActionBegin, this);\n        }\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.scrollToEdit = function (col) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var allowScroll = true;\n        this.validationCheck = true;\n        if (this.isAdd && this.content.scrollTop > 0) {\n            allowScroll = false;\n            var keys = Object.keys(this.offsets);\n            this.content.scrollTop = this.parent.editSettings.newRowPosition === 'Top' ? 0 : this.offsets[keys.length - 1];\n        }\n        var row = this.parent.getRowByIndex(this.editedRowIndex);\n        if (!row && !isNullOrUndefined(this.editedRowIndex)) {\n            if (!row || !this.isRowInView(row)) {\n                var rowIndex = this.parent.getRowHeight();\n                var scrollTop = this.editedRowIndex * rowIndex;\n                if (!isNullOrUndefined(scrollTop)) {\n                    allowScroll = false;\n                    this.content.scrollTop = scrollTop;\n                }\n            }\n        }\n        if (col && allowScroll) {\n            var offset = this.vgenerator.cOffsets[(col.index - this.parent.getVisibleFrozenColumns()) - 1];\n            if (!this.parent.enableColumnVirtualization) {\n                var header = this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid=\"' + col.uid + '\"]');\n                offset = isFrozen ? header.parentElement.offsetLeft\n                    - this.parent.getFrozenVirtualHeader().offsetWidth\n                    : header.parentElement.offsetLeft;\n            }\n            if (isFrozen) {\n                this.parent.getMovableVirtualContent().scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n            }\n            else {\n                this.content.scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n            }\n        }\n        if (col && !allowScroll) {\n            this.validationCol = col;\n        }\n    };\n    VirtualContentRenderer.prototype.refreshCells = function (rowObj) {\n        rowObj.cells = this.vgenerator.generateCells();\n    };\n    VirtualContentRenderer.prototype.resetVirtualFocus = function (e) {\n        this.isCancel = e.isCancel;\n    };\n    /**\n     * @param {Object} data - specifies the data\n     * @param {Object} data.virtualData -specifies the data\n     * @param {boolean} data.isAdd - specifies isAdd\n     * @param {boolean} data.isCancel - specifies boolean in cancel\n     * @param {boolean} data.isScroll - specifies boolean for scroll\n     * @returns {void}\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getVirtualData = function (data) {\n        if (this.isNormaledit) {\n            var error = this.parent.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n            var keys = Object.keys(this.virtualData);\n            data.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n            if (error) {\n                return;\n            }\n            this.virtualData = keys.length ? this.virtualData : data.virtualData;\n            this.getVirtualEditedData(this.virtualData);\n            data.virtualData = this.virtualData;\n            data.isAdd = this.isAdd;\n            data.isCancel = this.isCancel;\n        }\n    };\n    VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n        this.isContextMenuOpen = args.isOpen;\n    };\n    VirtualContentRenderer.prototype.editCancel = function (args) {\n        var dataIndex = getEditedDataIndex(this.parent, args.data);\n        if (!isNullOrUndefined(dataIndex)) {\n            args.data = this.parent.getCurrentViewRecords()[dataIndex];\n        }\n    };\n    VirtualContentRenderer.prototype.editSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewData(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n        var dataIndex = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(dataIndex)) {\n            this.parent.getCurrentViewRecords()[dataIndex] = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionBegin = function (args) {\n        if (args.requestType !== 'virtualscroll') {\n            this.requestType = args.requestType;\n        }\n        if (!args.cancel) {\n            this.parent.notify(events.refreshVirtualFrozenRows, args);\n        }\n    };\n    VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n        // To decide the action (select or scroll), when using arrow keys for cell focus\n        var ele = document.activeElement;\n        if (ele.classList.contains(literals.rowCell)\n            && e && (e.action === 'upArrow' || e.action === 'downArrow')) {\n            var rowIndex = parseInt(ele.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            if (e && (e.action === 'downArrow' || e.action === 'upArrow')) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                if (e.action === 'downArrow') {\n                    rowIndex += 1;\n                }\n                else {\n                    rowIndex -= 1;\n                }\n                this.rowIndex = rowIndex;\n                this.cellIndex = parseInt(ele.getAttribute(literals.ariaColIndex), 10);\n                var row = this.parent.getRowByIndex(rowIndex);\n                var page = this.parent.pageSettings.currentPage;\n                var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n                var emptyRow = false;\n                if (isNullOrUndefined(row)) {\n                    emptyRow = true;\n                    if ((e.action === 'downArrow' && page === this.maxPage - 1) || (e.action === 'upArrow' && page === 1)) {\n                        emptyRow = false;\n                    }\n                }\n                if (emptyRow || (ensureLastRow(row, this.parent) && e.action === 'downArrow')\n                    || (ensureFirstRow(row, this.parent.getRowHeight() * 2) && e.action === 'upArrow')) {\n                    this.activeKey = e.action;\n                    scrollEle.scrollTop = e.action === 'downArrow' ?\n                        (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n                }\n                else {\n                    this.activeKey = this.empty;\n                }\n                this.parent.selectRow(rowIndex);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.editActionBegin = function (e) {\n        this.editedRowIndex = e.index;\n        var rowData = extend({}, this.getRowObjectByIndex(e.index));\n        var keys = Object.keys(this.virtualData);\n        e.data = keys.length ? this.virtualData : rowData;\n        e.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n    };\n    VirtualContentRenderer.prototype.refreshCache = function (data) {\n        var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n        var index = this.editedRowIndex - ((block - 1) * this.getBlockSize());\n        this.vgenerator.cache[block][index].data = data;\n        if (this.vgenerator.movableCache[block]) {\n            this.vgenerator.movableCache[block][index].data = data;\n        }\n        if (this.vgenerator.frozenRightCache[block]) {\n            this.vgenerator.frozenRightCache[block][index].data = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionComplete = function (args) {\n        var editRequestTypes = ['delete', 'save', 'cancel'];\n        var dataActionRequestTypes = ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'];\n        if (editRequestTypes.some(function (value) { return value === args.requestType; })) {\n            this.refreshOffsets();\n            if (this.parent.isFrozenGrid()) {\n                this.vgenerator.refreshColOffsets();\n                this.parent.contentModule.virtualRenderer.virtualEle.setVirtualHeight();\n            }\n            else {\n                this.refreshVirtualElement();\n            }\n        }\n        if (this.isNormaledit && (dataActionRequestTypes.some(function (value) { return value === args.requestType; })\n            || editRequestTypes.some(function (value) { return value === args.requestType; }))) {\n            this.isCancel = true;\n            this.isAdd = false;\n            this.editedRowIndex = this.empty;\n            this.virtualData = {};\n            if (this.parent.editModule) {\n                this.parent.editModule.editModule.previousData = undefined;\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.requestType === 'filterafteropen'\n            && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n            this.parent.resetFilterDlgPosition(args.columnName);\n        }\n    };\n    VirtualContentRenderer.prototype.resetIsedit = function () {\n        if (this.parent.enableVirtualization && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length)\n                || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n        if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n            if (this.parent.element.querySelector('.e-gridform')) {\n                var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n                var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n                if (editForm || addForm) {\n                    var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex))\n                        : extend({}, this.emptyRowData);\n                    var keys = Object.keys(this.virtualData);\n                    this.virtualData = keys.length ? this.getVirtualEditedData(this.virtualData) : this.getVirtualEditedData(rowData);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.columnModel.filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    VirtualContentRenderer.prototype.addActionBegin = function (args) {\n        if (this.isNormaledit) {\n            if (!Object.keys(this.emptyRowData).length) {\n                this.createEmptyRowdata();\n            }\n            this.isAdd = true;\n            var page = this.parent.pageSettings.currentPage;\n            if (!this.parent.frozenRows && this.content.scrollTop > 0 && this.parent.editSettings.newRowPosition === 'Top') {\n                this.isAdd = true;\n                this.onActionBegin();\n                args.startEdit = false;\n                this.content.scrollTop = 0;\n            }\n            if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.isAdd = true;\n                this.parent.setProperties({ pageSettings: { currentPage: this.maxPage - 1 } }, true);\n                args.startEdit = false;\n                this.content.scrollTop = this.offsets[this.offsetKeys.length];\n            }\n        }\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Object} returns the object\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n        var data = this.getRowCollection(index, false, true);\n        return data;\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n        if (action !== 'virtualscroll') {\n            this.isAdd = false;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var row;\n        if (isGroupAdaptive(this.parent)) {\n            row = this.parent.getDataRows()[index];\n        }\n        if (this.prevInfo) {\n            row = this.getRowCollection(index, false);\n        }\n        return row;\n    };\n    VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, true);\n    };\n    VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false, false, true);\n    };\n    VirtualContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        var rowCollection = isMovable ? this.parent.getMovableDataRows() : this.parent.getDataRows();\n        rowCollection = isFrozenRight ? this.parent.getFrozenRightDataRows() : rowCollection;\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        var selectedRow = collection[index - startIdx];\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            if (!isRowObject) {\n                selectedRow = index <= this.parent.frozenRows ? rowCollection[index]\n                    : rowCollection[(index - startIdx) + this.parent.frozenRows];\n            }\n            else {\n                selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[index].data : selectedRow;\n            }\n        }\n        return selectedRow;\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        // eslint-disable-next-line prefer-spread\n        var blocks = Array.apply(null, Array(total)).map(function () { return ++row; });\n        for (var i = 0; i < blocks.length; i++) {\n            var tmp = (this.vgenerator.cache[blocks[i]] || []).length;\n            var rem = !isGroupAdaptive(this.parent) ? this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(this.parent) && blocks[i] in this.vgenerator.cache ?\n                tmp * this.parent.getRowHeight() : rem && blocks[i] === total ? rem * this.parent.getRowHeight() :\n                this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            this.offsets[blocks[i]] = (this.offsets[blocks[i] - 1] | 0) + size;\n            this.tmpOffsets[blocks[i]] = this.offsets[blocks[i] - 1] | 0;\n        }\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fcntColGrp;\n        var mcntColGrp;\n        if (frozenCols) {\n            fcntColGrp = [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('col'));\n            mcntColGrp = [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('col'));\n        }\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var isRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            isRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            var colGrp = void 0;\n            if (fcntColGrp && mcntColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mcntColGrp;\n                    tr = this.parent.getMovableRows();\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fcntColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            }\n            if (!isRefresh) {\n                var width = void 0;\n                if (column.visible) {\n                    width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    if (this.parent.enableColumnVirtualization) {\n                        this.virtualEle.setWrapperWidth(width + '');\n                    }\n                    this.refreshVirtualElement();\n                }\n                else {\n                    isRefresh = true;\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (isRefresh || frozenCols) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        var _this = this;\n        args.isAvailable = args.selectedIndex < this.count;\n        if (args.isAvailable && !this.isContextMenuOpen && this.activeKey !== 'upArrow'\n            && this.activeKey !== 'downArrow' && !this.isSelection && !this.requestTypes.some(function (value) { return value === _this.requestType; })\n            && !this.parent.selectionModule.isInteracted) {\n            var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n            var rowHeight = this.parent.getRowHeight();\n            if (!selectedRow || !this.isRowInView(selectedRow)) {\n                this.isSelection = true;\n                this.selectedRowIndex = args.selectedIndex;\n                var scrollTop = (args.selectedIndex + 1) * rowHeight;\n                if (!isNullOrUndefined(scrollTop)) {\n                    var direction = this.content.scrollTop < scrollTop ? 'down' : 'up';\n                    this.selectRowIndex = args.selectedIndex;\n                    this.content.scrollTop = scrollTop;\n                    this.isSelectionScroll = this.observer.check(direction);\n                }\n            }\n        }\n        if (this.parent.isFrozenGrid() && this.requestType) {\n            if (this.parent.getTablesCount() === this.frzIdx) {\n                this.requestType = this.empty;\n                this.frzIdx = 1;\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.requestType = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.isRowInView = function (row) {\n        var top = row.getBoundingClientRect().top - this.parent.element.getBoundingClientRect().top;\n        return (top >= this.initialRowTop && top <= this.content.offsetHeight);\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.isMovable = false;\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        if (!this.isMovable) {\n            this.virtualEle.wrapper.appendChild(table);\n        }\n        else {\n            this.virtualEle.movableWrapper.appendChild(table);\n            this.isMovable = false;\n        }\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.isMovable = this.parent.isFrozenGrid();\n        this.setFrozenTable(this.parent.getMovableVirtualContent());\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.refreshUI.call(this);\n        this.setFrozenTable(this.parent.getFrozenVirtualContent());\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var needFullRefresh;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fhdrColGrp;\n        var mhdrColGrp;\n        if (frozenCols) {\n            fhdrColGrp = [].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll('col'));\n            mhdrColGrp = [].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll('col'));\n        }\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            var colGrp = void 0;\n            if (fhdrColGrp && mhdrColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mhdrColGrp;\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fhdrColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            else {\n                needFullRefresh = true;\n            }\n            if (needFullRefresh && !frozenCols) {\n                this.refreshUI();\n            }\n        }\n        if (frozenCols) {\n            this.parent.notify(events.columnPositionChanged, {});\n        }\n    };\n    VirtualHeaderRenderer.prototype.setFrozenTable = function (content) {\n        if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization\n            && this.parent.contentModule.isXaxis()) {\n            this.parent.contentModule\n                .setTable(content.querySelector('.' + literals.table));\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var table = this.getTable();\n        if (frozenCols && col.getFreezeTableName() === 'movable') {\n            table = this.parent.getMovableVirtualHeader().querySelector('.' + literals.table);\n        }\n        for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                if (displayVal === '') {\n                    removeClass([ele], 'e-hide');\n                }\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) + \"; display: flex\" });\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n        this.placeholder = createElement('div', { className: 'e-virtualtrack' });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderMovableWrapper = function (height) {\n        this.movableWrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.movableContent.appendChild(this.movableWrapper);\n    };\n    VirtualElementHandler.prototype.renderMovablePlaceHolder = function () {\n        this.movablePlaceholder = createElement('div', { className: 'e-virtualtrack' });\n        this.movableContent.appendChild(this.movablePlaceholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.adjustMovableTable = function (xValue, yValue) {\n        this.movableWrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setMovableWrapperWidth = function (width, full) {\n        this.movableWrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setMovableVirtualHeight = function (height, width) {\n        this.movablePlaceholder.style.height = height + \"px\";\n        this.movablePlaceholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n        wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { extend, getValue, isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { setComplexFieldID, setValidationRuels, getColumnModelByUid } from '../base/util';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (!this.parent.isFrozenGrid()) {\n            if (this.parent.enableColumnVirtualization) {\n                renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n            }\n            renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        }\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n        this.parent.on(events.createVirtualValidationForm, this.createVirtualValidationForm, this);\n        this.parent.on(events.validateVirtualForm, this.virtualEditFormValidation, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n        this.parent.off(events.createVirtualValidationForm, this.createVirtualValidationForm);\n        this.parent.off(events.validateVirtualForm, this.virtualEditFormValidation);\n    };\n    VirtualScroll.prototype.getCurrentEditedData = function (prevData) {\n        var data = {\n            virtualData: extend({}, {}, prevData, true), isAdd: false, isScroll: false, endEdit: true\n        };\n        this.parent.notify(events.getVirtualData, data);\n        return data.virtualData;\n    };\n    VirtualScroll.prototype.createVirtualValidationForm = function (e) {\n        var gObj = this.parent;\n        if (gObj.enableVirtualization && gObj.editSettings.mode === 'Normal') {\n            var cols = gObj.columns;\n            var rowRenderer = new RowRenderer(this.locator, null, this.parent);\n            var rowObj = extend({}, {}, gObj.getRowObjectFromUID(e.uid), true);\n            gObj.notify(events.refreshVirtualEditFormCells, rowObj);\n            var args = e.argsCreator(this.getCurrentEditedData(e.prevData), {}, false);\n            args.isCustomFormValidation = true;\n            args.row = rowRenderer.render(rowObj, cols);\n            e.renderer.update(args);\n            var rules = {};\n            for (var i = 0; i < cols.length; i++) {\n                if (!cols[i].visible) {\n                    continue;\n                }\n                if (cols[i].validationRules) {\n                    setValidationRuels(cols[i], 0, rules, {}, {}, cols.length, true);\n                }\n            }\n            args.form.classList.add('e-virtual-validation');\n            gObj.editModule.virtualFormObj = gObj.editModule.createFormObj(args.form, rules);\n        }\n    };\n    VirtualScroll.prototype.virtualEditFormValidation = function (args) {\n        var gObj = this.parent;\n        var error = gObj.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n        if (gObj.editModule.virtualFormObj) {\n            if (error && error.style.display !== 'none') {\n                var errorDomRect = error.getBoundingClientRect();\n                var forms = gObj.element.querySelectorAll('.e-gridform');\n                var form = forms[0];\n                var contentLeft = gObj.getContent().getBoundingClientRect().left;\n                if (forms.length > 1) {\n                    form = gObj.getFrozenMode() !== 'Right' ? forms[1] : forms[0];\n                    contentLeft = gObj.getMovableVirtualContent().getBoundingClientRect().left;\n                }\n                if (errorDomRect.left < contentLeft || errorDomRect.right > gObj.element.offsetWidth) {\n                    var tooltip = form.querySelector('.e-tooltip-wrap:not([style*=\"display: none\"])');\n                    this.scrollToEdit(tooltip, { editIdx: args.editIdx, addIdx: args.addIdx }, true);\n                }\n            }\n            else if (gObj.editModule.virtualFormObj && (!error || error.style.display === 'none')) {\n                var existingErrors = gObj.editModule.virtualFormObj.element.querySelectorAll('.e-tooltip-wrap:not([style*=\"display: none\"])');\n                for (var i = 0; i < existingErrors.length; i++) {\n                    remove(existingErrors[i]);\n                }\n                this.setEditedDataToValidationForm(gObj.editModule.virtualFormObj.element, this.getCurrentEditedData(args.prevData));\n                args.isValid = gObj.editModule.virtualFormObj.validate();\n                if (!args.isValid) {\n                    var tooltip = gObj.editModule.virtualFormObj.element.querySelector('.e-tooltip-wrap:not([style*=\"display: none\"])');\n                    this.scrollToEdit(tooltip, { editIdx: args.editIdx, addIdx: args.addIdx });\n                }\n            }\n        }\n    };\n    VirtualScroll.prototype.scrollToEdit = function (tooltip, args, isRenderer) {\n        var gObj = this.parent;\n        if (tooltip) {\n            var cols = gObj.columnModel;\n            var field = setComplexFieldID(tooltip.id).split('_')[0];\n            var col = gObj.getColumnByField(field);\n            var scrollTop = this.parent.getContent().firstElementChild.scrollTop;\n            var row = gObj.getRowByIndex(args.editIdx);\n            if (isRenderer || !col || (!isNullOrUndefined(args.addIdx) && scrollTop > 0) || (!isNullOrUndefined(args.editIdx) && !row)) {\n                var validationCol = void 0;\n                for (var i = 0; i < cols.length && !col; i++) {\n                    if (cols[i].field === field) {\n                        validationCol = cols[i];\n                        break;\n                    }\n                }\n                if (isRenderer) {\n                    validationCol = col;\n                }\n                this.parent.notify(events.scrollToEdit, validationCol);\n            }\n        }\n    };\n    VirtualScroll.prototype.setEditedDataToValidationForm = function (form, editedData) {\n        var gObj = this.parent;\n        var inputs = [].slice.call(form.getElementsByClassName('e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = getColumnModelByUid(this.parent, inputs[i].getAttribute('e-mappinguid'));\n            var value = getValue(col.field, editedData);\n            value = isNullOrUndefined(value) ? '' : value;\n            inputs[i].value = value;\n        }\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - returns the IGrid\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var tbody;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n        }\n        else {\n            tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (isFrozenGrid && !isVirtualFrozen) {\n                var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                    (frTbody_1.firstElementChild).parentNode.removeChild(frTbody_1.firstElementChild);\n                }\n            }\n        }\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n            tbody.insertBefore(args.row, tbody.firstChild);\n        }\n        else {\n            tbody.appendChild(args.row);\n        }\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (isFrozenGrid && !isVirtualFrozen) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody.insertBefore(mEle, mTbody.firstChild);\n            }\n            else {\n                mTbody.appendChild(mEle);\n            }\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (frTbody) {\n                var frEle = this.renderFrozenRightForm(args.row, args);\n                if (this.parent.editSettings.newRowPosition === 'Top') {\n                    frTbody.insertBefore(frEle, frTbody.firstChild);\n                }\n                else {\n                    frTbody.appendChild(frEle);\n                }\n                var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n                args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n                frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n            }\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n        var frEle = ele.cloneNode(true);\n        var form = args.frozenRightForm = frEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return frEle;\n        }\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        return frEle;\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n        }\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRightRow = function (row) {\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        var fCont = this.parent.getFrozenLeftContentTbody();\n        var fHdr = this.parent.getFrozenHeaderTbody();\n        var frHdr = this.parent.getFrozenRightHeaderTbody();\n        var frCont = this.parent.getFrozenRightContentTbody();\n        if (fCont.contains(row) || fHdr.contains(row)) {\n            return this.parent.getFrozenRightRowByIndex(idx);\n        }\n        else if (frCont.contains(row) || frHdr.contains(row)) {\n            return this.parent.getRowByIndex(idx);\n        }\n        return row;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.isFrozenGrid()) {\n            var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n            var fCont = this.parent.getFrozenLeftContentTbody();\n            var mCont = this.parent.getMovableContentTbody();\n            var fHdr = this.parent.getFrozenHeaderTbody();\n            var mHdr = this.parent.getMovableHeaderTbody();\n            if (fCont.contains(row) || fHdr.contains(row)) {\n                return this.parent.getMovableRowByIndex(idx);\n            }\n            else if (mCont.contains(row) || mHdr.contains(row)) {\n                return this.parent.getRowByIndex(idx);\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var isCustomFormValidation = args.isCustomFormValidation;\n        var isScroll = args.isScroll;\n        if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n            args.row = this.getFreezeRightRow(args.row);\n        }\n        var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n        }\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add(literals.editedRow);\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n            td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).\n                querySelector(literals.colGroup).innerHTML;\n        }\n        var fCls;\n        var cont;\n        var cloneFrozen = 'cloneFrozen';\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        if (this.parent.isFrozenGrid()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.' + literals.frozenHeader;\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.' + literals.frozenContent;\n            }\n            var mTd = td.cloneNode(true);\n            var frTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                this.refreshEditForm(form, args.rowData);\n            }\n            var fRows = void 0;\n            var frRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, td, frTd);\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, frTd, td);\n                }\n            }\n            if (isBlazor() && this.parent.isServerRendered) {\n                args[cloneFrozen].appendChild(mTd);\n                args[cloneFrozen].classList.add(literals.editedRow);\n            }\n            else {\n                fRows.appendChild(mTd);\n                fRows.classList.add(literals.editedRow);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frRows.appendChild(frTd);\n                    frRows.classList.add(literals.editedRow);\n                    alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n                }\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.refreshEditForm = function (form, data) {\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, data, false);\n        }\n    };\n    InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n        row.innerHTML = '';\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n        frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n        frEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === literals.frozenRight) {\n                var index = k - this.parent.getMovableColumnsCount();\n                frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        mEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'movable') {\n                mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n                k--;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: {\n                colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns()\n                    + this.parent.getIndentCount()).toString()\n            }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n        var tbody = this.parent.createElement(literals.tbody);\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n        while ((isEdit && m < tdElement.length && i < cols.length) || i < cols.length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = cols[i];\n            if ((isVirtualFrozen && col.getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                i++;\n                continue;\n            }\n            var td_1 = this.parent.createElement('td', {\n                className: literals.rowCell, attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (this.parent.rowRenderingMode === 'Vertical') {\n                    setStyleAndAttributes(td_1, { 'data-cell': col.headerText });\n                    if (i === 0) {\n                        td_1.classList.add('e-responsive-editcell');\n                    }\n                }\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        if (this.parent.isReact && args.columnObject && args.columnObject.template) {\n            var parentRow = args.cell.parentElement;\n            var newTd = args.cell.cloneNode(true);\n            parentRow.insertBefore(newTd, parentRow.children[parseInt(args.cell.getAttribute(literals.ariaColIndex), 10)]);\n            newTd.focus();\n            args.cell.remove();\n            args.cell = newTd;\n        }\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.remove('e-ellipsistooltip');\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, [literals.editedRow, 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, applyBiggerTheme, addBiggerDialog } from '../base/util';\nimport { ResponsiveDialogRenderer } from './responsive-dialog-renderer';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialogHeader = function (args) {\n        var gObj = this.parent;\n        var header;\n        if (this.parent.enableAdaptiveUI) {\n            var responsiveDlgRenderer = new ResponsiveDialogRenderer(this.parent, this.serviceLocator);\n            responsiveDlgRenderer.action = this.isEdit ? ResponsiveDialogAction.isEdit : ResponsiveDialogAction.isAdd;\n            return responsiveDlgRenderer.renderResponsiveHeader(undefined, args);\n        }\n        else {\n            if (gObj.editSettings.headerTemplate) {\n                header = this.getDialogEditTemplateElement('HeaderTemplate', args);\n            }\n            else if (this.isEdit) {\n                header = this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n            }\n            else {\n                header = this.l10n.getConstant('AddFormTitle');\n            }\n        }\n        return header;\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        if (gObj.enableAdaptiveUI) {\n            this.dialog.classList.add('e-responsive-dialog');\n        }\n        this.dialog.setAttribute('aria-label', 'Dialog edit');\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: this.createDialogHeader(args), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            created: this.dialogCreated.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            footerTemplate: gObj.editSettings.footerTemplate ? this.getDialogEditTemplateElement('FooterTemplate', args) : null,\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog ? (gObj.editSettings.dialog.params || {}) : {}));\n        args.dialog = this.dialogObj;\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dialogObj.appendTo(this.dialog);\n        applyBiggerTheme(this.parent.element, this.dialogObj.element.parentElement);\n        if (gObj.enableAdaptiveUI) {\n            this.dialogObj.show(true);\n        }\n    };\n    DialogEditRender.prototype.dialogCreated = function () {\n        addBiggerDialog(this.parent);\n    };\n    DialogEditRender.prototype.renderResponsiveDialog = function () {\n        var _this = this;\n        if (this.parent.enableAdaptiveUI) {\n            if (this.parent.adaptiveDlgTarget) {\n                this.dialogObj.target = this.parent.adaptiveDlgTarget;\n            }\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.showCloseIcon = true;\n            this.dialogObj.visible = false;\n            this.dialogObj.width = '100%';\n            this.dialogObj.open = function () {\n                _this.dialogObj.element.style.maxHeight = '100%';\n            };\n        }\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DialogEditRender.prototype.destroy = function (args) {\n        var dialogEditTemplates = ['template', 'headerTemplate', 'footerTemplate'];\n        for (var i = 0; i < dialogEditTemplates.length; i++) {\n            if (this.parent.editSettings[dialogEditTemplates[i]]) {\n                var templateName = dialogEditTemplates[i].charAt(0).toUpperCase() + dialogEditTemplates[i].slice(1);\n                var editTemplateID = this.parent.element.id + 'editSettings' + templateName;\n                updateBlazorTemplate(editTemplateID, templateName, this.parent.editSettings);\n            }\n        }\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getDialogEditTemplateElement = function (dialogTemp, args) {\n        var tempDiv = this.parent.createElement('div', { className: 'e-dialog' + dialogTemp });\n        var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n        var templateID = this.parent.element.id + 'editSettings' + dialogTemp;\n        appendChildren(tempDiv, (dialogTemp === 'HeaderTemplate' ? this.parent.getEditHeaderTemplate() :\n            this.parent.getEditFooterTemplate())(dummyData, this.parent, 'editSettings' + dialogTemp, templateID));\n        updateBlazorTemplate(templateID, dialogTemp, this.parent.editSettings);\n        return tempDiv;\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var _this = this;\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? literals.editedRow : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            var isReactCompiler = this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string';\n            if (isReactCompiler) {\n                this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            }\n            var setRules = function () {\n                var columns = _this.parent.getColumns();\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].validationRules) {\n                        _this.parent.editModule.formObj.rules[columns[i].field] =\n                            columns[i].validationRules;\n                    }\n                }\n            };\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement(literals.tbody);\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate ||\n                cols[i].type === 'checkbox') {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: literals.rowCell, attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, select } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren, parentsUntil, extendObjWithFn } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent -specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables\n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        var isCustomFormValidation = args.isCustomFormValidation;\n        if (!isCustomFormValidation) {\n            this.parent.notify(events.beforeStartEdit, args);\n            this.convertWidget(args);\n        }\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frForm;\n        var frzCols = gObj.isFrozenGrid();\n        var index = gObj.getFrozenMode() === 'Right' && gObj.editSettings.mode === 'Normal' ? 1 : 0;\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document) :\n            gObj.element.getElementsByClassName('e-gridform')[index];\n        var isVirtualFrozen = frzCols && this.parent.enableColumnVirtualization && args.isScroll;\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute(literals.ariaRowIndex), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.' + literals.movableHeader).querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frForm = args.frozenRightForm;\n                }\n            }\n            else {\n                fForm = gObj.element.querySelector('.' + literals.movableContent).querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frForm = args.frozenRightForm;\n                }\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (isVirtualFrozen && col.getFreezeTableName() !== 'movable') {\n                continue;\n            }\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            // eslint-disable-next-line\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (col.getFreezeTableName() === 'movable' && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else if (frForm && col.getFreezeTableName() === literals.frozenRight && gObj.editSettings.mode === 'Normal') {\n                cell = frForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = fTdElement.offsetHeight + 'px';\n                }\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = mTdElement.offsetHeight + 'px';\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            var isFocus = this.parent.enableVirtualization && this.parent.editSettings.mode === 'Normal' ? false : true;\n            if (isFocus || (this.parent.enableVirtualization && this.parent.editSettings.newRowPosition === 'Bottom'\n                && parentsUntil(elem, literals.addedRow))) {\n                elem.focus();\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                elem.focus({ preventScroll: true });\n            }\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (args.isCustomFormValidation) {\n            cols = this.parent.columnModel;\n        }\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col) || (isVirtualFrozen && cols[i].getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute(literals.ariaRowIndex) : 0 }, this.parent.enableVirtualization);\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                var tempData = extendObjWithFn({}, args.rowData, { column: col });\n                var isReactCompiler = this.parent.isReact && typeof (col.editTemplate) !== 'string';\n                if (isReactCompiler) {\n                    col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID, null, null, input);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var template = col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID);\n                    appendChildren(input, template);\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { createEditElement } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n *\n * @hidden\n */\nvar EditCellBase = /** @class */ (function () {\n    function EditCellBase(parent) {\n        this.parent = parent;\n    }\n    EditCellBase.prototype.create = function (args) {\n        return createEditElement(this.parent, args.column, 'e-field', { type: 'text' });\n    };\n    EditCellBase.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    EditCellBase.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return EditCellBase;\n}());\nexport { EditCellBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, createEditElement, getObject } from '../base/util';\nimport * as literals from '../base/string-literals';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n *\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function (_super) {\n    __extends(BooleanEditCell, _super);\n    function BooleanEditCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.activeClasses = ['e-selectionbackground', 'e-active'];\n        return _this;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        return createEditElement(this.parent, args.column, classNames, { type: 'checkbox', value: args.value });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox) && args.column.type === 'checkbox') {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.getElementsByClassName(literals.rowCell)), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.getElementsByClassName(literals.rowCell)), add].concat(this.activeClasses));\n        }\n    };\n    return BooleanEditCell;\n}(EditCellBase));\nexport { BooleanEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, isNullOrUndefined, select } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil, Predicate } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n *\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function (_super) {\n    __extends(DropDownEditCell, _super);\n    function DropDownEditCell(parent) {\n        var _this = \n        //constructor\n        _super.call(this) || this;\n        _this.parent = parent;\n        _this.flag = false;\n        return _this;\n    }\n    DropDownEditCell.prototype.write = function (args) {\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.column = args.column;\n        var pred = new Predicate(args.column.field, 'notequal', null, true, false);\n        var params = {};\n        if (args.column.edit.params) {\n            var keys = Object.keys(args.column.edit.params);\n            for (var i = 0; i < keys.length; i++) {\n                params[keys[i]] = keys[i] === 'query' ? args.column.edit.params[keys[i]].clone() : args.column.edit.params[keys[i]];\n            }\n        }\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().where(pred).select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            created: this.dropdownCreated.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending',\n            beforeOpen: this.dropdownBeforeOpen.bind(this)\n        }, params));\n        if (this.parent.enableVirtualization) {\n            this.obj.dataSource = [args.rowData];\n        }\n        this.obj.query.params = this.parent.query.params;\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownEditCell.prototype.dropdownCreated = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.dropdownBeforeOpen = function () {\n        if (this.parent.enableVirtualization) {\n            this.obj.dataSource = this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource);\n        }\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (this.flag && this.column.dataSource) {\n            if ('result' in this.column.dataSource) {\n                this.column.dataSource.result = e.result;\n            }\n            else if (this.column.dataSource instanceof DataManager) {\n                this.column.dataSource.dataSource.json = e.result;\n            }\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = select('#' + dlgElement.id, document).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    return DropDownEditCell;\n}(EditCellBase));\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject, createEditElement } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n *\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.keyEventHandler = function (args) {\n        if (args.keyCode === 13 || args.keyCode === 9) {\n            var evt = document.createEvent('HTMLEvents');\n            evt.initEvent('change', false, true);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.dispatchEvent(evt);\n        }\n    };\n    NumericEditCell.prototype.create = function (args) {\n        this.instances = new Internationalization(this.parent.locale);\n        return createEditElement(this.parent, args.column, 'e-field', {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    NumericEditCell.prototype.read = function (element) {\n        return this.obj.value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            locale: this.parent.locale\n        }, col.edit.params));\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n        this.obj.appendTo(args.element);\n        this.obj.element.addEventListener('keydown', this.keyEventHandler);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.element.removeEventListener('keydown', this.keyEventHandler);\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { isEditable, createEditElement } from '../base/util';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n *\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function (_super) {\n    __extends(DefaultEditCell, _super);\n    function DefaultEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var attr = {\n            type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', style: 'text-align:' + args.column.textAlign\n        };\n        return createEditElement(this.parent, args.column, 'e-field e-input e-defaultcell', attr);\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new TextBox(extend({\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n            placeholder: isInline ? '' : args.column.headerText\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    return DefaultEditCell;\n}(EditCellBase));\nexport { DefaultEditCell };\n","import { extend, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { addRemoveEventListener } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n *\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.currentVirtualData = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, literals.gridContent) &&\n            parentsUntil(parentsUntil(target, literals.gridContent), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, literals.headerContent))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, literals.rowCell)\n                ? parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, literals.rowCell) && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, literals.row));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        var action = 'action';\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    if (e[action] !== 'edit') {\n                        this.parent.selectRow(0);\n                    }\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                if (!this.parent.isCheckBoxSelection) {\n                    this.parent.selectRow(this.editRowIndex);\n                }\n                break;\n        }\n    };\n    NormalEdit.prototype.getEditArgs = function (editedData, rowObj, isScroll) {\n        var primaryKeys = this.parent.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(getObject(primaryKeys[i], editedData));\n        }\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: editedData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined, isScroll: isScroll\n        };\n        return args;\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute(literals.ariaRowIndex), 10);\n        if (gObj.enableVirtualization || gObj.enableInfiniteScrolling) {\n            var selector = '.e-row[aria-rowindex=\"' + this.rowIndex + '\"]';\n            var virtualRow = this.parent.element.querySelector(selector);\n            if (!virtualRow) {\n                return;\n            }\n        }\n        var e = { data: undefined, index: this.rowIndex, isScroll: false };\n        this.parent.notify(events.virtualScrollEditActionBegin, e);\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else if (!this.previousData && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {\n            this.previousData = e.data;\n        }\n        else if (!this.parent.enableVirtualization) {\n            this.previousData = extend({}, {}, gObj.getCurrentViewRecords()[this.rowIndex], true);\n        }\n        var editedData = extend({}, {}, e.data || this.previousData, true);\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = this.getEditArgs(editedData, rowObj, e.isScroll);\n        args.row = tr;\n        if (!args.isScroll) {\n            this.parent.notify(events.createVirtualValidationForm, { uid: this.uid, prevData: this.previousData, argsCreator: this.getEditArgs.bind(this), renderer: this.renderer });\n            gObj.trigger(events.beginEdit, args, function (begineditargs) {\n                begineditargs.type = 'actionBegin';\n                gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                    if (!editargs.cancel) {\n                        _this.inlineEditHandler(editargs, tr);\n                    }\n                });\n            });\n        }\n        else {\n            this.inlineEditHandler(args, tr);\n        }\n    };\n    NormalEdit.prototype.inlineEditHandler = function (editargs, tr) {\n        var gObj = this.parent;\n        gObj.isEdit = true;\n        editargs.row = editargs.row ? editargs.row : tr;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n            gObj.selectionModule.preventFocus = true;\n            editargs.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(editargs);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        editargs.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, editargs);\n        this.args = editargs;\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        this.editRowIndex = index;\n        var args = {\n            requestType: 'save', action: 'edit', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index],\n            row: gObj.getRowByIndex(index)\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var isValid = gObj.editModule.editFormValidate();\n        var validationArgs = {\n            prevData: this.previousData, isValid: true, editIdx: this.editRowIndex, addIdx: this.addedRowIndex\n        };\n        gObj.notify(events.validateVirtualForm, validationArgs);\n        return (isValid && validationArgs.isValid);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var index = gObj.getFrozenMode() === 'Right' ? 1 : 0;\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.getElementsByClassName('e-gridform')[index];\n        var data = {\n            virtualData: extend({}, {}, this.previousData, true), isAdd: false, isScroll: false, endEdit: true\n        };\n        this.parent.notify(events.getVirtualData, data);\n        if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && this.parent.editSettings.mode === 'Normal' && Object.keys(data.virtualData).length) {\n            if (this.parent.isEdit) {\n                this.currentVirtualData = editedData = args.data = data.virtualData;\n            }\n        }\n        else {\n            editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        }\n        if (gObj.isFrozenGrid() && gObj.editSettings.mode === 'Normal') {\n            var mhdrFrm = gObj.getMovableVirtualHeader().querySelector('.e-gridform');\n            var mCntFrm = gObj.getMovableVirtualContent().querySelector('.e-gridform');\n            var mvblEle = [mhdrFrm || mCntFrm];\n            var frHdrFrm = void 0;\n            var frCntFrm = void 0;\n            var frEle = [];\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                frHdrFrm = gObj.getFrozenRightHeader().querySelector('.e-gridform');\n                frCntFrm = gObj.getFrozenRightContent().querySelector('.e-gridform');\n                frEle = [frHdrFrm || frCntFrm];\n            }\n            gridActionHandler(this.parent, function (tableName, elements) {\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var ele = elements_1[_i];\n                    if (ele) {\n                        editedData = gObj.editModule.getCurrentEditedData(ele, editedData);\n                    }\n                }\n            }, [[], mvblEle, frEle]);\n        }\n        var eleLength = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow)).length;\n        if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n            eleLength = 1;\n        }\n        if (isDlg ? dlgWrapper.getElementsByClassName(literals.editedRow).length : eleLength) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.virtualScrollEditSuccess, {});\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n            this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n        }\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add' &&\n                this.parent.selectionModule) {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.parent.notify(events.virtualScrollEditSuccess, args);\n        this.parent.editModule.checkLastRow(args.row);\n        this.parent.editModule.isLastRow = false;\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        this.editRowIndex = null;\n        this.parent.trigger(events.actionComplete, args);\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection) && !this.parent.selectionSettings.checkboxOnly) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.closeForm = function () {\n        if (!this.cloneRow && this.parent.isEdit) {\n            this.stopEditStatus();\n        }\n        if (this.cloneRow) {\n            this.cloneRow.remove();\n            this.cloneRow = null;\n            this.originalRow.classList.remove('e-hiddenrow');\n        }\n        if (this.parent.isFrozenGrid() && this.cloneFrozen) {\n            this.cloneFrozen.remove();\n            this.frozen.classList.remove('e-hiddenrow');\n        }\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n            updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, ({ error: e }));\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.needRefresh = function () {\n        var refresh = true;\n        var editedRow = this.parent.element.querySelector('.e-gridform');\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n            refresh = false;\n        }\n        return refresh;\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.isFrozenGrid();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            this.parent.notify(events.refreshVirtualCache, data);\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            if (this.needRefresh()) {\n                row.refresh(rowObj, this.parent.getColumns(), true);\n            }\n            var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + rowObj.index + '\"]'));\n            if (frzCols && tr.length) {\n                for (var i = 0; i < tr.length; i++) {\n                    var rowUid = tr[i].getAttribute('data-uid');\n                    if (rowUid !== this.uid) {\n                        rowObj = this.parent.getRowObjectFromUID(rowUid);\n                        rowObj.changes = data;\n                        row.refresh(rowObj, this.parent.getColumns(), true);\n                        this.parent.editModule.checkLastRow(tr[i]);\n                    }\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, cancel: false, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.notify(events.virtualScrollEditCancel, args);\n        this.blazorTemplate();\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (closeEditArgs.cancel) {\n                return;\n            }\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                _this.refreshRow(closeEditArgs.data);\n            }\n            var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length\n                && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        var cols = gObj.getColumns();\n        var rowData = { virtualData: {}, isScroll: false };\n        this.parent.notify(events.getVirtualData, rowData);\n        for (var i = 0; i < cols.length; i++) {\n            if (rowData.isScroll && cols[i].getFreezeTableName() !== 'movable') {\n                continue;\n            }\n            if (cols[i].field) {\n                DataUtil.setValue(cols[i].field, cols[i].defaultValue, this.previousData);\n            }\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined, isScroll: rowData.isScroll\n        };\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && Object.keys(rowData.virtualData).length) {\n            args.data = args.rowData = rowData.virtualData;\n        }\n        if (!args.isScroll) {\n            this.parent.notify(events.createVirtualValidationForm, { uid: this.uid, prevData: this.previousData, argsCreator: this.getEditArgs.bind(this), renderer: this.renderer });\n            gObj.trigger(events.actionBegin, args, function (addArgs) {\n                if (addArgs.cancel) {\n                    return;\n                }\n                _this.inlineAddHandler(addArgs);\n            });\n        }\n        else {\n            this.inlineAddHandler(args);\n        }\n    };\n    NormalEdit.prototype.inlineAddHandler = function (addArgs) {\n        var gObj = this.parent;\n        gObj.isEdit = true;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        this.renderer.addNew(addArgs);\n        gObj.editModule.applyFormValidation();\n        addArgs.type = events.actionComplete;\n        addArgs.row = gObj.element.querySelector('.' + literals.addedRow);\n        gObj.trigger(events.actionComplete, addArgs);\n        this.args = addArgs;\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : data[i][fieldname] ? data[i] : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n            args.data[0] =\n                this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n        }\n        if (this.parent.enableVirtualization && args.data.length > 1) {\n            var uid = this.parent.getSelectedRows()[0].getAttribute('data-uid');\n            args.data = [this.parent.getRowObjectFromUID(uid).data];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var addElements = [].slice.call(gObj.element.getElementsByClassName(literals.addedRow));\n        var editElements = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow));\n        for (var i = 0; i < addElements.length; i++) {\n            remove(addElements[i]);\n        }\n        for (var i = 0; i < editElements.length; i++) {\n            editElements[i].classList.remove(literals.editedRow);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.crudAction, handler: this.editHandler },\n            { event: events.doubleTap, handler: this.dblClickHandler },\n            { event: events.click, handler: this.clickHandler },\n            { event: events.recordAdded, handler: this.requestSuccess },\n            { event: events.dblclick, handler: this.dblClickHandler },\n            { event: events.deleteComplete, handler: this.editComplete },\n            { event: events.saveComplete, handler: this.editComplete },\n            { event: events.rowModeChange, handler: this.closeEdit },\n            { event: events.closeInline, handler: this.closeForm }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n *\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue, isBlazor, closest, select } from '@syncfusion/ej2-base';\nimport { remove, classList } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject, alignFrozenEditForm, gridActionHandler, addRemoveEventListener } from '../base/util';\nimport { splitFrozenRowObjectCells, getGridRowElements } from '../base/util';\nimport { sliceElements, getCellByColAndRowIndex, getMovableTbody, getFrozenRightTbody } from '../base/util';\nimport { getGridRowObjects } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n *\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.originalCell = {};\n        this.cloneCell = {};\n        this.editNext = false;\n        this.preventSaveCell = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.click, handler: this.clickHandler },\n            { event: events.dblclick, handler: this.dblClickHandler },\n            { event: events.beforeCellFocused, handler: this.onBeforeCellFocused },\n            { event: events.cellFocused, handler: this.onCellFocused },\n            { event: events.doubleTap, handler: this.dblClickHandler },\n            { event: events.keyPressed, handler: this.keyDownHandler },\n            { event: events.editNextValCell, handler: this.editNextValCell },\n            { event: events.closeBatch, handler: this.closeForm }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.batchCancelFunction = this.batchCancel.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.addEventListener(events.batchCancel, this.batchCancelFunction);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.removeEventListener(events.batchCancel, this.batchCancelFunction);\n    };\n    BatchEdit.prototype.batchCancel = function () {\n        this.parent.focusModule.restoreFocus();\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit && closest(this.form, 'td') !== closest(e.target, 'td')) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, literals.rowCell) && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, literals.rowCell);\n        var tr = parentsUntil(e.target, literals.row);\n        var rowIndex = tr && parseInt(tr.getAttribute(literals.ariaRowIndex), 10);\n        var colIndex = target && parseInt(target.getAttribute(literals.ariaColIndex), 10);\n        if (!isNullOrUndefined(target) && !isNullOrUndefined(rowIndex) && !isNaN(colIndex)\n            && !target.parentElement.classList.contains(literals.editedRow)) {\n            this.editCell(rowIndex, this.parent.getColumns()[colIndex].field, this.isAddRow(rowIndex));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenLeftCount();\n        var frzRightCols = this.parent.getFrozenRightColumnsCount();\n        var mCont = this.parent.getContent().querySelector('.' + literals.movableContent);\n        var mHdr = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader);\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            if (this.parent.isEdit && clear) {\n                this.saveCell();\n            }\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (frzRightCols) {\n            var frHdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n            var frCont = this.parent.getContent().querySelector('.e-frozen-right-content');\n            if (frCont.contains(e.element) || (this.parent.frozenRows && frHdr.contains(e.element))) {\n                cellIndex += (frzCols + this.parent.getMovableColumnsCount());\n            }\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.getElementsByClassName('e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    // eslint-disable-next-line no-case-declarations\n                    var col = this.parent.getColumns()[e.indexes[1]];\n                    if (col && !this.parent.isEdit) {\n                        this.editCell(e.indexes[0], col.field);\n                    }\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    // eslint-disable-next-line no-case-declarations\n                    var args = { cancel: false, keyArgs: e.keyArgs };\n                    this.parent.notify('beforeFocusCellEdit', args);\n                    if (!args.cancel && isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    BatchEdit.prototype.closeEdit = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var argument = { cancel: false, batchChanges: this.getBatchChanges() };\n        gObj.notify(events.beforeBatchCancel, argument);\n        if (argument.cancel) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        var allRows = getGridRowObjects(this.parent);\n        var _loop_1 = function (i) {\n            var isInsert = false;\n            var isDirty = rows[i].isDirty;\n            gridActionHandler(this_1.parent, function (tableName, rows) {\n                isInsert = _this.removeBatchElementChanges(rows[i], isDirty);\n                if (isInsert) {\n                    rows.splice(i, 1);\n                }\n            }, allRows);\n            if (isInsert) {\n                i--;\n            }\n            out_i_1 = i;\n        };\n        var this_1 = this, out_i_1;\n        for (var i = 0; i < rows.length; i++) {\n            _loop_1(i);\n            i = out_i_1;\n        }\n        if (!gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.renderModule.renderEmptyRow();\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n    };\n    BatchEdit.prototype.removeBatchElementChanges = function (row, isDirty) {\n        var gObj = this.parent;\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInstertedRemoved = false;\n        if (isDirty) {\n            row.isDirty = isDirty;\n            var tr = gObj.getRowElementByUID(row.uid);\n            if (tr) {\n                if (tr.classList.contains('e-insertedrow')) {\n                    remove(tr);\n                    isInstertedRemoved = true;\n                }\n                else {\n                    refreshForeignData(row, this.parent.getForeignKeyColumns(), row.data);\n                    delete row.changes;\n                    delete row.edit;\n                    row.isDirty = false;\n                    classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n                    rowRenderer.refresh(row, gObj.getColumns(), false);\n                }\n                if (this.parent.aggregates.length > 0) {\n                    var type = 'type';\n                    var editType = [];\n                    editType[type] = 'cancel';\n                    this.parent.notify(events.refreshFooterRenderer, editType);\n                    if (this.parent.groupSettings.columns.length > 0) {\n                        this.parent.notify(events.groupAggregates, editType);\n                    }\n                }\n            }\n        }\n        return isInstertedRemoved;\n    };\n    BatchEdit.prototype.removeHideAndSelection = function (tr) {\n        if (tr.classList.contains('e-hiddenrow')) {\n            tr.removeAttribute('aria-selected');\n            var tdElements = [].slice.call(tr.getElementsByClassName('e-selectionbackground'));\n            for (var i = 0; i < tdElements.length; i++) {\n                removeClass([tdElements[i]], ['e-selectionbackground', 'e-active']);\n            }\n        }\n        classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function () {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.closeForm = function () {\n        for (var i = 0; i < Object.keys(this.originalCell).length; i++) {\n            for (var j = 0; j < Object.keys(this.cloneCell).length; j++) {\n                if (Object.keys(this.originalCell)[i] === Object.keys(this.cloneCell)[j]) {\n                    this.cloneCell[Object.keys(this.cloneCell)[j]].replaceWith(this.originalCell[Object.keys(this.originalCell)[i]]);\n                    if (this.originalCell[Object.keys(this.originalCell)[i]].classList.contains('e-selectionbackground')) {\n                        this.originalCell[Object.keys(this.originalCell)[i]]\n                            .classList.remove('e-selectionbackground', 'e-cellselectionbackground', 'e-active');\n                    }\n                }\n            }\n        }\n        this.cloneCell = {};\n        this.originalCell = {};\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        if (gObj.isCheckBoxSelection) {\n            var checkAllBox = gObj.element.querySelector('.e-checkselectall').parentElement;\n            if (checkAllBox.classList.contains('e-checkbox-disabled') &&\n                gObj.pageSettings.totalRecordsCount > gObj.currentViewData.length) {\n                removeClass([checkAllBox], ['e-checkbox-disabled']);\n            }\n        }\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length &&\n            this.parent.selectionSettings.persistSelection) {\n            changes[deletedRecords] = this.removeSelectedData;\n            this.removeSelectedData = [];\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args, function (beforeBatchSaveArgs) {\n            if (beforeBatchSaveArgs.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.bulkSave, { changes: changes, original: original });\n        });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    /**\n     * @param {string} uid - specifes the uid\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        gridActionHandler(this.parent, function (tableName, rows) {\n            rows.splice(i, 1);\n        }, getGridRowObjects(this.parent));\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row object\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        var gObj = this.parent;\n        var isTop = gObj.editSettings.newRowPosition === 'Top';\n        gridActionHandler(this.parent, function (tableName, rows) {\n            var rowClone = row.clone();\n            rowClone.cells = splitFrozenRowObjectCells(gObj, rowClone.cells, tableName);\n            if (isTop) {\n                rows.unshift(rowClone);\n            }\n            else {\n                rows.push(rowClone);\n            }\n        }, getGridRowObjects(this.parent), true);\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var _this = this;\n        this.removeSelectedData = [];\n        var gObj = this.parent;\n        var index = gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            if (data) {\n                args.row = gObj.editModule.deleteRowUid ? gObj.getRowElementByUID(gObj.editModule.deleteRowUid)\n                    : gObj.getRows()[gObj.getCurrentViewRecords().indexOf(data)];\n            }\n            else {\n                args.row = data ? gObj.getRows()[index] : selectedRows[0];\n            }\n            if (!args.row) {\n                return;\n            }\n        }\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeBatchDelete, args, function (beforeBatchDeleteArgs) {\n            if (beforeBatchDeleteArgs.cancel) {\n                return;\n            }\n            _this.removeSelectedData = gObj.getSelectedRecords();\n            gObj.clearSelection();\n            beforeBatchDeleteArgs.row = beforeBatchDeleteArgs.row ?\n                beforeBatchDeleteArgs.row : data ? gObj.getRows()[index] : selectedRows[0];\n            if (_this.parent.isFrozenGrid()) {\n                if (data) {\n                    index = parseInt(beforeBatchDeleteArgs.row.getAttribute(literals.ariaRowIndex), 10);\n                    selectedRows = [];\n                    selectedRows.push(gObj.getRowByIndex(index));\n                    selectedRows.push(gObj.getMovableRowByIndex(index));\n                    if (gObj.getFrozenMode() === literals.leftRight) {\n                        selectedRows.push(gObj.getFrozenRightRowByIndex(index));\n                    }\n                }\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        var rowObj = gObj.getRowObjectFromUID(uid);\n                        rowObj.isDirty = true;\n                        rowObj.edit = 'delete';\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getMovableDataRows().length >= gObj.frozenRows) {\n                            gObj.getMovableHeaderTbody().appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                            gObj.getFrozenHeaderTbody().appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                            if (gObj.getFrozenMode() === literals.leftRight) {\n                                gObj.getFrozenRightHeaderTbody().appendChild(gObj.getFrozenRightRowByIndex(gObj.frozenRows - 1));\n                            }\n                        }\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderTable().querySelector(literals.tbody).appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                    }\n                    delete selectedRows[i];\n                }\n            }\n            else if (!_this.parent.isFrozenGrid() && (selectedRows.length === 1 || data)) {\n                var uid = beforeBatchDeleteArgs.row.getAttribute('data-uid');\n                uid = data && _this.parent.editModule.deleteRowUid ? uid = _this.parent.editModule.deleteRowUid : uid;\n                if (beforeBatchDeleteArgs.row.classList.contains('e-insertedrow')) {\n                    _this.removeRowObjectFromUID(uid);\n                    remove(beforeBatchDeleteArgs.row);\n                }\n                else {\n                    var rowObj = gObj.getRowObjectFromUID(uid);\n                    rowObj.isDirty = true;\n                    rowObj.edit = 'delete';\n                    classList(beforeBatchDeleteArgs.row, ['e-hiddenrow', 'e-updatedtd'], []);\n                }\n                delete beforeBatchDeleteArgs.row;\n            }\n            else {\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uniqueid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uniqueid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                        selectedRow.isDirty = true;\n                        selectedRow.edit = 'delete';\n                        delete selectedRows[i];\n                    }\n                }\n            }\n            _this.refreshRowIdx();\n            if (data) {\n                gObj.editModule.deleteRowUid = undefined;\n                if (gObj.getSelectedRows().length) {\n                    index = parseInt(gObj.getSelectedRows()[0].getAttribute(literals.ariaRowIndex), 10);\n                }\n            }\n            if (!gObj.isCheckBoxSelection) {\n                gObj.selectRow(index);\n            }\n            gObj.trigger(events.batchDelete, beforeBatchDeleteArgs);\n            gObj.notify(events.batchDelete, { rows: _this.parent.getRowsObject() });\n            gObj.notify(events.toolbarRefresh, {});\n        });\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var gObj = this.parent;\n        var rows = gObj.getAllDataRows(true);\n        var dataRows = getGridRowElements(this.parent);\n        var dataObjects = getGridRowObjects(this.parent);\n        var _loop_2 = function (i, j, len) {\n            if (rows[i].classList.contains(literals.row) && !rows[i].classList.contains('e-hiddenrow')) {\n                gridActionHandler(this_2.parent, function (tableName, rowElements, rowObjects) {\n                    rowElements[i].setAttribute(literals.ariaRowIndex, j.toString());\n                    rowObjects[i].index = j;\n                }, dataRows, null, dataObjects);\n                j++;\n            }\n            else {\n                gridActionHandler(this_2.parent, function (tableName, rowElements, rowObjects) {\n                    rowElements[i].removeAttribute(literals.ariaRowIndex);\n                    rowObjects[i].index = -1;\n                }, dataRows, null, dataObjects);\n            }\n            out_j_1 = j;\n        };\n        var this_2 = this, out_j_1;\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            _loop_2(i, j, len);\n            j = out_j_1;\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var _this = this;\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args, function (beforeBatchAddArgs) {\n            if (beforeBatchAddArgs.cancel) {\n                return;\n            }\n            _this.isAdded = true;\n            gObj.clearSelection();\n            var mTr;\n            var frTr;\n            var row = new RowRenderer(_this.serviceLocator, null, _this.parent);\n            var model = new RowModelGenerator(_this.parent);\n            var modelData = model.generateRows([beforeBatchAddArgs.defaultData]);\n            var tr = row.render(modelData[0], gObj.getColumns());\n            var col;\n            var index;\n            for (var i = 0; i < _this.parent.groupSettings.columns.length; i++) {\n                tr.insertBefore(_this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n                modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            var tbody = gObj.getContentTable().querySelector(literals.tbody);\n            tr.classList.add('e-insertedrow');\n            if (tbody.querySelector('.e-emptyrow')) {\n                var emptyRow = tbody.querySelector('.e-emptyrow');\n                emptyRow.parentNode.removeChild(emptyRow);\n                _this.removeFrozenTbody();\n            }\n            if (gObj.isFrozenGrid()) {\n                frTr = tr.cloneNode(true);\n                mTr = _this.renderMovable(tr, frTr);\n                tr = gObj.getFrozenMode() === 'Right' ? frTr : tr;\n                _this.renderFrozenAddRow(tr, mTr, frTr);\n            }\n            if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                tbody = gObj.getHeaderTable().querySelector(literals.tbody);\n            }\n            else {\n                tbody = gObj.getContentTable().querySelector(literals.tbody);\n            }\n            if (_this.parent.editSettings.newRowPosition === 'Top') {\n                tbody.insertBefore(tr, tbody.firstChild);\n            }\n            else {\n                tbody.appendChild(tr);\n            }\n            addClass([].slice.call(tr.getElementsByClassName(literals.rowCell)), ['e-updatedtd']);\n            modelData[0].isDirty = true;\n            modelData[0].changes = extend({}, {}, modelData[0].data, true);\n            modelData[0].edit = 'add';\n            _this.addRowObject(modelData[0]);\n            _this.refreshRowIdx();\n            _this.focus.forgetPrevious();\n            gObj.notify(events.batchAdd, { rows: _this.parent.getRowsObject(), args: { isFrozen: _this.parent.isFrozenGrid() } });\n            var changes = _this.getBatchChanges();\n            var btmIdx = _this.getBottomIndex();\n            if (_this.parent.editSettings.newRowPosition === 'Top') {\n                gObj.selectRow(0);\n            }\n            else {\n                gObj.selectRow(btmIdx);\n            }\n            if (!data) {\n                index = _this.findNextEditableCell(0, true);\n                col = gObj.getColumns()[index];\n                if (_this.parent.editSettings.newRowPosition === 'Top') {\n                    _this.editCell(0, col.field, true);\n                }\n                else {\n                    _this.editCell(btmIdx, col.field, true);\n                }\n            }\n            if (_this.parent.aggregates.length > 0 && (data || changes[literals.addedRecords].length)) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n            }\n            var args1 = {\n                defaultData: beforeBatchAddArgs.defaultData, row: tr,\n                columnObject: col, columnIndex: index, primaryKey: beforeBatchAddArgs.primaryKey, cell: tr.cells[index]\n            };\n            gObj.trigger(events.batchAdd, args1);\n            if (gObj.isFrozenGrid()) {\n                alignFrozenEditForm(mTr.querySelector('td:not(.e-hide)'), tr.querySelector('td:not(.e-hide)'));\n            }\n        });\n    };\n    BatchEdit.prototype.renderFrozenAddRow = function (tr, mTr, frTr) {\n        var gObj = this.parent;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        if (gObj.editSettings.newRowPosition === 'Top') {\n            mTbody.insertBefore(mTr, mTbody.firstChild);\n        }\n        else {\n            mTbody.appendChild(mTr);\n        }\n        addClass([].slice.call(mTr.getElementsByClassName(literals.rowCell)), ['e-updatedtd']);\n        if (frTbody && frTr) {\n            if (gObj.editSettings.newRowPosition === 'Top') {\n                frTbody.insertBefore(frTr, frTbody.firstChild);\n            }\n            else {\n                frTbody.appendChild(frTr);\n            }\n            addClass([].slice.call(frTr.getElementsByClassName(literals.rowCell)), ['e-updatedtd']);\n            alignFrozenEditForm(frTr.querySelector('td:not(.e-hide)'), tr.querySelector('td:not(.e-hide)'));\n        }\n        if (gObj.height === 'auto') {\n            gObj.notify(events.frozenHeight, {});\n        }\n    };\n    BatchEdit.prototype.removeFrozenTbody = function () {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid()) {\n            var moveTbody = gObj.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n            (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            if (gObj.getFrozenMode() === literals.leftRight) {\n                var frTbody = gObj.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                (frTbody.firstElementChild).parentNode.removeChild(frTbody.firstElementChild);\n            }\n        }\n    };\n    BatchEdit.prototype.renderMovable = function (ele, rightEle) {\n        var mEle = ele.cloneNode(true);\n        var movable = this.parent.getMovableColumnsCount();\n        var left = this.parent.getFrozenLeftCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        sliceElements(ele, 0, left);\n        sliceElements(mEle, left, right ? mEle.children.length - right : mEle.children.length);\n        sliceElements(rightEle, left + movable, rightEle.children.length);\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, Object.keys(col).indexOf('defaultValue') >= 0 ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.getAttribute('index'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        this.index = index;\n        this.field = field;\n        this.isAdd = isAdd;\n        var checkEdit = gObj.isEdit && !(this.cellDetails.column.field === field\n            && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index));\n        if (gObj.editSettings.allowEditing) {\n            if (!checkEdit && col.allowEditing) {\n                this.editCellExtend(index, field, isAdd);\n            }\n            else if (checkEdit) {\n                this.editNext = true;\n                this.saveCell();\n            }\n        }\n    };\n    BatchEdit.prototype.editCellExtend = function (index, field, isAdd) {\n        var _this = this;\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.isEdit) {\n            return;\n        }\n        var row;\n        var mRowData;\n        var rowData = extend({}, {}, this.getDataByIndex(index), true);\n        if (col.getFreezeTableName() === 'movable' || col.getFreezeTableName() === literals.frozenRight) {\n            row = col.getFreezeTableName() === 'movable' ? gObj.getMovableDataRows()[index] : gObj.getFrozenRightDataRows()[index];\n            mRowData = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n            rowData = mRowData.changes ? extend({}, {}, mRowData.changes, true) : rowData;\n        }\n        else {\n            row = gObj.getDataRows()[index];\n            rowData = extend({}, {}, this.getDataByIndex(index), true);\n        }\n        if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.columns ||\n            (col.isPrimaryKey && col.isIdentity)) {\n            this.parent.isLastCellPrimaryKey = true;\n            return;\n        }\n        this.parent.isLastCellPrimaryKey = false;\n        this.parent.element.classList.add('e-editing');\n        var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n        var cells = [].slice.apply(row.cells);\n        var args = {\n            columnName: col.field, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n            primaryKey: keys, rowData: rowData,\n            validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n            value: getObject(col.field, rowData),\n            type: !isAdd ? 'edit' : 'add', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = cells[this.getColIndex(cells, this.getCellIdx(col.uid))];\n            args.row = row;\n            args.columnObject = col;\n            if (!args.cell) {\n                return;\n            }\n        }\n        gObj.trigger(events.cellEdit, args, function (cellEditArgs) {\n            if (cellEditArgs.cancel) {\n                return;\n            }\n            cellEditArgs.cell = cellEditArgs.cell ? cellEditArgs.cell : cells[_this.getColIndex(cells, _this.getCellIdx(col.uid))];\n            cellEditArgs.row = cellEditArgs.row ? cellEditArgs.row : row;\n            cellEditArgs.columnObject = cellEditArgs.columnObject ? cellEditArgs.columnObject : col;\n            cellEditArgs.columnObject.index = isNullOrUndefined(cellEditArgs.columnObject.index) ? 0 : cellEditArgs.columnObject.index;\n            _this.cellDetails = {\n                rowData: rowData, column: col, value: cellEditArgs.value, isForeignKey: cellEditArgs.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(cellEditArgs.cell.getAttribute(literals.ariaColIndex), 10),\n                foreignKeyData: cellEditArgs.foreignKeyData\n            };\n            if (cellEditArgs.cell.classList.contains('e-updatedtd')) {\n                _this.isColored = true;\n                cellEditArgs.cell.classList.remove('e-updatedtd');\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(_this.cellDetails.rowIndex, true);\n            }\n            _this.renderer.update(cellEditArgs);\n            _this.parent.notify(events.batchEditFormRendered, cellEditArgs);\n            _this.form = select('#' + gObj.element.id + 'EditForm', gObj.element);\n            gObj.editModule.applyFormValidation([col]);\n            _this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        });\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var index = gObj.getColumnIndexByField(field);\n        if (col && !col.isPrimaryKey && col.allowEditing) {\n            var td = getCellByColAndRowIndex(this.parent, col, rowIndex, index);\n            var rowObj = col.getFreezeTableName() === 'movable' ? this.parent.getMovableRowsObject()[rowIndex] :\n                col.getFreezeTableName() === literals.frozenRight ? gObj.getFrozenRightRowsObject()[rowIndex]\n                    : gObj.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: this.newReactTd || td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        var currentRowObj;\n        if (!this.parent.isFrozenGrid()) {\n            if (!rowObj.changes) {\n                rowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                DataUtil.setValue(field, value, rowObj.changes);\n            }\n            if (rowObj.data[field] !== value) {\n                var type = this.parent.getColumnByField(field).type;\n                if ((type === 'date' || type === 'datetime')) {\n                    if (new Date(rowObj.data[field]).toString() !== new Date(value).toString()) {\n                        rowObj.isDirty = true;\n                    }\n                }\n                else {\n                    rowObj.isDirty = true;\n                }\n            }\n        }\n        else {\n            var rowEle = this.parent.getRowElementByUID(rowObj.uid);\n            var rowIndex = parseInt(rowEle.getAttribute(literals.ariaRowIndex), 10);\n            currentRowObj = this.parent.getRowsObject()[rowIndex];\n            if (!currentRowObj.changes) {\n                currentRowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                setValue(field, value, currentRowObj.changes);\n            }\n            var movableRowObject = this.parent.getMovableRowsObject()[rowIndex];\n            movableRowObject.changes = extend({}, {}, currentRowObj.changes, true);\n            if (rowObj.data[field] !== value) {\n                movableRowObject.isDirty = true;\n                currentRowObj.isDirty = true;\n            }\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                var frRowObject = this.parent.getFrozenRightRowsObject()[rowIndex];\n                frRowObject.changes = extend({}, {}, currentRowObj.changes, true);\n                if (rowObj.data[field] !== value) {\n                    frRowObject.isDirty = true;\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        value = column.type === 'number' && !isNullOrUndefined(value) ? parseFloat(value) : value;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()\n            || this.parent.getFrozenRightColumnsCount();\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && column.getFreezeTableName() === 'movable' && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        var parentElement;\n        var cellIndex;\n        if (this.parent.isReact) {\n            parentElement = td.parentElement;\n            cellIndex = td.cellIndex;\n        }\n        var index = 0;\n        if (frzCols) {\n            index = column.getFreezeTableName() === 'movable' && this.parent.getFrozenMode() !== 'Right'\n                ? frzCols : column.getFreezeTableName() === literals.frozenRight\n                ? this.parent.getFrozenLeftColumnsCount() + this.parent.getMovableColumnsCount() : index;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - index], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        if (this.parent.isReact) {\n            this.newReactTd = parentElement.cells[cellIndex];\n            parentElement.cells[cellIndex].classList.add('e-updatedtd');\n        }\n        else {\n            td.classList.add('e-updatedtd');\n        }\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute(literals.ariaColIndex), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        var btmIdx = this.getBottomIndex();\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                        this.editCell(btmIdx, col.field, true);\n                    }\n                    else {\n                        var args = { index: 0, column: col };\n                        this.parent.notify(events.nextCellIndex, args);\n                        this.editCell(args.index, col.field, true);\n                    }\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.escapeCellEdit = function () {\n        var args = this.generateCellArgs();\n        args.value = args.previousValue;\n        this.successCallBack(args, args.cell.parentElement, args.column, true)(args);\n    };\n    BatchEdit.prototype.generateCellArgs = function () {\n        var gObj = this.parent;\n        this.parent.element.classList.remove('e-editing');\n        var column = this.cellDetails.column;\n        var obj = {};\n        obj[column.field] = getObject(column.field, this.cellDetails.rowData);\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, obj);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field) && !isUndefined(value)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            column: column,\n            previousValue: this.cellDetails.value,\n            isForeignKey: this.cellDetails.isForeignKey,\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = this.form.parentElement;\n            args.columnObject = column;\n        }\n        return args;\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        if (this.preventSaveCell || !this.form) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        this.preventSaveCell = true;\n        var args = this.generateCellArgs();\n        var tr = args.cell.parentElement;\n        var col = args.column;\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args, this.successCallBack(args, tr, col));\n            gObj.notify(events.batchForm, { formObj: this.form });\n        }\n        else {\n            this.successCallBack(args, tr, col)(args);\n        }\n    };\n    BatchEdit.prototype.successCallBack = function (cellSaveArgs, tr, column, isEscapeCellEdit) {\n        var _this = this;\n        return function (cellSaveArgs) {\n            var gObj = _this.parent;\n            cellSaveArgs.cell = cellSaveArgs.cell ? cellSaveArgs.cell : _this.form.parentElement;\n            cellSaveArgs.columnObject = cellSaveArgs.columnObject ? cellSaveArgs.columnObject : column;\n            cellSaveArgs.columnObject.index = isNullOrUndefined(cellSaveArgs.columnObject.index) ? 0 : cellSaveArgs.columnObject.index;\n            if (cellSaveArgs.cancel) {\n                _this.preventSaveCell = false;\n                if (_this.editNext) {\n                    _this.editNext = false;\n                    if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                        return;\n                    }\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n                return;\n            }\n            gObj.editModule.destroyWidgets([column]);\n            gObj.isEdit = false;\n            gObj.editModule.destroyForm();\n            _this.parent.notify(events.tooltipDestroy, {});\n            var rowObj = parentsUntil(cellSaveArgs.cell, literals.movableContent)\n                || parentsUntil(cellSaveArgs.cell, literals.movableHeader) ? gObj.getRowObjectFromUID(tr.getAttribute('data-uid'), true)\n                : gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            if (gObj.getFrozenMode() === literals.leftRight && (parentsUntil(cellSaveArgs.cell, 'e-frozen-right-header')\n                || parentsUntil(cellSaveArgs.cell, 'e-frozen-right-content'))) {\n                rowObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'), false, true);\n            }\n            _this.refreshTD(cellSaveArgs.cell, column, rowObj, cellSaveArgs.value);\n            if (_this.parent.isReact) {\n                cellSaveArgs.cell = _this.newReactTd;\n            }\n            removeClass([tr], [literals.editedRow, 'e-batchrow']);\n            removeClass([cellSaveArgs.cell], ['e-editedbatchcell', 'e-boolcell']);\n            if (!isNullOrUndefined(cellSaveArgs.value) && cellSaveArgs.value.toString() ===\n                (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString() && !_this.isColored\n                || (isNullOrUndefined(cellSaveArgs.value) && isNullOrUndefined(rowObj.data[column.field]) &&\n                    isNullOrUndefined(_this.cellDetails.value) && !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow'))) {\n                cellSaveArgs.cell.classList.remove('e-updatedtd');\n            }\n            if (isNullOrUndefined(isEscapeCellEdit)) {\n                gObj.trigger(events.cellSaved, cellSaveArgs);\n            }\n            gObj.notify(events.toolbarRefresh, {});\n            _this.isColored = false;\n            if (_this.parent.aggregates.length > 0) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n                if (_this.parent.groupSettings.columns.length > 0 && !_this.isAddRow(_this.cellDetails.rowIndex)) {\n                    _this.parent.notify(events.groupAggregates, {});\n                }\n            }\n            _this.preventSaveCell = false;\n            if (_this.editNext) {\n                _this.editNext = false;\n                if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                    return;\n                }\n                var col = gObj.getColumnByField(_this.field);\n                if (col && col.allowEditing) {\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n            }\n            if (isEscapeCellEdit) {\n                gObj.notify(events.restoreFocus, {});\n            }\n        };\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if ((e.action === 'tab' || e.action === 'shiftTab') && this.parent.isEdit) {\n            var gObj = this.parent;\n            var btmIdx = this.getBottomIndex();\n            var rowcell = parentsUntil(e.target, literals.rowCell);\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    var columnIndex = e.action === 'tab' ? visibleColumns.length - 1 : 0;\n                    if (visibleColumns[columnIndex].field === cell.getAttribute('id').slice(this.parent.element.id.length)) {\n                        if (this.cellDetails.rowIndex === btmIdx && e.action === 'tab') {\n                            if (gObj.editSettings.newRowPosition === 'Top') {\n                                gObj.editSettings.newRowPosition = 'Bottom';\n                                this.addRecord();\n                                gObj.editSettings.newRowPosition = 'Top';\n                            }\n                            else {\n                                this.addRecord();\n                            }\n                        }\n                        else {\n                            this.saveCell();\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    BatchEdit.prototype.getBottomIndex = function () {\n        var changes = this.getBatchChanges();\n        return this.parent.getCurrentViewRecords().length + changes[literals.addedRecords].length -\n            changes[literals.deletedRecords].length - 1;\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n *\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n *\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { closest, addClass, select } from '@syncfusion/ej2-base';\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID, getScrollBarWidth, setValidationRuels } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { addRemoveEventListener, getColumnModelByFieldName } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the servicelocator\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editSettings.template || cols[i].editTemplate) {\n                var templteCell = 'templateedit';\n                cols[i].edit = extend(new Edit.editCellType[templteCell](this.parent), cols[i].edit || {});\n            }\n            else {\n                cols[i].edit = extend(new Edit.editCellType[cols[i].editType && Edit.editCellType[cols[i].editType] ?\n                    cols[i].editType : 'defaultedit'](this.parent, this.serviceLocator), cols[i].edit || {});\n            }\n        }\n        this.parent.log('primary_column_missing');\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the notifyargs\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     *\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     * @returns {void}\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        this.isLastRow = tr.rowIndex === this.parent.getContent().querySelector('tr:last-child').rowIndex;\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        this.refreshToolbar();\n        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n        this.parent.notify('start-edit', {});\n    };\n    /**\n     * @param {Element} tr - specifies the tr element\n     * @param {object} args - specifies the object\n     * @param {Element} args.row -specfifes the row\n     * @param {string} args.requestType - specifies the request type\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.checkLastRow = function (tr, args) {\n        var checkLastRow = this.isLastRow;\n        if (this.parent.height !== 'auto' && this.parent.editSettings.newRowPosition === 'Bottom' && args &&\n            args.requestType === 'add' && this.parent.height > this.parent.getContentTable().scrollHeight) {\n            addClass([].slice.call(tr.getElementsByClassName(literals.rowCell)), 'e-lastrowadded');\n        }\n        else if (checkLastRow && tr && tr.classList) {\n            addClass([].slice.call(tr.getElementsByClassName(literals.rowCell)), 'e-lastrowcell');\n        }\n    };\n    /**\n     * Cancels edited state.\n     *\n     * @returns {void}\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.getElementsByClassName('e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.closeEdit();\n        this.refreshToolbar();\n        this.parent.notify(events.closeEdit, {});\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     *\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     * @returns {void}\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        var args = { startEdit: true };\n        if (!data) {\n            this.parent.notify(events.virtualScrollAddActionBegin, args);\n        }\n        if (args.startEdit) {\n            this.parent.element.classList.add('e-editing');\n            this.editModule.addRecord(data, index);\n            this.refreshToolbar();\n            this.parent.notify('start-add', {});\n        }\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     *\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     * @returns {void}\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length && isNullOrUndefined(gObj.commandDelIndex)) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     *\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     * @returns {void}\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRowUid = tr.getAttribute('data-uid');\n        var rowObj = this.parent.getRowObjectFromUID(this.deleteRowUid);\n        if (!isNullOrUndefined(rowObj)) {\n            this.deleteRecord(null, rowObj.data);\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     *\n     * @returns {void}\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     *\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     * @returns {void}\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     *\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     * @returns {void}\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     *\n     * @returns {void}\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     *\n     * @returns {void}\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     *\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     * @returns {void}\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     *\n     * @returns {boolean} returns whether the form is validated\n     */\n    Edit.prototype.editFormValidate = function () {\n        var form1 = this.formObj ? this.formObj.validate() : true;\n        var form2 = this.mFormObj ? this.mFormObj.validate() : true;\n        var form3 = this.frFormObj ? this.frFormObj.validate() : true;\n        return form1 && form2 && form3;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     *\n     * @returns {Object} returns the Object\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     *\n     * @returns {Object} returns the Object\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     *\n     * @returns {void}\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit'\n                    && value && value.length) {\n                    val = new Date(value);\n                }\n                else if (value === '') {\n                    val = null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.getElementsByClassName('e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        var isStringTemplate = 'isStringTemplate';\n        obj[isStringTemplate] = true;\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.parent.focusModule.clearIndicator();\n        this.parent.focusModule.restoreFocus();\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function () {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.eventDetails = [{ event: events.inBoundModelChanged, handler: this.onPropertyChanged },\n            { event: events.initialEnd, handler: this.initialEnd },\n            { event: events.keyPressed, handler: this.keyPressHandler },\n            { event: events.autoCol, handler: this.updateColTypeObj },\n            { event: events.tooltipDestroy, handler: this.destroyToolTip },\n            { event: events.preventBatch, handler: this.preventBatch },\n            { event: events.destroyForm, handler: this.destroyForm }];\n        addRemoveEventListener(this.parent, this.eventDetails, true, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.eventDetails, false);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        if (e.requestType === 'batchsave') {\n            this.parent.focusModule.restoreFocus();\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @param {Element} form - specifies the element\n     * @param {Object} editedData - specifies the edited data\n     * @returns {Object} returns the object\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            var elements = [].slice.call(form.elements);\n            for (var k = 0; k < elements.length; k++) {\n                if (((elements[k].hasAttribute('name') && (elements[k].className !== 'e-multi-hidden')) ||\n                    elements[k].classList.contains('e-multiselect')) && !(elements[k].type === 'hidden' &&\n                    (parentsUntil(elements[k], 'e-switch-wrapper') || parentsUntil(elements[k], 'e-checkbox-wrapper')))) {\n                    var field = (elements[k].hasAttribute('name')) ? setComplexFieldID(elements[k].getAttribute('name')) :\n                        setComplexFieldID(elements[k].getAttribute('id'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: elements[k].getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = elements[k].checked;\n                    }\n                    else if (elements[k].value) {\n                        value = elements[k].value;\n                        if (elements[k].ej2_instances &&\n                            elements[k].ej2_instances.length &&\n                            !isNullOrUndefined(elements[k].ej2_instances[0].value)) {\n                            elements[k].blur();\n                            value = elements[k].ej2_instances[0].value;\n                            if ((column.type === 'date' || column.type === 'dateTime' || column.type === 'datetime') &&\n                                (elements[k].ej2_instances[0].isServerRendered)) {\n                                value = elements[k].value;\n                            }\n                        }\n                    }\n                    else if (elements[k].ej2_instances) {\n                        value = elements[k].ej2_instances[0].value;\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(elements[k], value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(elements[k], value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    if (elements[k].type === 'radio') {\n                        if (elements[k].checked) {\n                            DataUtil.setValue(column.field, value, editedData);\n                        }\n                    }\n                    else {\n                        DataUtil.setValue(column.field, value, editedData);\n                    }\n                }\n            }\n            return editedData;\n        }\n        var col = gObj.columnModel.filter(function (col) { return col.editTemplate; });\n        for (var j = 0; j < col.length; j++) {\n            if (form[getComplexFieldID(col[j].field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col[j].field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col[j].field)]];\n                var temp = inputElements.filter(function (e) {\n                    return !isNullOrUndefined((e.ej2_instances));\n                });\n                if (temp.length === 0) {\n                    temp = inputElements.filter(function (e) { return e.hasAttribute('name'); });\n                }\n                for (var k = 0; k < temp.length; k++) {\n                    var value = this.getValue(col[j], temp[k], editedData);\n                    DataUtil.setValue(col[j].field, value, editedData);\n                }\n            }\n        }\n        var inputs = [].slice.call(form.getElementsByClassName('e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col_1 = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col_1 && col_1.field) {\n                var value = this.getValue(col_1, inputs[i], editedData);\n                DataUtil.setValue(col_1.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input, editedData) {\n        var value = input.ej2_instances ?\n            input.ej2_instances[0].value : input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        if (isNullOrUndefined(editedData[col.field]) && value === '') {\n            value = editedData[col.field];\n        }\n        return value;\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        if (e.requestType === 'columnstate' && this.parent.isEdit\n            && this.parent.editSettings.mode !== 'Batch') {\n            this.closeEdit();\n        }\n        else {\n            var editRow = this.parent.element.querySelector('.' + literals.editedRow);\n            var addRow = this.parent.element.querySelector('.' + literals.addedRow);\n            if (editRow && this.parent.frozenRows && e.requestType === 'virtualscroll'\n                && parseInt(parentsUntil(editRow, literals.row).getAttribute(literals.ariaRowIndex), 10) < this.parent.frozenRows) {\n                return;\n            }\n            var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save', 'infiniteScroll', 'virtualscroll'];\n            var isRestrict = restrictedRequestTypes.indexOf(e.requestType) === -1;\n            var isDestroyVirtualForm = this.parent.enableVirtualization && this.formObj\n                && !this.formObj.isDestroyed && (editRow || addRow || e.requestType === 'cancel') && isRestrict;\n            if ((!this.parent.enableVirtualization && this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n                && isRestrict && !e.cancel) || isDestroyVirtualForm) {\n                this.destroyWidgets();\n                this.destroyForm();\n            }\n        }\n    };\n    /**\n     * @param {Column[]} cols - specfies the column\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        cols = cols ? cols : this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization);\n        if (cols.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        var elements = [].slice.call(this.formObj.element.elements);\n        for (var i = 0; i < elements.length; i++) {\n            if (elements[i].hasAttribute('name')) {\n                if (elements[i].ej2_instances &&\n                    elements[i].ej2_instances.length &&\n                    !elements[i].ej2_instances[0].isDestroyed) {\n                    elements[i].ej2_instances[0].destroy();\n                }\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        var formObjects = [this.formObj, this.mFormObj, this.frFormObj, this.virtualFormObj];\n        for (var i = 0; i < formObjects.length; i++) {\n            if (formObjects[i] && formObjects[i].element && !formObjects[i].isDestroyed) {\n                formObjects[i].destroy();\n            }\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.' + literals.gridHeader) &&\n            gridElement.querySelector('.' + literals.gridContent) ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, literals.gridContent) || (this.parent.frozenRows\n                        && parentsUntil(e.target, literals.headerContent)))\n                    && !document.getElementsByClassName('e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                if (this.parent.isEdit) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        this.editModule.escapeCellEdit();\n                    }\n                    else {\n                        this.closeEdit();\n                    }\n                }\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @param {Column[]} cols - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.isFrozenGrid();\n        var isInline = this.parent.editSettings.mode === 'Normal';\n        var idx = this.parent.getFrozenMode() === 'Right' && isInline ? 1 : 0;\n        var form = this.parent.editSettings.mode !== 'Dialog' ?\n            gObj.element.getElementsByClassName('e-gridform')[idx] :\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document);\n        var index = this.parent.getFrozenMode() === 'Right' && isInline ? 0 : 1;\n        var mForm = gObj.element.getElementsByClassName('e-gridform')[index];\n        var rules = {};\n        var mRules = {};\n        var frRules = {};\n        cols = cols ? cols : gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible) {\n                continue;\n            }\n            if (cols[i].validationRules) {\n                setValidationRuels(cols[i], index, rules, mRules, frRules, cols.length);\n            }\n        }\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                var frForm = gObj.element.getElementsByClassName('e-gridform')[2];\n                this.parent.editModule.frFormObj = this.createFormObj(frForm, frRules);\n            }\n        }\n        else {\n            rules = extend(rules, mRules, frRules);\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n    };\n    /**\n     * @param {HTMLFormElement} form - Defined Form element\n     * @param {Object} rules - Defines form rules\n     * @returns {FormValidator} Returns formvalidator instance\n     * @hidden\n     */\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                var uid = inputElement.getAttribute('e-mappinguid');\n                var args = {\n                    column: _this.parent.getColumnByUid(uid),\n                    error: error,\n                    inputElement: inputElement,\n                    value: inputElement.value\n                };\n                _this.valErrorPlacement(inputElement, error);\n                _this.parent.notify(events.valCustomPlacement, args);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        var gObj = this.parent;\n        var table;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            isFHdr = (gObj.frozenRows && gObj.frozenRows\n                > (parseInt(closest(inputElement, '.' + literals.row).getAttribute(literals.ariaRowIndex), 10) || 0));\n            var field = inputElement.name;\n            var col = void 0;\n            if (field) {\n                col = getColumnModelByFieldName(this.parent, setComplexFieldID(field));\n            }\n            if (col && gObj.isFrozenGrid()) {\n                if (col.getFreezeTableName() === 'frozen-left') {\n                    table = isFHdr ? gObj.getFrozenVirtualHeader().querySelector('table')\n                        : gObj.getFrozenVirtualContent().querySelector('table');\n                }\n                else if (col.getFreezeTableName() === 'frozen-right') {\n                    table = isFHdr ? gObj.getFrozenRightHeader().querySelector('table')\n                        : gObj.getFrozenRightContent().querySelector('table');\n                }\n                else if (col.getFreezeTableName() === 'movable') {\n                    table = isFHdr ? gObj.getMovableVirtualHeader().querySelector('table')\n                        : gObj.getMovableVirtualContent().querySelector('table');\n                }\n            }\n            else {\n                table = isFHdr ? gObj.getHeaderTable() : gObj.getContentTable();\n            }\n        }\n        else {\n            table = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        }\n        return table;\n    };\n    Edit.prototype.resetElemPosition = function (elem, args) {\n        var td = parentsUntil(args.element, literals.rowCell);\n        if (td) {\n            var tdRight = td.getBoundingClientRect().right;\n            var elemRight = elem.getBoundingClientRect().right;\n            if (elemRight > tdRight) {\n                var offSet = elemRight - tdRight;\n                elem.style.left = (elem.offsetLeft - offSet) + 'px';\n            }\n        }\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                    this.resetElemPosition(elem, args);\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var column = this.parent.getColumnByField(name);\n        var formObj = this.parent.getFrozenMode() === literals.leftRight && this.parent.editSettings.mode === 'Normal'\n            && column.getFreezeTableName() === literals.frozenRight ? this.frFormObj.element : this.formObj.element;\n        var customForm = parentsUntil(element, 'e-virtual-validation');\n        if (customForm) {\n            formObj = this.virtualFormObj.element;\n        }\n        var gcontent = this.parent.getContent().firstElementChild;\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()\n            || this.parent.getFrozenRightColumnsCount();\n        if (frzCols) {\n            gcontent = this.parent.getMovableVirtualContent();\n        }\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var td = closest(element, '.' + literals.rowCell);\n        var row = closest(element, '.' + literals.row);\n        var fCont = this.parent.getContent().querySelector('.' + literals.frozenContent);\n        var isFHdr;\n        var isFHdrLastRow = false;\n        var validationForBottomRowPos;\n        var isBatchModeLastRow = false;\n        var viewPortRowCount = Math.round(this.parent.getContent().clientHeight / this.parent.getRowHeight()) - 1;\n        var rows = !fCont ? [].slice.call(this.parent.getContent().getElementsByClassName(literals.row))\n            : [].slice.call(this.parent.getFrozenVirtualContent().getElementsByClassName(literals.row));\n        if (this.parent.editSettings.mode === 'Batch') {\n            if (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && rows[rows.length - 1].getAttribute(literals.ariaRowIndex) === row.getAttribute(literals.ariaRowIndex)) {\n                isBatchModeLastRow = true;\n            }\n        }\n        if (isInline) {\n            if (this.parent.frozenRows) {\n                var fHeraderRows = frzCols ? this.parent.getFrozenVirtualHeader().querySelector(literals.tbody).children\n                    : this.parent.getHeaderTable().querySelector(literals.tbody).children;\n                isFHdr = fHeraderRows.length > (parseInt(row.getAttribute(literals.ariaRowIndex), 10) || 0);\n                isFHdrLastRow = isFHdr && parseInt(row.getAttribute(literals.ariaRowIndex), 10) === fHeraderRows.length - 1;\n            }\n            if (isFHdrLastRow || (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && ((this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                    && this.editModule.args.requestType === 'add')) || (td.classList.contains('e-lastrowcell')\n                    && !row.classList.contains(literals.addedRow)))) || isBatchModeLastRow) {\n                validationForBottomRowPos = true;\n            }\n        }\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            select('#' + this.parent.element.id + '_dialogEdit_wrapper .e-dlg-content', document);\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-lib e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (frzCols ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        if (isInline && client.left < left) {\n            div.style.left = parseInt(div.style.left, 10) - client.left + left + 'px';\n        }\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow;\n        if (validationForBottomRowPos) {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-bottom' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-bottom' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-bottom' }));\n        }\n        else {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        }\n        div.appendChild(content);\n        div.appendChild(arrow);\n        if (!customForm && (frzCols || this.parent.frozenRows) && this.parent.editSettings.mode !== 'Dialog') {\n            var getEditCell = this.parent.editSettings.mode === 'Normal' ?\n                closest(element, '.e-editcell') : closest(element, '.' + literals.table);\n            getEditCell.style.position = 'relative';\n            div.style.position = 'absolute';\n            if (this.parent.editSettings.mode === 'Batch' ||\n                (closest(element, '.' + literals.frozenContent) || closest(element, '.' + literals.frozenHeader))\n                || (this.parent.frozenRows && !frzCols)) {\n                formObj.appendChild(div);\n            }\n            else {\n                this.mFormObj.element.appendChild(div);\n            }\n        }\n        else {\n            if (customForm) {\n                this.virtualFormObj.element.appendChild(div);\n            }\n            else {\n                this.formObj.element.appendChild(div);\n            }\n        }\n        if (!validationForBottomRowPos && isInline && gcontent.getBoundingClientRect().bottom < inputClient.bottom + inputClient.height) {\n            gcontent.scrollTop = gcontent.scrollTop + div.offsetHeight + arrow.scrollHeight;\n        }\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        if ((frzCols || this.parent.frozenRows) && this.parent.editSettings.mode !== 'Dialog') {\n            div.style.left = input.offsetLeft + (input.offsetWidth / 2 - div.offsetWidth / 2) + 'px';\n        }\n        else {\n            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        }\n        if (isInline && !isScroll && !this.parent.allowPaging || frzCols || this.parent.frozenRows) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n        if (validationForBottomRowPos) {\n            if (isScroll && !frzCols && this.parent.height !== 'auto' && !this.parent.frozenRows\n                && !this.parent.enableVirtualization) {\n                var scrollWidth = gcontent.scrollWidth > gcontent.offsetWidth ? getScrollBarWidth() : 0;\n                div.style.bottom = (this.parent.height - gcontent.querySelector('table').offsetHeight\n                    - scrollWidth) + inputClient.height + 9 + 'px';\n            }\n            else {\n                div.style.bottom = inputClient.height + 9 + 'px';\n            }\n            if (rows.length < viewPortRowCount && this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                && this.editModule.args.requestType === 'add')) {\n                var rowsCount = this.parent.frozenRows ? this.parent.frozenRows + (rows.length - 1) : rows.length - 1;\n                var rowsHeight = rowsCount * this.parent.getRowHeight();\n                var position = this.parent.getContent().clientHeight - rowsHeight;\n                div.style.bottom = position + 9 + 'px';\n            }\n            div.style.top = null;\n        }\n    };\n    /**\n     * @param {Column} col - specfies the column\n     * @returns {boolean} returns the whether column is grouped\n     * @hidden\n     */\n    Edit.prototype.checkColumnIsGrouped = function (col) {\n        return !col.visible && !(this.parent.groupSettings.columns.indexOf(col.field) > -1);\n    };\n    /**\n     * @param {object} editors -specfies the editors\n     * @returns {void}\n     * @hidden\n     */\n    Edit.AddEditors = function (editors) {\n        Edit.editCellType = extend(Edit.editCellType, editors);\n    };\n    Edit.editCellType = {\n        'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n        'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n        'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n        'templateedit': TemplateEditCell\n    };\n    return Edit;\n}());\nexport { Edit };\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.isDlgOpen = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n        else {\n            removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     *\n     * @param {number} x - specifies the position x\n     * @param {number} y - specifies the position y\n     * @param {Element} target - specifies the target\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.action === 'escape') {\n            this.hideDialog();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.resetColumnState();\n            return;\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            this.changedStateColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.resetColumnState();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[i].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[i].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = [].slice.call(this.parent.element.getElementsByClassName('e-cc-chbox'));\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        if (state) {\n            classList(element, ['e-check'], ['e-uncheck']);\n        }\n        else {\n            classList(element, ['e-uncheck'], ['e-check']);\n        }\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue, createElement } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getForeignData, measureColumnDepth, getUid } from '../base/util';\nimport { Grid } from '../base/grid';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent, foreignKeyData) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n        if (!parent.parentDetails && foreignKeyData) {\n            this.foreignKeyData = foreignKeyData;\n        }\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        var query = data.generateQuery(true).requiresCount();\n        if (data.isRemote()) {\n            if (parent.groupSettings.enableLazyLoading && parent.groupSettings.columns.length) {\n                query.lazyLoad = [];\n            }\n            else {\n                query.take(parent.pageSettings.totalRecordsCount);\n            }\n        }\n        return query;\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getGridRowModel = function (columns, dataSource, gObj, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        var rows = [];\n        var length = dataSource.length;\n        if (length) {\n            for (var i = 0; i < length; i++, startIndex++) {\n                var options = { isExpand: false };\n                options.data = dataSource[i];\n                options.index = startIndex;\n                if (gObj.childGrid) {\n                    if (gObj.hierarchyPrintMode === 'All') {\n                        options.isExpand = true;\n                    }\n                    else if (gObj.hierarchyPrintMode === 'Expanded' &&\n                        this.parent.expandedRows && this.parent.expandedRows[startIndex]) {\n                        options.isExpand = gObj.expandedRows[startIndex].isExpand;\n                    }\n                }\n                var row = new Row(options);\n                row.cells = this.generateCells(columns, gObj);\n                rows.push(row);\n            }\n            this.processColumns(rows);\n        }\n        return rows;\n    };\n    ExportHelper.prototype.generateCells = function (columns, gObj) {\n        var cells = [];\n        if (gObj.childGridLevel) {\n            var len = gObj.childGridLevel;\n            for (var i = 0; len > i; i++) {\n                cells.push(this.generateCell({}, CellType.Indent));\n            }\n        }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            cells.push(this.generateCell(col, CellType.Data));\n        }\n        return cells;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            for (var i = 0; i < fColumns.length; i++) {\n                var colData = ('result' in fColumns[i].dataSource) ?\n                    new DataManager(fColumns[i].dataSource.result) :\n                    fColumns[i].dataSource;\n                columnPromise.push(colData.executeQuery(new Query()));\n            }\n            promise = Promise.all(columnPromise).then(function (e) {\n                for (var j = 0; j < fColumns.length; j++) {\n                    _this.foreignKeyData[fColumns[j].field] = e[j].result;\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            });\n        }\n        return promise;\n    };\n    ExportHelper.prototype.getHeaders = function (columns, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        this.colDepth = measureColumnDepth(columns);\n        var rows = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows, columns);\n        return { rows: rows, columns: this.generateActualColumns(columns) };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (columns, actualColumns) {\n        if (actualColumns === void 0) { actualColumns = []; }\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var column = columns_2[_i];\n            if (column.commands) {\n                continue;\n            }\n            if (!column.columns) {\n                if (column.visible || this.hideColumnInclude) {\n                    actualColumns.push(column);\n                }\n            }\n            else {\n                if (column.visible || this.hideColumnInclude) {\n                    var colSpan = this.getCellCount(column, 0);\n                    if (colSpan !== 0) {\n                        this.generateActualColumns(column.columns, actualColumns);\n                    }\n                }\n            }\n        }\n        return actualColumns;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows, cols) {\n        var columns = cols;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0);\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index) {\n        if (!cols.columns && (cols.visible !== false || this.hideColumnInclude) && !cols.commands) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, index));\n        }\n        else if (cols.columns) {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isIgnoreFirstCell = true;\n                }\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, rowIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': cellType === CellType.Data,\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'index': rowIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = [];\n        if (gridObj.enableColumnVirtualization) {\n            columnIndexes = gridObj.getColumnIndexesInView();\n        }\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (gridObj.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.splice(0, 0, this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    ExportHelper.prototype.checkAndExport = function (gridPool, globalResolve) {\n        var bool = Object.keys(gridPool).some(function (key) {\n            return !gridPool[key];\n        });\n        if (!bool) {\n            globalResolve();\n        }\n    };\n    ExportHelper.prototype.failureHandler = function (gridPool, childGridObj, resolve) {\n        var _this = this;\n        return function () {\n            gridPool[childGridObj.id] = true;\n            _this.checkAndExport(gridPool, resolve);\n        };\n    };\n    ExportHelper.prototype.createChildGrid = function (gObj, row, exportType, gridPool) {\n        var childGridObj = new Grid(this.parent.detailRowModule.getGridModel(gObj, row, exportType));\n        gObj.isPrinting = false;\n        var parent = 'parentDetails';\n        childGridObj[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: getValue(childGridObj.queryString, row.data),\n            parentRowData: row.data\n        };\n        var exportId = getUid('child-grid');\n        var element = createElement('div', {\n            id: exportId, styles: 'display: none'\n        });\n        document.body.appendChild(element);\n        childGridObj.id = exportId;\n        gridPool[exportId] = false;\n        childGridObj.isExportGrid = true;\n        return { childGrid: childGridObj, element: element };\n    };\n    ExportHelper.prototype.getGridExportColumns = function (columns) {\n        var actualGridColumns = [];\n        for (var i = 0, gridColumns = columns; i < gridColumns.length; i++) {\n            if (gridColumns[i].type !== 'checkbox') {\n                actualGridColumns.push(gridColumns[i]);\n            }\n        }\n        return actualGridColumns;\n    };\n    /**\n     * Gets the foreignkey data.\n     *\n     * @returns {ForeignKeyFormat} returns the foreignkey data\n     * @hidden\n     */\n    ExportHelper.prototype.getForeignKeyData = function () {\n        return this.foreignKeyData;\n    };\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /**\n     * Used to format the exporting cell value\n     *\n     * @param  {ExportHelperArgs} args - Specifies cell details.\n     * @param  {boolean} isServerBlaz - Specifies blazor platform\n     * @returns {string} returns formated value\n     * @hidden\n     */\n    ExportValueFormatter.prototype.formatCellValue = function (args, isServerBlaz) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value || args.value === 0 ?\n                this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean' && args.value !== '') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.value === 'string') {\n                args.value = new Date(args.value);\n            }\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                var cFormat = args.column.format;\n                if (args.column.type === 'date') {\n                    format = isServerBlaz ? { type: 'date', format: cFormat } : { type: 'date', skeleton: cFormat };\n                }\n                else if (args.column.type === 'time') {\n                    format = isServerBlaz ? { type: 'time', format: cFormat } : { type: 'time', skeleton: cFormat };\n                }\n                else {\n                    format = isServerBlaz ? { type: 'dateTime', format: cFormat } : { type: 'dateTime', skeleton: cFormat };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        customFormat = {\n                            type: args.column.format.type,\n                            format: args.column.format.format, skeleton: args.column.format.skeleton\n                        };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, getValue, detach, extend } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getPrintGridModel, getUid, isExportColumns, updateColumnTypeForExportColumns, prepareColumns, measureColumnDepth } from '../base/util';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifies the ServiceLocator\n     * @hidden\n     */\n    function ExcelExport(parent, locator) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.gridPool = {};\n        this.sheet = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.locator = locator;\n        this.l10n = this.locator.getService('localization');\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n        gObj.id = getUid('main-grid');\n        this.gridPool[gObj.id] = false;\n    };\n    /**\n     * Export Grid to Excel file.\n     *\n     * @param {IGrid} grid - Defines the grid.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {Workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {boolean} isCsv - true if export to CSV.\n     * @param {boolean} isBlob - true if isBlob is enabled.\n     * @returns {Promise<any>} - Returns the map for export.\n     */\n    // eslint-disable-next-line\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        this.gridPool = {};\n        if (grid.childGrid && !(!isNullOrUndefined(exportProperties) && exportProperties.hierarchyExportMode === 'None')) {\n            grid.expandedRows = getPrintGridModel(grid).expandedRows;\n        }\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel]) {\n            return new Promise(function (resolve) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        if (isExportColumns(exportProperties)) {\n            updateColumnTypeForExportColumns(exportProperties, gObj);\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    ExcelExport.prototype.exportingSuccess = function (resolve) {\n        this.isExporting = false;\n        this.parent.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n        this.parent.log('exporting_complete', this.getModuleName());\n        resolve(this.book);\n        this.sheet.images = [];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            var query_1 = exportProperties.query ? exportProperties.query : new Query();\n            if (isNullOrUndefined(query_1.isCountRequired) || gObj.aggregates) {\n                query_1.isCountRequired = true;\n            }\n            return new Promise(function (resolve) {\n                var dataManager = exportProperties.dataSource.executeQuery(query_1);\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                });\n            });\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, _this.parent.getCurrentViewRecords());\n                _this.exportingSuccess(resolve);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise_1.push(this.helper.getColumnData(gObj));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                }).catch(function (e) {\n                    reject(_this.book);\n                    _this.parent.trigger(events.actionFailure, e);\n                });\n            });\n        }\n    };\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isMultipleExport, workbook, r) {\n        var _this = this;\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        var separator;\n        var rows = [];\n        var colDepth = measureColumnDepth(gObj.columns);\n        var isExportPropertiesPresent = !isNullOrUndefined(exportProperties);\n        if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.multipleExport)) {\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (isExportPropertiesPresent) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (isExportPropertiesPresent ? exportProperties.includeHiddenColumn : false);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        return new Promise(function (resolve, reject) {\n            gObj.childGridLevel = 0;\n            rows = _this.processGridExport(gObj, exportProperties, r);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            var organisedRows = [];\n            _this.organiseRows(rows, rows[0].index, organisedRows);\n            _this.rows = _this.rows.concat(organisedRows);\n            //footer template add\n            if (!isNullOrUndefined(_this.footer)) {\n                if ((_this.expType === 'AppendToSheet' && !isMultipleExport) || (_this.expType === 'NewSheet')) {\n                    _this.processExcelFooter(_this.footer);\n                }\n            }\n            if (_this.columns.length > 0) {\n                _this.sheet.columns = _this.columns;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.sheet.rows = _this.rows;\n            _this.sheet.enableRtl = _this.parent.enableRtl;\n            if (_this.parent.allowFiltering && gObj.getVisibleColumns().length && isExportPropertiesPresent &&\n                exportProperties.enableFilter) {\n                var autoFilters = {\n                    row: colDepth, column: _this.groupedColLength ? _this.groupedColLength + 1 :\n                        _this.sheet.columns[0].index, lastRow: _this.sheet.rows.length, lastColumn: _this.sheet.columns.length\n                };\n                _this.sheet.autoFilters = autoFilters;\n            }\n            _this.workSheet.push(_this.sheet);\n            _this.book.worksheets = _this.workSheet;\n            _this.book.styles = _this.styles;\n            gObj.notify('finalPageSetup', _this.book);\n            if (!isMultipleExport) {\n                if (_this.isCsvExport) {\n                    if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.separator)\n                        && exportProperties.separator !== ',') {\n                        separator = exportProperties.separator;\n                    }\n                    var book = new Workbook(_this.book, 'csv', gObj.locale, gObj.currencyCode, separator);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.csv');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('text/csv');\n                    }\n                }\n                else {\n                    var book = new Workbook(_this.book, 'xlsx', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.xlsx');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                    }\n                }\n                if (_this.isElementIdChanged) {\n                    gObj.element.id = '';\n                }\n                delete gObj.expandedRows;\n            }\n            return workbook;\n        });\n    };\n    ExcelExport.prototype.organiseRows = function (rows, initialIndex, organisedRows) {\n        if (!rows.length) {\n            return initialIndex;\n        }\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            var childRows = row.childRows;\n            if (childRows) {\n                row.index = initialIndex++;\n                delete row.childRows;\n                organisedRows.push(row);\n                initialIndex = this.organiseRows(childRows, initialIndex, organisedRows);\n            }\n            else {\n                row.index = initialIndex++;\n                organisedRows.push(row);\n            }\n        }\n        return initialIndex;\n    };\n    ExcelExport.prototype.processGridExport = function (gObj, exportProperties, r) {\n        var excelRows = [];\n        var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n            this.theme = exportProperties.theme;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(exportProperties)) {\n            gObj.hierarchyPrintMode = exportProperties.hierarchyExportMode || 'Expanded';\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var gColumns = isExportColumns(exportProperties) ?\n            prepareColumns(exportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n        var headerRow = helper.getHeaders(gColumns, this.includeHiddenColumn);\n        var groupIndent = gObj.groupSettings.columns.length;\n        excelRows = this.processHeaderContent(gObj, headerRow, groupIndent, excelRows);\n        // eslint-disable-next-line max-len\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            // eslint-disable-next-line max-len\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, exportProperties.dataSource, excelRows, helper);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, gObj.currentViewData, excelRows, helper);\n        }\n        else {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, undefined, excelRows, helper);\n        }\n        gObj.notify(events.exportDataBound, { excelRows: excelRows, type: 'excel' });\n        return excelRows;\n    };\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, exportProperties, currentViewRecords, excelRow, helper) {\n        var record;\n        if (!isNullOrUndefined(currentViewRecords) && currentViewRecords.length) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level, 0, exportProperties, excelRow, helper);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0, 0, exportProperties, excelRow, helper);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, excelRow, currentViewRecords);\n            }\n            else {\n                var result = returnType.result.GroupGuid ?\n                    returnType.result.records : returnType.result;\n                this.processAggregates(gObj, result, excelRow);\n            }\n        }\n        return excelRow;\n    };\n    ExcelExport.prototype.processGroupedRows = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    gObj, dataSource, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            var cells = [];\n            var index = 1;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn()\n            };\n            var value = gObj.getColumnByField(item.field).headerText +\n                ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : item.key) + ' - ';\n            if (item.count > 1) {\n                value += item.count + ' items';\n            }\n            else {\n                value += item.count + ' item';\n            }\n            var cArgs = { captionText: value, type: this.isCsvExport ? 'CSV' : 'Excel' };\n            this.parent.trigger(events.exportGroupCaption, cArgs);\n            cell.value = cArgs.captionText;\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, excelRows, this.rowLength);\n            cells.push(cell);\n            if (excelRows[excelRows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = excelRows[excelRows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            excelRows[excelRows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                excelRows[excelRows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level, startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level) + dataSource.childLevels, true);\n            }\n            else {\n                startIndex = this.processRecordRows(gObj, item.items, headerRow, (level), startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level), true);\n            }\n        }\n    };\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        var index = 1;\n        var cells = [];\n        var columns = headerRow.columns;\n        var rows = helper.getGridRowModel(columns, record, gObj, startIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            cells = [];\n            startIndex++;\n            index = 1;\n            var templateRowHeight = void 0;\n            for (var c = 0, len = row.cells.length; c < len; c++) {\n                var gCell = row.cells[c];\n                if (gCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var fkData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    fkData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, fkData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    var cell = {};\n                    var idx = index + level + gObj.childGridLevel;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var excelCellArgs = {\n                        data: row.data, column: column, foreignKeyData: fkData,\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    };\n                    gObj.trigger(events.excelQueryCellInfo, excelCellArgs);\n                    if (!isNullOrUndefined(excelCellArgs.image) && !isNullOrUndefined(excelCellArgs.image.base64)) {\n                        if (isNullOrUndefined(this.sheet.images)) {\n                            this.sheet.images = [];\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var excelImage = {\n                            image: excelCellArgs.image.base64, row: this.rowLength, column: idx,\n                            lastRow: this.rowLength, lastColumn: idx\n                        };\n                        this.sheet.images.push(excelImage);\n                        templateRowHeight = excelCellArgs.image.height || 50;\n                        this.columns[idx - 1].width = excelCellArgs.image.width || this.columns[idx - 1].width;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.hyperLink)) {\n                        excelCellArgs.cell.hyperlink = { target: excelCellArgs.hyperLink.target };\n                        excelCellArgs.value = excelCellArgs.hyperLink.displayText || excelCellArgs.value;\n                    }\n                    cell = excelCellArgs.cell;\n                    cell.index = idx;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.data === '' && gObj.childGridLevel && index === 1) {\n                        var style = {};\n                        style.hAlign = 'left';\n                        excelCellArgs = { style: style };\n                        cell.colSpan = gObj.getVisibleColumns().length;\n                        cell.value = this.l10n.getConstant('EmptyRecord');\n                    }\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            var excelRow = { index: this.rowLength++, cells: cells };\n            if (!isNullOrUndefined(templateRowHeight)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                excelRow.height = templateRowHeight;\n            }\n            if (this.groupedColLength < 8 && level > 0) {\n                excelRow.grouping = { outlineLevel: level, isCollapsed: true };\n                excelRows.push(excelRow);\n            }\n            else {\n                excelRows.push(excelRow);\n            }\n            if (!isNullOrUndefined(gObj.childGrid)) {\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(excelExportProperties) && excelExportProperties.exportType) ?\n                    excelExportProperties.exportType : 'AllPages';\n                var returnVal = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnVal.childGrid;\n                var element = returnVal.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                childGridObj.childGridLevel = gObj.childGridLevel + 1;\n                var args = { childGrid: childGridObj, row: row, exportProperties: excelExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(excelRow, childGridObj, excelExportProperties, row);\n                childGridObj.appendTo(element);\n            }\n            gObj.notify(events.exportRowDataBound, { rowObj: row, type: 'excel', excelRows: excelRows });\n        }\n        return startIndex;\n    };\n    ExcelExport.prototype.childGridCell = function (excelRow, childGridObj, excelExportProps, gRow) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            if (result.result.length === 0) {\n                result.result = [''];\n            }\n            excelRow.childRows = _this.processGridExport(childGridObj, excelExportProps, result);\n            var intent = _this.parent.groupSettings.columns.length;\n            var rows = excelRow.childRows;\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].grouping = { outlineLevel: intent + childGridObj.childGridLevel,\n                    isCollapsed: !gRow.isExpand, isHidden: !gRow.isExpand };\n            }\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return excelRow;\n        };\n    };\n    ExcelExport.prototype.processAggregates = function (gObj, rec, excelRows, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var columns = summaryModel.getColumns();\n        columns = columns.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n        if (gObj.aggregates.length && this.parent !== gObj) {\n            gObj.aggregateModule.prepareSummaryInfo();\n        }\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                excelRows = this.fillAggregates(gObj, groupSummaryRows, indent, excelRows);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates, null, null, columns);\n            if (sRows.length > 0 && !byGroup) {\n                excelRows = this.fillAggregates(gObj, sRows, indent, excelRows);\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.fillAggregates = function (gObj, rows, indent, excelRows, customIndex) {\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            var cells = [];\n            var isEmpty = true;\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var eCell = {};\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    continue;\n                }\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        isEmpty = false;\n                        var footerTemplate = !isNullOrUndefined(cell.column.footerTemplate);\n                        var groupFooterTemplate = !isNullOrUndefined(cell.column.groupFooterTemplate);\n                        var groupCaptionTemplate = !isNullOrUndefined(cell.column.groupCaptionTemplate);\n                        eCell.index = index + indent + gObj.childGridLevel;\n                        if (footerTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (groupFooterTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (groupCaptionTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - sum\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - average\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - max\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - min\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - count\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - truecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - falsecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        this.aggregateStyle(cell.column, eCell.style, cell.column.field);\n                        var gridCellStyle = cell.attributes.style;\n                        if (gridCellStyle.textAlign) {\n                            eCell.style.hAlign = gridCellStyle.textAlign.toLowerCase();\n                        }\n                        var args = {\n                            row: row,\n                            type: footerTemplate ? 'Footer' : groupFooterTemplate ? 'GroupFooter' : 'GroupCaption',\n                            style: eCell\n                        };\n                        this.parent.trigger(events.excelAggregateQueryCellInfo, args);\n                        cells.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent + gObj.childGridLevel;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                excelRows.push({ index: customIndex, cells: cells });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = excelRows[excelRows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells };\n                }\n                if (!isEmpty) {\n                    excelRows.push(row_1);\n                }\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.aggregateStyle = function (col, style, field) {\n        var column = this.parent.getColumnByField(field);\n        if (typeof col.format === 'object') {\n            var format = col.format;\n            style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n            if (!isNullOrUndefined(format.type)) {\n                style.type = format.type.toLowerCase();\n            }\n        }\n        else {\n            style.numberFormat = col.format;\n        }\n        if (!isNullOrUndefined(column) && isNullOrUndefined(style.type)) {\n            style.type = column.type.toLowerCase();\n        }\n    };\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        var txt;\n        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n        if (this.parent.isReact || this.parent.isVue) {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        else {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n        }\n        return txt[0].textContent;\n    };\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        var result = {};\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, indent, excelRows) {\n        var rowIndex = 1;\n        var gridRows = headerRow.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = headerRow.columns;\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            var cells = [];\n            for (var column = 0; column < gridRows[row].cells.length; column++) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var style = {};\n                var cell = {};\n                var gridCell = gridRows[row].cells[column];\n                if (gridCell.cellType === CellType.HeaderIndent || gridCell.cellType === CellType.DetailHeader) {\n                    continue;\n                }\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index + gObj.childGridLevel;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign.toLowerCase();\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign.toLowerCase();\n                }\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, style: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, excelHeaderCellArgs);\n                cell.style = excelHeaderCellArgs.style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            excelRows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        style.bold = true;\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        return extend(style, themestyle);\n    };\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                var format = col.format;\n                style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n                if (!isNullOrUndefined(format.type)) {\n                    style.type = format.type.toLowerCase();\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign.toLowerCase();\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width) && col.width !== 'auto') {\n            this.columns.push({ index: index + gObj.childGridLevel, width: typeof col.width === 'number' ?\n                    col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n *\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.headerOnPages = [];\n        this.drawPosition = { xPosition: 0, yPosition: 0 };\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n        this.pdfPageSettings = new PdfPageSettings();\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    /**\n     * Used to map the input data\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {PdfExportProperties} pdfExportProperties - specifies the PdfExportProperties\n     * @param {boolean} isMultipleExport - specifies the isMultipleExport\n     * @param {Object} pdfDoc - specifies the pdfDoc\n     * @param {boolean} isBlob - speciies whether it is Blob or not\n     * @returns {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        var query = new Query();\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false,\n            headerPageNumbers: [], gridDrawPosition: { xPosition: 0, yPosition: 0 }, generateQuery: false\n        };\n        var gridObject = 'gridObject';\n        args[gridObject] = parent;\n        var can = 'cancel';\n        var generateQuery = 'generateQuery';\n        var header = 'headerPageNumbers';\n        var drawPos = 'gridDrawPosition';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        if (isExportColumns(pdfExportProperties)) {\n            updateColumnTypeForExportColumns(pdfExportProperties, parent);\n        }\n        if (args[generateQuery]) {\n            query = ExportHelper.getQuery(parent, this.data);\n        }\n        this.headerOnPages = args[header];\n        this.drawPosition = args[drawPos];\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)\n            && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    }).catch(function (e) {\n                        reject(_this.pdfDocument);\n                        _this.parent.trigger(events.actionFailure, e);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            var xPosition = 'xPosition';\n            var yPosition = 'yPosition';\n            pdfGrid.draw(pdfPage, _this.drawPosition[xPosition], _this.drawPosition[yPosition]);\n            _this.drawHeader(pdfExportProperties);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            this.pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(this.pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        var allowHorizontalOverflow = true;\n        var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n            allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ?\n                true : pdfExportProperties.allowHorizontalOverflow;\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = isExportColumns(pdfExportProperties) ?\n            prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n        columns = columns.filter(function (columns) { return isNullOrUndefined(columns.commands); });\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                var column = summaryModel.getColumns();\n                column = column.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n                if (gObj.aggregates.length && this.parent !== gObj) {\n                    gObj.aggregateModule.prepareSummaryInfo();\n                }\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getGridPdfFont = function (args) {\n        var fontFamily = 'fontFamily';\n        var fontSize = 'fontSize';\n        var fontStyle = 'fontStyle';\n        var isTrueType = 'isTrueType';\n        var style = 0;\n        if (args.header && args.header.font) {\n            var headerFont = args.header.font[fontFamily];\n            var headerSize = args.header.font[fontSize];\n            var headerStyle = args.header.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[headerStyle]) ? 0 : PdfFontStyle[headerStyle]);\n            if (args.header.font[isTrueType]) {\n                args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n            }\n            else {\n                var fontFamily_1 = !isNullOrUndefined(headerFont) ?\n                    this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n                args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n            }\n        }\n        if (args.caption && args.caption.font) {\n            var captionFont = args.caption.font[fontFamily];\n            var captionSize = args.caption.font[fontSize];\n            var captionStyle = args.caption.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[captionStyle]) ? 0 : PdfFontStyle[captionStyle]);\n            if (args.caption.font[isTrueType]) {\n                args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n            }\n            else {\n                var fontFamily_2 = !isNullOrUndefined(captionFont) ?\n                    this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n                args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n            }\n        }\n        if (args.record && args.record.font) {\n            var recordFont = args.record.font[fontFamily];\n            var recordSize = args.record.font[fontSize];\n            var recordStyle = args.record.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[recordStyle]) ? 0 : PdfFontStyle[recordStyle]);\n            if (args.record.font[isTrueType]) {\n                args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n            }\n            else {\n                var fontFamily_3 = !isNullOrUndefined(recordFont) ?\n                    this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n                args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n            }\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var _this = this;\n        var groupIndex = level;\n        var _loop_1 = function (dataSourceItems) {\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn()\n            };\n            var value = this_1.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            var cArgs = { captionText: value, type: 'PDF' };\n            this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n                row.cells.getCell(groupIndex).value = cArgs.captionText;\n                row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n                row.style.setBorder(border);\n                row.style.setFont(font);\n                row.style.setTextBrush(brush);\n                row.style.setBackgroundBrush(backgroundBrush);\n                var sRows;\n                var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n                if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                }\n                else {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                }\n                if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                }\n                if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n                }\n                else {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                    var isGroupedFooter = true;\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            _loop_1(dataSourceItems);\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n        var _this = this;\n        var columnCount = gridColumn.length + childLevels;\n        var depth = measureColumnDepth(eCols);\n        var cols = eCols;\n        var index = 0;\n        if (this.parent.allowGrouping) {\n            index = this.parent.groupSettings.columns.length;\n        }\n        pdfGrid.columns.add(columnCount);\n        pdfGrid.headers.add(rows.length);\n        var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n            var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n            var pdfCell = gridHeader.cells.getCell(colIdx);\n            var cell = rows[rowIdx].cells[colIdx];\n            if (!isNullOrUndefined(col.headerTextAlign)) {\n                pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n            }\n            if (rowSpan > 0) {\n                pdfCell.rowSpan = rowSpan;\n                pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n            }\n            if (colSpan > 0) {\n                pdfCell.columnSpan = colSpan;\n            }\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            pdfCell.value = col.headerText;\n            if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n                pdfCell.value = '';\n                pdfCell.width = 20;\n            }\n            var args = {\n                cell: pdfCell,\n                gridCell: cell,\n                style: pdfCell.style\n            };\n            _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n        };\n        var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n            var cidx = 0;\n            for (var i = 0; i < cols.length; i++) {\n                if (isRoot) {\n                    cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n                    colIndex = cidx;\n                    spanCnt = 0;\n                }\n                if (!isRoot && !cols[i].visible) {\n                    colIndex = colIndex - 1;\n                }\n                if (cols[i].columns && cols[i].columns.length) {\n                    var newSpanCnt = recuHeader(cols[i].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], 0, newSpanCnt);\n                    spanCnt = spanCnt + newSpanCnt;\n                    colIndex = colIndex + newSpanCnt - 1;\n                }\n                else if (cols[i].visible || _this.hideColumnInclude) {\n                    spanCnt++;\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], depth, 0);\n                }\n            }\n            return spanCnt;\n        };\n        recuHeader(cols, depth, 0, 0, 0, true);\n        if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfPageSettings.size;\n            this.drawHeader(pdfExportProperties);\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n        var _this = this;\n        var clientSize = this.pdfPageSettings.size;\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var header = pdfExportProperties.header;\n            var position = new PointF(0, header.fromTop);\n            var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n            var bounds = new RectangleF(position, size);\n            if (!this.headerOnPages.length) {\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            else {\n                var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n                this.headerOnPages.filter(function (index) {\n                    if (index - 1 >= 0 && index - 1 < _this.pdfDocument.pages.count - 1) {\n                        _this.pdfDocument.pages.getPageByIndex(index - 1).graphics\n                            .drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n                    }\n                });\n            }\n        }\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format = new PdfStringFormat();\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            var total = '$total';\n            var current = '$current';\n            if (content.format.indexOf(total) !== -1 && content.format.indexOf(current) !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n                if (content.format.indexOf(total) > content.format.indexOf(current)) {\n                    format = content.format.replace(current, '0');\n                    format = format.replace(total, '1');\n                }\n                else {\n                    format = content.format.replace(current, '1');\n                    format = format.replace(total, '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf(current) !== -1 && content.format.indexOf(total) === -1) {\n                format = content.format.replace(current, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace(total, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                var args = { row: row, type: 'GroupCaption', style: captionRow.cells };\n                                this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                if (!isCaption) {\n                                    i += 1;\n                                }\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate)\n                        || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        var txt = void 0;\n                        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n                        if (this.parent.isReact || this.parent.isVue) {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n                            if (this.parent.isReact) {\n                                this.parent.renderTemplates();\n                            }\n                        }\n                        else {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n                        }\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (isCaption) {\n                for (var i = (this.parent.groupSettings.columns.length) + 1; i < value.length - 1; i++) {\n                    value[i] = value[i + 1];\n                }\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    var args = {\n                        row: row, type: isGroupedFooter ? 'GroupFooter' : 'Footer', style: gridRow.cells\n                    };\n                    this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n        if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     *\n     * @param {Column[]} gridColumns - specifies the grid column\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {boolean} allowHorizontalOverflow - specifies the allowHorizontalOverflow\n     * @returns {void}\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n        var startIndex = gObj.groupSettings.columns.length;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width) && allowHorizontalOverflow) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     *\n     * @param {PdfGridRow} row - specifies the PdfGridRow\n     * @param {PdfBorders} border - specifies the PdfBorders\n     * @returns {PdfGrid} returns the pdfgrid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     *\n     * @param {PdfBorders} border - specifies the border\n     * @param {Column[]} columns - specifies the columns\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {Object[]} dataSource - specifies the datasource\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {number} startIndex - specifies the startindex\n     * @param {PdfExportProperties} pdfExportProperties - specifies the pdfExportProperties\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {number} rowIndex - specifies the rowIndex\n     * @returns {number} returns the number of records\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value :\n                    this.exportValueFormatter.formatCellValue(args, gObj.isServerRendered);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                if (!isNullOrUndefined(args.image)) {\n                    args.value = new PdfBitmap(args.image.base64);\n                }\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.hyperLink)) {\n                    // create the Text Web Link\n                    var textLink = new PdfTextWebLink();\n                    // set the hyperlink\n                    textLink.url = args.hyperLink.target;\n                    // set the link text\n                    textLink.text = args.hyperLink.displayText || args.hyperLink.target;\n                    // set the font\n                    textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75);\n                    // set the brush and pen for the text color\n                    textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n                    cell.value = textLink;\n                }\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     *\n     * @param {string} textAlign - specifies the textAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     *\n     * @param {string} verticalAlign - specifies the verticalAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @param {string} textAlign - specifies the text align\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getFont = function (content) {\n        if (content.font) {\n            return content.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            // return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n *\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     *\n     * @param {cell<Column>} cell - specifies the cell\n     * @param {Object} data - specifies the data\n     * @param {Object} attributes - specifies the attributes\n     * @param {boolean} isVirtualEdit - specifies virtual scroll editing\n     * @returns {Element} returns the element\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes, isVirtualEdit) {\n        var node = this.element.cloneNode();\n        var uid = 'uid';\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            if (this.parent.isReact && typeof (cell.column.commandsTemplate) !== 'string') {\n                var tempID = this.parent + 'commandsTemplate';\n                cell.column.getColumnTemplate()(data, this.parent, 'commandsTemplate', tempID, null, null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n            }\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index, command[uid]);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if ((!this.parent.enableVirtualization && this.parent.isEdit) || isVirtualEdit) {\n            addClass([].slice.call(node.getElementsByClassName('e-edit-delete')), 'e-hide');\n            removeClass([].slice.call(node.getElementsByClassName('e-save-cancel')), 'e-hide');\n        }\n        else {\n            addClass([].slice.call(node.getElementsByClassName('e-save-cancel')), 'e-hide');\n            removeClass([].slice.call(node.getElementsByClassName('e-edit-delete')), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index, uid) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index + '_' + uid, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type,\n            'data-uid': uid\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { click, keyPressed, commandClick, initialEnd } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\nimport { getUid } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * `CommandColumn` used to handle the command column actions.\n *\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.initiateRender();\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var target = closest(e.target, 'button');\n        if (!target || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        var uid = target.getAttribute('data-uid');\n        var commandColumn;\n        var row = gObj.getRowObjectFromUID(closest(target, '.' + literals.row).getAttribute('data-uid'));\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].commands) {\n                var commandCols = cols[i].commands;\n                for (var j = 0; j < commandCols.length; j++) {\n                    var idInString = 'uid';\n                    var typeInString = 'type';\n                    if (commandCols[j][idInString] === uid && commandCols[j][typeInString] === type) {\n                        commandColumn = commandCols[j];\n                    }\n                }\n            }\n        }\n        var args = {\n            cancel: false,\n            target: target,\n            commandColumn: commandColumn,\n            rowData: isNullOrUndefined(row) ? undefined : row.data\n        };\n        this.parent.trigger(commandClick, args, function (commandclickargs) {\n            if (buttonObj.disabled || !gObj.editModule || commandclickargs.cancel) {\n                return;\n            }\n            switch (type) {\n                case 'Edit':\n                    gObj.editModule.endEdit();\n                    gObj.editModule.startEdit(closest(target, 'tr'));\n                    break;\n                case 'Cancel':\n                    gObj.editModule.closeEdit();\n                    break;\n                case 'Save':\n                    gObj.editModule.endEdit();\n                    break;\n                case 'Delete':\n                    if (gObj.editSettings.mode !== 'Batch') {\n                        gObj.editModule.endEdit();\n                    }\n                    gObj.commandDelIndex = parseInt(closest(target, 'tr').getAttribute(literals.ariaRowIndex), 10);\n                    gObj.clearSelection();\n                    //for toogle issue when dbl click\n                    gObj.selectRow(gObj.commandDelIndex, false);\n                    gObj.editModule.deleteRecord();\n                    gObj.commandDelIndex = undefined;\n                    break;\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(keyPressed, this.keyPressHandler);\n        this.parent.off(initialEnd, this.load);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n        this.parent.on(initialEnd, this.load, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    CommandColumn.prototype.load = function () {\n        var uid = 'uid';\n        var col = this.parent.columnModel;\n        for (var i = 0; i < col.length; i++) {\n            if (col[i].commands) {\n                var commandCol = col[i].commands;\n                for (var j = 0; j < commandCol.length; j++) {\n                    commandCol[j][uid] = getUid('gridcommand');\n                }\n            }\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nimport * as literals from '../base/string-literals';\nexport var menuClass = {\n    header: '.' + literals.gridHeader,\n    content: '.' + literals.gridContent,\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n        if (e.code === 'Escape') {\n            this.contextMenu.close();\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    /**\n     * @param {ContextMenuClickEventArgs} args - specifies the ContextMenuClickEventArgs argument type\n     * @returns {void}\n     * @hidden\n     */\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute(literals.ariaColIndex), 10))) {\n                            this.parent.editModule.editCell(parseInt(this.row.getAttribute(literals.ariaRowIndex), 10), \n                            // eslint-disable-next-line\n                            this.parent.getColumns()[parseInt(this.cell.getAttribute(literals.ariaColIndex), 10)].field);\n                        }\n                    }\n                    else {\n                        this.parent.editModule.endEdit();\n                        this.parent.editModule.startEdit(this.row);\n                    }\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode !== 'Batch') {\n                        this.parent.editModule.endEdit();\n                    }\n                    if (this.parent.getSelectedRecords().length === 1) {\n                        this.parent.editModule.deleteRow(this.row);\n                    }\n                    else {\n                        this.parent.deleteRecord();\n                    }\n                }\n                break;\n            case 'Save':\n                if (this.parent.editModule) {\n                    this.parent.editModule.endEdit();\n                }\n                break;\n            case 'Cancel':\n                if (this.parent.editModule) {\n                    this.parent.editModule.closeEdit();\n                }\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        args.rowInfo = this.targetRowdata;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n        this.parent.notify(events.selectRowOnContextOpen, { isOpen: false });\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.targetRowdata = this.parent.getRowInfo(args.event.target);\n            if ((isNullOrUndefined(args.parentItem)) && this.targetColumn) {\n                if (this.targetRowdata.cell) {\n                    this.parent.notify(events.selectRowOnContextOpen, { isOpen: true });\n                    this.selectRow(args.event, (this.targetRowdata.cell.classList.contains('e-selectionbackground')\n                        && this.parent.selectionSettings.type === 'Multiple') ? false : true);\n                }\n            }\n            var hideSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editModule && this.parent.editSettings.mode === 'Batch' &&\n                        ((closest(args.event.target, '.e-gridform')) ||\n                            this.parent.editModule.getBatchChanges()[literals.changedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[literals.addedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[literals.deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hideSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hideSepItems.length > 0) {\n                this.contextMenu.hideItems(hideSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            args.rowInfo = this.targetRowdata;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (args.cancel || (this.hiddenItems.length === args.items.length && !args.parentItem)) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n        applyBiggerTheme(this.parent.element, this.contextMenu.element.parentElement);\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : literals.tbody);\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.' + literals.table), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.isFrozenGrid() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit)\n                    || (this.targetColumn && !this.targetColumn.field && item === 'AutoFit');\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    }\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     *\n     * @returns {Element} returns the element\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n        return localeKeys;\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv, .e-stackedheadercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        else {\n            var ele = (this.parent.getRowInfo(e.target).column);\n            return ele || null;\n        }\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute(literals.ariaRowIndex), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\nimport { splitFrozenRowObjectCells } from '../base/util';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n *\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs, virtualRows) {\n        var tableName;\n        if (notifyArgs.renderFrozenRightContent || (notifyArgs.renderMovableContent && !this.parent.enableVirtualization)) {\n            tableName = 'frozen-right';\n        }\n        else if (notifyArgs.renderMovableContent || notifyArgs.isFrozen) {\n            tableName = 'movable';\n        }\n        else {\n            tableName = this.parent.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        }\n        if (notifyArgs.requestType === 'virtualscroll' && notifyArgs.virtualInfo.sentinelInfo.axis === 'X') {\n            if (tableName !== 'movable') {\n                return null;\n            }\n        }\n        var row = this.parent.enableVirtualization && !notifyArgs.isFrozenRowsRender ? virtualRows\n            : this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            row[i].cells = splitFrozenRowObjectCells(this.parent, row[i].cells, tableName);\n        }\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, extend, isUndefined, Browser } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap, addRemoveEventListener } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport * as literals from '../base/string-literals';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n *\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.isInitialRender = true;\n        _this.widthService = locator.getService('widthService');\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeContentRender.prototype.addEventListener = function () {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.batchAdd, this.batchAdd.bind(this));\n        this.parent.on(events.batchCancel, this.batchAdd.bind(this));\n        this.parent.addEventListener(events.batchDelete, this.batchAdd.bind(this));\n        this.parent.on(events.setHeightToFrozenElement, this.refreshScrollOffset);\n        this.parent.on(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar, this);\n    };\n    FreezeContentRender.prototype.batchAdd = function (args) {\n        var isAdd = args.name !== 'batchCancel'\n            && !(this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top');\n        if (this.parent.height !== 'auto' && (isAdd || args.name === 'batchCancel' || args.name === 'batchDelete')) {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.name === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.setHeightToContent = function (height) {\n        this.getFrozenContent().style.height = height.toString() + 'px';\n        this.getMovableContent().style.height = height.toString() + 'px';\n    };\n    FreezeContentRender.prototype.actionComplete = function (args) {\n        if (this.parent.editSettings.mode !== 'Dialog' && (args.requestType === 'add' || (args.requestType === 'cancel'\n            && args.row.classList.contains(literals.addedRow)))\n            && (!this.parent.frozenRows || this.parent.editSettings.newRowPosition === 'Bottom') && this.parent.height !== 'auto') {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.requestType === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n        this.parent.removeEventListener(events.batchAdd, this.batchAdd);\n        this.parent.off(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar);\n    };\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.element.querySelector('.' + literals.frozenContent);\n        var mDiv = this.parent.element.querySelector('.' + literals.movableContent);\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-left-content' });\n            mDiv = this.parent.createElement('div', { className: literals.movableContent });\n            this.getPanel().querySelector('.' + literals.content).appendChild(fDiv);\n            this.getPanel().querySelector('.' + literals.content).appendChild(mDiv);\n            mDiv.style.scrollbarWidth = 'none';\n        }\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n        if (Browser.userAgent.indexOf('Mac OS') > -1 && Browser.info.name === 'safari' && !this.parent.enableVirtualization) {\n            this.getPanel().firstElementChild.classList.add('e-mac-safari');\n        }\n    };\n    FreezeContentRender.prototype.renderFrozenRigthPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector(literals.tbody).innerHTML = '<tr><td></td></tr>';\n        addClass([this.getMovableContent().querySelector(literals.tbody).querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.tbody).innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody).innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.renderFrozenRightEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    /**\n     * @param {Element} ele - specifies the element\n     * @returns {void}\n     * @hidden\n     */\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        var mTbl;\n        if (this.getFrozenContent().querySelector('.' + literals.table) == null) {\n            _super.prototype.renderTable.call(this);\n            this.getFrozenContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            this.setTable(this.getFrozenContent().querySelector('.' + literals.table));\n            this.setColGroup(this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true));\n            this.getFrozenContent().querySelector('.' + literals.table).appendChild(this.getColGroup());\n            mTbl = this.getMovableContent().querySelector('.' + literals.table);\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n        }\n        if (this.getMovableContent().querySelector(literals.colGroup)) {\n            remove(this.getMovableContent().querySelector(literals.colGroup));\n        }\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup)).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector(literals.tbody));\n        var style = this.parent.enableVirtualization ? '' : 'flex';\n        this.getPanel().firstChild.style.display = style;\n        this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-left-scrollbar', this.getScrollbarDisplay());\n    };\n    FreezeContentRender.prototype.getScrollbarDisplay = function () {\n        var frozenDisplay = '';\n        if ((this.parent.getFrozenColumns() && !this.parent.getVisibleFrozenColumns())\n            || (this.parent.getFrozenLeftColumnsCount() && !this.parent.getVisibleFrozenLeftCount())) {\n            frozenDisplay = 'none';\n        }\n        return frozenDisplay;\n    };\n    FreezeContentRender.prototype.renderHorizontalScrollbar = function (className, display, isRight) {\n        var left = this.parent.createElement('div', { className: className, styles: 'display:' + display });\n        var movable = this.parent.createElement('div', { className: 'e-movablescrollbar' });\n        var child = this.parent.createElement('div', { className: 'e-movablechild' });\n        var scrollbarHeight = getScrollBarWidth().toString();\n        this.setScrollbarHeight(movable, scrollbarHeight);\n        this.setScrollbarHeight(child, scrollbarHeight);\n        movable.appendChild(child);\n        this.appendScrollbar(left, movable, isRight);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    FreezeContentRender.prototype.appendScrollbar = function (frozen, movable, isRight) {\n        var parent = this.parent.createElement('div', { className: 'e-scrollbar', styles: 'display: flex' });\n        parent.appendChild(frozen);\n        parent.appendChild(movable);\n        this.parent.getContent().appendChild(parent);\n    };\n    FreezeContentRender.prototype.setScrollbarHeight = function (ele, height) {\n        ele.style.minHeight = height + 'px';\n        ele.style.maxHeight = height + 'px';\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the NotifyArgs\n     * @param {freezeTable} tableName - specifies the Freeze Table\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    FreezeContentRender.prototype.setIsFrozen = function (args, tableName) {\n        args.isFrozen = !args.isFrozen;\n    };\n    /**\n     * @param {Row<Column>[]} modelData - specifies the modeldata\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {freezeTable} returns the freeze table\n     * @hidden\n     */\n    FreezeContentRender.prototype.setTbody = function (modelData, args) {\n        var tableName;\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            this.getMovableContent().querySelector(literals.tbody).innerHTML = '';\n        }\n        var cell = modelData[0].cells[0];\n        var idx = cell.index;\n        if (isUndefined(idx) && this.parent.isRowDragable()) {\n            cell = modelData[0].cells[1];\n            idx = cell.index;\n        }\n        if (idx === 0) {\n            this.getPanel().firstChild.style.overflowX = 'hidden';\n            if (this.parent.enableColumnVirtualization) {\n                this.getMovableContent().style.overflowX = 'hidden';\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.renderMovableContent\n            && args.requestType === 'virtualscroll' && this.getMovableContent().scrollLeft > 0 && args.virtualInfo.columnIndexes[0] !== 0) {\n            idx = this.parent.getFrozenColumns();\n        }\n        if (cell && cell.column) {\n            tableName = cell.column.getFreezeTableName();\n        }\n        this.setIdx(idx);\n        return tableName;\n    };\n    /**\n     * @param {string} tableName - specifies the table name\n     * @returns {void}\n     * @hidden\n     */\n    FreezeContentRender.prototype.splitRows = function (tableName) {\n        if (tableName === literals.frozenLeft) {\n            this.freezeRows = this.rows;\n            this.freezeRowElements = this.rowElements;\n        }\n        else {\n            this.movableRows = this.rows;\n        }\n    };\n    /**\n     * @param {NotifyArgs} args - specifies the notifyargs\n     * @param {string} tableName - specifies the tableName\n     * @returns {void}\n     * @hidden\n     */\n    FreezeContentRender.prototype.renderNextFrozentPart = function (args, tableName) {\n        var isVFTable = this.parent.enableVirtualization;\n        if (tableName === literals.frozenLeft) {\n            if (isVFTable) {\n                args.renderMovableContent = true;\n            }\n            this.refreshContentRows(extend({}, args));\n        }\n    };\n    FreezeContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        if (this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate)) {\n            tbody = frag;\n        }\n        else {\n            tbody.appendChild(frag);\n        }\n        if (tableName === literals.frozenLeft) {\n            this.isLoaded = false;\n            this.getFrozenContent().querySelector('table').appendChild(tbody);\n        }\n        else {\n            this.refreshTbody(tbody);\n            this.isLoaded = true;\n            this.getMovableContent().querySelector('table').appendChild(tbody);\n            this.refreshHeight();\n            this.refreshScrollOffset();\n            this.widthService.refreshFrozenScrollbar();\n        }\n        if (this.isInitialRender) {\n            this.parent.scrollModule.setHeight();\n            this.isInitialRender = false;\n        }\n    };\n    FreezeContentRender.prototype.refreshScrollOffset = function () {\n        if (this.parent.height !== 'auto') {\n            var height = this.getTable().offsetHeight + 1;\n            this.setHeightToContent(height);\n        }\n        this.parent.notify(events.refreshFrozenHeight, {});\n    };\n    /**\n     * @param {string} tableName - specifies the table name\n     * @returns {HTMLElement} returns the Html element\n     * @hidden\n     */\n    FreezeContentRender.prototype.getFrozenHeader = function (tableName) {\n        if (tableName === literals.frozenLeft) {\n            return this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.tbody);\n        }\n        else {\n            return this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody);\n        }\n    };\n    FreezeContentRender.prototype.refreshTbody = function (tbody) {\n        if (tbody.childElementCount < 1) {\n            tbody.appendChild(this.parent.createElement('tr').appendChild(this.parent.createElement('td')));\n        }\n    };\n    FreezeContentRender.prototype.refreshHeight = function () {\n        if (!this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n        }\n        this.getFrozenContent().style.borderRightWidth = '1px';\n    };\n    FreezeContentRender.prototype.setIdx = function (idx) {\n        this.idx = idx;\n    };\n    FreezeContentRender.prototype.getIdx = function () {\n        return this.idx;\n    };\n    /**\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    FreezeContentRender.prototype.getTbody = function (tableName) {\n        if (tableName === literals.frozenLeft) {\n            return this.getTable().querySelector(literals.tbody);\n        }\n        else {\n            return this.getMovableContent().querySelector(literals.tbody);\n        }\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.eventHandler = [{ event: events.freezeRender, handler: this.refreshFreeze },\n            { event: events.frozenHeight, handler: this.setFrozenHeight },\n            { event: events.uiUpdate, handler: this.enableAfterRender }];\n        addRemoveEventListener(this.parent, this.eventHandler, true, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.eventHandler, false);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        var fDiv = this.parent.element.querySelector('.' + literals.frozenHeader);\n        var mDiv = this.parent.element.querySelector('.' + literals.movableHeader);\n        _super.prototype.renderPanel.call(this);\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-left-header' });\n            mDiv = this.parent.createElement('div', { className: literals.movableHeader });\n            this.getPanel().querySelector('.' + literals.headerContent).appendChild(fDiv);\n            this.getPanel().querySelector('.' + literals.headerContent).appendChild(mDiv);\n        }\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.renderFrozenRightPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector(literals.tbody);\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector(literals.tbody).innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        this.widthService.setWidthToColumns();\n        if (!this.parent.enableVirtualization) {\n            this.widthService.setWidthToTable();\n        }\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        renderMovable(this.parent.getContentTable().querySelector(literals.colGroup), this.parent.getFrozenColumns(), this.parent);\n        this.widthService.refreshFrozenScrollbar();\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.refreshFrozenLeftUI = function () {\n        _super.prototype.refreshUI.call(this);\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createHeader(undefined, 'movable'));\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = [].slice.call(this.parent.element.querySelector('.' + literals.movableHeader).querySelector('thead').getElementsByClassName('e-columnheader'));\n            var len = movablefirstcell.length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, this.parent.getFrozenColumns()));\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var elem = elements_1[_i];\n                    var args = {\n                        element: elem, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.bindInitialEvent(args);\n                }\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            this.refreshHeight(obj);\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    FreezeRender.prototype.refreshHeight = function (obj) {\n        var fRows;\n        var mRows;\n        var fHdr = this.getFrozenHeader();\n        var mHdr = this.getMovableHeader();\n        var cont = this.parent.getContent();\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var hdrClassList = this.parent.getHeaderContent().querySelector('.' + literals.headerContent).classList;\n        if (obj.case === 'textwrap') {\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.' + literals.frozenContent).querySelectorAll('tr');\n                mRows = cont.querySelector('.' + literals.movableContent).querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                    literals.tbody : 'thead').querySelectorAll('tr');\n                fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                    literals.tbody : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().getElementsByClassName('e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n        else if (obj.case === 'refreshHeight') {\n            this.setWrapHeight(cont.querySelector('.' + literals.frozenContent).querySelectorAll('tr'), cont.querySelector('.' + literals.movableContent).querySelectorAll('tr'), obj.isModeChg);\n            if (!this.parent.getHeaderContent().getElementsByClassName('e-stackedheadercell').length) {\n                this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = elements[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector(literals.tbody);\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue\n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].getBoundingClientRect().height;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) ||\n                (!isWrap && fRowHgt < mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) ||\n                (!isWrap && fRowHgt > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap && this.parent.height !== 'auto') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.' + literals.movableContent).getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.' + literals.movableContent);\n        var frozenContent = this.parent.element.querySelector('.' + literals.frozenContent);\n        var contentScrollWidth = this.parent.getContent().scrollWidth;\n        var contentTableScrollWidth = this.parent.element.querySelector('.e-movablecontent table').scrollWidth +\n            this.parent.getContentTable().scrollWidth;\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if (((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight))\n                && contentScrollWidth === contentTableScrollWidth) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = [].slice.call(this.getFrozenHeader().getElementsByClassName('e-columnheader'));\n        var mTr = [].slice.call(this.getMovableHeader().getElementsByClassName('e-columnheader'));\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    /**\n     * @param {Element} ele - specifies the element\n     * @returns {void}\n     * @hidden\n     */\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector(literals.colGroup));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector(literals.colGroup), this.parent.getFrozenColumns(), this.parent), mTable.querySelector('thead'));\n    };\n    FreezeRender.prototype.filterRenderer = function (ele, frozenColumn, total) {\n        var clone = ele.cloneNode(true);\n        clone.innerHTML = '';\n        var end = total ? total : this.parent.getColumns().length;\n        for (var i = frozenColumn; i < end; i++) {\n            clone.appendChild(ele.removeChild(ele.children[frozenColumn]));\n        }\n        return clone;\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, extend, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport * as events from '../base/constant';\nimport { wrap, parentsUntil, addRemoveEventListener } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport * as literals from '../base/string-literals';\n/**\n * ColumnFreezeHeaderRenderer is used to freeze the columns header at right and left\n *\n * @hidden\n */\nvar ColumnFreezeHeaderRenderer = /** @class */ (function (_super) {\n    __extends(ColumnFreezeHeaderRenderer, _super);\n    function ColumnFreezeHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    ColumnFreezeHeaderRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: events.freezeRender, handler: this.refreshFreeze },\n            { event: events.refreshFrozenColumns, handler: this.refreshFrozenColumns },\n            { event: events.setReorderDestinationElement, handler: this.setReorderElement },\n            { event: events.columnVisibilityChanged, handler: this.setVisible }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    ColumnFreezeHeaderRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    ColumnFreezeHeaderRenderer.prototype.setReorderElement = function (args) {\n        this.destEle = args.ele;\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFrozenColumns = function (args) {\n        if (!args.parent) {\n            this.parent.setProperties({ columns: args.columns }, true);\n        }\n        var isFrozenLeft = parentsUntil(this.destEle, 'e-frozen-left-header');\n        var isFrozenRight = parentsUntil(this.destEle, 'e-frozen-right-header');\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        args.column.freeze = null;\n        if (isFrozenLeft) {\n            args.column.freeze = 'Left';\n        }\n        else if (isFrozenRight) {\n            args.column.freeze = 'Right';\n        }\n        this.parent.setFrozenCount();\n        args.cancel = left !== this.parent.getFrozenLeftColumnsCount() || right !== this.parent.getFrozenRightColumnsCount();\n        if (args.cancel) {\n            this.parent.refreshColumns();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr, frRows) {\n        var fRowHgt;\n        var mRowHgt;\n        var frRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var tBody = this.parent.getHeaderContent().querySelector(literals.tbody);\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var height = [];\n        var width = [];\n        var rightHeight = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue\n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                if (frRows) {\n                    rightHeight[i] = frRows[i].getBoundingClientRect().height;\n                }\n                width[i] = mRows[i].getBoundingClientRect().height;\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && (((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i]))) || (wrapMode === 'Header' && isContReset)) || isStackedHdr) {\n                if (frRows[i]) {\n                    frRows[i].style.height = null;\n                }\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            frRowHgt = rightHeight[i] ? rightHeight[i] : 0;\n            var maxHeight = Math.max(fRowHgt, mRowHgt, frRowHgt);\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < maxHeight) ||\n                (!isWrap && fRowHgt < maxHeight) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = maxHeight + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && maxHeight > mRowHgt) ||\n                (!isWrap && maxHeight > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = maxHeight + 'px';\n            }\n            if (frRows && !isNullOrUndefined(frRows[i]) && frRows[i].childElementCount && ((isWrap && maxHeight > frRowHgt) ||\n                (!isWrap && maxHeight > frRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                frRows[i].style.height = maxHeight + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshHeight = function (obj) {\n        var isLeftRight = this.parent.getFrozenMode() === literals.leftRight;\n        var fRows;\n        var frRows;\n        var mRows;\n        var frHdr = this.getFrozenRightHeader();\n        var fHdr = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader);\n        var cont = this.parent.getContent();\n        var mHdr = this.getMovableHeader();\n        var hdrClassList = this.parent.getHeaderContent().querySelector('.' + literals.headerContent).classList;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        if (obj.case === 'textwrap') {\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                if (isLeftRight) {\n                    frRows = cont.querySelector('.e-frozen-right-content').querySelectorAll('tr');\n                }\n                mRows = cont.querySelector('.' + literals.movableContent).querySelectorAll('tr');\n                fRows = cont.querySelector('.' + literals.frozenContent).querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true, false, frRows);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelector(wrapMode === 'Content' ?\n                        literals.tbody : 'thead').querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                    literals.tbody : 'thead').querySelectorAll('tr');\n                mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                    literals.tbody : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().getElementsByClassName('e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1, frRows);\n            }\n            this.refreshStackedHdrHgt();\n        }\n        else if (obj.case === 'refreshHeight') {\n            mRows = cont.querySelector('.' + literals.movableContent).querySelectorAll('tr');\n            fRows = cont.querySelector('.' + literals.frozenContent).querySelectorAll('tr');\n            if (isLeftRight) {\n                frRows = cont.querySelector('.e-frozen-right-content').querySelectorAll('tr');\n            }\n            this.setWrapHeight(fRows, mRows, obj.isModeChg, false, false, frRows);\n            if (!this.parent.getHeaderContent().getElementsByClassName('e-stackedheadercell').length) {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, false, frRows);\n            }\n        }\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column[]\n     * @returns {void}\n     */\n    ColumnFreezeHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (column.freeze === 'Left' || column.freeze === 'Right') {\n                if (left && !right) {\n                    var leftColGrp = gObj.getHeaderContent().querySelector('.e-frozen-left-header').querySelector(literals.colGroup);\n                    setStyleAttribute(leftColGrp.children[idx], { 'display': displayVal });\n                }\n                else if (!left && right) {\n                    var rightColGrp = gObj.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup);\n                    setStyleAttribute(rightColGrp.children[idx - movable], { 'display': displayVal });\n                }\n            }\n            else {\n                var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n                setStyleAttribute(mTblColGrp.children[idx - left], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    ColumnFreezeHeaderRenderer.prototype.filterRenderer = function (ele, frozenColumn, total) {\n        return _super.prototype.filterRenderer.call(this, ele, frozenColumn, total);\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshUI = function () {\n        var frTbody;\n        var tbody = this.getMovableHeader().querySelector(literals.tbody);\n        remove(this.getMovableHeader().querySelector('table'));\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            frTbody = this.getFrozenRightHeader().querySelector(literals.tbody);\n            remove(this.getFrozenRightHeader().querySelector('table'));\n        }\n        _super.prototype.refreshFrozenLeftUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector(literals.tbody).innerHTML = tbody.innerHTML;\n        if (frTbody) {\n            this.getFrozenRightHeader().querySelector(literals.tbody).innerHTML = frTbody.innerHTML;\n        }\n        this.updateColgroup();\n        this.widthService.setWidthToColumns();\n        this.parent.notify(events.colGroupRefresh, {});\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.getMovableHeader().querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        var mTbl = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector('.' + literals.table);\n        remove(mTbl.querySelector(literals.colGroup));\n        var mColGroup = (this.getMovableHeader().querySelector(literals.colGroup).cloneNode(true));\n        mTbl.insertBefore(mColGroup, mTbl.querySelector(literals.tbody));\n        if (frTbody) {\n            var frtbl = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.' + literals.table);\n            remove(frtbl.querySelector(literals.colGroup));\n            var frtblColGroup = (this.getFrozenRightHeader().querySelector(literals.colGroup).cloneNode(true));\n            frtbl.insertBefore(frtblColGroup, frtbl.querySelector(literals.tbody));\n        }\n        this.widthService.refreshFrozenScrollbar();\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFreeze = function (obj) {\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                var isDraggable = this.parent.isRowDragable();\n                var index = left ? isDraggable ? left + 1 : left : 0;\n                var total = left + movable + (left && isDraggable ? 1 : 0);\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, index, total));\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    var ele = [].slice.call(this.getMovableHeader().\n                        querySelectorAll('thead .e-filterbarcell .e-input'));\n                    this.getFrozenRightHeader().querySelector('thead').appendChild(this.filterRenderer(filterRow, index, index + right));\n                    this.adjudtFilterBarCell(ele);\n                }\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                this.adjudtFilterBarCell(elements);\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            this.refreshHeight(obj);\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenColGroup = function (cols, colGroup) {\n        if (cols && cols.visible === false) {\n            setStyleAttribute(colGroup, { 'display': 'none' });\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.adjudtFilterBarCell = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            var args = {\n                element: elem, floatLabelType: 'Never',\n                properties: {\n                    enableRtl: this.parent.enableRtl, showClearButton: true\n                }\n            };\n            Input.bindInitialEvent(args);\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderPanel = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderPanel.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderLeftWithRightFrozenPanel();\n            }\n        }\n        else {\n            this.renderRightFrozenPanelAlone();\n        }\n        this.getPanel().firstChild.style.display = 'flex';\n        this.getMovableHeader().style.flex = '1';\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderTable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderTable.call(this);\n        }\n        else {\n            this.renderFrozenRightTableAlone();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.rfshMovable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.rfshMovable.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                var rows = this.rows;\n                this.getFrozenRightHeader().appendChild(this.createHeader(undefined, 'frozen-right'));\n                this.refreshStackedHdrHgt();\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { renderFrozenRightContent: true } });\n                this.rows = rows;\n            }\n        }\n        else {\n            this.getFrozenRightHeader().appendChild(this.getTable());\n            this.getMovableHeader().appendChild(this.createHeader(undefined, 'movable'));\n            this.refreshStackedHdrHgt();\n            this.addMovableFirstCls();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshStackedHdrHgt = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.refreshStackedHdrHgt.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.refreshFrozenRightStackedHdrHgt();\n            }\n        }\n        else {\n            this.refreshFrozenRightStackedHdrHgt();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFrozenRightStackedHdrHgt = function () {\n        var fRowSpan;\n        var frTr = [].slice.call(this.getFrozenRightHeader().getElementsByClassName('e-columnheader'));\n        var mTr = [].slice.call(this.getMovableHeader().getElementsByClassName('e-columnheader'));\n        for (var i = 0, len = frTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(frTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, frTr[i], mTr);\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnFreezeHeaderRenderer.prototype.updateColgroup = function () {\n        this.updateMovableColGroup();\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            this.updateFrozenLeftColGroup();\n        }\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.updateFrozenRightColGroup();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderRightFrozenPanelAlone = function () {\n        var mDiv = this.parent.element.querySelector('.' + literals.movableHeader);\n        var fRightDiv = this.parent.element.querySelector('.e-frozen-right-header');\n        _super.prototype.renderFrozenRightPanel.call(this);\n        if (isNullOrUndefined(fRightDiv)) {\n            mDiv = this.parent.createElement('div', { className: literals.movableHeader });\n            fRightDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-right-header' });\n            this.getPanel().querySelector('.' + literals.headerContent).appendChild(mDiv);\n            this.getPanel().querySelector('.' + literals.headerContent).appendChild(fRightDiv);\n        }\n        _super.prototype.setMovableHeader.call(this, mDiv);\n        this.setFrozenRightHeader(fRightDiv);\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderLeftWithRightFrozenPanel = function () {\n        var fRightDiv = this.parent.element.querySelector('.e-frozen-right-header');\n        _super.prototype.renderFrozenRightPanel.call(this);\n        if (isNullOrUndefined(fRightDiv)) {\n            fRightDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-right-header' });\n            this.getPanel().querySelector('.' + literals.headerContent).appendChild(fRightDiv);\n        }\n        this.setFrozenRightHeader(fRightDiv);\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderFrozenRightTableAlone = function () {\n        _super.prototype.renderFrozenRightTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenLeftColGroup = function () {\n        var leftColGroup = this.getFrozenHeader().querySelector(literals.colGroup).children;\n        var start = this.parent.isRowDragable() ? 1 : 0;\n        var count = this.parent.isRowDragable() ? this.parent.getFrozenLeftColumnsCount() + 1\n            : this.parent.getFrozenLeftColumnsCount();\n        for (var i = start; i < leftColGroup.length; i++) {\n            if (i >= count) {\n                remove(leftColGroup[i]);\n                i--;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateMovableColGroup = function () {\n        var movableColGroup = this.getMovableHeader().querySelector(literals.colGroup).children;\n        if (this.parent.isRowDragable()) {\n            remove(movableColGroup[0]);\n        }\n        var length = movableColGroup.length;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var k = 0;\n        for (var i = 0; i < length; i++, k++) {\n            if (i < left || i >= left + movable) {\n                remove(movableColGroup[k]);\n                k--;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenRightColGroup = function () {\n        var isDraggable = this.parent.isRowDragable();\n        var rightColumns = this.parent.getFrozenRightColumns();\n        var rightColGroup = this.getFrozenRightHeader().querySelector(literals.colGroup).children;\n        if (this.parent.getFrozenMode() === literals.leftRight && isDraggable) {\n            remove(rightColGroup[0]);\n        }\n        var length = rightColGroup.length;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var k = 0;\n        for (var i = 0; i < length; i++) {\n            if (i < left + movable) {\n                remove(rightColGroup[0]);\n            }\n            else {\n                this.updateFrozenColGroup(rightColumns[k], rightColGroup[k]);\n                k++;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.setFrozenRightHeader = function (ele) {\n        this.frozenRightHeader = ele;\n    };\n    ColumnFreezeHeaderRenderer.prototype.getFrozenRightHeader = function () {\n        return this.frozenRightHeader;\n    };\n    return ColumnFreezeHeaderRenderer;\n}(FreezeRender));\nexport { ColumnFreezeHeaderRenderer };\n/**\n * ColumnFreezeContentRenderer is used to freeze the columns content at right and left\n *\n * @hidden\n */\nvar ColumnFreezeContentRenderer = /** @class */ (function (_super) {\n    __extends(ColumnFreezeContentRenderer, _super);\n    function ColumnFreezeContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.frzCount = 0;\n        _this.isColGroupRefresh = false;\n        _this.widthService = locator.getService('widthService');\n        return _this;\n    }\n    ColumnFreezeContentRenderer.prototype.renderPanel = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderPanel.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightPanel();\n            }\n        }\n        else {\n            this.renderFrozenRightPanelAlone();\n        }\n        var display = this.parent.enableVirtualization ? '' : 'flex';\n        this.getPanel().firstChild.style.display = display;\n    };\n    ColumnFreezeContentRenderer.prototype.renderTable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderTable.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightTable();\n                var display = !this.parent.getVisibleFrozenRightCount() ? 'none' : '';\n                this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-right-scrollbar', display, true);\n            }\n        }\n        else {\n            this.renderFrozenRightTableAlone();\n            var display = !this.parent.getVisibleFrozenRightCount() ? 'none' : '';\n            this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-right-scrollbar', display);\n        }\n        this.getMovableContent().style.flex = '1';\n    };\n    ColumnFreezeContentRenderer.prototype.appendScrollbar = function (frozen, movable, isRight) {\n        var parent = this.parent.createElement('div', { className: 'e-scrollbar', styles: 'display: flex' });\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            if (!isRight) {\n                parent.appendChild(frozen);\n                parent.appendChild(movable);\n            }\n            else {\n                this.parent.getContent().querySelector('.e-scrollbar').appendChild(frozen);\n                return;\n            }\n        }\n        else {\n            parent.appendChild(movable);\n            parent.appendChild(frozen);\n        }\n        this.parent.getContent().appendChild(parent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightPanelAlone = function () {\n        this.renderFrozenRigthPanel();\n        var mDiv = this.parent.element.querySelector('.' + literals.movableContent);\n        var fRightContent = this.parent.element.querySelector('.e-frozen-right-content');\n        if (isNullOrUndefined(fRightContent)) {\n            mDiv = this.parent.createElement('div', { className: literals.movableContent });\n            fRightContent = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-right-content' });\n            this.getPanel().querySelector('.' + literals.content).appendChild(mDiv);\n            this.getPanel().querySelector('.' + literals.content).appendChild(fRightContent);\n        }\n        _super.prototype.setMovableContent.call(this, mDiv);\n        this.setFrozenRightContent(fRightContent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightPanel = function () {\n        this.renderFrozenRigthPanel();\n        var fRightContent = this.parent.element.querySelector('.e-frozen-right-content');\n        if (isNullOrUndefined(fRightContent)) {\n            fRightContent = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-right-content' });\n            this.getPanel().querySelector('.' + literals.content).appendChild(fRightContent);\n        }\n        this.setFrozenRightContent(fRightContent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightTableAlone = function () {\n        var mTbl;\n        if (this.getFrozenRightContent().querySelector('.' + literals.table) == null) {\n            _super.prototype.renderFrozenRightTable.call(this);\n            this.getFrozenRightContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n            this.setTable(this.getFrozenRightContent().querySelector('.' + literals.table));\n            this.setColGroup(this.getFrozenRightHeaderColGroup());\n            mTbl = this.getMovableContent().querySelector('.' + literals.table);\n            this.getFrozenRightContent().querySelector('.' + literals.table).appendChild(this.getColGroup());\n        }\n        if (this.getMovableContent().querySelector(literals.colGroup)) {\n            remove(this.getMovableContent().querySelector(literals.colGroup));\n        }\n        var colgroup = ((this.parent.getHeaderContent().querySelector('.' + literals.movableHeader)\n            .querySelector(literals.colGroup)).cloneNode(true));\n        mTbl.insertBefore(colgroup, mTbl.querySelector(literals.tbody));\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightTable = function () {\n        var frozenRight = this.getTable().cloneNode(true);\n        this.getFrozenRightContent().appendChild(frozenRight);\n        var oldColGroup = this.getFrozenRightContent().querySelector(literals.colGroup);\n        if (oldColGroup) {\n            remove(oldColGroup);\n        }\n        var rightTable = this.getFrozenRightContent().querySelector('.' + literals.table);\n        rightTable.insertBefore(this.getFrozenRightHeaderColGroup(), rightTable.querySelector(literals.tbody));\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightEmptyRowAlone = function (tbody) {\n        _super.prototype.renderFrozenRightEmpty.call(this, tbody);\n        this.getMovableContent().querySelector(literals.tbody).innerHTML = '<tr><td></td></tr>';\n        addClass([this.parent.getMovableContentTbody().querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenRightContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenRightCount();\n        if (this.parent.frozenRows) {\n            this.parent.getFrozenRightHeaderTbody().innerHTML = '';\n            this.parent.getMovableHeaderTbody().innerHTML = '';\n        }\n    };\n    /**\n     * @param {string} tableName - specfies the table name\n     * @returns {HTMLElement} returns the element\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenHeader = function (tableName) {\n        if (tableName === literals.frozenLeft) {\n            return this.parent.getHeaderContent().querySelector('.e-frozen-left-header').querySelector(literals.tbody);\n        }\n        else if (tableName === 'movable') {\n            return this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.tbody);\n        }\n        else {\n            return this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.tbody);\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightEmptyRow = function () {\n        this.getFrozenRightContent().querySelector(literals.tbody).innerHTML = '<tr><td></td></tr>';\n        addClass([this.getFrozenRightContent().querySelector(literals.tbody).querySelector('tr')], ['e-emptyrow']);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.tbody).innerHTML = '';\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.setFrozenRightContent = function (ele) {\n        this.frozenRigthContent = ele;\n    };\n    ColumnFreezeContentRenderer.prototype.getFrozenRightContent = function () {\n        return this.frozenRigthContent;\n    };\n    ColumnFreezeContentRenderer.prototype.getHeaderColGroup = function () {\n        var colGroup = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n        if (!this.parent.getFrozenLeftColumnsCount()) {\n            var right = this.getFrozenRightHeaderColGroup();\n            colGroup = right && this.frzCount ? right.cloneNode(true) : colGroup;\n            this.frzCount++;\n            this.isColGroupRefresh = true;\n        }\n        return colGroup;\n    };\n    ColumnFreezeContentRenderer.prototype.getFrozenRightHeaderColGroup = function () {\n        var col = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup);\n        if (!col) {\n            col = this.parent.getHeaderContent().querySelector(literals.colGroup);\n        }\n        return col.cloneNode(true);\n    };\n    ColumnFreezeContentRenderer.prototype.setColGroup = function (colGroup) {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            return _super.prototype.setColGroup.call(this, colGroup);\n        }\n        else {\n            colGroup = !this.isColGroupRefresh ? this.getFrozenRightHeaderColGroup() : colGroup;\n            if (!isNullOrUndefined(colGroup)) {\n                colGroup.id = 'content-' + colGroup.id;\n            }\n            this.isColGroupRefresh = false;\n            if (this.frzCount === 2) {\n                this.frzCount = 0;\n            }\n            return this.colgroup = colGroup;\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.renderEmpty = function (tbody) {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderEmpty.call(this, tbody);\n            this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenLeftCount();\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightEmptyRow();\n            }\n        }\n        else {\n            this.renderFrozenRightEmptyRowAlone(tbody);\n        }\n        this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n    };\n    ColumnFreezeContentRenderer.prototype.setHeightToContent = function (height) {\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.getFrozenRightContent().style.height = height.toString() + 'px';\n        }\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            this.getFrozenContent().style.height = height.toString() + 'px';\n        }\n        this.getMovableContent().style.height = height.toString() + 'px';\n    };\n    ColumnFreezeContentRenderer.prototype.actionComplete = function (args) {\n        _super.prototype.actionComplete.call(this, args);\n    };\n    ColumnFreezeContentRenderer.prototype.batchAdd = function (args) {\n        _super.prototype.batchAdd.call(this, args);\n    };\n    /**\n     * @param {freezeTable} tableName - specfies the table name\n     * @returns {Element} - returns the element\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getTbody = function (tableName) {\n        var tbody;\n        if (tableName === literals.frozenLeft) {\n            tbody = this.parent.getFrozenLeftContentTbody();\n        }\n        else if (tableName === 'movable') {\n            tbody = this.parent.getMovableContentTbody();\n        }\n        else if (tableName === literals.frozenRight) {\n            tbody = this.parent.getFrozenRightContentTbody();\n        }\n        return tbody;\n    };\n    /**\n     * @param {NotifyArgs} args - specfies the args\n     * @param {freezeTable} tableName - specfies the freeze table\n     * @returns {void}\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.setIsFrozen = function (args, tableName) {\n        args.isFrozen = (tableName === literals.frozenLeft || (this.parent.getFrozenMode() === 'Right'\n            && tableName === literals.frozenRight));\n        args.renderFrozenRightContent = this.parent.getFrozenMode() === literals.leftRight && tableName === literals.frozenRight;\n        args.renderMovableContent = tableName === 'movable';\n    };\n    /**\n     * @param {Element} tbody - specfies the element\n     * @param {DocumentFragment | HTMLElement} frag - specfies the frag\n     * @param {NotifyArgs} args - specfies the args\n     * @param {freezeTable} tableName - specfies the tableName\n     * @returns {void}\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.appendContent = function (tbody, frag, args, tableName) {\n        if (!isNullOrUndefined(this.parent.rowTemplate) && this.parent.isReact) {\n            tbody = frag;\n        }\n        else {\n            tbody.appendChild(frag);\n        }\n        if (this.parent.getFrozenMode() === 'Left') {\n            if (tableName === literals.frozenLeft) {\n                this.isLoaded = false;\n                this.getFrozenContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else {\n                this.refreshTbody(tbody);\n                this.isLoaded = true;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n        }\n        else if (this.parent.getFrozenMode() === 'Right') {\n            if (tableName === 'movable') {\n                this.refreshTbody(tbody);\n                this.isLoaded = true;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n            else {\n                this.isLoaded = false;\n                this.getFrozenRightContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n        }\n        else if (this.parent.getFrozenMode() === literals.leftRight) {\n            if (tableName === literals.frozenLeft) {\n                this.isLoaded = false;\n                this.getFrozenContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else if (tableName === 'movable') {\n                this.refreshTbody(tbody);\n                this.isLoaded = false;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else {\n                this.isLoaded = true;\n                this.getFrozenRightContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n        }\n        if (this.isInitialRender) {\n            this.parent.scrollModule.setHeight();\n            this.isInitialRender = false;\n        }\n        this.widthService.refreshFrozenScrollbar();\n    };\n    ColumnFreezeContentRenderer.prototype.refreshHeight = function () {\n        if (!this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n        }\n    };\n    /**\n     * @param {freezeTable} tableName - specifies the table\n     * @returns {void}\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.splitRows = function (tableName) {\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (left && !right) {\n            if (tableName === literals.frozenLeft) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n        else if (!left && right) {\n            if (tableName === 'movable') {\n                this.movableRows = this.rows;\n            }\n            else {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n        }\n        else if (left && right) {\n            if (tableName === literals.frozenLeft) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else if (tableName === 'movable') {\n                this.movableRows = this.rows;\n                this.movableRowElements = this.rowElements;\n            }\n            else {\n                this.frozenRightRows = this.rows;\n                this.frozenRightRowElements = this.rowElements;\n            }\n        }\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ColumnFreezeContentRenderer.prototype.getMovableRowElements = function () {\n        if (this.parent.getFrozenMode() !== literals.leftRight) {\n            return this.rowElements;\n        }\n        else {\n            return this.movableRowElements;\n        }\n    };\n    /**\n     * Get the Freeze pane frozen right content table data row elements\n     *\n     * @returns {Element} returns the Element\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRowElements = function () {\n        if (this.parent.getFrozenMode() !== literals.leftRight) {\n            return this.freezeRowElements;\n        }\n        else {\n            return this.frozenRightRowElements;\n        }\n    };\n    /**\n     * Get the frozen right row collection in the Freeze pane Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row object\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRows = function () {\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            if (this.parent.enableInfiniteScrolling) {\n                return this.rightFreezeRows;\n            }\n            return this.frozenRightRows;\n        }\n        else {\n            return this.getRows();\n        }\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.parent.getFrozenRightDataRows()[index];\n    };\n    /**\n     * Get the Row collection in the Grid.\n     *\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>} returns the row object\n     */\n    ColumnFreezeContentRenderer.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.freezeRows;\n    };\n    /**\n     * Get the content table data row elements\n     *\n     * @returns {Element} returns the element\n     */\n    ColumnFreezeContentRenderer.prototype.getRowElements = function () {\n        return this.freezeRowElements;\n    };\n    return ColumnFreezeContentRenderer;\n}(FreezeContentRender));\nexport { ColumnFreezeContentRenderer };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\nimport { VirtualFreezeRenderer, VirtualFreezeHdrRenderer, ColumnVirtualFreezeRenderer } from '../renderer/virtual-freeze-renderer';\nimport { ColumnFreezeContentRenderer, ColumnFreezeHeaderRenderer } from '../renderer/column-freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n *\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        this.parent.log('limitation', this.getModuleName());\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            if (this.parent.enableColumnVirtualization) {\n                renderer.addRenderer(RenderType.Header, new VirtualFreezeHdrRenderer(this.parent, this.locator));\n            }\n            else {\n                renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            }\n            if (this.parent.enableVirtualization) {\n                renderer.addRenderer(RenderType.Content, new VirtualFreezeRenderer(this.parent, this.locator));\n            }\n            else {\n                renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n            }\n        }\n        if (this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenRightColumnsCount()) {\n            renderer.addRenderer(RenderType.Header, new ColumnFreezeHeaderRenderer(this.parent, this.locator));\n            if (this.parent.enableVirtualization) {\n                renderer.addRenderer(RenderType.Content, new ColumnVirtualFreezeRenderer(this.parent, this.locator));\n            }\n            else {\n                renderer.addRenderer(RenderType.Content, new ColumnFreezeContentRenderer(this.parent, this.locator));\n            }\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function () {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                // eslint-disable-next-line no-case-declarations\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                // eslint-disable-next-line no-case-declarations\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.isFrozenGrid()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @returns {HTMLElement} returns the HTMLElement\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var gridTop = this.parent.element.offsetTop;\n        var left = liPos.left;\n        var top = gridTop;\n        if (window.innerHeight < ul.offsetHeight + gridPos.top) {\n            top = gridTop - ((ul.offsetHeight + gridPos.top) - window.innerHeight);\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function () {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return document.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\nimport * as events from '../base/constant';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].dataSource = (columns[i].dataSource instanceof DataManager ? columns[i].dataSource :\n                (isNullOrUndefined(columns[i].dataSource) ? new DataManager() : 'result' in columns[i].dataSource ? columns[i].dataSource :\n                    new DataManager(columns[i].dataSource)));\n        }\n    };\n    ForeignKey.prototype.eventfPromise = function (args, query, key, column) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        state.action = args.action;\n        var dataModule = this.parent.getDataModule();\n        if (!isNullOrUndefined(args.action) && args.action.requestType && dataModule.foreignKeyDataState.isDataChanged !== false) {\n            dataModule.setForeignKeyDataState({\n                isPending: true, resolver: deff.resolve\n            });\n            deff.promise.then(function () {\n                def.resolve(column.dataSource);\n            });\n            state.setColumnData = this.parent.setForeignKeyData.bind(this.parent);\n            this.parent.trigger(events.columnDataStateChange, state);\n        }\n        else {\n            dataModule.setForeignKeyDataState({});\n            def.resolve(key);\n        }\n        return def;\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        var _loop_1 = function (i) {\n            var promise = void 0;\n            var query = args.isComplex ? this_1.genarateColumnQuery(foreignColumns[i]) :\n                this_1.genarateQuery(foreignColumns[i], args.result.result, false, true);\n            query.params = this_1.parent.query.params;\n            var dataSource = foreignColumns[i].dataSource;\n            if (dataSource && 'result' in dataSource) {\n                var def = this_1.eventfPromise(args, query, dataSource, foreignColumns[i]);\n                promise = def.promise;\n            }\n            else if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        };\n        var this_1 = this;\n        for (var i = 0; i < foreignColumns.length; i++) {\n            _loop_1(i);\n        }\n        Promise.all(allPromise).then(function (responses) {\n            for (var i = 0; i < responses.length; i++) {\n                foreignColumns[i].columnData = responses[i].result;\n                if (foreignColumns[i].editType === 'dropdownedit' && 'result' in foreignColumns[i].dataSource) {\n                    foreignColumns[i].edit.params = extend(foreignColumns[i].edit.params, {\n                        dataSource: responses[i].result,\n                        query: new Query(), fields: {\n                            value: foreignColumns[i].foreignKeyField || foreignColumns[i].field,\n                            text: foreignColumns[i].foreignKeyValue\n                        }\n                    });\n                }\n            }\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            _this.parent.log(['actionfailure', 'foreign_key_failure']);\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            for (var i = 0; i < filteredValue.length; i++) {\n                if (filteredValue[i] && filteredValue[i].getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: filteredValue[i], matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', filteredValue[i], false));\n                }\n            }\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        return (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            if (column.dataSource instanceof DataManager && (column.dataSource.adaptor.getModuleName &&\n                column.dataSource.adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                query = this.searchQuery(query, column, true);\n            }\n            else {\n                query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n            }\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue && fColumn.uid === column.uid);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n","/**\n *\n * `Logger` class\n */\nimport { isNullOrUndefined, L10n, isUndefined } from '@syncfusion/ej2-base';\nimport { DataUtil, DataManager } from '@syncfusion/ej2-data';\nvar BASE_DOC_URL = 'https://ej2.syncfusion.com/documentation/grid';\nvar DOC_URL = 'https://ej2.syncfusion.com/documentation/';\nvar WARNING = '[EJ2Grid.Warning]';\nvar ERROR = '[EJ2Grid.Error]';\nvar INFO = '[EJ2Grid.Info]';\nvar Logger = /** @class */ (function () {\n    function Logger(parent) {\n        this.parent = parent;\n        this.parent.on('initial-end', this.patchadaptor, this);\n    }\n    Logger.prototype.getModuleName = function () {\n        return 'logger';\n    };\n    Logger.prototype.log = function (types, args) {\n        if (!(types instanceof Array)) {\n            types = [types];\n        }\n        var type = types;\n        for (var i = 0; i < type.length; i++) {\n            var item = detailLists[type[i]];\n            var cOp = item.check(args, this.parent);\n            if (cOp.success) {\n                // eslint-disable-next-line no-console\n                console[item.logType](item.generateMessage(args, this.parent, cOp.options));\n            }\n        }\n    };\n    Logger.prototype.patchadaptor = function () {\n        var adaptor = this.parent.getDataModule().dataManager.adaptor;\n        var original = adaptor.beforeSend;\n        if (original) {\n            adaptor.beforeSend = function (dm, request, settings) {\n                original.call(adaptor, dm, request, settings);\n            };\n        }\n    };\n    Logger.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-end', this.patchadaptor);\n    };\n    return Logger;\n}());\nexport { Logger };\nexport var detailLists = {\n    // eslint-disable-next-line camelcase\n    module_missing: {\n        type: 'module_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var injected = parent.getInjectedModules().map(function (m) { return m.prototype.getModuleName(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var modules = parent.requiredModules().map(function (m) { return m.member; })\n                .filter(function (name) { return injected.indexOf(name) === -1; });\n            return { success: modules.filter(function (m) { return m !== 'resize'; }).length > 0, options: modules };\n        },\n        generateMessage: function (args, parent, modules) {\n            modules = modules.filter(function (m) { return m !== 'resize'; })\n                .reduce(function (prev, cur) { return prev + (\"* \" + cur + \"\\n\"); }, '');\n            return WARNING + ': MODULES MISSING\\n' + 'The following modules are not injected:.\\n' +\n                (\"\" + modules) +\n                (\"Refer to \" + BASE_DOC_URL + \"/module.html for documentation on importing feature modules.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    promise_enabled: {\n        type: 'promise_enabled',\n        logType: 'error',\n        check: function () {\n            return { success: typeof Promise === 'undefined' };\n        },\n        generateMessage: function () {\n            return ERROR + ': PROMISE UNDEFINED\\n' +\n                'Promise object is not present in the global environment,' +\n                'please use polyfil to support Promise object in your environment.\\n' +\n                (\"Refer to \" + DOC_URL + \"/base/browser.html?#required-polyfills for more information.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    primary_column_missing: {\n        type: 'primary_column_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function () {\n            return WARNING + ': PRIMARY KEY MISSING\\n' + 'Editing is enabled but primary key column is not specified.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    selection_key_missing: {\n        type: 'selection_key_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.selectionSettings.persistSelection &&\n                    parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function () {\n            return WARNING + ': PRIMARY KEY MISSING\\n' +\n                'selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    actionfailure: {\n        type: 'actionfailure',\n        logType: 'error',\n        check: function () {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            var message = '';\n            var formatError = formatErrorHandler(args, parent);\n            var ajaxError = ajaxErrorHandler(args, parent);\n            if (ajaxError !== '') {\n                message = ajaxError;\n            }\n            else if (formatError !== '') {\n                message = formatError;\n            }\n            else {\n                message = args.error;\n            }\n            return WARNING + ': ' + message;\n        }\n    },\n    // eslint-disable-next-line camelcase\n    locale_missing: {\n        type: 'locale_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var lObj = DataUtil.getObject(\"locale.\" + parent.locale + \".grid\", L10n);\n            return { success: parent.locale !== 'en-US' && isNullOrUndefined(lObj) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': LOCALE CONFIG MISSING\\n' + (\"Locale configuration for '\" + parent.locale + \"' is not provided.\\n\") +\n                (\"Refer to \" + BASE_DOC_URL + \"/globalization-and-localization.html?#localization \\n             for documentation on setting locale configuration.\");\n        }\n    },\n    limitation: {\n        type: 'limitation',\n        logType: 'warn',\n        check: function (args, parent) {\n            var name = args;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = {\n                        success: parent.allowGrouping || !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid)\n                            || !isUndefined(parent.rowTemplate) || parent.enableVirtualization,\n                        options: { name: 'freeze' }\n                    };\n                    break;\n                case 'virtualization':\n                    opt = {\n                        success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid) || parent.frozenRows !== 0\n                            || parent.frozenColumns !== 0,\n                        options: { name: 'virtualization' }\n                    };\n                    break;\n                default:\n                    opt = { success: false };\n                    break;\n            }\n            return opt;\n        },\n        generateMessage: function (args, parent, options) {\n            var name = options.name;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = 'Frozen rows and columns do not support the following features:\\n' +\n                        '* Virtualization\\n' +\n                        '* Row Template\\n' +\n                        '* Details Template\\n' +\n                        '* Hierarchy Grid\\n' +\n                        '* Grouping';\n                    break;\n                case 'virtualization':\n                    opt = 'Virtualization does not support the following features.\\n' +\n                        '* Freeze rows and columns.\\n' +\n                        '* Details Template.\\n' +\n                        '* Hierarchy Grid.\\n';\n                    break;\n                default:\n                    opt = '';\n                    break;\n            }\n            return WARNING + (\": \" + name.toUpperCase() + \" LIMITATIONS\\n\") + opt;\n        }\n    },\n    // eslint-disable-next-line camelcase\n    check_datasource_columns: {\n        type: 'check_datasource_columns',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: !(parent.columns.length ||\n                    (parent.dataSource instanceof DataManager) || parent.dataSource.length) };\n        },\n        generateMessage: function () {\n            return WARNING + ': GRID CONFIG MISSING\\n' + 'dataSource and columns are not provided in the grid. ' +\n                'At least one of either must be provided for grid configuration.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns.html for documentation on configuring the grid data and columns.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    virtual_height: {\n        type: 'virtual_height',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(parent.height) || parent.height === 'auto' };\n        },\n        generateMessage: function () {\n            return ERROR + ': GRID HEIGHT MISSING \\n' + 'height property is required to use virtualization.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/virtual.html for documentation on configuring the virtual grid.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    grid_remote_edit: {\n        type: 'grid_remote_edit',\n        logType: 'error',\n        check: function (args) {\n            return { success: Array.isArray(args) || Array.isArray(args.result) };\n        },\n        generateMessage: function () {\n            return ERROR + ': RETRUN VALUE MISSING  \\n' +\n                'Remote service returns invalid data. \\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/edit.html for documentation on configuring editing with remote data.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    grid_sort_comparer: {\n        type: 'grid_sort_comparer',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getDataModule().isRemote() };\n        },\n        generateMessage: function () {\n            return WARNING + ': SORT COMPARER NOT WORKING  \\n' + 'Sort comparer will not work with remote data.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/sorting/#custom-sort-comparer for documentation on using the sort comparer.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    resize_min_max: {\n        type: 'resize_min_max',\n        logType: 'info',\n        check: function (args) {\n            return { success: (args.column.minWidth && args.column.minWidth >= args.width) ||\n                    (args.column.maxWidth && args.column.maxWidth <= args.width) };\n        },\n        generateMessage: function () {\n            return INFO + ': RESIZING COLUMN REACHED MIN OR MAX  \\n' + 'The column resizing width is at its min or max.';\n        }\n    },\n    // eslint-disable-next-line camelcase\n    action_disabled_column: {\n        type: 'action_disabled_column',\n        logType: 'info',\n        check: function (args) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'reorder':\n                    if (isNullOrUndefined(args.destColumn)) {\n                        fn = \"reordering action is disabled for the \" + args.column.headerText + \" column\";\n                    }\n                    else {\n                        fn = \"reordering action is disabled for the \" + (args.column.allowReordering ?\n                            args.destColumn.headerText : args.column.headerText) + \" column\";\n                    }\n                    break;\n                case 'group':\n                    fn = \"grouping action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'filter':\n                    fn = \"filtering action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'sort':\n                    fn = \"sorting action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": ACTION DISABLED \\n \" + options.fn);\n        }\n    },\n    // eslint-disable-next-line camelcase\n    exporting_begin: {\n        type: 'exporting_begin',\n        logType: 'info',\n        check: function (args) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG INPROGRESS \\n Grid \" + options.args + \"ing is in progress\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    exporting_complete: {\n        type: 'exporting_complete',\n        logType: 'info',\n        check: function (args) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG COMPLETED \\n Grid \" + options.args + \"ing is complete\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    foreign_key_failure: {\n        type: 'foreign_key_failure',\n        logType: 'error',\n        check: function () {\n            return { success: true };\n        },\n        generateMessage: function () {\n            return ERROR + ': FOREIGNKEY CONFIG \\n  Grid foreign key column needs a valid data source/service.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns/#foreign-key-column for documentation on configuring foreign key columns.\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    initial_action: {\n        type: 'initial_action',\n        logType: 'error',\n        check: function (args) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'group':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to group the column';\n                    break;\n                case 'filter':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to filter the column.';\n                    break;\n                case 'sort':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to sort the column.';\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": INITIAL ACTION FAILURE \\n \" + options.fn);\n        }\n    },\n    // eslint-disable-next-line camelcase\n    frozen_rows_columns: {\n        type: 'frozen_rows_columns',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: parent.getColumns().length <= parent.frozenColumns || parent.frozenRows >= parent.currentViewData.length };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + (\": OUT OF RANGE ERROR-\\n \" + (parent.getColumns().length <= parent.frozenColumns ? 'FROZEN COLUMNS,' : '')) +\n                ((parent.frozenRows >= parent.currentViewData.length ? 'FROZEN ROWS' : '') + \" invalid\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    column_type_missing: {\n        type: 'column_type_missing',\n        logType: 'error',\n        check: function (args) {\n            return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": COLUMN TYPE MISSING-\\n  \" + options + \" column type was invalid or not defined.\") +\n                (\"Please go through below help link: \" + DOC_URL + \"/grid/columns/#column-type\");\n        }\n    },\n    // eslint-disable-next-line camelcase\n    datasource_syntax_mismatch: {\n        type: 'datasource_syntax_mismatch',\n        logType: 'warn',\n        check: function (args) {\n            return { success: args.dataState.dataSource && !(args.dataState.dataSource instanceof DataManager ||\n                    'result' in args.dataState.dataSource || args.dataState.dataSource instanceof Array) &&\n                    !(isNullOrUndefined(args.dataState.dataStateChange)) };\n        },\n        generateMessage: function () {\n            return WARNING + ': DATASOURCE SYNTAX WARNING\\n' +\n                'DataSource should be in the form of {result: Object[], count: number}' +\n                'when dataStateChangeEvent used';\n        }\n    }\n};\nvar formatErrorHandler = function (args) {\n    var error = args.error;\n    if (error.indexOf && error.indexOf('Format options') !== 0) {\n        return '';\n    }\n    return 'INVALID FORMAT\\n' +\n        'For more information, refer to the following documentation links:\\n' +\n        (\"Number format: \" + DOC_URL + \"/base/intl.html?#supported-format-string.\\n\") +\n        (\"Date format: \" + DOC_URL + \"/base/intl.html?#manipulating-datetime.\\n\") +\n        (\"Message: \" + error);\n};\nvar ajaxErrorHandler = function (args) {\n    var error = DataUtil.getObject('error.error', args);\n    if (isNullOrUndefined(error)) {\n        return '';\n    }\n    var jsonResult = '';\n    try {\n        jsonResult = JSON.parse(error.responseText);\n    }\n    catch (_a) {\n        jsonResult = '';\n    }\n    return 'XMLHTTPREQUEST FAILED\\n' +\n        (\"Url: \" + error.responseURL + \"\\n\") +\n        (\"Status: \" + error.status + \" - \" + error.statusText + \"\\n\") +\n        (\"\" + (jsonResult !== '' ? 'Message: ' + jsonResult : ''));\n};\n","import { isNullOrUndefined, remove, extend } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, ensureLastRow, ensureFirstRow, getEditedDataIndex, resetRowIndex, setRowElements } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Infinite Scrolling class\n *\n * @hidden\n */\nvar InfiniteScroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid infinite scrolling.\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the ServiceLocator\n     * @hidden\n     */\n    function InfiniteScroll(parent, serviceLocator) {\n        this.infiniteCache = {};\n        this.infiniteCurrentViewData = {};\n        this.infiniteFrozenCache = {};\n        this.isDownScroll = false;\n        this.isUpScroll = false;\n        this.isScroll = true;\n        this.enableContinuousScroll = false;\n        this.initialRender = true;\n        this.isRemove = false;\n        this.isInitialCollapse = false;\n        this.prevScrollTop = 0;\n        this.actions = ['filtering', 'searching', 'grouping', 'ungrouping', 'reorder', 'sorting'];\n        this.keys = ['downArrow', 'upArrow', 'PageUp', 'PageDown'];\n        this.rowTop = 0;\n        this.isInitialMovableRender = true;\n        this.virtualInfiniteData = {};\n        this.isCancel = false;\n        this.emptyRowData = {};\n        this.isNormaledit = false;\n        this.isInfiniteScroll = false;\n        this.isLastPage = false;\n        this.isInitialRender = true;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.isNormaledit = this.parent.editSettings.mode === 'Normal';\n        this.addEventListener();\n        this.widthService = serviceLocator.getService('widthService');\n        this.rowModelGenerator = this.parent.isFrozenGrid() ? new FreezeRowModelGenerator(this.parent)\n            : new RowModelGenerator(this.parent);\n    }\n    InfiniteScroll.prototype.getModuleName = function () {\n        return 'infiniteScroll';\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    InfiniteScroll.prototype.addEventListener = function () {\n        this.parent.on(events.dataReady, this.onDataReady, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n        this.parent.on(events.infinitePageQuery, this.infinitePageQuery, this);\n        this.parent.on(events.infiniteScrollHandler, this.infiniteScrollHandler, this);\n        this.parent.on(events.beforeCellFocused, this.infiniteCellFocus, this);\n        this.parent.on(events.appendInfiniteContent, this.appendInfiniteRows, this);\n        this.parent.on(events.removeInfiniteRows, this.removeInfiniteCacheRows, this);\n        this.parent.on(events.resetInfiniteBlocks, this.resetInfiniteBlocks, this);\n        this.parent.on(events.setInfiniteCache, this.setCache, this);\n        this.parent.on(events.initialCollapse, this.ensureIntialCollapse, this);\n        this.parent.on(events.keyPressed, this.infiniteCellFocus, this);\n        this.parent.on(events.infiniteShowHide, this.setDisplayNone, this);\n        this.parent.on(events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent.on(events.getVirtualData, this.getVirtualInfiniteData, this);\n        this.parent.on(events.editReset, this.resetInfiniteEdit, this);\n        this.parent.on(events.virtualScrollEditSuccess, this.infiniteEditSuccess, this);\n        this.parent.on(events.refreshVirtualCache, this.refreshInfiniteCache, this);\n        this.parent.on(events.infiniteEditHandler, this.infiniteEditHandler, this);\n        this.parent.on(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.on(events.refreshInfiniteCurrentViewData, this.refreshInfiniteCurrentViewData, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.on(events.deleteComplete, this.deleteComplate, this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    InfiniteScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dataReady, this.onDataReady);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n        this.parent.off(events.infinitePageQuery, this.infinitePageQuery);\n        this.parent.off(events.infiniteScrollHandler, this.infiniteScrollHandler);\n        this.parent.off(events.beforeCellFocused, this.infiniteCellFocus);\n        this.parent.off(events.appendInfiniteContent, this.appendInfiniteRows);\n        this.parent.off(events.removeInfiniteRows, this.removeInfiniteCacheRows);\n        this.parent.off(events.resetInfiniteBlocks, this.resetInfiniteBlocks);\n        this.parent.off(events.setInfiniteCache, this.setCache);\n        this.parent.off(events.initialCollapse, this.ensureIntialCollapse);\n        this.parent.off(events.keyPressed, this.infiniteCellFocus);\n        this.parent.off(events.infiniteShowHide, this.setDisplayNone);\n        this.parent.off(events.virtualScrollEditActionBegin, this.editActionBegin);\n        this.parent.off(events.getVirtualData, this.getVirtualInfiniteData);\n        this.parent.off(events.editReset, this.resetInfiniteEdit);\n        this.parent.off(events.virtualScrollEditSuccess, this.infiniteEditSuccess);\n        this.parent.off(events.refreshVirtualCache, this.refreshInfiniteCache);\n        this.parent.off(events.infiniteEditHandler, this.infiniteEditHandler);\n        this.parent.off(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.off(events.refreshInfiniteCurrentViewData, this.refreshInfiniteCurrentViewData);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    InfiniteScroll.prototype.updateCurrentViewData = function () {\n        var gObj = this.parent;\n        if (gObj.groupSettings.columns.length) {\n            return;\n        }\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        gObj.currentViewData = [];\n        var page = gObj.pageSettings.currentPage;\n        var isCache = gObj.infiniteScrollSettings.enableCache;\n        var blocks = gObj.infiniteScrollSettings.maxBlocks;\n        var isMiddlePage = isCache && (page > blocks || (this.isUpScroll && page > 1));\n        var start = isMiddlePage ? this.isUpScroll ? page : (page - blocks) + 1 : 1;\n        var end = isMiddlePage ? (start + blocks) - 1 : isCache ? blocks : keys.length;\n        for (var i = start; i <= end; i++) {\n            if (this.infiniteCurrentViewData[i]) {\n                gObj.currentViewData = gObj.currentViewData.concat(this.infiniteCurrentViewData[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.refreshInfiniteCurrentViewData = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        var size = this.parent.pageSettings.pageSize;\n        var blocks = this.parent.infiniteScrollSettings.initialBlocks;\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        var cache = this.parent.infiniteScrollSettings.enableCache;\n        if (!this.parent.groupSettings.columns.length) {\n            var isAdd = e.args.requestType === 'save';\n            var isDelete = e.args.requestType === 'delete';\n            if (!cache && (isAdd || isDelete)) {\n                if (isAdd) {\n                    this.infiniteCurrentViewData[1] = e.data.concat(this.infiniteCurrentViewData[1]);\n                }\n                else {\n                    this.infiniteCurrentViewData[keys[keys.length - 1]].push(e.data[0]);\n                }\n            }\n            else {\n                if (blocks > 1 && e.data.length === (blocks * size)) {\n                    this.setInitialCache(e.data.slice(), {}, cache && e.args.requestType === 'delete', true);\n                }\n                else {\n                    this.infiniteCurrentViewData[page] = e.data.slice();\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.deleteComplate = function () {\n        if (this.parent.isFrozenGrid() && !this.parent.infiniteScrollSettings.enableCache) {\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    InfiniteScroll.prototype.modelChanged = function (args) {\n        if (args.requestType !== 'infiniteScroll' && (args.requestType === 'delete' || this.requestType === 'add')) {\n            var rows = this.parent.getRows();\n            this.firstIndex = parseInt(rows[0].getAttribute(literals.ariaRowIndex), 10);\n            this.firstBlock = Math.ceil((this.firstIndex + 1) / this.parent.pageSettings.pageSize);\n            this.lastIndex = parseInt(rows[rows.length - 1].getAttribute(literals.ariaRowIndex), 10);\n            if (args.requestType === 'delete') {\n                var rowObj = this.parent.getRowsObject();\n                args.startIndex = this.parent.infiniteScrollSettings.enableCache\n                    ? (this.firstBlock - 1) * this.parent.pageSettings.pageSize : rowObj[rowObj.length - 1].index;\n            }\n            else {\n                args.startIndex = this.firstIndex;\n            }\n            if (!this.parent.infiniteScrollSettings.enableCache\n                && this.parent.pageSettings.currentPage === this.maxPage && args.requestType === 'delete') {\n                this.isLastPage = true;\n                this.lastIndex = this.lastIndex - 1;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteAddActionBegin = function (args) {\n        if (this.isNormaledit) {\n            this.isAdd = true;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                if (!Object.keys(this.emptyRowData).length) {\n                    this.createEmptyRowdata();\n                }\n                if (this.parent.pageSettings.currentPage > 1) {\n                    args.startEdit = false;\n                    this.resetInfiniteBlocks({}, true);\n                    this.makeRequest({ currentPage: 1 });\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteEditHandler = function (args) {\n        if (!this.parent.infiniteScrollSettings.enableCache && (args.e.requestType === 'delete'\n            || (args.e.requestType === 'save' && this.requestType === 'add'))) {\n            var frozenCols = this.parent.isFrozenGrid();\n            var rowElms = this.parent.getRows();\n            var rows = this.parent.getRowsObject();\n            if (this.ensureRowAvailability(rows, args.result[0])) {\n                this.resetRowIndex(rows, args.e, rowElms, this.requestType === 'add', true);\n                if (frozenCols) {\n                    var rows_1 = this.parent.getMovableRowsObject();\n                    this.resetRowIndex(rows_1, args.e, this.parent.getMovableDataRows(), this.requestType === 'add');\n                    if (this.parent.getFrozenMode() === literals.leftRight) {\n                        var frRows = this.parent.getFrozenRightRowsObject();\n                        this.resetRowIndex(frRows, args.e, this.parent.getFrozenRightRows(), this.requestType === 'add');\n                    }\n                }\n                if (!this.isLastPage) {\n                    this.createRow(rows, args);\n                }\n                else {\n                    this.isLastPage = false;\n                    this.parent.pageSettings.currentPage = this.maxPage;\n                    if (this.parent.selectionModule.index < this.parent.frozenRows) {\n                        remove(rowElms[this.parent.frozenRows - 1]);\n                        this.createRow([rows[this.parent.frozenRows - 1]], args, false, true);\n                        if (frozenCols) {\n                            var movableRows = this.parent.getMovableDataRows();\n                            remove(movableRows[this.parent.frozenRows]);\n                            this.createRow([this.parent.getMovableRowsObject()[this.parent.frozenRows - 1]], args, true, true);\n                            if (this.parent.getFrozenMode() === literals.leftRight) {\n                                var rightRows = this.parent.getFrozenRightDataRows();\n                                remove(rightRows[this.parent.frozenRows]);\n                                this.createRow([this.parent.getFrozenRightRowsObject()[this.parent.frozenRows - 1]], args, false, true, true);\n                            }\n                        }\n                        setRowElements(this.parent);\n                    }\n                }\n            }\n            this.parent.hideSpinner();\n            if (this.requestType === 'delete') {\n                this.parent.notify(events.deleteComplete, args.e);\n            }\n            else {\n                this.parent.notify(events.saveComplete, args.e);\n            }\n        }\n        this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n    };\n    InfiniteScroll.prototype.createRow = function (rows, args, isMovable, isFrozenRows, isFrozenRight) {\n        var row = !isFrozenRows ? this.generateRows(args.result, args.e) : rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tbody;\n        if (isFrozenRight) {\n            tbody = this.parent.element.querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n        }\n        else {\n            tbody = !this.parent.isFrozenGrid() ? this.parent.getContent().querySelector(literals.tbody) : isMovable\n                ? this.parent.getMovableVirtualContent().querySelector(literals.tbody)\n                : this.parent.getFrozenVirtualContent().querySelector(literals.tbody);\n        }\n        if (this.parent.frozenRows) {\n            tbody = isFrozenRows && this.requestType !== 'add' || !isFrozenRows && this.requestType === 'add'\n                ? !this.parent.isFrozenGrid() ? this.parent.getHeaderContent().querySelector(literals.tbody)\n                    : isMovable ? this.parent.getMovableVirtualHeader().querySelector(literals.tbody)\n                        : isFrozenRight ? this.parent.element.querySelector('.e-frozen-right-header').querySelector(literals.tbody)\n                            : this.parent.getFrozenVirtualHeader().querySelector(literals.tbody) : tbody;\n        }\n        var notifyArgs = {\n            rows: rows, cancel: false, args: args, isMovable: isMovable,\n            isFrozenRows: isFrozenRows, isFrozenRight: isFrozenRows, row: row\n        };\n        this.parent.notify(events.infiniteCrudCancel, notifyArgs);\n        if (!notifyArgs.cancel) {\n            for (var i = row.length - 1; i >= 0; i--) {\n                if (this.requestType === 'delete') {\n                    tbody.appendChild(rowRenderer.render(row[i], this.parent.getColumns()));\n                }\n                else {\n                    tbody.insertBefore(rowRenderer.render(row[i], this.parent.getColumns()), tbody.firstElementChild);\n                }\n            }\n        }\n        if (!isFrozenRows && this.parent.frozenRows\n            && (this.parent.selectionModule.index < this.parent.frozenRows || this.requestType === 'add')) {\n            var rowElems = isMovable ? this.parent.getMovableDataRows() : isFrozenRight ? this.parent.getFrozenRightDataRows()\n                : this.parent.getRows();\n            var index = (isMovable || isFrozenRight) && this.requestType === 'add'\n                ? this.parent.frozenRows : this.parent.frozenRows - 1;\n            remove(rowElems[index]);\n            this.createRow([rows[this.parent.frozenRows - 1]], args, isMovable, true, isFrozenRight);\n        }\n        if (!this.parent.infiniteScrollSettings.enableCache && !isFrozenRows) {\n            if (isFrozenRight) {\n                setRowElements(this.parent);\n                this.parent.contentModule.rightFreezeRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n            }\n            else if (!this.parent.isFrozenGrid() || isMovable) {\n                setRowElements(this.parent);\n                this.parent.contentModule.visibleRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    this.createRow(this.parent.getFrozenRightRowsObject(), args, false, false, true);\n                }\n            }\n            else {\n                this.parent.contentModule.visibleFrozenRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n                this.createRow(this.parent.getMovableRowsObject(), args, true);\n            }\n        }\n    };\n    InfiniteScroll.prototype.ensureRowAvailability = function (rows, data) {\n        var resume = true;\n        if (this.parent.frozenRows && !this.parent.infiniteScrollSettings.enableCache\n            && this.parent.sortSettings.columns && this.requestType === 'add') {\n            var key = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].data[key] === data[key]) {\n                    resume = false;\n                    break;\n                }\n            }\n        }\n        return resume;\n    };\n    InfiniteScroll.prototype.generateRows = function (data, args) {\n        return this.rowModelGenerator.generateRows(data, args);\n    };\n    InfiniteScroll.prototype.resetRowIndex = function (rows, args, rowElms, isAdd, isFrozen) {\n        var _this = this;\n        var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n        var isRemove = !(rowElms.length % this.parent.pageSettings.pageSize);\n        if (isAdd) {\n            if (isRemove) {\n                if (isFrozen && !this.parent.groupSettings.columns.length) {\n                    this.swapCurrentViewData(1, true);\n                }\n                remove(rowElms[rows.length - 1]);\n                rowElms.splice(rows.length - 1, 1);\n                rows.splice(rows.length - 1, 1);\n            }\n        }\n        else {\n            rows.filter(function (e, index) {\n                if (e.data[keyField] === args.data[0][keyField]) {\n                    if (isFrozen && !_this.parent.groupSettings.columns.length) {\n                        var page = Math.ceil((index + 1) / _this.parent.pageSettings.pageSize);\n                        _this.resetInfiniteCurrentViewData(page, index);\n                    }\n                    rows.splice(index, 1);\n                    remove(rowElms[index]);\n                    rowElms.splice(index, 1);\n                }\n            });\n        }\n        var startIndex = isAdd ? 1 : 0;\n        resetRowIndex(this.parent, rows, rowElms, startIndex);\n    };\n    InfiniteScroll.prototype.resetInfiniteCurrentViewData = function (page, index) {\n        index = index - ((page - 1) * this.parent.pageSettings.pageSize);\n        this.infiniteCurrentViewData[page].splice(index, 1);\n        this.swapCurrentViewData(page, false);\n    };\n    InfiniteScroll.prototype.swapCurrentViewData = function (page, isAdd) {\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        var end = isAdd ? keys.length + 1 : keys.length;\n        for (var i = page; i < end; i++) {\n            if (this.infiniteCurrentViewData[i + 1]) {\n                var pageIndex = isAdd ? i : i + 1;\n                var index = isAdd ? this.infiniteCurrentViewData[i].length - 1 : 0;\n                var data = this.infiniteCurrentViewData[pageIndex].splice(index, 1);\n                if (isAdd) {\n                    this.infiniteCurrentViewData[i + 1] = data.concat(this.infiniteCurrentViewData[i + 1]);\n                    if ((i + 1) === end - 1) {\n                        this.infiniteCurrentViewData[i + 1].splice(this.infiniteCurrentViewData[i + 1].length - 1, 1);\n                    }\n                }\n                else {\n                    this.infiniteCurrentViewData[i].push(data[0]);\n                }\n            }\n        }\n        this.updateCurrentViewData();\n    };\n    InfiniteScroll.prototype.setDisplayNone = function (args) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var frozenCols = this.parent.isFrozenGrid();\n            var keys = frozenCols ? Object.keys(this.infiniteFrozenCache) : Object.keys(this.infiniteCache);\n            for (var i = 1; i <= keys.length; i++) {\n                var cache = frozenCols ? args.isFreeze ? this.infiniteFrozenCache[i][0]\n                    : this.infiniteFrozenCache[i][1] : this.infiniteCache[i];\n                cache.filter(function (e) {\n                    e.cells[args.index].visible = args.visible === '';\n                });\n            }\n            this.resetContentModuleCache(frozenCols ? this.infiniteFrozenCache : this.infiniteCache);\n        }\n    };\n    InfiniteScroll.prototype.refreshInfiniteCache = function (data) {\n        this.getEditedRowObject().data = data;\n    };\n    InfiniteScroll.prototype.getEditedRowObject = function () {\n        var rowObjects = this.parent.getRowsObject();\n        var editedrow;\n        for (var i = 0; i < rowObjects.length; i++) {\n            if (rowObjects[i].index === this.editRowIndex) {\n                editedrow = rowObjects[i];\n            }\n        }\n        return editedrow;\n    };\n    InfiniteScroll.prototype.infiniteEditSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewRecords(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    InfiniteScroll.prototype.updateCurrentViewRecords = function (data) {\n        var index = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(index)) {\n            this.parent.getCurrentViewRecords()[index] = data;\n        }\n    };\n    InfiniteScroll.prototype.actionBegin = function (args) {\n        if (args.requestType === 'add' || args.requestType === 'delete') {\n            this.requestType = args.requestType;\n        }\n        else if (args.action === 'add' && args.requestType === 'save') {\n            this.requestType = args.action;\n        }\n        if (this.parent.isFrozenGrid() && !args.cancel && args.requestType === 'searching'\n            || args.requestType === 'sorting' || args.requestType === 'filtering') {\n            this.isInitialRender = true;\n        }\n    };\n    InfiniteScroll.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' || args.requestType === 'save' || args.requestType === 'cancel') {\n            this.requestType = this.empty;\n            this.isCancel = args.requestType === 'cancel' || args.requestType === 'save';\n            this.isAdd = this.isEdit = false;\n            if (this.isNormaledit) {\n                this.editRowIndex = this.empty;\n                this.virtualInfiniteData = {};\n                this.parent.editModule.previousVirtualData = {};\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteEdit = function () {\n        if (this.parent.enableInfiniteScrolling && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && this.isEdit) || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteData = function (data) {\n        data.virtualData = this.virtualInfiniteData;\n        data.isAdd = this.isAdd;\n        data.isCancel = this.isCancel;\n    };\n    InfiniteScroll.prototype.editActionBegin = function (e) {\n        this.isEdit = true;\n        this.editRowIndex = e.index;\n        var rowObject = extend({}, this.getEditedRowObject().data);\n        e.data = Object.keys(this.virtualInfiniteData).length ? this.virtualInfiniteData : rowObject;\n    };\n    InfiniteScroll.prototype.dataSourceModified = function () {\n        this.resetInfiniteBlocks({ requestType: this.empty }, true);\n    };\n    InfiniteScroll.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n    };\n    InfiniteScroll.prototype.ensureIntialCollapse = function (isExpand) {\n        this.isInitialCollapse = !isExpand;\n    };\n    InfiniteScroll.prototype.infiniteScrollHandler = function (e) {\n        this.restoreInfiniteEdit();\n        this.restoreInfiniteAdd();\n        var targetEle = e.target;\n        var isInfinite = targetEle.classList.contains(literals.content);\n        if (isInfinite && this.parent.enableInfiniteScrolling && !e.isLeft) {\n            var scrollEle = this.parent.getContent().firstElementChild;\n            this.prevScrollTop = scrollEle.scrollTop;\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[rows.length - 1].getAttribute(literals.ariaRowIndex), 10) + 1;\n            var prevPage = this.parent.pageSettings.currentPage;\n            var args = void 0;\n            var offset = targetEle.scrollHeight - targetEle.scrollTop;\n            var round = Math.round(targetEle.scrollHeight - targetEle.scrollTop);\n            var floor = offset < targetEle.clientHeight ? Math.ceil(offset) : Math.floor(offset);\n            var isBottom = (floor === targetEle.clientHeight || round === targetEle.clientHeight);\n            if (this.isScroll && isBottom && (this.parent.pageSettings.currentPage <= this.maxPage - 1 || this.enableContinuousScroll)) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isUpScroll = false;\n                    this.isDownScroll = true;\n                }\n                var rows_2 = [].slice.call(scrollEle.querySelectorAll('.e-row:not(.e-addedrow)'));\n                var row = rows_2[rows_2.length - 1];\n                var rowIndex = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) + 1;\n                args = {\n                    requestType: 'infiniteScroll',\n                    currentPage: this.parent.pageSettings.currentPage,\n                    prevPage: prevPage,\n                    startIndex: index,\n                    direction: 'down'\n                };\n                this.makeRequest(args);\n            }\n            if (this.isScroll && this.parent.infiniteScrollSettings.enableCache && targetEle.scrollTop === 0\n                && this.parent.pageSettings.currentPage !== 1) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isDownScroll = false;\n                    this.isUpScroll = true;\n                }\n                var row = [].slice.call(scrollEle.getElementsByClassName(literals.row));\n                var rowIndex = parseInt(row[this.parent.pageSettings.pageSize - 1].getAttribute(literals.ariaRowIndex), 10);\n                var startIndex = parseInt(row[0].getAttribute(literals.ariaRowIndex), 10) - this.parent.pageSettings.pageSize;\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) - 1;\n                if (this.parent.pageSettings.currentPage) {\n                    args = {\n                        requestType: 'infiniteScroll',\n                        currentPage: this.parent.pageSettings.currentPage,\n                        prevPage: prevPage,\n                        startIndex: startIndex,\n                        direction: 'up'\n                    };\n                    this.makeRequest(args);\n                }\n            }\n            if (this.parent.infiniteScrollSettings.enableCache && !this.isScroll && isNullOrUndefined(args)) {\n                if (this.isDownScroll || this.isUpScroll) {\n                    scrollEle.scrollTop = this.top;\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.makeRequest = function (args) {\n        var _this = this;\n        if (this.parent.pageSettings.currentPage !== args.prevPage) {\n            if (this.parent.pageSettings.currentPage <= this.maxPage) {\n                this.isInfiniteScroll = true;\n                if (isNullOrUndefined(this.infiniteCache[args.currentPage])) {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify('model-changed', args);\n                    }, 100);\n                }\n                else {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify(events.refreshInfiniteModeBlocks, args);\n                    }, 100);\n                }\n            }\n            else {\n                this.parent.pageSettings.currentPage = this.maxPage;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infinitePageQuery = function (query) {\n        if (this.initialRender) {\n            this.initialRender = false;\n            this.intialPageQuery(query);\n        }\n        else {\n            if (!this.isInfiniteScroll && (this.requestType === 'delete' || this.requestType === 'add')) {\n                this.editPageQuery(query);\n            }\n            else {\n                query.page(this.parent.pageSettings.currentPage, this.parent.pageSettings.pageSize);\n            }\n        }\n    };\n    InfiniteScroll.prototype.editPageQuery = function (query) {\n        var initialBlocks = this.parent.infiniteScrollSettings.initialBlocks;\n        var isCache = this.parent.infiniteScrollSettings.enableCache;\n        if (isCache) {\n            this.infiniteCache = {};\n            this.infiniteFrozenCache = {};\n            this.infiniteCurrentViewData = {};\n            query.skip(this.firstIndex);\n            query.take(initialBlocks * this.parent.pageSettings.pageSize);\n        }\n        else {\n            if (this.parent.editSettings.mode === 'Dialog') {\n                this.parent.clearSelection();\n            }\n            var index = this.requestType === 'delete' ? this.lastIndex : this.firstIndex;\n            query.skip(index);\n            query.take(1);\n        }\n    };\n    InfiniteScroll.prototype.intialPageQuery = function (query) {\n        if (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.infiniteScrollSettings.initialBlocks > this.parent.infiniteScrollSettings.maxBlocks) {\n            this.parent.infiniteScrollSettings.initialBlocks = this.parent.infiniteScrollSettings.maxBlocks;\n        }\n        var pageSize = this.parent.pageSettings.pageSize * this.parent.infiniteScrollSettings.initialBlocks;\n        query.page(1, pageSize);\n    };\n    InfiniteScroll.prototype.infiniteCellFocus = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n            var ele = document.activeElement;\n            var rowIndex = parseInt(ele.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            var scrollEle = this.parent.getContent().firstElementChild;\n            this.rowIndex = e.keyArgs.action === 'downArrow' ? rowIndex + 1 : rowIndex - 1;\n            this.cellIndex = parseInt(ele.getAttribute(literals.ariaColIndex), 10);\n            var row = this.parent.getRowByIndex(rowIndex);\n            var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight());\n            if (!row || ensureLastRow(row, this.parent) || ensureFirstRow(row, this.rowTop)) {\n                var height = row ? row.getBoundingClientRect().height : this.parent.getRowHeight();\n                if (!this.parent.infiniteScrollSettings.enableCache) {\n                    if (e.keyArgs.action === 'downArrow' && (ensureLastRow(row, this.parent) || !row)) {\n                        var nTop = (this.rowIndex - visibleRowCount) * height;\n                        var oTop = scrollEle.scrollTop + this.parent.getRowHeight();\n                        scrollEle.scrollTop = nTop < oTop ? oTop : nTop;\n                    }\n                    if (e.keyArgs.action === 'upArrow' && ensureFirstRow(row, this.rowTop)) {\n                        scrollEle.scrollTop = this.rowIndex * height;\n                    }\n                }\n            }\n            else {\n                this.pressedKey = this.empty;\n            }\n        }\n        else if (e.key === 'PageDown' || e.key === 'PageUp') {\n            this.pressedKey = e.key;\n        }\n    };\n    InfiniteScroll.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.getColumns().filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteEditedData = function () {\n        var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n        var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n        var gridForm = this.parent.element.querySelector('.e-gridform');\n        if (this.parent.infiniteScrollSettings.enableCache && (editForm || addForm)) {\n            var rowData = editForm ? extend({}, this.getEditedRowObject().data)\n                : extend({}, this.emptyRowData);\n            this.virtualInfiniteData = this.parent.editModule.getCurrentEditedData(gridForm, rowData);\n            if (this.parent.isFrozenGrid()) {\n                this.virtualInfiniteData = this.parent.editModule\n                    .getCurrentEditedData(this.parent.getMovableVirtualContent().querySelector('.e-gridform'), rowData);\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteEdit = function () {\n        var content = this.parent.getContent().firstElementChild;\n        var frozenEdit = this.parent.frozenRows ? this.editRowIndex >= this.parent.frozenRows : true;\n        if (this.isNormaledit && this.parent.infiniteScrollSettings.enableCache && frozenEdit) {\n            if (this.parent.editSettings.allowEditing && !isNullOrUndefined(this.editRowIndex)) {\n                var row = this.parent.getRowByIndex(this.editRowIndex);\n                if (Object.keys(this.virtualInfiniteData).length && row && !this.parent.getContent().querySelector('.' + literals.editedRow)) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (top_1 < content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteAdd = function () {\n        var content = this.parent.getContent().firstElementChild;\n        if (this.parent.getCurrentViewRecords().length && this.parent.getRowByIndex(0) && this.isNormaledit &&\n            this.parent.infiniteScrollSettings.enableCache && this.isAdd && !content.querySelector('.' + literals.addedRow)) {\n            var isTop = content.scrollTop < this.parent.getRowHeight();\n            if (isTop) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    InfiniteScroll.prototype.appendInfiniteRows = function (e) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        var isMovable = this.parent.getFrozenMode() === literals.leftRight && e.tableName === 'movable';\n        if ((isInfiniteScroll && !e.args.isFrozen && !isMovable) || !isInfiniteScroll) {\n            if (isInfiniteScroll && e.args.direction === 'up') {\n                e.tbody.insertBefore(e.frag, e.tbody.firstElementChild);\n            }\n            else {\n                e.tbody.appendChild(e.frag);\n            }\n        }\n        if (!frozenCols) {\n            this.parent.contentModule.getTable().appendChild(e.tbody);\n            this.updateCurrentViewData();\n        }\n        else {\n            if (isInfiniteScroll) {\n                if (e.tableName === literals.frozenLeft || (this.parent.getFrozenMode() === 'Right' && e.tableName === literals.frozenRight)) {\n                    this.frozenFrag = e.frag;\n                }\n                else if (this.parent.getFrozenMode() === literals.leftRight && e.tableName === 'movable') {\n                    this.movableFrag = e.frag;\n                }\n                else {\n                    var tbody = this.parent.getFrozenVirtualContent().querySelector(literals.tbody);\n                    if (e.args.direction === 'up') {\n                        tbody.insertBefore(this.frozenFrag, tbody.firstElementChild);\n                    }\n                    else {\n                        tbody.appendChild(this.frozenFrag);\n                    }\n                    if (e.tableName === literals.frozenRight) {\n                        this.parent.getMovableVirtualContent().querySelector(literals.tbody).appendChild(this.movableFrag);\n                        this.parent.element.querySelector('.e-frozen-right-content').querySelector(literals.tbody).appendChild(e.frag);\n                    }\n                    else {\n                        this.parent.getMovableVirtualContent().querySelector('.' + literals.table).appendChild(e.tbody);\n                    }\n                    this.parent.contentModule.refreshScrollOffset();\n                    this.updateCurrentViewData();\n                }\n            }\n            else {\n                var table = void 0;\n                if (e.tableName === literals.frozenLeft) {\n                    table = this.parent.getFrozenVirtualContent().querySelector('.' + literals.table);\n                }\n                else if (e.tableName === 'movable') {\n                    table = this.parent.getMovableVirtualContent().querySelector('.' + literals.table);\n                    if (this.parent.getFrozenMode() !== literals.leftRight) {\n                        this.parent.contentModule.refreshScrollOffset();\n                        this.updateCurrentViewData();\n                    }\n                }\n                else {\n                    table = this.parent.element.querySelector('.e-frozen-right-content').querySelector('.' + literals.table);\n                    if (this.parent.getFrozenMode() === literals.leftRight) {\n                        this.parent.contentModule.refreshScrollOffset();\n                        this.updateCurrentViewData();\n                    }\n                }\n                table.appendChild(e.tbody);\n                this.widthService.refreshFrozenScrollbar();\n            }\n        }\n        if (this.isInitialRender && !e.args.isFrozen) {\n            this.isInitialRender = false;\n            this.parent.scrollModule.setHeight();\n        }\n        if (!e.args.isFrozen) {\n            this.rowTop = !this.rowTop ? this.parent.getRows()[0].getBoundingClientRect().top : this.rowTop;\n            if (isInfiniteScroll) {\n                if (this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n                    scrollEle.scrollTop = this.top;\n                }\n                setRowElements(this.parent);\n                this.selectNewRow(e.tbody, e.args.startIndex);\n                this.pressedKey = undefined;\n            }\n            this.restoreInfiniteAdd();\n            this.isScroll = true;\n        }\n        this.isInfiniteScroll = false;\n    };\n    InfiniteScroll.prototype.selectNewRow = function (tbody, startIndex) {\n        var _this = this;\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        if (this.keys.some(function (value) { return value === _this.pressedKey; })) {\n            if (this.pressedKey === 'downArrow' || (this.parent.infiniteScrollSettings.enableCache && this.pressedKey === 'upArrow')) {\n                setTimeout(function () {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var target = row.cells[0];\n                    target.focus({ preventScroll: true });\n                    _this.parent.selectRow(_this.rowIndex);\n                    _this.parent.getContent().firstElementChild.scrollTop += _this.parent.getRowHeight();\n                }, 0);\n            }\n            if (this.pressedKey === 'PageDown') {\n                var row_1 = this.parent.getRowByIndex(startIndex);\n                if (row_1) {\n                    row_1.cells[0].focus();\n                }\n            }\n            if (this.pressedKey === 'PageUp') {\n                tbody.querySelector('.' + literals.row).cells[0].focus();\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeInfiniteCacheRows = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        if (!e.args.isFrozen && isInfiniteScroll && this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n            var rows = [].slice.call(this.parent.getContentTable().getElementsByClassName(literals.row));\n            if (e.args.direction === 'down') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                var addRowCount = this.parent.element.querySelector('.' + literals.addedRow) ? 0 : 1;\n                this.removeTopRows(rows, this.parent.pageSettings.pageSize - addRowCount);\n            }\n            if (e.args.direction === 'up') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                else {\n                    this.removeBottomRows(rows, rows.length - 1, e.args);\n                }\n            }\n            this.isScroll = false;\n            this.top = this.calculateScrollTop(e.args);\n        }\n    };\n    InfiniteScroll.prototype.calculateScrollTop = function (args) {\n        var top = 0;\n        var scrollCnt = this.parent.getContent().firstElementChild;\n        if (args.direction === 'down') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.captionRowHeight();\n            }\n            var captionRows = [].slice.call(this.parent.getContent().firstElementChild.querySelectorAll('tr:not(.e-row)'));\n            var captionCount = 0;\n            if (this.isInitialCollapse && !isNullOrUndefined(captionRows)) {\n                captionCount = Math.round((captionRows.length - 1) / this.parent.groupSettings.columns.length);\n            }\n            var value = captionCount ? captionCount\n                : this.parent.pageSettings.pageSize * (this.parent.infiniteScrollSettings.maxBlocks - 1);\n            var currentViewRowCount = 0;\n            var i = 0;\n            while (currentViewRowCount < scrollCnt.clientHeight) {\n                i++;\n                currentViewRowCount = i * this.parent.getRowHeight();\n            }\n            i = i - 1;\n            top += (value - i) * this.parent.getRowHeight();\n        }\n        if (args.direction === 'up') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.infiniteCache[this.parent.pageSettings.currentPage].length * this.parent.getRowHeight();\n            }\n            else if (this.isInitialCollapse) {\n                var groupedData = this.infiniteCache[this.parent.pageSettings.currentPage];\n                var count = 0;\n                for (var i = 0; i < groupedData.length; i++) {\n                    if (groupedData[i].isCaptionRow) {\n                        count++;\n                    }\n                }\n                top += Math.round(count / this.parent.groupSettings.columns.length) * this.parent.getRowHeight();\n            }\n            else {\n                top += (this.parent.pageSettings.pageSize * this.parent.getRowHeight() + getScrollBarWidth());\n            }\n        }\n        return top;\n    };\n    InfiniteScroll.prototype.captionRowHeight = function () {\n        var rows = [].slice.call(this.parent.getContent().querySelectorAll('tr:not(.e-row)'));\n        return rows.length * this.parent.getRowHeight();\n    };\n    InfiniteScroll.prototype.removeTopRows = function (rows, maxIndx) {\n        var frozeCols = this.parent.isFrozenGrid();\n        var frRows = this.parent.getFrozenMode() === literals.leftRight\n            ? [].slice.call(this.parent.element.querySelector('.e-frozen-right-content').getElementsByClassName(literals.row)) : null;\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().getElementsByClassName(literals.row)) : null;\n        for (var i = 0; i <= maxIndx; i++) {\n            if (this.parent.frozenRows && this.parent.pageSettings.currentPage === this.parent.infiniteScrollSettings.maxBlocks + 1\n                && i > (maxIndx - this.parent.frozenRows)) {\n                continue;\n            }\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n            if (frRows) {\n                remove(frRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeBottomRows = function (rows, maxIndx, args) {\n        var cnt = 0;\n        var frozeCols = this.parent.isFrozenGrid();\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().getElementsByClassName(literals.row)) : null;\n        var frRows = this.parent.getFrozenMode() === literals.leftRight ?\n            [].slice.call(this.parent.element.querySelector('.e-frozen-right-content').getElementsByClassName(literals.row)) : null;\n        var pageSize = this.parent.pageSettings.pageSize;\n        if (!frozeCols && this.infiniteCache[args.prevPage].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteCache[args.prevPage].length;\n        }\n        if (frozeCols && this.infiniteFrozenCache[args.prevPage][1].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteFrozenCache[args.prevPage][1].length;\n        }\n        for (var i = maxIndx; cnt < pageSize; i--) {\n            cnt++;\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n            if (frRows) {\n                remove(frRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeCaptionRows = function (rows, args) {\n        if (args.direction === 'down') {\n            var lastRow = this.parent.getRows()[this.parent.pageSettings.pageSize];\n            var lastRowIndex = parseInt(lastRow.getAttribute(literals.ariaRowIndex), 10) - 1;\n            var k = 0;\n            for (var i = 0; k < lastRowIndex; i++) {\n                if (!rows[i].classList.contains(literals.row)) {\n                    remove(rows[i]);\n                }\n                else {\n                    k = parseInt(rows[i].getAttribute(literals.ariaRowIndex), 10);\n                }\n            }\n        }\n        if (args.direction === 'up') {\n            var rowElements = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n            var lastIndex = parseInt(rowElements[rowElements.length - 1].getAttribute(literals.ariaRowIndex), 10);\n            var page = Math.ceil(lastIndex / this.parent.pageSettings.pageSize);\n            var startIndex = 0;\n            for (var i = this.parent.pageSettings.currentPage + 1; i < page; i++) {\n                startIndex += this.infiniteCache[i].length;\n            }\n            for (var i = startIndex; i < rows.length; i++) {\n                remove(rows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteBlocks = function (args, isDataModified) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && args.requestType !== 'infiniteScroll';\n        if (!this.initialRender && !isNullOrUndefined(this.parent.infiniteScrollModule) && isInfiniteScroll) {\n            if (this.actions.some(function (value) { return value === args.requestType; }) || isDataModified) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                this.initialRender = true;\n                scrollEle.scrollTop = 0;\n                this.parent.pageSettings.currentPage = 1;\n                this.infiniteCache = this.infiniteFrozenCache = {};\n                this.infiniteCurrentViewData = {};\n                this.resetContentModuleCache({});\n                this.isRemove = false;\n                this.top = 0;\n                this.isInitialMovableRender = true;\n                this.isInitialCollapse = false;\n                this.parent.contentModule.isRemove = this.isRemove;\n                this.parent.contentModule.isAddRows = this.isRemove;\n                this.parent.contentModule.visibleRows = [];\n                this.parent.contentModule.visibleFrozenRows = [];\n            }\n        }\n    };\n    InfiniteScroll.prototype.setCache = function (e) {\n        if (this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache) {\n            var frozeCols = this.parent.isFrozenGrid();\n            var idx = e.args.isFrozen ? 1 : 0;\n            var isEdit = e.args.requestType !== 'infiniteScroll'\n                && (this.requestType === 'delete' || this.requestType === 'add');\n            var currentPage = this.parent.pageSettings.currentPage;\n            if ((frozeCols && this.isInitialMovableRender) || (!frozeCols && !Object.keys(this.infiniteCache).length) || isEdit) {\n                this.isInitialMovableRender = !e.args.isFrozen;\n                this.setInitialCache(e.modelData, e.args, isEdit);\n            }\n            if (!frozeCols && isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.infiniteCache[this.parent.pageSettings.currentPage] = e.modelData;\n                this.resetContentModuleCache(this.infiniteCache);\n            }\n            if (frozeCols) {\n                if ((idx === 0 && isNullOrUndefined(this.infiniteFrozenCache[currentPage]))\n                    || !this.infiniteFrozenCache[currentPage][idx].length) {\n                    this.createFrozenCache(currentPage);\n                    this.infiniteFrozenCache[currentPage][idx] = e.modelData;\n                    if (idx === 1) {\n                        this.resetContentModuleCache(this.infiniteFrozenCache);\n                    }\n                }\n            }\n            if (e.isInfiniteScroll && !this.isRemove) {\n                this.isRemove = (currentPage - 1) % this.parent.infiniteScrollSettings.maxBlocks === 0;\n                this.parent.contentModule.isRemove = this.isRemove;\n            }\n        }\n    };\n    InfiniteScroll.prototype.setInitialCache = function (data, args, isEdit, isCurrentViewData) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var idx = args.isFrozen ? 1 : 0;\n        var k = !isEdit ? 1 : this.firstBlock;\n        for (var i = 1; i <= this.parent.infiniteScrollSettings.initialBlocks; i++) {\n            var startIndex = (i - 1) * this.parent.pageSettings.pageSize;\n            var endIndex = i * this.parent.pageSettings.pageSize;\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !isCurrentViewData) {\n                this.setInitialGroupCache(data, k, startIndex, endIndex);\n            }\n            else {\n                if (isCurrentViewData) {\n                    this.infiniteCurrentViewData[k] = data.slice(startIndex, endIndex);\n                }\n                else {\n                    if (frozenCols) {\n                        this.createFrozenCache(k);\n                        this.infiniteFrozenCache[k][idx] = data.slice(startIndex, endIndex);\n                        this.resetContentModuleCache(this.infiniteFrozenCache);\n                    }\n                    else {\n                        this.infiniteCache[k] = data.slice(startIndex, endIndex);\n                        this.resetContentModuleCache(this.infiniteCache);\n                    }\n                }\n            }\n            k++;\n        }\n    };\n    InfiniteScroll.prototype.createFrozenCache = function (index) {\n        if (!this.infiniteFrozenCache[index]) {\n            this.infiniteFrozenCache[index] = [[], []];\n        }\n    };\n    InfiniteScroll.prototype.setInitialGroupCache = function (data, index, sIndex, eIndex) {\n        var pageData = [];\n        var startIndex = 0;\n        for (var i = 1; i <= Object.keys(this.infiniteCache).length; i++) {\n            startIndex += this.infiniteCache[i].length;\n        }\n        var k = sIndex;\n        for (var i = startIndex; i < data.length && k < eIndex; i++) {\n            if (data[i].index < eIndex || data[i].isCaptionRow) {\n                k = data[i].isCaptionRow ? k : data[i].index;\n                pageData.push(data[i]);\n            }\n            if (data[i].index >= eIndex || data[i].index === eIndex - 1) {\n                break;\n            }\n        }\n        this.infiniteCache[index] = pageData;\n        this.resetContentModuleCache(this.infiniteCache);\n    };\n    InfiniteScroll.prototype.resetContentModuleCache = function (data) {\n        this.parent.contentModule\n            .infiniteCache = data;\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    InfiniteScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return InfiniteScroll;\n}());\nexport { InfiniteScroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete'];\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = this.getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                }\n            }\n        }\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = this.getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.getGroupKeysAndFields = function (index, rowsObject) {\n        var fields = [];\n        var keys = [];\n        for (var i = index; i >= 0; i--) {\n            if (rowsObject[i].isCaptionRow && fields.indexOf(rowsObject[i].data.field) === -1\n                && (rowsObject[i].indent < rowsObject[index].indent || i === index)) {\n                fields.push(rowsObject[i].data.field);\n                keys.push(rowsObject[i].data.key);\n                if (rowsObject[i].indent === 0) {\n                    break;\n                }\n            }\n        }\n        return { fields: fields, keys: keys };\n    };\n    GroupLazyLoadRenderer.prototype.generateExpandPredicates = function (fields, values) {\n        var filterCols = [];\n        for (var i = 0; i < fields.length; i++) {\n            var column = this.parent.getColumnByField(fields[i]);\n            var value = values[i] === 'null' ? null : values[i];\n            var pred = {\n                field: fields[i], predicate: 'or', uid: column.uid, operator: 'equal', type: column.type,\n                matchCase: this.allowCaseSensitive, ignoreAccent: this.ignoreAccent\n            };\n            if (value === '' || isNullOrUndefined(value)) {\n                filterCols = filterCols.concat(CheckBoxFilterBase.generateNullValuePredicates(pred));\n            }\n            else {\n                filterCols.push(extend({}, { value: value }, pred));\n            }\n        }\n        return CheckBoxFilterBase.getPredicate(filterCols);\n    };\n    GroupLazyLoadRenderer.prototype.getPredicates = function (pred) {\n        var predicateList = [];\n        for (var _i = 0, _a = Object.keys(pred); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            predicateList.push(pred[prop]);\n        }\n        return predicateList;\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = this.generateExpandPredicates(args.fields, args.keys);\n        var predicateList = this.getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n","import * as events from '../base/constant';\nimport { GroupLazyLoadRenderer } from '../renderer/group-lazy-load-renderer';\nimport { RenderType } from '../base/enum';\n/**\n * Group lazy load class\n */\nvar LazyLoadGroup = /** @class */ (function () {\n    /**\n     * Constructor for Grid group lazy load module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the ServiceLocator\n     * @hidden\n     */\n    function LazyLoadGroup(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    LazyLoadGroup.prototype.getModuleName = function () {\n        return 'lazyLoadGroup';\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    LazyLoadGroup.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    LazyLoadGroup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    LazyLoadGroup.prototype.instantiateRenderer = function () {\n        if (this.parent.height === 'auto') {\n            this.parent.height = this.parent.pageSettings.pageSize * this.parent.getRowHeight();\n        }\n        var renderer = this.serviceLocator.getService('rendererFactory');\n        if (this.parent.groupSettings.enableLazyLoading) {\n            renderer.addRenderer(RenderType.Content, new GroupLazyLoadRenderer(this.parent, this.serviceLocator));\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    LazyLoadGroup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return LazyLoadGroup;\n}());\nexport { LazyLoadGroup };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend } from '@syncfusion/ej2-base';\nimport { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `AutoCompleteEditCell` is used to handle autocomplete cell type editing.\n *\n * @hidden\n */\nvar AutoCompleteEditCell = /** @class */ (function (_super) {\n    __extends(AutoCompleteEditCell, _super);\n    function AutoCompleteEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AutoCompleteEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.object = new AutoComplete(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            // enableRtl: this.parentect.enableRtl,\n            actionComplete: this.selectedValues.bind(this),\n            placeholder: isInlineEdit ? '' : args.column.headerText,\n            floatLabelType: isInlineEdit ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.object.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    AutoCompleteEditCell.prototype.selectedValues = function (valObj) {\n        valObj.result = DataUtil.distinct(valObj.result, this.object.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = valObj.result;\n        }\n    };\n    return AutoCompleteEditCell;\n}(EditCellBase));\nexport { AutoCompleteEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend } from '@syncfusion/ej2-base';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getObject } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `ComboBoxEditCell` is used to handle ComboBoxEdit cell type editing.\n *\n * @hidden\n */\nvar ComboboxEditCell = /** @class */ (function (_super) {\n    __extends(ComboboxEditCell, _super);\n    function ComboboxEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ComboboxEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineMode = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new ComboBox(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.finalValue.bind(this),\n            placeholder: isInlineMode ? '' : args.column.headerText,\n            floatLabelType: isInlineMode ? 'Never' : 'Always',\n            enabled: isEditable(args.column, args.requestType, args.element)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ComboboxEditCell.prototype.finalValue = function (val) {\n        val.result = DataUtil.distinct(val.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = val.result;\n        }\n    };\n    return ComboboxEditCell;\n}(EditCellBase));\nexport { ComboboxEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { getComplexFieldID } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `MultiSelectEditCell` is used to handle multiselect dropdown cell type editing.\n *\n * @hidden\n */\nvar MultiSelectEditCell = /** @class */ (function (_super) {\n    __extends(MultiSelectEditCell, _super);\n    function MultiSelectEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MultiSelectEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MultiSelect(extend({\n            fields: { text: args.column.field, value: args.column.field },\n            value: getValue(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    return MultiSelectEditCell;\n}(EditCellBase));\nexport { MultiSelectEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend } from '@syncfusion/ej2-base';\nimport { TimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getObject } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `TimePickerEditCell` is used to handle Timepicker cell type editing.\n *\n * @hidden\n */\nvar TimePickerEditCell = /** @class */ (function (_super) {\n    __extends(TimePickerEditCell, _super);\n    function TimePickerEditCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimePickerEditCell.prototype.write = function (args) {\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        var rowDataValue = getObject(args.column.field, args.rowData);\n        rowDataValue = rowDataValue ? new Date(rowDataValue) : null;\n        this.obj = new TimePicker(extend({\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            value: rowDataValue,\n            placeholder: isInlineEdit ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.requestType, args.element)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    return TimePickerEditCell;\n}(EditCellBase));\nexport { TimePickerEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Switch } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, createEditElement, getObject } from '../base/util';\nimport * as literals from '../base/string-literals';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `ToggleEditCell` is used to handle boolean cell type editing.\n *\n * @hidden\n */\nvar ToggleEditCell = /** @class */ (function (_super) {\n    __extends(ToggleEditCell, _super);\n    function ToggleEditCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.activeClasses = ['e-selectionbackground', 'e-active'];\n        return _this;\n    }\n    ToggleEditCell.prototype.create = function (args) {\n        var clsNames = 'e-field e-boolcell';\n        if (args.column.type === 'checkbox') {\n            clsNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        return createEditElement(this.parent, args.column, clsNames, { type: 'checkbox', value: args.value });\n    };\n    ToggleEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    ToggleEditCell.prototype.write = function (args) {\n        var chkBoxElement = !isNullOrUndefined(args.row) && args.row.querySelector('.e-edit-checkselect');\n        var data = getObject(args.column.field, args.rowData);\n        var checkState = data && JSON.parse(data.toString().toLowerCase());\n        if (!isNullOrUndefined(chkBoxElement)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                checkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.getElementsByClassName(literals.rowCell)), checkState].concat(this.activeClasses));\n        }\n        this.obj = new Switch(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: checkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.switchModeChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ToggleEditCell.prototype.switchModeChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var addClass = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                addClass = true;\n                this.editRow.setAttribute('aria-selected', addClass.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.getElementsByClassName(literals.rowCell)), addClass].concat(this.activeClasses));\n        }\n    };\n    return ToggleEditCell;\n}(EditCellBase));\nexport { ToggleEditCell };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend } from '@syncfusion/ej2-base';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getObject } from '../base/util';\nimport { EditCellBase } from './edit-cell-base';\n/**\n * `MaskedTextBoxCellEdit` is used to handle masked input cell type editing.\n *\n * @hidden\n */\nvar MaskedTextBoxCellEdit = /** @class */ (function (_super) {\n    __extends(MaskedTextBoxCellEdit, _super);\n    function MaskedTextBoxCellEdit() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MaskedTextBoxCellEdit.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MaskedTextBox(extend({\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            mask: '000-000-0000',\n            enabled: isEditable(args.column, args.requestType, args.element)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    return MaskedTextBoxCellEdit;\n}(EditCellBase));\nexport { MaskedTextBoxCellEdit };\n","import * as index from './index';\nindex.Grid.Inject(index.Filter, index.Page, index.Selection, index.Sort, index.Group, index.Reorder, index.RowDD, index.DetailRow, index.Toolbar, index.Aggregate, index.Search, index.VirtualScroll, index.Edit, index.Resize, index.ExcelExport, index.PdfExport, index.CommandColumn, index.ContextMenu, index.Freeze, index.ColumnMenu, index.ColumnChooser, index.ForeignKey, index.InfiniteScroll, index.LazyLoadGroup);\nexport * from './index';\n"],"names":["setStateAndProperties","target","attribute","value","remove","removeAttribute","setAttribute","getCloneProperties","doesImplementInterface","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","headerValueAccessor","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","isExportColumns","exportProperties","columns","length","updateColumnTypeForExportColumns","gObj","exportColumns","gridColumns","i","j","type","updatecloneRow","grid","nRows","actualRows","vRows","isDataRow","push","isExpand","isCaptionRow","getCollapsedRowsCount","vcRows","val","count","gLen","groupSettings","items","dataRowCnt","agrCnt","indent","len","gLevel","GroupGuid","childLevels","recursive","row","length_1","nLevel","iterateArrayOrObject","collection","predicate","result","pred","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","values","Object","keys","indexOf","setColumnIndex","columnModel","ind","index","prepareColumns","autoWidth","c","Column","toLowerCase","allowReordering","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","isBottomTail","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","popup","offsetWidth","x","getPosition","right","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","context","temp","customAggregate","Array","aggregates","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","literals.table","styles","rect","Math","ceil","height","getActualRowHeight","actualRowHeight","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","literals.row","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","select","editSettings","mode","selectAll","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","isServerRendered","args","fmtr","getService","skeleton","format","isBlazor","getFormatFunction","setParser","getParserFunction","addRemoveActiveClasses","cells","_i","arguments","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","elementVisible","dlgWidth","newpos","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","input","previousSibling","checked","setChecked","createCboxWithWrap","div","removeAddCboxClasses","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Predicate","Date","setSeconds","getSeconds","setHours","predicateSt","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","isRowDragable","mEle","cloneNode","childElementCount","isGroupAdaptive","enableVirtualization","isVirtualAdaptive","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","getExpandedState","hierarchyPrintMode","rows_1","getRowsObject","isDetailRow","allowPaging","printMode","pageSettings","currentPage","pageSize","gridModel","getPrintGridModel","childGrid","printGridModel","isFrozen","isFrozenGrid","getFrozenColumns","_a","Print","printGridProp","getColumns","expandedRows","extendObjWithFn","deep","obj1","getPrototypeOf","concat","getPrototypesOfObj","i_1","source","cpy","cln","isObject","isArray","measureColumnDepth","max","depth","checkDepth","indices","refreshFilteredColsUid","filteredCols","uid_1","enableColumnVirtualization","getColumnModelByFieldName","getColumnByField","getForeignKeyColumns","getTransformValues","replacedTv","defaultView","getComputedStyle","getPropertyValue","parseFloat","applyBiggerTheme","rootElement","alignFrozenEditForm","mTD","fTD","mHeight","closest","fHeight","ensureLastRow","gridObj","cntOffset","getContent","firstElementChild","ensureFirstRow","rowTop","isRowEnteredInGrid","startIndex","scrollTop","getEditedDataIndex","dataIndex","keyField","getPrimaryKeyFieldNames","getCurrentViewRecords","filter","eventPromise","state","getStateEventArgument","def","Deferred","resolve","deffered","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","ispercentageWidth","getVisibleColumns","percentageCol","undefinedWidthCol","isUndefined","Browser","info","name","showGroupedColumn","resetRowIndex","rows","rowElms","isAltRow","enableAltRow","literals.ariaRowIndex","renderModule","emptyRow","resetRowObjectIndex","compareChanges","changes","newArray","dataToBeUpdated","reduce","r","o","assign","map","k","setRowElements","contentModule","rowElements","cls","getFrozenMode","literals.leftRight","freezeRowElements","frozenRightRowElements","splitFrozenRowObjectCells","tableName","getFrozenLeftCount","movable","getMovableColumnsCount","getFrozenRightColumnsCount","frozenMode","drag","rightIndex","mvblIndex","mvblEndIdx","literals.frozenLeft","literals.frozenRight","gridActionHandler","force","rowObj","getGridRowObjects","getMovableRowsObject","getFrozenRightRowsObject","getGridRowElements","getAllDataRows","getAllMovableDataRows","getAllFrozenRightDataRows","sliceElements","start","end","getCellsByTableName","rowIndex","getFreezeTableName","getMovableDataRows","getElementsByClassName","literals.rowCell","getFrozenRightDataRows","getDataRows","getCellByColAndRowIndex","setValidationRuels","rules","mRules","frRules","isCustom","validationRules","getMovableTbody","tbody","frozenRows","newRowPosition","getMovableHeaderTbody","getMovableContentTbody","getFrozenRightTbody","getFrozenRightHeaderTbody","getFrozenRightContentTbody","setRowsInTbody","mTbody","frTbody","tr","mTr","frTr","getNumberFormat","numberFormat","isExcel","getNumberPattern","currency","this","useGrouping","error","mtch_1","G","H","'"," a","yy","EEEE","E","pattern","addBiggerDialog","enableAdaptiveUI","dialogs","performComplexDataOperation","mapObject","returnObj","duplicateMap","setDisplayValue","idx","displayVal","isContent","trs","td","addRemoveEventListener","evt","isOn","module","evt_1","on","event","handler","off","createEditElement","classNames","attr","complexFieldName","e-mappinguid","attrs","getColumnModelByUid","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enableRtl","enabled","requestType","renderFrozenRows","selectedIdx","rowModelGenerator","locator","virtualRenderer","instance","clearSelection","rowRenderer","RowRenderer","generateRows","renderMovableContent","vgenerator","movableCache","renderFrozenRightContent","frozenRightCache","cache","hdr","getHeaderContent","literals.movableHeader","literals.tbody","literals.frozenHeader","render","isSelected","mvblRows","frRows","frzRows","isFrozenRowsRender","splitCells","collectRows","setFreezeSelection","leftKeys","movableKeys","rightKeys","selectFreezeRows","clearAll","set","appendContent","widthService","newChild","refreshFrozenScrollbar","notifyArgs","freezeRowGenerator","arr","getReorderedFrozenRows","firstPageRecords","bIndex","virtualInfo","blockIndexes","colIndex","columnIndexes","page","firstRecordslength","dataManager","splitReorderedRows","splice","isXaxis","currentInfo","sentinelInfo","axis","getHeaderCells","content","getMovableVirtualHeader","getVirtualFreezeHeader","getFrozenVirtualHeader","ensureFrozenCols","setColGroup","colGroup","colgroup","setCache","setDebounce","scrollbar","mCont","debounceEvent","offline","opt","container","pageHeight","getBlockHeight","axes","movableContainer","observer","InterSectionObserver","virtualEle","wrapper","movableWrapper","ValueFormatter","cultureName","culture","getDateFormat","getDateParser","getNumberParser","fromView","toView","setCulture","__decorate","decorators","desc","d","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","options","_this","disableHtmlEncode","allowSorting","allowResizing","allowFiltering","allowGrouping","showColumnMenu","enableGroupByFormat","showInColumnChooser","edit","allowSearching","autoFit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","editType","valueFormatter","toJSON","skip","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","params","fields","text","sortComparer","a_1","xObj","yObj","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","freezeTable","isReact","refreshReactColumnTemplateByUid","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","CommandColumnModel","Property","actionBegin","actionComplete","dataBound","columnDragStart","columnDrag","columnDrop","rowDragStartHelper","rowDragStart","rowDrag","rowDrop","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","reorderComplete","beforeCellFocused","keyPressed","click","destroy","columnVisibilityChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshVirtualBlock","autoCol","updateData","preventBatch","dialogDestroy","addDeleteAction","freezeRender","hierarchyPrint","expandChildGrid","rowPositionChanged","columnsPrepared","cBoxFltrComplete","fltrPrevent","getVirtualData","refreshInfiniteModeBlocks","refreshHandlers","CellType","RenderType","ToolbarItem","ResponsiveDialogAction","ResponsiveToolbarAction","Data","dataState","isPending","resolver","group","foreignKeyDataState","initDataManager","isDestroyed","getModuleName","events.rowsAdded","addRows","events.rowPositionChanged","reorderRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","events.autoCol","refreshFilteredCols","events.columnsPrepared","toIndex","fromIndex","isAngular","isQueryInvokedFromData","generateQuery","skipPage","getQuery","clone","columnQueryMode","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","virtualGroupPageQuery","pageQuery","groupQuery","cols","types","aggregate","queries","enableInfiniteScrolling","pageCount","infiniteScrollModule","notify","enableLazyLoading","lazyLoad","log","moduleName","columnName","isGrpFmt","formatGroupColumn","bind","sortSettings","sortGrp","fn","isRemote","sortByForeignKey","sortBy","fcolumn","sSettings","searchSettings","getSearchColumnFieldNames","predicateList","needForeignKeySearch","fGeneratePredicate","ignoreCase","ignoreAccent","predList","search","skipFoerign","foreignColEmpty","actualFilter","foreignColumn","filterSettings","foreignCols","defaultFltrCols","_b","columns_1","gridColumn","grabColumnByFieldFromAllCols","excelPredicate","CheckBoxFilterBase","getPredicate","_c","_d","prop","_e","foreignCols_1","column_1","grabColumnByUidFromAllCols","_f","_g","fPredicate","predicates","getKey","promise","crud","fromTable","addedRecords","deletedRecords","changedRecords","saveChanges","requiresCount","insert","then","executeQuery","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","pr","update","previousData","original","deff","endEdit","setState","trigger","records","getState","getForeignKeyDataState","setForeignKeyDataState","pvtData","dataArgs","isDataChanged","editArgs_1","cancelEdit","colFieldNames","columns_2","Row","cell","setRowValue","setRowData","setCellValue","pKeyField","makechanges","getDataModule","Cell","isSpanned","isRowSpanned","CellMergeRender","cellArgs","spannedCell","cellRenderer","getCellRenderer","cellType","colSpan","cellSpan","rowSpan","targetCell_1","colSpanLen","colSpanRange","rowSpanRange","spanText","aria-colSpan","rowspan","aria-rowspan","Number","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","item","rowCell","gridHeader","gridContent","gridFooter","headerContent","movableContent","movableHeader","frozenContent","frozenHeader","gridChkBox","editedRow","addedRow","leftRight","frozenRight","frozenLeft","ariaColIndex","ariaRowIndex","isSpan","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","cells_1","isEdit","rowArgs","chekBoxEnable","selIndex","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","this_1","isColumnSelected","DetailExpand","isPrinting","Filter","CommandColumn","requestTypeAction","prevRowCell","detailTemplate","cssClass","lazyLoadCssClass","frozenColumns","scrollHeight","footerTemplate","summarycell","lastSummaryCell","firstSummaryCell","rowindex","dataUID","ariaSelected","classes","class","RowModelGenerator","getInfiniteIndex","generateRow","ensureColumns","generateCell","RowDragIcon","pid","tIndex","parentUid","parentGid","refreshForeignKeyRow","generateCells","foreignKeyColumns","dummies","tmp","rowId","oIndex","isDataCell","isTemplate","rowID","refreshRows","__extends","extendStatics","b","setPrototypeOf","__proto__","p","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","apply","getIndentCount","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","sColumn","scolumn","dummy","summaryRows","single","setTemplate","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","isInfiniteScroll","getGroupedRecords","isCollapseStateEnabled","ensureRowVisibility","parentid","childId","isRenderCaption","prevKey","generateDataRows","captionRow","generateCaptionRow","rowCnt","aggregatesCount","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","parentID","childID","childGid","gSummary","getForeignKeyData","fkValue","unshift","cRow","childRow","ContentRender","freezeRows","movableRows","prevCurrentView","isLoaded","viewColIndexes","drop","events.columnDrop","droppedElement","infiniteCache","isRemove","visibleRows","visibleFrozenRows","rightFreezeRows","isAddRows","isInfiniteFreeze","useGroupCache","mutableData","rafCallback","arg","mContentRows","getMovableVirtualContent","fContentRows","getFrozenVirtualContent","mHdr","fHdr","ariaService","setBusy","getPanel","literals.content","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","cancel","events.actionComplete","hideSpinner","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","events.refreshInfiniteModeBlocks","refreshContentRows","events.beforeCellFocused","droppableDestroy","byKey","keyArgs","pressedKey","renderPanel","literals.gridContent","setOptions","busy","setPanel","innerDiv","renderTable","contentDiv","virtualTable","virtualTrack","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","cellspacing","getHeaderTable","literals.colGroup","getColGroup","currentViewData","currentMovableRows","frag","createDocumentFragment","initialPageRecords","hdrTbody","trElement","hdrfrag","tbdy","fCont","literals.frozenContent","literals.movableContent","cont","emptyVcRows","modelData","checkCache","setGroupCache","setTbody","getTbody","isFrozenLeft","registeredTemplate","templatetoclear","rootNodes","parentNode","destroyTemplate","renderTemplates","blockLoad","offsets","offsets_1","vGroupOffsets","bSize","m","round","contentPanel","rowObject","isVFFrozenOnly","mhdrData","virtualFrozenHdrRefresh","setRowsInLazyGroup","setInfiniteVisibleRows","rowTemplateID","isHeader","getRowTemplate","tagName","lastElementChild","isTR","nodeName","isVFreorder","ensureFrozenHeaderRender","ensureVirtualFrozenHeaderRender","events.expandChildGrid","colcount","splitRows","getFrozenHeader","parentTable","setIsFrozen","isVFTable","updateBlazorTemplate","frCont","renderNextFrozentPart","maintainRows","infiniteScrollSettings","enableCache","frozenCols","getGroupCache","initialGroupRows","getCurrentBlockInfiniteRecords","isFreeze","getRows","parseInt","getAttribute","last","getReorderedVFRows","getReorderedRows","fhdrData","getInfiniteRows","getInfiniteMovableRows","infiniteCacheRows","panel","contentTable","infiniteRows","getMovableRows","getRowElements","getMovableRowElements","fRows","mRows","rowLen","cellLen","rightRows","rightLen","testRow","needFullRefresh","infiniteData","infiniteRowVisibility","contentrows","clen","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","getFrozenLeftColumnsCount","colG","childNodes","infiniteFreezeData","mTable","infiniteMovableData","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","getHeaderColGroup","replaceChild","literals.gridHeader","droppable","Droppable","accept","canSkip","renderEmpty","setSelection","getRowByIndex","getInfiniteRowIndex","firstRowIndex","getVirtualRowIndex","getMovableRowByIndex","enable","setRowObjects","immutableModeRendering","oldKeys","newKeys","newRowObjs","oldIndexes","oldRowObjs","batchChangeKeys","getBatchEditedRecords","newIndexes","hasBatch","oldRowElements","prevLen","currentLen","oldIndex","refreshImmutableContent","isEqual","objectEqualityChecker","old","next","getTime","primaryKey","getBatchChanges","isDirty","updateCellIndex","rowEle","HeaderRender","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","draggable","currentStateTarget","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","lockColumn","getColumnIndexByField","lineHeight","dragStart","events.columnDragStart","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","events.columnPositionChanged","colPosRefresh","events.initialEnd","renderCustomToolbar","rowRenderingMode","updateCustomResponsiveToolbar","isRendered","literals.headerContent","toggleStackClass","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","createHeader","tableEle","tblName","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","len_1","updateColGroup","colHeader","Header","headerRow","colDepth","colFreezeMode","pop","shift","freeze","len_2","HeaderIndent","DetailHeader","RowDragHIcon","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","lastCol","isLockColumn","isFrozenLockColumn","scrollLeft","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","isFrozenStack","ensureStackedFrozen","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","inViewIndexes","isTrue","lockColsCount","getFrozenColSpan","normalizedfrzCols","mTblColGrp","refreshUI","freezeReorder","firstChild","insertBefore","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","cnt","showDropArea","Draggable","dragTarget","distance","abort","toolbar","toolbarItems","toolbarLeft","toolbarItem","button","Button","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","resToolbar","CellRenderer","localizer","formatter","tabindex","rowChkBox","getGui","isNaN","evaluate","fData","isReactCompiler","literals_1","dummyData","templateID","str","invokeFormatter","refreshCell","refreshTD","cellIndex","parentRow","newTD","cloneAttributes","elements_1","innerHtml","displayAsCheckBox","localeStr","getConstant","fromFormatter","appendHtml","literals.gridChkBox","persistSelection","checkWrap","createCheckBox","label","setAttributes","property","buildAttributeFromCell","data-cell","clipMode","isCheckBoxType","colindex","literals.ariaColIndex","AriaService","props","config","setExpand","expand","setSort","sort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","rowcount","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","hValueAccer","ariaAttr","innerDIV","checkAllWrap","matchFlColumns","extendPrepareHeader","headerTempID","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","tempID","isVue","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","RowDragDropRenderer","nodeElement","RowDragDropHeaderRenderer","Render","emptyGrid","counter","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","scrollModule","setWidth","setHeight","setPadding","refreshDataManager","events.actionBegin","dataLength","totalRecordsCount","prevPageMoving","pagerModule","pagerObj","resetTemplates","detailTemplateID","blazorTemplates","resetBlazorTemplate","toolbarTemplate","refreshComplete","showSpinner","isFActon","isNeedForeignAction","getFData","deffered_1","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","spanCount","colspan","events.onEmpty","dynamicColumnChange","updateColumnType","record","isColTypeDef","isServerDateMap","printModule","isPrintGrid","actionArgs","isInfiniteDelete","isInfiniteEnd","agg","dataBind","updatesOnInitialRender","isInitialLoad","events.dataReady","enableImmutableMode","alert","setRowCount","dataRowCount","buildColumns","isAutoGen","iterateComplexColumns","complexCols","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","Promise","group0","groupN","addWhere","groups","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","l","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ResponsiveDialogRenderer","sortedCols","sortPredicate","isCustomDialog","evtHandlers","closeCustomDialog","refreshCustomFilterOkBtn","renderResponsiveContextMenu","renderCustomFilterDiv","customExFilterClose","refreshCustomFilterClearBtn","onActionCompleteFn","editComplate","isCustomDlgRender","header","customResponsiveDlg","title","closeBtn","filterModule","closeDialog","saveBtn","disabled","backBtn","localeObj","customExcelFilterParent","isFilter","isOpen","filterClearBtn","isFiltered","getHeaderTitle","renderResponsiveContent","filterParent","customColumnDiv","sortBtnParent","isSort","cDiv","getSortedFieldsAndDirections","sortButtonClickHandler","divIcon","iconSpan","EventHandler","customFilterColumnClickHandler","allowMultiSorting","isSortApplied","resetSortButtons","txt","textContent","setSortedCols","buttons","getCurrentSortedFields","isRowResponsive","showResponsiveDialog","colDiv","isDialogClose","clearCustomFilter","removeCustomDlgFilterEle","renderCustomFilterDialog","filteredCol","renderResponsiveDialog","setFilterModel","openDialog","createOptions","show","maxHeight","setTopToChildDialog","dialogEle","child","top_1","outerDiv","customFilterDlg","getDialogOptions","isCustomFilter","Dialog","isModal","showCloseIcon","closeOnEscape","locale","adaptiveDlgTarget","open","dialogOpen","created","dialogCreated","close","beforeDialogClose","animationSettings","effect","renderResponsiveHeader","sortField","closeResponsiveDialog","closeCustomFilter","keyHandler","sortColumn","clearSorting","primaryKeyValue","isAdd","getDialogName","getButtonText","titleDiv","dialogHdrBtnClickHandler","id_1","clearBtn","clearFiltering","filterClear","applyCustomFilter","mainfilterdiv","destroyCustomFilterDialog","getElementById","customEle","keyCode","removeEventListener","ServiceLocator","services","register","registerAdaptiveService","isAdaptiveUI","responsiveDialogRenderer","RendererFactory","rendererMap","rName","ColumnWidthService","totalColumnsWidth","setColumnWidth","getTableWidth","setMinwidthBycalculation","tWidth","difference","tmWidth","collection_1","minWidth","isWidthUndefined","setUndefinedColumnWidth","cWidth","getWidth","tgridWidth","setWidthToTable","clear","toFixed","headerCol","getContentTable","fWidth","formatUnit","isDraggable","freezeLeft","freezeRight","movableCount","isColFrozen","frHdr","getFrozenRightHeader","getColumnLevelFrozenColgroup","contentCol","editTableCol","isDrag","frzMode","frozenScrollbar","movableScrollbar","frozencontent","frozenWidth","movableWidth","frozenRightScrollbar","frozenRightWidth","placeHolder","getSiblingsHeight","getHeightFromDirection","sibling","literals.gridFooter","isWidUndefCount","maxWidth","calcMovableOrFreezeColWidth","tableType","setWidthToFrozenRightTable","freezeWidth","isAutoResize","headerTbl","cntTbl","setWidthToFrozenLeftTable","setWidthToMovableTable","isColUndefined","isWidthAuto","setWidthToFrozenEditTable","setWidthToMovableEditTable","resizeSettings","FocusStrategy","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","refMatrix","refreshMatrix","actions","isVirtualScroll","rowModelGen","focusCheck","onFocus","isDevice","setActive","enableHeaderFocus","editModule","matrix","generate","get","validator","focus","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","isFrozenRight","clearOutline","beforeArgs","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","activeKey","bValue","outline","swapInfo","jump","toHeader","toFrozen","toFrozenRight","getNextCurrent","active","setActiveByKey","lastIdxCell","clearIndicator","preventDefault","th","activeElement","filterCell","lastIndexOf","focusVirtualElement","virtualData","isCancel","event.getVirtualData","isKeyFocus","selectedRowIndex","empty","preventScroll","getFocusedElement","fContent","frContent","fHeader","frHeader","setFocusedElement","setTimeout","addFocus","addOutline","focusHeader","resetFocus","focusContent","isFocused","isJump","getInfo","focusedColumnUid","getColumnByIndex","FixedContentFocus","FixedRightContentFocus","ContentFocus","FixedHeaderFocus","FixedRightHeaderFocus","HeaderFocus","cFocus","updateRow","isRowTemplate","newMovableRows","newFrozenRows","newfrRows","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","filterfocus","restoreFocusWithAction","event.onEmpty","internalCellFocus","getPrevIndexes","forgetPrevious","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","emptyTable","inValid","vector","moveTo","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","editNextRow","allowNextRowEdit","isLastCellPrimaryKey","visibleIndex","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","nextRowFocusValidate","lastIndex","previousRowFocusValidate","firstIndex","frozenSwap","frSwap","enterFrozen","isHeaderFocus","previous","optionals","defaultLen","rIndex","cIndex","isData","isSelectable","isCellWidth","getGridSeletion","allowSelection","allowColumnSelection","isLastCell","lastRow","headerSwap","fMatrix","focusModule","current1","current2","hMatrix","current3","SearchBox","searchBox","searchFocus","searchBlur","wireEvent","unWireEvent","headerMat","PageSettings","ColumnChooserSettings","__assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","selectedColumnsIndexes","checkBoxState","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","clearRowCheck","selectRowCheck","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","deSelectedData","needColumnSelection","isCancelDeSelect","isPreventCellSelect","disableUI","isPersisted","cmdKeyPressed","cellselected","isMultiSelection","isAddRowsToSelection","initialRowSelection","isPrevRowSelection","autoFillRLselection","right_bottom","bottom_left","top_right","top_left","top_bottom","top_right_bottom","top_bottom_left","top_right_left","right_bottom_left","all_border","factory","wireEvents","initializeSelection","onActionBegin","fDataUpdate","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","unWireEvents","mouseDownHandler","isEditing","formObj","validate","isPersistSelection","getSelectedMovableRow","getSelectedFrozenRightRow","getFrozenRightContent","getFrozenRightRowByIndex","getCurrentBatchRecordChanges","currentRecords","selectRow","isToggle","enableSimpleMultiRowSelection","addRowsToSelection","selectData","selectedRow","selectedMovableRow","selectedFrozenRightRow","selectedIndex","isAvailable","frozenData","getRowObjectByIndex","getRowObjectFromUID","getSelectedRecords","clearRowSelection","isRowType","isRowSelected","hasAttribute","activeTarget","rowSelectingCallBack","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","actualTarget","isInteracted","isHeaderCheckboxClicked","addMovableArgs","isRemoved","can","disableInteracted","toggle","removed","checkboxMode","clearSelectedRow","selectRowCallBack","clearRow","updateRowSelection","selectMovableRow","selectRowIndex","isHeaderCheckBoxClicked","updateRowProps","targetObj","mRow","frRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedRows","selectedData","currentRow","isJsComponent","prevRow","selectRowFn","rightEle","rowIndexes_1","checkboxOnly","checkboxColumn","rowIndexes_2","isUnSelected","enableToggle","rowDeselect","addRemoveClassesForRow","isHybrid","reverse","clearRowCallBack","selectedEle","updatePersistCollection","updateCheckBoxes","chkState","ensureCheckboxFieldSelection","pKey_1","updatePersistDelete","pKey","chkBox","nextElementSibling","checkedTarget","setCheckAllState","contextMenuModule","mouseButton","clearCellSelection","clearColumnSelection","row_1","mRow_1","fRightRow_1","rowIndex_1","foreignKeyData_1","target_1","getFrozenRightRows","isRowClicked","checkSelectAllClicked","getCheckAllStatus","updatePersistSelectedData","movableRow","rowDeselectCallBack","frozenRightRow","isSingleDeSel","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","prevCIdxs","successCallBack","previousRowCell","prevECIdxs","getCellIndex","cellSelectingArgs","clearCell","updateCellSelection","currentCell","selectedRowCellIndex","updateCellProps","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","cellSelectedArgs","isDragged","selectCells","rowCellIndexes","cellSelectArgs","previousRowCellIndex","addRowCellIndex","addCellsToSelection","hideAutoFill","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","cLen","bdrElement","showHideBorders","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","startAFCell","startCell","endAFCell","selectLikeExcel","startDIndex","isAutoFillSel","showAFBorders","selectLikeAutoFill","startDCellIndex","drawBorders","createBorders","positionBorders","isLastRow","isFirstRow","isFirstCell","setBorders","border","bdrStr","stOff","endOff","parentOff","offsetParent","topOffSet","leftOffset","rightOffset","selectDirection","updateStartEndCells","getMovableContent","mcBdrElement","frcBdrElement","fhBdrElement","headerModule","getMovableHeader","mhBdrElement","frhBdrElement","applyBorders","applyBothFrozenBorders","borderWidth","includes","drawAFBorders","bdrAFBottom","createAFBorders","positionAFBorders","bdrAFLeft","firstCellTop","firstCellLeft","parentRect","sTop","sLeft","offsetTop","totalHeight","totalWidth","floor","scrolloffSet","bdrAFRight","bdrAFTop","leftRemove","topRemove","hideAFBorders","updateValue","createBeforeAutoFill","updateCell","getAutoFillCells","startCellIdx","isApply","startrowIdx","endrowIdx","endCellIdx","colLen","cellIdx","endCell","startCellIndex","trIdx","mouseUpHandler","mUPTarget","updateAutoFillPosition","lastCell","updateStartCellsIndex","autofill","enableAutoFill","rindex","isFrozenCol","isFrozenRow","clientRect","colWidth","literals.editedRow","allowRowDragAndDrop","enableDrag","isUpdate","postion","clearSelAfterRefresh","events.inBoundModelChanged","onPropertyChanged","onCellFocused","refreshHeader","actionBeginFunction","actionCompleteFunction","addEventListener_checkbox","removeEventListener_checkbox","isMacOS","userAgent","keyDownHandler","keyUpHandler","beforeFragAppend","getCheckAllBox","initPerisistSelection","prevColIndex","checkBoxSelectionChanged","isLeftRightFrozen","gobj","chkField","proxy_1","dataSuccess","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","getSelectedRows","totalRecords","checkSelectAllAction","cRenderer","editForm","checkSelectAll","checkBox","stateStr","triggerChkChangeEvent","checkSelect","literals.addedRow","rowCellSelectionHandler","moveIntoUncheckCollection","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","indeterminate","clickHandler","popUpClickHandler","chkSelect","hoverFrozenRows","showPopup","headerSelectionHandler","headerAction","thLen","selectedIndexes","getSelectedRowCellIndexes","getKeyColIndex","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","stackedHeader","innerColumn","getstackedColumns","applyUpDown","selectColumn","selectColumnsByRange","innerColumnIndexes","detailIndentCell","dragdropIndentCell","selectedCol","getColumnHeaderByUid","isColSelected","isMultiColumns","clearColDependency","headerCell","previousColumnIndex","updateColSelection","selectedArgs","updateColProps","selectColumns","getselectedCols","selectingArgs","selectColumnWithExisting","newCol","clearIndex","deselectedArgs","getFrozenRightColumnHeaderByIndex","getMovableColumnHeaderByIndex","columnDeselect","selectedHeader","getSelectedColumnCells","seletedcells","selectionString","onDataBoundFunction","setCheckAllForEmptyGrid","actionCompleteFunc","actionCompleteHandler","events.click","resizeEndFn","checkAllBox","isInfinitecroll","isSelectedRowIndexUpdating","Search","searchString","events.preventBatch","arg1","refreshSearch","onSearchComplete","cancelBeginEvent","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","changedStateColumns","showHideArgs","currentViewCols","col1","col2","Scroll","previousValues","oneTimeReady","uiupdate","toolbarModule","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","padding","removePadding","hDiv","footerDiv","getFooterContent","setScrollLeft","onFrozenContentScroll","isPreventScrollEvent","onContentScroll","scrollTarget","isLeft","isDown","scrollDown","isFooter","onCustomScrollbarScroll","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","mScrollBar","sHeight","css","overflowY","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","pasteHandler","isMacLike","test","platform","metaKey","clipBoardTextArea","x_1","scrollX","y_1","scrollY","scrollTo","paste","isAvail","dataRows","fTr","selectionModule","aria-label","copy","setCopyData","withHeader","getSelection","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","stringify","SortDescriptor","SortSettings","InfiniteScrollSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","ResizeSettings","GroupSettings","EditSettings","Grid","keyA","frozenRightCount","frozenLeftCount","tablesCount","visibleFrozenLeft","visibleFrozenRight","visibleMovable","frozenLeftColumns","frozenRightColumns","movableColumns","media","isFreezeRefresh","tableIndex","componentRefresh","Component","rowUid","pageTemplateChange","mediaBindInstance","commandDelIndex","asyncTimeOut","isExportGrid","enableLogger","needsID","Grid_1","Inject","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","scrollPosition","currentObject","settings","pagerTemplate","persistData","addOnPersist","requiredModules","setFrozenCount","modules","member","allowExcelExport","allowPdfExport","sortedColumns","isDetail","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","isInitial","mediaCol","allowServerDataBinding","ignoreCollectionWatch","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","UnGroupButton","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","AutoFitAll","AutoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","Clear","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","FilterMenuDialogARIA","ExcelFilterDialogARIA","DialogEditARIA","ColumnChooserDialogARIA","ColumnMenuDialogARIA","CustomFilterDialogARIA","SortAtoZ","SortZtoA","SortByOldest","SortByNewest","SortSmallestToLargest","SortLargestToSmallest","Sort","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","ctrlSpace","ctrlLeftArrow","ctrlRightArrow","createSpinner","searchModule","getMediaColumns","checkLockColumns","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","pushMediaColumn","matchMedia","mediaQueryUpdate","mediaColumn","matches","showHider","refreshMediaCol","footerContent","enableHover","removeMediaListener","removeListener","eventInitializer","hasGridChild","unwireEvents","destroyDependentModules","toolTipObj","keyboardModule","enableBoxSelection","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","freezeRefresh","isEllipsisTooltip","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","maintainSelection","updateRTL","ej2_instances","getToolbar","getContextMenu","columnMenuModule","getColumnMenu","showFilterBarOperator","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","deepWatch","gResult","names","scrollRefresh","enableVerticalRendering","fn_1","muteOnChange","refreshFilter","setTablesCount","getTablesCount","headerCells","stdHdrCell","updateColumnModel","updateColumnLevelFrozen","updateFrozenColumns","updateLockableColumns","leftCols","rightCols","movableCols","directFrozenCount","totalFrozenCount","frozenName","frozenCount","isRefresh","inview","vLen","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","getCurrentVisibleColumns","setGridHeaderContent","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getFooterContentTable","getPager","gridPager","setGridPager","getFrozenRowByIndex","getFrozenDataRows","getRowInfo","rowsObject","getFrozenRightRowElements","includeAdd","getFrozenLeftContentTbody","mrows","includAdd","dRows","getAllFrozenDataRows","isRight","pkName","fieldIdx","frIdx","Idx","sRow","columnUid","clearTemplate","rowsObj","rowObjects","getFrozenRightCellFromIndex","getFrozenLeftColumnHeaderByIndex","getColumnHeaderByField","getStackedColumns","getUidByColumnField","rowDropSettings","targetID","getColumnFieldNames","columnNames","getDetailTemplate","getEditHeaderTemplate","editHeaderTemplateFn","getEditFooterTemplate","editFooterTemplateFn","getSelectedColumnsUid","showColumns","hideColumns","getFrozenCount","splitFrozenCount","getVisibleFrozenLeftCount","getVisibleFrozenRightCount","getVisibleMovableCount","getFrozenRightColumns","getFrozenLeftColumns","getMovableColumns","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","getFilterUIInfo","visibleFrozenColumns","goToPage","pageNo","updateExternalMessage","message","isMultiSort","sortModule","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","actualFilterValue","actualOperator","removeFilteredColsByField","isClearFilterBar","print","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","editCell","saveCell","enableToolbarItems","isEnable","enableItems","clipboardModule","recalcIndentWidth","indentWidth","perPixel","parentOffset","applyWidth","newWidth","resetIndentWidth","events.refreshHandlers","reorderColumns","fromFName","toFName","reorderModule","reorderColumnByIndex","reorderColumnByTargetIndex","fromIndexes","rowDragAndDropModule","refreshDataSource","disableRowDD","headerRows","disValue","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","sLen","isFromGroup","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","prevElement","elemNames","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","onKeyPressed","mouseClickHandler","focusOutHandler","dblClickHandler","keyPressHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","tapEvent","dataBoundFunction","isChildGrid","checkEdit","dataRow","ariaOwns","keyPress","editFormValidate","persistedData","getLocalData","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","storedColumns","this_2","localCol","tCol","presskey","stopImmediatePropagation","altKey","collapse","setInjectedModules","injectedModules","refreshColumns","fCnt","frCnt","mTbl","frTbl","colGrp","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","groupExpandAll","expandAll","groupCollapseAll","collapseAll","clearGrouping","ungroupColumn","openColumnChooser","detailCollapseAll","detailRowModule","detailExpandAll","isContextMenuOpen","ensureModuleInjected","getInjectedModules","propertyNames","loggerModule","getPreviousRowData","hideScroll","scrollBar","mvblScrollBar","mvblChild","getRowIndexByPrimaryKey","pKvalue","getFilteredRecords","getUserAgent","Global","timer","clearTimeout","getRowUid","getRowElementByUID","frozenRigtRows","cntRows","rows_2","getHiddenColumns","calculatePageSizeByParentHeight","containerHeight","pagesize","getNoncontentHeight","getSummaryValues","summaryCol","summaryData","serverExcelExport","exportGrid","serverPdfExport","serverCsvExport","include","sorted","setHeaderText","form","gridInput","method","submit","getFormat","updateRowValue","setForeignKeyData","colpending","resetFilterDlgPosition","filterDlg","gClient","fClient","renderReactTemplates","batchUpdate","processRowChanges","batchAsyncUpdate","processBulkRowChanges","loopstring","setNewData","oldValues","bulkRefresh","deleteRowElement","mtr","out_i_1","this_3","this_4","isRowExist","renderRowElement","addRowObject","moveTbody","getHeight","isInteger","getFrozenHeaderTbody","showCustomFilter","showCustomSort","showAdaptiveFilterDialog","showAdaptiveSortDialog","isColVirtualization","gridCols_1","Complex","Event","NotifyPropertyChanges","isAsyncPrint","defered","isContentReady","events.hierarchyPrint","removeColGroup","printGridObj","renderPrintGrid","printWind","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printGrid","viewContainerRef","load","injectedModues","printgrid","detach","overflowX","waitingPop","printGridElement","printWindow","groupCaption","colGroups","contentColGroups","hideColGroup","existingPredicate","foreignKeyQuery","filterState","cBoxTrue","cBoxFalse","keyupHandler","searchHandler","debounce","searchBoxKeyUp","foreignKeyFilter","fColl","mPredicate","filterCollection","fpred","foreignFilter","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","sIcon","getLocalizedLabel","updateDataSource","updateModel","actualPredicate","filteredColumns","allowCaseSensitive","getAndSetChkElem","sBox","hideSearchbox","inputargs","Input","createInput","spinner","cBox","showDialog","columnType","btnClick","buttonModel","isPrimary","renderResponsiveFilter","isResponsiveFilter","getAllData","X","Y","filterTemplateCol","filterItemTemplate","clearFilter","events.fltrPrevent","fltrBtnHandler","check","optr","ddlValue","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","fObj","generateNullValuePredicates","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","foreignQuery","parsed","predicte","addDistinct","filterModel","filterChoiceCount","filterargs","take","filterEvent","processSearch","getPredicateFromCols","isGrid","processDataOperation","filteredColumn","distinct","defObj","allPromise","runArray","colData","all","fullData","args1","f","filterColumn","filteredData","getDistinct","processDataSource","events.cBoxFltrComplete","updateResult","createFilterItems","result_1","updateAllCBoxes","updateIndeterminatenBtn","setFocus","prevElem","cBoxes_1","createCheckbox","btn","btnObj","cBoxes","nullCounter","selectAllValue","isColFiltered","isRndere","args_1","checkbox","getCheckedState","lookup","foreignDataObj","generatePredicate","updateDateFilter","getCaseValue","ExcelFilterBase","customFltrOperators","customFilterOperators","getCMenuDS","number","string","datetime","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","eleOptions","menu","ul","icon","hdrele","colIsSort","isAsc","isDesc","ascName","descName","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","isCMenuOpen","menuObj","focused","submenu","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","isIE","pageYOffset","getCMenuYPosition","optrData","isFilterBack","MouseEvent","contextWidth","targetBorder","filterLength","renderDialogue","mainDiv","dlgDiv","dlgObj","overlayClick","removeDialog","createdDialog","filterBtnClick","rowResponsiveDlg","removeObjects","dropOptr","datePicker","dateTimePicker","actObj","numericTxtObj","renderCustomFilter","dialog","dlgConetntEle","dlgFields","fieldSet","displayName","renderFilterUI","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","renderOperatorUI","elementID","isFirst","fieldElement","xlfloptr","optrDiv","optrInput","dropDatasource","selectedValue","dropSelectedVal","menuText","DropDownList","dropDownOpen","change","dropDownValueChange","getSelectedValue","selectedField","getSelectedText","renderFlValueUI","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","andRadio","RadioButton","orRadio","elementId","valueDiv","isFilteredCol","fltrPredicates","columnObj","getExcelFilterData","valueInput","flValue","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","DatePicker","DateTimePicker","completeAction","NumericTextBox","colObj","AutoComplete","sortOrder","columnvalue","filterType","contentRefresh","isModelChanged","aria","currentTarget","setFullScreenDialog","sortedColumn","getSortedColsIndexByField","sCol","getSortColumnFromField","lastSortedCol","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","sortColumns","refreshSortIcons","refreshing","initiateSort","showPopUp","colUid","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","hasParent","pageRefresh","enableExternalMessage","checkpagesizes","defaultConstants","currentPageInfo","totalItemsInfo","totalItemInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","CurrentPageInfo","TotalItemsInfo","FirstPageTooltip","LastPageTooltip","NextPageTooltip","PreviousPageTooltip","NextPagerTooltip","PreviousPagerTooltip","PagerDropDown","PagerAllDropDown","All","containerModule","pagerMessageModule","isReactTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","setPageSize","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","tempId","getPagerTemplate","isStringTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","isInitialRender","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","renderReactPagerTemplate","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","appendToElement","handlers","complete","updateLayout","inboundChange","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","operatorIconRender","templateWrite","write","fbicon","operators","popupHeight","popupWidth","internalEvent","beforeOpen","customOperators","spanElmt","FlMenuOptrUI","customOptr","renderResponsiveDropDownList","selValue","optrLen","getFlOperator","StringFilterUI","serLocator","getAutoCompleteOptions","foreignColumnQuery","autoComplete","openPopup","getOptrInstance","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","enableCaseSensitivity","NumberFilterUI","keyEventHandler","createEvent","initEvent","dispatchEvent","numberuiObj","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","FilterMenuRenderer","fltrObj","isDialogOpen","isMenuCheck","colTypes","boolean","flMuiObj","menuFilterBase","clearBtnClick","renderDlgContent","argument","writeMethod","menuOperator","instanceofFilterUI","compElement","ui","dlgContentEle","targ","flOptrValue","fltrValue","eControl","iconClass","flIcon","renderCheckBoxMenu","CheckBoxFilter","isresetFocus","checkBoxBase","actionPrevent","ExcelFilter","excelFilterBase","filterByMethod","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","skipNumberInput","skipStringInput","getLocalizedCustomOperators","fltrElem","rowdrag","detail","updateFilterMsg","dropdownlist","filterBarElement","filterObjIndex","getFilteredColsIndexByField","prevFilterObject","arrayVal","currentFilterObject","currentFilteringColumn","keyUpHandlerImmediate","refreshFilterValue","filterMenuClose","docClickHandler","columnMenuFilter","filterIconClickHandler","getOperatorName","checkForSkipInput","filterStatusMsg","applyColumnFormat","predObj","fColumn","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","skipUid","addFilteredClass","updateFilterIcon","refreshFilterSettings","updateFilter","getFilterBarElement","fltrIconElement","forEach","filteredcols","fltrElement","isClose","filterDialogOpen","filterHandler","localizedStrings","fCell","filteredColsUid","currentPred","currentFilterColumn","closeHeaderEle","dropDownListInput","processFilter","openMenuByField","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","operatorSymbols","value_1","stopTimer","startTimer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","skipInput","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","inputId","datepickerEle","hasDialog","popupEle","hasDialogClosed","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","renderCheckboxOnFilterMenu","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","newarray","resizeColumn","footerTable","headerTextClone","contentTextClone","footerTextClone","contentDivTag","columnIndexByField","indentWidthClone","detailsElement","contentText","footerText","wHeader","wContent","wFooter","columnbyindex","colMaxWidth","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","touchResizeStart","callAutoFit","getTargetColumn","resizeStart","refreshColumnWidth","refreshStackedColumnWidth","mtbody","ftbody","frtbody","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","updateResizeEleHeight","getColData","mousemove","setHelperHeight","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","subColumns","cTable","isFrozenColResized","doubleTapEvent","getStackedWidth","headerRows_1","calcPos","fLeft","offset","doc","ownerDocument","nodeType","timeoutHandler","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","bool","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","newIndex","destElement","oldIdx","destIndex","reorderByColumn","preventRefresh","getColParent","srcIdx","toColumnUid","flatColumns","fTh","mTh","fHeaders","reorderSingleColumn","toColumn","reorderMultipleColumns","fromFNames","parent_1","moveTargetColumn","reorderSingleColumnByTarget","reorderMultipleColumnByTarget","fromCol","setDisplay","visibleCols","toCol","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseRight","updateFrozenScrollPosition","cliRectBaseLeft","scrollElem_1","scrollElem","mhdrCliRect","cliRectBase","dropEle","dropCol","fhdrWidth","mhdrRight","RowDD","isOverflowBorder","selectedRowColls","istargetGrid","startedRow","processArgs","dragelement","events.rowDragStartHelper","removeCell","exp","dropCountEle","spanCssEle","events.rowDragStart","dragStartData","dropElem","isDropGrid","dropElement","getElementFromPosition","hoverState","originalEvent","events.rowDrag","moveDragRows","islastRowIndex","lastRowUid","bottomborder","gridcontentEle","getScrollWidth","removeBorder","rowElement","borderRowElement","processDragStop","targetEle","stRow","dropIndex","events.rowDrop","rowOrder","targetRow","deleteCell","initializeDrag","onDataBoundFn","mTarget","frTarget","tbodyMovableHeader","tbodyMovableContent","isLeftRight","tbodyContent","tbodyHeader","refreshVirtualData","refreshData","updateFrozenRowreOrder","tbodyMovH","tbodyMovC","tbodyFrH","tbodyFrC","tbodyC","tbodyH","targetRows","refreshRowTarget","targetIdx","updateFrozenColumnreOrder","recordobj","objIndex","mvbRows","frRightRow","rowsElem","movobj","frObj","movbObject","frRightObject","movbRows","frRightRows","currentVdata","fromIdx","saveChange","changeRecords","draggedRecords","dropIdx","actualIdx","len1","reorderRow","scrollPixel_1","setScrollDown","scrollPixel_2","scrollPixel","targetElement","setBorder","removeFirstRowBorder","removeLastRowBorder","targetRowIndex","gridheaderEle","getTargetIdx","singleRowDrop","srcControl","startedRowIndex","isSingleRowDragDrop","targetIndex","dragIdx","sortRequired","isAppliedGroup","isAppliedUnGroup","reorderingColumns","sender","animateDropper","preventDrop","rearrangeGroup","dragField","dropTarget","grouped","dropField","dragIndex","addColToGroupDrop","addLabel","removeColFromGroupDrop","groupGenerator","dragLabel","dropArea","onGroupAggregates","blazorActionBegin","updateExpand","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","rowIdx","rowNodes","isHide","expandElem","toExpand","updateVirtualRows","captionExpand","captionCollapse","updateVisibleexpandCollapseRows","rObj","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","initializeGHeaderDrop","initializeGHeaderDrag","colName","groupAddSortingQuery","animator","groupedColumn","childDiv","ej-mappingname","showUngroupButton","createSeparator","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","editedData","iterateGroupAggregates","updateSummaryRows","dataUid","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggregateRows","aggr","aggrds","groupedCols","closestParent","DetailRow","refreshColSpan","toogleExpandcollapse","lastrowIdx","isExpanded","nextRow","detailElement","detailRow","data-uid","detailCell","nextSibling","getGridModel","parentPrimaryKeys","parentKeyField","parentRowData","isLegacyTemplate","promiseResolve","gridElem","detailrowIdx","lastrowcell","getTDfromIndex","moduleObj","detailrows","Toolbar","predefinedItems","gridID","preItems","isAdaptive","excludingItems","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","responsiveFilter","responsiveSort","responsiveBack","createToolbar","addReactToolbarPortals","bindSearchEvents","searchElement","refreshToolbarItems","updateSearchBox","toolbarCreated","isNormal","getItems","tool","clicked","toolbarClickHandler","viewStr","ID","portals","renderResponsiveSearch","isRender","refreshResponsiveToolbarItems","isSearch","searchBoxObj","toolbarEle","disableItems","hasData","getItemObject","toolbarItems_1","getItem","itemObject","itemName","items_1","gID","newArgs","toolbarargs","tarElement","reRenderToolbar","removeResponsiveSearch","rowSelectedFunction","rowSelected","rowDeSelectedFunction","FooterRenderer","gridModule","modelGenerator","fDiv","mDiv","frDiv","frozenRightContent","tFoot","frTable","frCol","renderSummaryContent","cStart","cEnd","summaries","fragment","rowrenderer","srow","movableLastCell","borderRight","movableCnt","frozenCnt","frozenDiv","updateFooterTableWidth","onScroll","frozenHeight","movableHeight","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","refreshFooterRenderer","onAggregates","getIndexByKey","ds","isModified","batchChanges","idVal","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","gColumn","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","cFormat","cModel","movableEle","fromWheel","touchMove","up","containerRect","entered","down","movableContainerRect","observe","onEnterCallback","virtualScrollHandler","delay","debounced100","debounced50","prevTop","prevLeft","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","rowCache","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","isBlockAvailable","isMovableBlockAvailable","isFrozenRightBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","addFrozenIndex","refreshColOffsets","blocks","currentFirst","iterateGroup","oRow","VirtualContentRenderer","prevHeight","preStartIndex","preventEvent","tmpOffsets","VirtualElementHandler","offsetKeys","isSelection","isBottom","rndrCount","requestTypes","isNormaledit","emptyRowData","vfColIndex","orderRowObj","mvbOrderRowObj","frOrderRowObj","isSelectionScroll","validationCheck","eventListener","renderWrapper","renderPlaceHolder","adjustTable","blockIndex","colsIndex","recordslength","firstRecords","virtualRows","scrollListener","scrollArgs","scrollAfterEdit","viewInfo","getInfoFromView","prevInfo","restoreEdit","isBlockAdded","tempBlocks","infoType","preEndIndex","getPageFromTop","ensureBlocks","newBlock","every","firstBlock","getBlockSize","setKeyboardNavIndex","blazorDataLoad","blzRowIndex","mIdx","isEndBlock","getGroupedTotalBlocks","getTotalBlocks","colVFtable","checkFirstBlockColIndexes","cBlock","cOffset","getColumnOffset","refreshOffsets","vHeight","translate","getTranslateY","adjustMovableTable","setMovableWrapperWidth","setWrapperWidth","setVirtualHeight","getOffset","focusCell","restoreAdd","ensureSelectedRowPosition","validationScrollLeft","initialRowTop","gridTop","validationCol","isRowInView","editedRowIndex","getVirtualEditedData","editForms","getCurrentEditedData","startAdd","isTop","maxPage","onDataReady","resetScrollPosition","virtualHeightTemp","virtualHeight","setMovableVirtualHeight","total","cHeight","isOnenter","endTranslate","blockHeight","totalBlocks","maxBlock","onEntered","isWheel","maxLeft","isLastBlockRow","transform","remainHeight","translateY","scrollEle","visibleRowCount","refreshVirtualCacheOnRowDD","blockSize","currentblk","secondBlock","thirdBlock","currentBlocks","refreshMaxPage","selectVirtualRow","virtualCellFocus","editActionBegin","addActionBegin","editSuccess","refreshCache","resetIsedit","events.getVirtualData","editCancel","selectRowOnContextOpen","resetVirtualFocus","refreshCells","scrollToEdit","scrollValues","allowScroll","abs","isScroll","updateCurrentViewData","editRequestTypes","dataActionRequestTypes","refreshVirtualElement","addForm","createEmptyRowdata","getRowCollection","getMovableVirtualRowByIndex","getFrozenRightVirtualRowByIndex","isRowObject","startIdx","rowCollection","rem","size","fcntColGrp","mcntColGrp","VirtualHeaderRenderer","gen","setFrozenTable","fhdrColGrp","mhdrColGrp","tablewidth","renderFrozenWrapper","renderFrozenPlaceHolder","renderMovableWrapper","renderMovablePlaceHolder","movablePlaceholder","xValue","yValue","setFreezeWrapperWidth","VirtualScroll","ensurePageSize","createVirtualValidationForm","virtualEditFormValidation","prevData","argsCreator","isCustomFormValidation","virtualFormObj","createFormObj","errorDomRect","forms","contentLeft","tooltip","editIdx","addIdx","existingErrors","setEditedDataToValidationForm","isValid","isRenderer","inputs","InlineEditRender","addNew","isVirtualFrozen","frTbody_1","getEditElement","checkLastRow","renderMovableform","frEle","renderFrozenRightForm","frozenRightForm","renderRightFrozen","movableForm","updateFreezeEdit","getFreezeRow","getFreezeRightRow","tdElement","refreshFreezeEdit","fCls","mTd","frTd","refreshEditForm","updateFrozenCont","updateFrozenRightCont","td_1","editTemplateID","setRules","BatchEditRender","columnObject","newTd","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","createDialogHeader","responsiveDlgRenderer","getDialogEditTemplateElement","allowDragging","dialogClose","dialogEditTemplates","templateName","dialogTemp","tempDiv","checkColumnIsGrouped","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","frForm","cols_1","mTdElement","fTdElement","frTdElement","tArgs","tempData","isInput","EditCellBase","BooleanEditCell","activeClasses","selectChkBox","editRow","checkBoxChange","DropDownEditCell","ddActionComplete","dropdownCreated","dropdownBeforeOpen","dlgElement","NumericEditCell","instances","DefaultEditCell","TextBox","NormalEdit","currentVirtualData","allowEditOnDblClick","editComplete","editRowIndex","getEditArgs","primaryKeys","primaryKeyValues","inlineEditHandler","begineditargs","editargs","applyFormValidation","edFail","validationArgs","addedRowIndex","isDlg","dlgWrapper","dlgForm","mhdrFrm","mCntFrm","mvblEle","frHdrFrm","frCntFrm","eleLength","endEditArgs","destroyElements","destroyWidgets","destroyForm","editHandler","edSucc","editFailure","requestSuccess","stopEditStatus","blazorTemplate","closeForm","cloneRow","originalRow","cloneFrozen","frozen","needRefresh","closeEditArgs","isLazyLoad","inlineAddHandler","addArgs","dataLen","tmpRecord","contained","addElements","editElements","InlineEdit","BatchEdit","cellDetails","originalCell","cloneCell","editNext","preventSaveCell","onBeforeCellFocused","editNextValCell","batchCancelFunction","batchCancel","setCellIdx","isAddRow","validateFormObj","frzRightCols","editCellFromIndex","isAdded","allRows","isInsert","removeBatchElementChanges","refreshRowIdx","isInstertedRemoved","removeHideAndSelection","tdElements","bulkDelete","bulkAddRow","batchSave","replaceWith","removeSelectedData","beforeBatchSaveArgs","removeRowObjectFromUID","rowClone","deleteRowUid","beforeBatchDeleteArgs","uniqueid","out_j_1","dataObjects","getIndexFromData","defaultData","getDefaultData","beforeBatchAddArgs","removeFrozenTbody","renderFrozenAddRow","btmIdx","getBottomIndex","findNextEditableCell","isValOnly","validation","checkNPCell","dValues","editCellExtend","mRowData","getDataByIndex","getCellIdx","cellEditArgs","isColored","newReactTd","setChanges","currentRowObj","movableRowObject","frRowObject","rowcell","escapeCellEdit","generateCellArgs","previousValue","cloneEditedData","isForceSave","cellSaveArgs","isEscapeCellEdit","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","editCellType","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","form1","form2","mFormObj","form3","frFormObj","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","eventDetails","inputElements","col_1","addRow","isRestrict","isDestroyVirtualForm","formObjects","preventObj","mForm","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","outerHTML","isFHdr","resetElemPosition","tdRight","elemRight","offSet","inputName","customForm","gcontent","validationForBottomRowPos","isFHdrLastRow","isBatchModeLastRow","viewPortRowCount","fHeraderRows","inputClient","arrow","rowsHeight","AddEditors","editors","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","showColumn","hideColumn","changedColumns","unchangedColumns","isDlgOpen","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","rtlUpdate","enableAfterRenderEle","hideDialog","onResetColumns","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","beforeOpenColumnChooserEvent","refreshPosition","mOpenDlg","renderChooserList","updateIntermediateBtn","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","changedColumnState","uncheckedLength","ulElement","columnStateChange","resetColumnState","currentCol","stateColumns","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","selectedCbox","columnChooserSettings","nMatchele","checkBoxClickHandler","checkstate","updateSelectAll","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","cclist","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","ExportHelper","hideColumnInclude","getGridRowModel","processColumns","childGridLevel","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","processHeaderCells","generateActualColumns","getConvertedWidth","actualColumns","getCellCount","appendGridCells","gridRows","isIgnoreFirstCell","option","checkAndExport","gridPool","globalResolve","failureHandler","childGridObj","createChildGrid","exportType","exportId","getGridExportColumns","actualGridColumns","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","isServerBlaz","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","sheet","init","toISOString","isExporting","footer","exportValueFormatter","isCsv","hierarchyExportMode","processRecords","exportingSuccess","blobPromise","images","query_1","isCountRequired","processInnerRecords","allPromise_1","groupedColLength","blankRows","isExportPropertiesPresent","multipleExport","worksheets","processExcelHeader","processGridExport","organisedRows","organiseRows","processExcelFooter","enableFilter","autoFilters","lastColumn","Workbook","currencyCode","saveAsBlob","fileName","save","initialIndex","childRows","excelRows","theme","gColumns","groupIndent","processHeaderContent","processRecordContent","returnType","currentViewRecords","excelRow","processRecordRows","processGroupedRows","processAggregates","dataSource_1","cArgs","captionText","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","templateRowHeight","gCell","cellValue","fkData","excelCellArgs","image","base64","excelImage","hyperLink","hyperlink","displayText","hAlign","styleIndex","getColumnStyle","mergeOptions","returnVal","actionFailure","beforeDataBound","childGridCell","excelExportProps","gRow","intent","isHidden","rec","byGroup","summaryModel","aggregateModule","groupSummaryRows","sRows","customIndex","eCell","getAggreateValue","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","aggregateStyle","gridCellStyle","JSON1","JSON2","attrname","spannedCells","currentCellIndex","gridCell","getIndex","getHeaderThemeStyle","excelHeaderCellArgs","parseStyles","getRecordThemeStyle","fontSize","borders","color","bold","updateThemeStyle","themestyle","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","PdfExport","customDataSource","isGrouping","headerOnPages","drawPosition","xPosition","yPosition","pdfDocument","pdfPageSettings","PdfPageSettings","exportWithData","PdfDocument","processExport","headerPageNumbers","gridDrawPosition","pdfGrid","section","sections","processSectionExportProperties","pdfPage","pages","draw","drawHeader","pageOrientation","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","allowHorizontalOverflow","gridTheme","processExportProperties","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","returnValue","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","fontFamily","fontName","getFontFamily","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","g","borderCaption","getBorderStyle","getGridPdfFont","headerSize","headerStyle","PdfFontStyle","PdfTrueTypeFont","fontFamily_1","captionFont","captionSize","captionStyle","fontFamily_2","recordFont","recordSize","recordStyle","fontFamily_3","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","groupSummaryModel","eCols","columnCount","applyTextAndSpan","getHeader","pdfCell","getHorizontalAlignment","getVerticalAlignment","recuHeader","spanCnt","isRoot","cidx","newSpanCnt","clientSize","PointF","fromBottom","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromTop","headerTemplate_1","getPageByIndex","graphics","drawPdfTemplate","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","isGroupedFooter","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","gridRow","getColumn","setRecordThemeStyle","borderRecord","cellLength","textLink","PdfTextWebLink","processCellStyle","gridRow_1","cellPadding","PdfPaddings","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","italic","underline","strikeout","borderColor","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","TimesRoman","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","isVirtualEdit","command","renderButton","buttonOption","buttonObj","commandType","commandClickHandler","commandColumn","commandCols","commandclickargs","commandCol","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","rowInfo","targetRowdata","updateItemStatus","getLocaleText","showItems","closestGrid","parentItem","hideSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","hideItems","eventArgs","ensureFrozenHeader","substr","generateID","CsvExport","export","PrevPage","FreezeRowModelGenerator","FreezeContentRender","batchAdd","refreshScrollOffset","scroll","setHeightToContent","getFrozenContent","scrollbarWidth","setFrozenContent","setMovableContent","renderFrozenRigthPanel","borderRightWidth","renderFrozenRightEmpty","renderFrozenRightTable","renderHorizontalScrollbar","getScrollbarDisplay","frozenDisplay","scrollbarHeight","setScrollbarHeight","appendScrollbar","minHeight","setIdx","refreshTbody","getIdx","FreezeRender","eventHandler","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","renderFrozenRightPanel","refreshFrozenLeftUI","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","filterRenderer","bindInitialEvent","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","contentScrollWidth","contentTableScrollWidth","borderBottom","fRowSpan","mRowSpan","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenColumn","ColumnFreezeHeaderRenderer","refreshFrozenColumns","setReorderElement","destEle","frRowHgt","rightHeight","leftColGrp","rightColGrp","mColGroup","frtbl","frtblColGroup","adjudtFilterBarCell","updateFrozenColGroup","renderLeftWithRightFrozenPanel","renderRightFrozenPanelAlone","flex","renderFrozenRightTableAlone","refreshFrozenRightStackedHdrHgt","updateMovableColGroup","updateFrozenLeftColGroup","updateFrozenRightColGroup","fRightDiv","setFrozenRightHeader","leftColGroup","movableColGroup","rightColumns","rightColGroup","frozenRightHeader","ColumnFreezeContentRenderer","frzCount","isColGroupRefresh","renderFrozenLeftWithRightPanel","renderFrozenRightPanelAlone","renderFrozenLeftWithRightTable","fRightContent","setFrozenRightContent","getFrozenRightHeaderColGroup","oldColGroup","rightTable","renderFrozenRightEmptyRowAlone","renderFrozenLeftWithRightEmptyRow","frozenRigthContent","movableRowElements","frozenRightRows","VirtualFreezeRenderer","serviceLoc","refreshVirtualFrozenRows","virtualHdrRenderer","movableCont","tbl","movableTable","mCol","VirtualFreezeHdrRenderer","ColumnVirtualFreezeRenderer","selectedIdx_1","frozenRightCont","frzCont","renderVirtualFrozenLeft","renderVirtualFrozenRight","renderVirtualFrozenLeftRight","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","openColumnMenuByField","elePos","calculatePosition","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","field_1","colChooser","getFilter","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initForeignKeyColumns","generateQueryFormData","eventfPromise","dataModule","setColumnData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","destroyEvent","BASE_DOC_URL","DOC_URL","WARNING","ERROR","INFO","Logger","patchadaptor","detailLists","cOp","success","console","logType","generateMessage","beforeSend","request","module_missing","injected","promise_enabled","primary_column_missing","selection_key_missing","actionfailure","formatError","formatErrorHandler","ajaxError","ajaxErrorHandler","locale_missing","lObj","limitation","check_datasource_columns","virtual_height","grid_remote_edit","grid_sort_comparer","resize_min_max","action_disabled_column","exporting_begin","exporting_complete","foreign_key_failure","initial_action","frozen_rows_columns","column_type_missing","datasource_syntax_mismatch","dataStateChange","jsonResult","responseText","responseURL","statusText","InfiniteScroll","infiniteCurrentViewData","infiniteFrozenCache","isDownScroll","isUpScroll","enableContinuousScroll","initialRender","isInitialCollapse","prevScrollTop","isInitialMovableRender","virtualInfiniteData","isLastPage","infinitePageQuery","infiniteScrollHandler","infiniteCellFocus","appendInfiniteRows","removeInfiniteCacheRows","resetInfiniteBlocks","ensureIntialCollapse","getVirtualInfiniteData","resetInfiniteEdit","infiniteEditSuccess","refreshInfiniteCache","infiniteEditHandler","infiniteAddActionBegin","refreshInfiniteCurrentViewData","deleteComplate","isCache","maxBlocks","isMiddlePage","initialBlocks","isDelete","setInitialCache","makeRequest","ensureRowAvailability","createRow","isFrozenRows","rowElems","resume","swapCurrentViewData","resetInfiniteCurrentViewData","pageIndex","resetContentModuleCache","getEditedRowObject","editedrow","updateCurrentViewRecords","previousVirtualData","restoreInfiniteEdit","restoreInfiniteAdd","getVirtualInfiniteEditedData","intialPageQuery","editPageQuery","nTop","oTop","gridForm","frozenEdit","frozenFrag","movableFrag","selectNewRow","captionRows","removeCaptionRows","addRowCount","removeTopRows","removeBottomRows","calculateScrollTop","scrollCnt","captionRowHeight","captionCount","currentViewRowCount","groupedData","maxIndx","frozeCols","lastRowIndex","isDataModified","createFrozenCache","isCurrentViewData","setInitialGroupCache","sIndex","eIndex","pageData","GroupLazyLoadRenderer","childCount","scrollData","isFirstChildRow","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","cacheMode","cacheBlockSize","setLazyLoadPageSize","collapseShortcut","oriIndex","getRowObjectIndexByUid","getGroupKeysAndFields","captionRowElement","groupInfo","enableCaching","clearCache","captionRowExpand","captionIndex","clearLazyGroupCache","uids","getInitialCaptionIndexes","capIdx","capRow","getNextChilds","subChild","getChildRowsByParentIndex","refreshCaches","getRowByUid","capEle","getRowElementByUid","resetRowMaintenance","changeCaptionRow","from","to","moveCells","scrollReset","aggUid","getAggregateByCaptionIndex","capUid","lazyLoadHandler","setStartIndexes","setRowIndexes","refreshCaptionRowCount","nxtChild","hasLastChildRow","refreshRowObjects","rowObjectIndex","prevCapRow","prevCaptionCount","rowCount","insertAdjacentElement","confirmRowRendering","cap","newRows","newRowsObject","includeAgg","includeCollapseAgg","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","downTrs","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","findRowElements","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","parentCapRow","capRowObjIdx","capRowEleIndex","childIdx","getCurrentBlockEndIndex","child_1","removeBlock","cachedRowIndex","lastchild","child_2","uid1","uid2","uid3","currenBlock","lastIdx","trEle","scrollUp","generateExpandPredicates","filterCols","getPredicates","oriIdx","idxs","tr_1","showAndHideCells","captionData","isSummary","LazyLoadGroup","AutoCompleteEditCell","isInlineEdit","selectedValues","valObj","ComboboxEditCell","isInlineMode","ComboBox","finalValue","MultiSelectEditCell","MultiSelect","TimePickerEditCell","rowDataValue","TimePicker","ToggleEditCell","clsNames","chkBoxElement","Switch","switchModeChange","MaskedTextBoxCellEdit","MaskedTextBox","mask","index.Grid","index.Filter","index.Page","index.Selection","index.Sort","index.Group","index.Reorder","index.RowDD","index.DetailRow","index.Toolbar","index.Aggregate","index.Search","index.VirtualScroll","index.Edit","index.Resize","index.ExcelExport","index.PdfExport","index.CommandColumn","index.ContextMenu","index.Freeze","index.ColumnMenu","index.ColumnChooser","index.ForeignKey","index.InfiniteScroll","index.LazyLoadGroup"],"mappings":"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"}