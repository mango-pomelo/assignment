{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n *\n * @hidden\n */\n\nvar GroupModelGenerator =\n/** @class */\nfunction (_super) {\n  __extends(GroupModelGenerator, _super);\n\n  function GroupModelGenerator(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.rows = [];\n    /** @hidden */\n\n    _this.index = 0;\n    _this.parent = parent;\n    _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n    return _this;\n  }\n\n  GroupModelGenerator.prototype.generateRows = function (data, args) {\n    if (this.parent.groupSettings.columns.length === 0) {\n      return _super.prototype.generateRows.call(this, data, args);\n    }\n\n    this.isInfiniteScroll = args.requestType === 'infiniteScroll';\n    this.rows = [];\n    this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n    }\n\n    this.index = 0;\n\n    if (this.parent.isCollapseStateEnabled()) {\n      this.ensureRowVisibility();\n    }\n\n    return this.rows;\n  };\n\n  GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex, parentUid) {\n    var _a;\n\n    var isRenderCaption = this.isInfiniteScroll && this.prevKey === data.key;\n    var level = raw;\n\n    if (isNullOrUndefined(data.items)) {\n      if (isNullOrUndefined(data.GroupGuid)) {\n        this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));\n      } else {\n        for (var j = 0, len = data.length; j < len; j++) {\n          this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length, parentUid);\n        }\n      }\n    } else {\n      var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);\n\n      if (!isRenderCaption) {\n        this.rows = this.rows.concat(captionRow);\n      }\n\n      if (data.items && data.items.length) {\n        this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);\n      }\n\n      if (this.parent.aggregates.length) {\n        var rowCnt = this.rows.length;\n\n        (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, {\n          level: level,\n          parentUid: captionRow.uid\n        }));\n\n        for (var i = rowCnt - 1; i >= 0; i--) {\n          if (this.rows[i].isCaptionRow) {\n            this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n          } else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n            break;\n          }\n        }\n      }\n    }\n\n    this.prevKey = data.key;\n  };\n\n  GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n    var cells = [];\n    var visibles = [];\n    var column = this.parent.getColumnByField(field);\n    var indexes = this.parent.getColumnIndexesInView();\n\n    if (this.parent.enableColumnVirtualization) {\n      column = this.parent.columns.filter(function (c) {\n        return c.field === field;\n      })[0];\n    }\n\n    var groupedLen = this.parent.groupSettings.columns.length;\n    var gObj = this.parent;\n\n    if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n      for (var i = 0; i < indent; i++) {\n        cells.push(this.generateIndentCell());\n      }\n\n      cells.push(this.generateCell({}, null, CellType.Expand));\n    }\n\n    indent = this.parent.enableColumnVirtualization ? 1 : this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) - indent + (this.parent.getVisibleColumns().length ? -1 : 0); //Captionsummary cells will be added here.\n\n    if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n      var captionCells = this.captionModelGen.generateRows(data)[0];\n      extend(data, captionCells.data);\n      var cIndex_1 = 0;\n      captionCells.cells.some(function (cell, index) {\n        cIndex_1 = index;\n        return cell.visible && cell.isDataCell;\n      });\n      visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) {\n        return cell.visible;\n      });\n\n      if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n        visibles = visibles.slice(1);\n      }\n\n      if (this.parent.getVisibleColumns().length === 1) {\n        visibles = [];\n      }\n\n      indent = indent - visibles.length;\n    }\n\n    var cols = !this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns();\n    var wFlag = true;\n\n    for (var j = 0; j < cols.length; j++) {\n      var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\n      if (tmpFlag) {\n        wFlag = false;\n      }\n\n      var cellType = !this.parent.enableColumnVirtualization || tmpFlag ? CellType.GroupCaption : CellType.GroupCaptionEmpty;\n      indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n\n      if (gObj.isRowDragable()) {\n        indent++;\n      }\n\n      cells.push(this.generateCell(column, null, cellType, indent));\n    }\n\n    cells.push.apply(cells, visibles);\n    return cells;\n  };\n  /**\n   * @param {GroupedData} data - specifies the data\n   * @param {number} indent - specifies the indent\n   * @param {number} parentID - specifies the parentID\n   * @param {number} childID - specifies the childID\n   * @param {number} tIndex - specifies the TIndex\n   * @param {string} parentUid - specifies the ParentUid\n   * @returns {Row<Column>} returns the Row object\n   * @hidden\n   */\n\n\n  GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex, parentUid) {\n    var options = {};\n    var records = 'records';\n    var col = this.parent.getColumnByField(data.field);\n    options.data = extend({}, data);\n\n    if (col) {\n      options.data.field = data.field;\n    }\n\n    options.isDataRow = false;\n    options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();\n    options.parentGid = parentID;\n    options.childGid = childID;\n    options.tIndex = tIndex;\n    options.isCaptionRow = true;\n    options.parentUid = parentUid;\n    options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n    options.uid = getUid('grid-row');\n    var row = new Row(options);\n    row.indent = indent;\n    this.getForeignKeyData(row);\n    row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n    return row;\n  };\n\n  GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n    var data = row.data;\n    var col = this.parent.getColumnByField(data.field);\n\n    if (col && col.isForeignColumn && col.isForeignColumn()) {\n      var fkValue = isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col);\n      setValue('foreignKey', fkValue, row.data);\n    }\n  };\n  /**\n   * @param {Object[]} data - specifies the data\n   * @param {number} indent - specifies the indent\n   * @param {number} childID - specifies the childID\n   * @param {number} tIndex - specifies the tIndex\n   * @param {string} parentUid - specifies the ParentUid\n   * @returns {Row<Column>[]} returns the row object\n   * @hidden\n   */\n\n\n  GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex, parentUid) {\n    var rows = [];\n    var indexes = this.parent.getColumnIndexesInView();\n\n    for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n      rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex, parentUid);\n\n      for (var j = 0; j < indent; j++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n          continue;\n        }\n\n        rows[i].cells.unshift(this.generateIndentCell());\n      }\n\n      this.index++;\n    }\n\n    return rows;\n  };\n\n  GroupModelGenerator.prototype.generateIndentCell = function () {\n    return this.generateCell({}, null, CellType.Indent);\n  };\n\n  GroupModelGenerator.prototype.refreshRows = function (input) {\n    var indexes = this.parent.getColumnIndexesInView();\n\n    for (var i = 0; i < input.length; i++) {\n      if (input[i].isDataRow) {\n        input[i].cells = this.generateCells(input[i]);\n\n        for (var j = 0; j < input[i].indent; j++) {\n          if (this.parent.enableColumnVirtualization && indexes.indexOf(input[i].indent) === -1) {\n            continue;\n          }\n\n          input[i].cells.unshift(this.generateIndentCell());\n        }\n      } else {\n        var cRow = this.generateCaptionRow(input[i].data, input[i].indent);\n        input[i].cells = cRow.cells;\n      }\n    }\n\n    return input;\n  };\n\n  GroupModelGenerator.prototype.ensureRowVisibility = function () {\n    for (var i = 0; i < this.rows.length; i++) {\n      var row = this.rows[i];\n\n      if (!row.isCaptionRow) {\n        continue;\n      }\n\n      for (var j = i + 1; j < this.rows.length; j++) {\n        var childRow = this.rows[j];\n\n        if (row.uid === childRow.parentUid) {\n          this.rows[j].visible = row.isExpand;\n        }\n      }\n    }\n  };\n\n  return GroupModelGenerator;\n}(RowModelGenerator);\n\nexport { GroupModelGenerator };","map":{"version":3,"sources":["/Users/zhouzhou/Desktop/lightfront/node_modules/@syncfusion/ej2-grids/src/grid/services/group-model-generator.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Row","isNullOrUndefined","extend","setValue","CellType","RowModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","getForeignData","getUid","GroupModelGenerator","_super","parent","_this","call","rows","index","summaryModelGen","captionModelGen","generateRows","data","args","groupSettings","columns","length","isInfiniteScroll","requestType","enableVirtualization","startIndex","i","len","getGroupedRecords","level","undefined","isCollapseStateEnabled","ensureRowVisibility","raw","parentid","childId","tIndex","parentUid","_a","isRenderCaption","prevKey","key","items","GroupGuid","concat","generateDataRows","j","captionRow","generateCaptionRow","uid","aggregates","rowCnt","push","apply","isCaptionRow","aggregatesCount","isDataRow","getCaptionRowCells","field","indent","cells","visibles","column","getColumnByField","indexes","getColumnIndexesInView","enableColumnVirtualization","filter","c","groupedLen","gObj","indexOf","generateIndentCell","generateCell","Expand","getVisibleColumns","detailTemplate","childGrid","isEmpty","captionCells","cIndex_1","some","cell","visible","isDataCell","slice","cols","getColumns","wFlag","tmpFlag","cellType","GroupCaption","GroupCaptionEmpty","isRowDragable","parentID","childID","options","records","col","isExpand","enableLazyLoading","parentGid","childGid","gSummary","row","getForeignKeyData","isForeignColumn","fkValue","valueAccessor","foreignKeyValue","generateRow","unshift","Indent","refreshRows","input","generateCells","cRow","childRow"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n *\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        /** @hidden */\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.isInfiniteScroll = (args.requestType === 'infiniteScroll');\n        this.rows = [];\n        this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        if (this.parent.isCollapseStateEnabled()) {\n            this.ensureRowVisibility();\n        }\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex, parentUid) {\n        var _a;\n        var isRenderCaption = this.isInfiniteScroll && this.prevKey === data.key;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length, parentUid);\n                }\n            }\n        }\n        else {\n            var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);\n            if (!isRenderCaption) {\n                this.rows = this.rows.concat(captionRow);\n            }\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level, parentUid: captionRow.uid }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.prevKey = data.key;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.\n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        for (var j = 0; j < cols.length; j++) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(this.generateCell(column, null, cellType, indent));\n        }\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    /**\n     * @param {GroupedData} data - specifies the data\n     * @param {number} indent - specifies the indent\n     * @param {number} parentID - specifies the parentID\n     * @param {number} childID - specifies the childID\n     * @param {number} tIndex - specifies the TIndex\n     * @param {string} parentUid - specifies the ParentUid\n     * @returns {Row<Column>} returns the Row object\n     * @hidden\n     */\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex, parentUid) {\n        var options = {};\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.parentUid = parentUid;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    /**\n     * @param {Object[]} data - specifies the data\n     * @param {number} indent - specifies the indent\n     * @param {number} childID - specifies the childID\n     * @param {number} tIndex - specifies the tIndex\n     * @param {string} parentUid - specifies the ParentUid\n     * @returns {Row<Column>[]} returns the row object\n     * @hidden\n     */\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex, parentUid) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex, parentUid);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0; i < input.length; i++) {\n            if (input[i].isDataRow) {\n                input[i].cells = this.generateCells(input[i]);\n                for (var j = 0; j < input[i].indent; j++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(input[i].indent) === -1) {\n                        continue;\n                    }\n                    input[i].cells.unshift(this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = this.generateCaptionRow(input[i].data, input[i].indent);\n                input[i].cells = cRow.cells;\n            }\n        }\n        return input;\n    };\n    GroupModelGenerator.prototype.ensureRowVisibility = function () {\n        for (var i = 0; i < this.rows.length; i++) {\n            var row = this.rows[i];\n            if (!row.isCaptionRow) {\n                continue;\n            }\n            for (var j = i + 1; j < this.rows.length; j++) {\n                var childRow = this.rows[j];\n                if (row.uid === childRow.parentUid) {\n                    this.rows[j].visible = row.isExpand;\n                }\n            }\n        }\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n"]},"metadata":{},"sourceType":"module"}