{"ast":null,"code":"import { Grid, getObject } from '@syncfusion/ej2-grids';\nimport { DetailRow as detailrow } from '@syncfusion/ej2-grids';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { getExpandStatus, isRemoteData } from '../utils';\n/**\n * TreeGrid Detail Row module\n *\n * @hidden\n */\n\nvar DetailRow =\n/** @class */\nfunction () {\n  function DetailRow(parent) {\n    Grid.Inject(detailrow);\n    this.parent = parent;\n    this.addEventListener();\n  }\n  /**\n   * @hidden\n   */\n\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @private\n   * @returns {string} Returns DetailRow module name\n   */\n\n\n  DetailRow.prototype.getModuleName = function () {\n    return 'detailRow';\n  };\n\n  DetailRow.prototype.addEventListener = function () {\n    this.parent.on('dataBoundArg', this.dataBoundArg, this);\n    this.parent.on('detaildataBound', this.detaildataBound, this);\n    this.parent.grid.on('detail-indentcell-info', this.setIndentVisibility, this);\n    this.parent.on('childRowExpand', this.childRowExpand, this);\n    this.parent.on('rowExpandCollapse', this.rowExpandCollapse, this);\n    this.parent.on('actioncomplete', this.actioncomplete, this);\n  };\n  /**\n   * @hidden\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('dataBoundArg', this.dataBoundArg);\n    this.parent.off('detaildataBound', this.detaildataBound);\n    this.parent.off('childRowExpand', this.childRowExpand);\n    this.parent.off('rowExpandCollapse', this.rowExpandCollapse);\n    this.parent.off('actioncomplete', this.actioncomplete);\n    this.parent.grid.off('detail-indentcell-info', this.setIndentVisibility);\n  };\n\n  DetailRow.prototype.setIndentVisibility = function (args) {\n    var visible = 'visible';\n    args[visible] = false;\n  };\n\n  DetailRow.prototype.dataBoundArg = function () {\n    var detailele = this.parent.getRows().filter(function (e) {\n      return !e.classList.contains('e-detailrow');\n    });\n\n    for (var i = 0; i < detailele.length; i++) {\n      var elements = detailele[i].getElementsByClassName('e-detailrowcollapse');\n      var detailData = this.parent.grid.getRowObjectFromUID(detailele[i].getAttribute('data-Uid'));\n      var parentItem = getObject('parentItem', this.parent.grid.getCurrentViewRecords()[i]);\n\n      if (isNullOrUndefined(parentItem) || !isNullOrUndefined(parentItem) && getExpandStatus(this.parent, detailData.data, this.parent.grid.getCurrentViewRecords())) {\n        this.parent.grid.detailRowModule.expand(elements[0]);\n      }\n    }\n  };\n\n  DetailRow.prototype.childRowExpand = function (args) {\n    var detailRowElement = args.row.getElementsByClassName('e-detailrowcollapse');\n\n    if (!isNullOrUndefined(detailRowElement[0])) {\n      this.parent.grid.detailRowModule.expand(detailRowElement[0]);\n    }\n  };\n\n  DetailRow.prototype.rowExpandCollapse = function (args) {\n    if (isRemoteData(this.parent)) {\n      return;\n    }\n\n    for (var i = 0; i < args.detailrows.length; i++) {\n      args.detailrows[i].style.display = args.action;\n    }\n  };\n\n  DetailRow.prototype.detaildataBound = function (args) {\n    var data = args.data;\n    var row = args.detailElement.parentElement.previousSibling;\n    var index = !isNullOrUndefined(data.parentItem) ? data.parentItem.index : data.index;\n    var expandClass = 'e-gridrowindex' + index + 'level' + data.level;\n    var classlist = row.querySelector('.' + expandClass).classList;\n    var gridClas = [].slice.call(classlist).filter(function (gridclass) {\n      return gridclass === expandClass;\n    });\n    var newNo = gridClas[0].length;\n    var slicedclas = gridClas.toString().slice(6, newNo);\n    var detailClass = 'e-griddetail' + slicedclas;\n    addClass([args.detailElement.parentElement], detailClass);\n  };\n\n  DetailRow.prototype.actioncomplete = function (args) {\n    if (args.requestType === 'beginEdit' || args.requestType === 'add') {\n      var spann = args.row.querySelectorAll('.e-editcell')[0].getAttribute('colSpan');\n      var colum = parseInt(spann, 10) - 1;\n      var updtdcolum = colum.toString();\n      args.row.querySelectorAll('.e-editcell')[0].setAttribute('colSpan', updtdcolum);\n    }\n\n    var focusElement = this.parent.grid.contentModule.getRows();\n\n    for (var i = 0; i < focusElement.length; i++) {\n      focusElement[i].cells[0].visible = false;\n    }\n\n    var focusModule = getObject('focusModule', this.parent.grid);\n    var matrix = 'refreshMatrix';\n    focusModule[matrix](true)({\n      rows: this.parent.grid.contentModule.getRows()\n    });\n  };\n  /**\n   * Destroys the DetailModule.\n   *\n   * @function destroy\n   * @returns {void}\n   */\n\n\n  DetailRow.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return DetailRow;\n}();\n\nexport { DetailRow };","map":{"version":3,"sources":["/Users/zhouzhou/Desktop/lightfront/node_modules/@syncfusion/ej2-treegrid/src/treegrid/actions/detail-row.js"],"names":["Grid","getObject","DetailRow","detailrow","isNullOrUndefined","addClass","getExpandStatus","isRemoteData","parent","Inject","addEventListener","prototype","getModuleName","on","dataBoundArg","detaildataBound","grid","setIndentVisibility","childRowExpand","rowExpandCollapse","actioncomplete","removeEventListener","isDestroyed","off","args","visible","detailele","getRows","filter","e","classList","contains","i","length","elements","getElementsByClassName","detailData","getRowObjectFromUID","getAttribute","parentItem","getCurrentViewRecords","data","detailRowModule","expand","detailRowElement","row","detailrows","style","display","action","detailElement","parentElement","previousSibling","index","expandClass","level","classlist","querySelector","gridClas","slice","call","gridclass","newNo","slicedclas","toString","detailClass","requestType","spann","querySelectorAll","colum","parseInt","updtdcolum","setAttribute","focusElement","contentModule","cells","focusModule","matrix","rows","destroy"],"mappings":"AAAA,SAASA,IAAT,EAAeC,SAAf,QAAgC,uBAAhC;AACA,SAASC,SAAS,IAAIC,SAAtB,QAAuC,uBAAvC;AACA,SAASC,iBAAT,EAA4BC,QAA5B,QAA4C,sBAA5C;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,UAA9C;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIL,SAAS;AAAG;AAAe,YAAY;AACvC,WAASA,SAAT,CAAmBM,MAAnB,EAA2B;AACvBR,IAAAA,IAAI,CAACS,MAAL,CAAYN,SAAZ;AACA,SAAKK,MAAL,GAAcA,MAAd;AACA,SAAKE,gBAAL;AACH;AACD;AACJ;AACA;;AACI;AACJ;AACA;AACA;AACA;AACA;;;AACIR,EAAAA,SAAS,CAACS,SAAV,CAAoBC,aAApB,GAAoC,YAAY;AAC5C,WAAO,WAAP;AACH,GAFD;;AAGAV,EAAAA,SAAS,CAACS,SAAV,CAAoBD,gBAApB,GAAuC,YAAY;AAC/C,SAAKF,MAAL,CAAYK,EAAZ,CAAe,cAAf,EAA+B,KAAKC,YAApC,EAAkD,IAAlD;AACA,SAAKN,MAAL,CAAYK,EAAZ,CAAe,iBAAf,EAAkC,KAAKE,eAAvC,EAAwD,IAAxD;AACA,SAAKP,MAAL,CAAYQ,IAAZ,CAAiBH,EAAjB,CAAoB,wBAApB,EAA8C,KAAKI,mBAAnD,EAAwE,IAAxE;AACA,SAAKT,MAAL,CAAYK,EAAZ,CAAe,gBAAf,EAAiC,KAAKK,cAAtC,EAAsD,IAAtD;AACA,SAAKV,MAAL,CAAYK,EAAZ,CAAe,mBAAf,EAAoC,KAAKM,iBAAzC,EAA4D,IAA5D;AACA,SAAKX,MAAL,CAAYK,EAAZ,CAAe,gBAAf,EAAiC,KAAKO,cAAtC,EAAsD,IAAtD;AACH,GAPD;AAQA;AACJ;AACA;AACA;;;AACIlB,EAAAA,SAAS,CAACS,SAAV,CAAoBU,mBAApB,GAA0C,YAAY;AAClD,QAAI,KAAKb,MAAL,CAAYc,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKd,MAAL,CAAYe,GAAZ,CAAgB,cAAhB,EAAgC,KAAKT,YAArC;AACA,SAAKN,MAAL,CAAYe,GAAZ,CAAgB,iBAAhB,EAAmC,KAAKR,eAAxC;AACA,SAAKP,MAAL,CAAYe,GAAZ,CAAgB,gBAAhB,EAAkC,KAAKL,cAAvC;AACA,SAAKV,MAAL,CAAYe,GAAZ,CAAgB,mBAAhB,EAAqC,KAAKJ,iBAA1C;AACA,SAAKX,MAAL,CAAYe,GAAZ,CAAgB,gBAAhB,EAAkC,KAAKH,cAAvC;AACA,SAAKZ,MAAL,CAAYQ,IAAZ,CAAiBO,GAAjB,CAAqB,wBAArB,EAA+C,KAAKN,mBAApD;AACH,GAVD;;AAWAf,EAAAA,SAAS,CAACS,SAAV,CAAoBM,mBAApB,GAA0C,UAAUO,IAAV,EAAgB;AACtD,QAAIC,OAAO,GAAG,SAAd;AACAD,IAAAA,IAAI,CAACC,OAAD,CAAJ,GAAgB,KAAhB;AACH,GAHD;;AAIAvB,EAAAA,SAAS,CAACS,SAAV,CAAoBG,YAApB,GAAmC,YAAY;AAC3C,QAAIY,SAAS,GAAG,KAAKlB,MAAL,CAAYmB,OAAZ,GAAsBC,MAAtB,CAA6B,UAAUC,CAAV,EAAa;AACtD,aAAO,CAACA,CAAC,CAACC,SAAF,CAAYC,QAAZ,CAAqB,aAArB,CAAR;AACH,KAFe,CAAhB;;AAGA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,SAAS,CAACO,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,UAAIE,QAAQ,GAAGR,SAAS,CAACM,CAAD,CAAT,CAAaG,sBAAb,CAAoC,qBAApC,CAAf;AACA,UAAIC,UAAU,GAAG,KAAK5B,MAAL,CAAYQ,IAAZ,CAAiBqB,mBAAjB,CAAqCX,SAAS,CAACM,CAAD,CAAT,CAAaM,YAAb,CAA0B,UAA1B,CAArC,CAAjB;AACA,UAAIC,UAAU,GAAGtC,SAAS,CAAC,YAAD,EAAe,KAAKO,MAAL,CAAYQ,IAAZ,CAAiBwB,qBAAjB,GAAyCR,CAAzC,CAAf,CAA1B;;AACA,UAAI5B,iBAAiB,CAACmC,UAAD,CAAjB,IAAiC,CAACnC,iBAAiB,CAACmC,UAAD,CAAlB,IACjCjC,eAAe,CAAC,KAAKE,MAAN,EAAc4B,UAAU,CAACK,IAAzB,EAA+B,KAAKjC,MAAL,CAAYQ,IAAZ,CAAiBwB,qBAAjB,EAA/B,CADnB,EAC6F;AACzF,aAAKhC,MAAL,CAAYQ,IAAZ,CAAiB0B,eAAjB,CAAiCC,MAAjC,CAAwCT,QAAQ,CAAC,CAAD,CAAhD;AACH;AACJ;AACJ,GAbD;;AAcAhC,EAAAA,SAAS,CAACS,SAAV,CAAoBO,cAApB,GAAqC,UAAUM,IAAV,EAAgB;AACjD,QAAIoB,gBAAgB,GAAGpB,IAAI,CAACqB,GAAL,CAASV,sBAAT,CAAgC,qBAAhC,CAAvB;;AACA,QAAI,CAAC/B,iBAAiB,CAACwC,gBAAgB,CAAC,CAAD,CAAjB,CAAtB,EAA6C;AACzC,WAAKpC,MAAL,CAAYQ,IAAZ,CAAiB0B,eAAjB,CAAiCC,MAAjC,CAAwCC,gBAAgB,CAAC,CAAD,CAAxD;AACH;AACJ,GALD;;AAMA1C,EAAAA,SAAS,CAACS,SAAV,CAAoBQ,iBAApB,GAAwC,UAAUK,IAAV,EAAgB;AACpD,QAAIjB,YAAY,CAAC,KAAKC,MAAN,CAAhB,EAA+B;AAC3B;AACH;;AACD,SAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACsB,UAAL,CAAgBb,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC7CR,MAAAA,IAAI,CAACsB,UAAL,CAAgBd,CAAhB,EAAmBe,KAAnB,CAAyBC,OAAzB,GAAmCxB,IAAI,CAACyB,MAAxC;AACH;AACJ,GAPD;;AAQA/C,EAAAA,SAAS,CAACS,SAAV,CAAoBI,eAApB,GAAsC,UAAUS,IAAV,EAAgB;AAClD,QAAIiB,IAAI,GAAGjB,IAAI,CAACiB,IAAhB;AACA,QAAII,GAAG,GAAGrB,IAAI,CAAC0B,aAAL,CAAmBC,aAAnB,CAAiCC,eAA3C;AACA,QAAIC,KAAK,GAAG,CAACjD,iBAAiB,CAACqC,IAAI,CAACF,UAAN,CAAlB,GAAsCE,IAAI,CAACF,UAAL,CAAgBc,KAAtD,GAA8DZ,IAAI,CAACY,KAA/E;AACA,QAAIC,WAAW,GAAG,mBAAmBD,KAAnB,GAA2B,OAA3B,GAAqCZ,IAAI,CAACc,KAA5D;AACA,QAAIC,SAAS,GAAGX,GAAG,CAACY,aAAJ,CAAkB,MAAMH,WAAxB,EAAqCxB,SAArD;AACA,QAAI4B,QAAQ,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcJ,SAAd,EAAyB5B,MAAzB,CAAgC,UAAUiC,SAAV,EAAqB;AAAE,aAAQA,SAAS,KAAKP,WAAtB;AAAqC,KAA5F,CAAf;AACA,QAAIQ,KAAK,GAAGJ,QAAQ,CAAC,CAAD,CAAR,CAAYzB,MAAxB;AACA,QAAI8B,UAAU,GAAGL,QAAQ,CAACM,QAAT,GAAoBL,KAApB,CAA0B,CAA1B,EAA6BG,KAA7B,CAAjB;AACA,QAAIG,WAAW,GAAG,iBAAiBF,UAAnC;AACA1D,IAAAA,QAAQ,CAAC,CAACmB,IAAI,CAAC0B,aAAL,CAAmBC,aAApB,CAAD,EAAqCc,WAArC,CAAR;AACH,GAXD;;AAYA/D,EAAAA,SAAS,CAACS,SAAV,CAAoBS,cAApB,GAAqC,UAAUI,IAAV,EAAgB;AACjD,QAAIA,IAAI,CAAC0C,WAAL,KAAqB,WAArB,IAAoC1C,IAAI,CAAC0C,WAAL,KAAqB,KAA7D,EAAoE;AAChE,UAAIC,KAAK,GAAI3C,IAAI,CAACqB,GAAL,CAASuB,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4C9B,YAA5C,CAAyD,SAAzD,CAAb;AACA,UAAI+B,KAAK,GAAGC,QAAQ,CAACH,KAAD,EAAQ,EAAR,CAAR,GAAsB,CAAlC;AACA,UAAII,UAAU,GAAGF,KAAK,CAACL,QAAN,EAAjB;AACAxC,MAAAA,IAAI,CAACqB,GAAL,CAASuB,gBAAT,CAA0B,aAA1B,EAAyC,CAAzC,EAA4CI,YAA5C,CAAyD,SAAzD,EAAoED,UAApE;AACH;;AACD,QAAIE,YAAY,GAAG,KAAKjE,MAAL,CAAYQ,IAAZ,CAAiB0D,aAAjB,CAA+B/C,OAA/B,EAAnB;;AACA,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,YAAY,CAACxC,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1CyC,MAAAA,YAAY,CAACzC,CAAD,CAAZ,CAAgB2C,KAAhB,CAAsB,CAAtB,EAAyBlD,OAAzB,GAAmC,KAAnC;AACH;;AACD,QAAImD,WAAW,GAAG3E,SAAS,CAAC,aAAD,EAAgB,KAAKO,MAAL,CAAYQ,IAA5B,CAA3B;AACA,QAAI6D,MAAM,GAAG,eAAb;AACAD,IAAAA,WAAW,CAACC,MAAD,CAAX,CAAoB,IAApB,EAA0B;AAAEC,MAAAA,IAAI,EAAE,KAAKtE,MAAL,CAAYQ,IAAZ,CAAiB0D,aAAjB,CAA+B/C,OAA/B;AAAR,KAA1B;AACH,GAdD;AAeA;AACJ;AACA;AACA;AACA;AACA;;;AACIzB,EAAAA,SAAS,CAACS,SAAV,CAAoBoE,OAApB,GAA8B,YAAY;AACtC,SAAK1D,mBAAL;AACH,GAFD;;AAGA,SAAOnB,SAAP;AACH,CA9G8B,EAA/B;;AA+GA,SAASA,SAAT","sourcesContent":["import { Grid, getObject } from '@syncfusion/ej2-grids';\nimport { DetailRow as detailrow } from '@syncfusion/ej2-grids';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { getExpandStatus, isRemoteData } from '../utils';\n/**\n * TreeGrid Detail Row module\n *\n * @hidden\n */\nvar DetailRow = /** @class */ (function () {\n    function DetailRow(parent) {\n        Grid.Inject(detailrow);\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @private\n     * @returns {string} Returns DetailRow module name\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    DetailRow.prototype.addEventListener = function () {\n        this.parent.on('dataBoundArg', this.dataBoundArg, this);\n        this.parent.on('detaildataBound', this.detaildataBound, this);\n        this.parent.grid.on('detail-indentcell-info', this.setIndentVisibility, this);\n        this.parent.on('childRowExpand', this.childRowExpand, this);\n        this.parent.on('rowExpandCollapse', this.rowExpandCollapse, this);\n        this.parent.on('actioncomplete', this.actioncomplete, this);\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    DetailRow.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('dataBoundArg', this.dataBoundArg);\n        this.parent.off('detaildataBound', this.detaildataBound);\n        this.parent.off('childRowExpand', this.childRowExpand);\n        this.parent.off('rowExpandCollapse', this.rowExpandCollapse);\n        this.parent.off('actioncomplete', this.actioncomplete);\n        this.parent.grid.off('detail-indentcell-info', this.setIndentVisibility);\n    };\n    DetailRow.prototype.setIndentVisibility = function (args) {\n        var visible = 'visible';\n        args[visible] = false;\n    };\n    DetailRow.prototype.dataBoundArg = function () {\n        var detailele = this.parent.getRows().filter(function (e) {\n            return !e.classList.contains('e-detailrow');\n        });\n        for (var i = 0; i < detailele.length; i++) {\n            var elements = detailele[i].getElementsByClassName('e-detailrowcollapse');\n            var detailData = this.parent.grid.getRowObjectFromUID(detailele[i].getAttribute('data-Uid'));\n            var parentItem = getObject('parentItem', this.parent.grid.getCurrentViewRecords()[i]);\n            if (isNullOrUndefined(parentItem) || !isNullOrUndefined(parentItem) &&\n                getExpandStatus(this.parent, detailData.data, this.parent.grid.getCurrentViewRecords())) {\n                this.parent.grid.detailRowModule.expand(elements[0]);\n            }\n        }\n    };\n    DetailRow.prototype.childRowExpand = function (args) {\n        var detailRowElement = args.row.getElementsByClassName('e-detailrowcollapse');\n        if (!isNullOrUndefined(detailRowElement[0])) {\n            this.parent.grid.detailRowModule.expand(detailRowElement[0]);\n        }\n    };\n    DetailRow.prototype.rowExpandCollapse = function (args) {\n        if (isRemoteData(this.parent)) {\n            return;\n        }\n        for (var i = 0; i < args.detailrows.length; i++) {\n            args.detailrows[i].style.display = args.action;\n        }\n    };\n    DetailRow.prototype.detaildataBound = function (args) {\n        var data = args.data;\n        var row = args.detailElement.parentElement.previousSibling;\n        var index = !isNullOrUndefined(data.parentItem) ? data.parentItem.index : data.index;\n        var expandClass = 'e-gridrowindex' + index + 'level' + data.level;\n        var classlist = row.querySelector('.' + expandClass).classList;\n        var gridClas = [].slice.call(classlist).filter(function (gridclass) { return (gridclass === expandClass); });\n        var newNo = gridClas[0].length;\n        var slicedclas = gridClas.toString().slice(6, newNo);\n        var detailClass = 'e-griddetail' + slicedclas;\n        addClass([args.detailElement.parentElement], detailClass);\n    };\n    DetailRow.prototype.actioncomplete = function (args) {\n        if (args.requestType === 'beginEdit' || args.requestType === 'add') {\n            var spann = (args.row.querySelectorAll('.e-editcell')[0].getAttribute('colSpan'));\n            var colum = parseInt(spann, 10) - 1;\n            var updtdcolum = colum.toString();\n            args.row.querySelectorAll('.e-editcell')[0].setAttribute('colSpan', updtdcolum);\n        }\n        var focusElement = this.parent.grid.contentModule.getRows();\n        for (var i = 0; i < focusElement.length; i++) {\n            focusElement[i].cells[0].visible = false;\n        }\n        var focusModule = getObject('focusModule', this.parent.grid);\n        var matrix = 'refreshMatrix';\n        focusModule[matrix](true)({ rows: this.parent.grid.contentModule.getRows() });\n    };\n    /**\n     * Destroys the DetailModule.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    DetailRow.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n"]},"metadata":{},"sourceType":"module"}